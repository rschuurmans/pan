!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.io=e():t.io=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t,e){"object"===("undefined"==typeof t?"undefined":i(t))&&(e=t,t=void 0),e=e||{};var r,n=s(t),a=n.source,p=n.id,f=n.path,l=h[p]&&f in h[p].nsps,d=e.forceNew||e["force new connection"]||!1===e.multiplex||l;return d?(u("ignoring socket cache for %s",a),r=c(a,e)):(h[p]||(u("new io instance for %s",a),h[p]=c(a,e)),r=h[p]),n.query&&!e.query?e.query=n.query:e&&"object"===i(e.query)&&(e.query=o(e.query)),r.socket(n.path,e)}function o(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=r(1),a=r(7),c=r(17),u=r(3)("socket.io-client");t.exports=e=n;var h=e.managers={};e.protocol=a.protocol,e.connect=n,e.Manager=r(17),e.Socket=r(44)},function(t,e,r){(function(e){"use strict";function n(t,r){var n=t;r=r||e.location,null==t&&(t=r.protocol+"//"+r.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?r.protocol+t:r.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t="undefined"!=typeof r?r.protocol+"//"+t:"https://"+t),i("parse %s",t),n=o(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var s=n.host.indexOf(":")!==-1,a=s?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}var o=r(2),i=r(3)("socket.io-client:url");t.exports=n}).call(e,function(){return this}())},function(t,e){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,o=t.indexOf("["),i=t.indexOf("]");o!=-1&&i!=-1&&(t=t.substring(0,o)+t.substring(o,i).replace(/:/g,";")+t.substring(i,t.length));for(var s=r.exec(t||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return o!=-1&&i!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,r){(function(n){function o(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var o=0,i=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))}),t.splice(i,0,n),t}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function c(){try{return e.storage.debug}catch(t){}if("undefined"!=typeof n&&"env"in n)return n.env.DEBUG}function u(){try{return window.localStorage}catch(t){}}e=t.exports=r(5),e.log=s,e.formatArgs=i,e.save=a,e.load=c,e.useColors=o,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(c())}).call(e,r(4))},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function i(t){if(p===clearTimeout)return clearTimeout(t);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function s(){y&&l&&(y=!1,l.length?d=l.concat(d):g=-1,d.length&&a())}function a(){if(!y){var t=o(s);y=!0;for(var e=d.length;e;){for(l=d,d=[];++g<e;)l&&l[g].run();g=-1,e=d.length}l=null,y=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var h,p,f=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(t){h=r}try{p="function"==typeof clearTimeout?clearTimeout:n}catch(t){p=n}}();var l,d=[],y=!1,g=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new c(t,e)),1!==d.length||y||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,r){function n(){return e.colors[h++%e.colors.length]}function o(t){function r(){}function o(){var t=o,r=+new Date,i=r-(u||r);t.diff=i,t.prev=u,t.curr=r,u=r,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=n());for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var c=0;s[0]=s[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;c++;var o=e.formatters[n];if("function"==typeof o){var i=s[c];r=o.call(t,i),s.splice(c,1),c--}return r}),s=e.formatArgs.apply(t,s);var h=o.log||e.log||console.log.bind(console);h.apply(t,s)}r.enabled=!1,o.enabled=!0;var i=e.enabled(t)?o:r;return i.namespace=t,i}function i(t){e.save(t);for(var r=(t||"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&(t=r[o].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o.debug=o,e.coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=r(6),e.names=[],e.skips=[],e.formatters={};var u,h=0},function(t,e){function r(t){if(t=String(t),!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*h;case"days":case"day":case"d":return r*u;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*a;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function n(t){return t>=u?Math.round(t/u)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return i(t,u,"day")||i(t,c,"hour")||i(t,a,"minute")||i(t,s,"second")||t+" ms"}function i(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var s=1e3,a=60*s,c=60*a,u=24*c,h=365.25*u;t.exports=function(t,e){e=e||{};var i=typeof t;if("string"===i&&t.length>0)return r(t);if("number"===i&&isNaN(t)===!1)return e.long?o(t):n(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,r){function n(){}function o(t){var r="",n=!1;return r+=t.type,e.BINARY_EVENT!=t.type&&e.BINARY_ACK!=t.type||(r+=t.attachments,r+="-"),t.nsp&&"/"!=t.nsp&&(n=!0,r+=t.nsp),null!=t.id&&(n&&(r+=",",n=!1),r+=t.id),null!=t.data&&(n&&(r+=","),r+=f.stringify(t.data)),p("encoded %j as %s",t,r),r}function i(t,e){function r(t){var r=d.deconstructPacket(t),n=o(r.packet),i=r.buffers;i.unshift(n),e(i)}d.removeBlobs(t,r)}function s(){this.reconstructor=null}function a(t){var r={},n=0;if(r.type=Number(t.charAt(0)),null==e.types[r.type])return h();if(e.BINARY_EVENT==r.type||e.BINARY_ACK==r.type){for(var o="";"-"!=t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||"-"!=t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"==t.charAt(n+1))for(r.nsp="";++n;){var i=t.charAt(n);if(","==i)break;if(r.nsp+=i,n==t.length)break}else r.nsp="/";var s=t.charAt(n+1);if(""!==s&&Number(s)==s){for(r.id="";++n;){var i=t.charAt(n);if(null==i||Number(i)!=i){--n;break}if(r.id+=t.charAt(n),n==t.length)break}r.id=Number(r.id)}return t.charAt(++n)&&(r=c(r,t.substr(n))),p("decoded %s as %j",t,r),r}function c(t,e){try{t.data=f.parse(e)}catch(t){return h()}return t}function u(t){this.reconPack=t,this.buffers=[]}function h(t){return{type:e.ERROR,data:"parser error"}}var p=r(8)("socket.io-parser"),f=r(11),l=r(13),d=r(14),y=r(16);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=n,e.Decoder=s,n.prototype.encode=function(t,r){if(p("encoding packet %j",t),e.BINARY_EVENT==t.type||e.BINARY_ACK==t.type)i(t,r);else{var n=o(t);r([n])}},l(s.prototype),s.prototype.add=function(t){var r;if("string"==typeof t)r=a(t),e.BINARY_EVENT==r.type||e.BINARY_ACK==r.type?(this.reconstructor=new u(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!y(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,this.emit("decoded",r))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var t=arguments,r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var o=0,i=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))}),t.splice(i,0,n),t}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function a(){var t;try{t=e.storage.debug}catch(t){}return t}function c(){try{return window.localStorage}catch(t){}}e=t.exports=r(9),e.log=i,e.formatArgs=o,e.save=s,e.load=a,e.useColors=n,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t,e,r){function n(){return e.colors[h++%e.colors.length]}function o(t){function r(){}function o(){var t=o,r=+new Date,i=r-(u||r);t.diff=i,t.prev=u,t.curr=r,u=r,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=n());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;a++;var o=e.formatters[n];if("function"==typeof o){var i=s[a];r=o.call(t,i),s.splice(a,1),a--}return r}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var c=o.log||e.log||console.log.bind(console);c.apply(t,s)}r.enabled=!1,o.enabled=!0;var i=e.enabled(t)?o:r;return i.namespace=t,i}function i(t){e.save(t);for(var r=(t||"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&(t=r[o].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o,e.coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=r(10),e.names=[],e.skips=[],e.formatters={};var u,h=0},function(t,e){function r(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*h;case"days":case"day":case"d":return r*u;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*a;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function n(t){return t>=u?Math.round(t/u)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return i(t,u,"day")||i(t,c,"hour")||i(t,a,"minute")||i(t,s,"second")||t+" ms"}function i(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var s=1e3,a=60*s,c=60*a,u=24*c,h=365.25*u;t.exports=function(t,e){return e=e||{},"string"==typeof t?r(t):e.long?o(t):n(t)}},function(t,e,r){(function(t,r){var n=!1;(function(){function o(t,e){function r(t){if(r[t]!==g)return r[t];var o;if("bug-string-char-index"==t)o="a"!="a"[0];else if("json"==t)o=r("json-stringify")&&r("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var c=e.stringify,h="function"==typeof c&&b;if(h){(s=function(){return 1}).toJSON=s;try{h="0"===c(0)&&"0"===c(new n)&&'""'==c(new i)&&c(v)===g&&c(g)===g&&c()===g&&"1"===c(s)&&"[1]"==c([s])&&"[null]"==c([g])&&"null"==c(null)&&"[null,null,null]"==c([g,v,null])&&c({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===c(null,s)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new u(-1))}catch(t){h=!1}}o=h}if("json-parse"==t){var p=e.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){s=p(a);var f=5==s.a.length&&1===s.a[0];if(f){try{f=!p('"\t"')}catch(t){}if(f)try{f=1!==p("01")}catch(t){}if(f)try{f=1!==p("1.")}catch(t){}}}}catch(t){f=!1}o=f}}return r[t]=!!o}t||(t=c.Object()),e||(e=c.Object());var n=t.Number||c.Number,i=t.String||c.String,a=t.Object||c.Object,u=t.Date||c.Date,h=t.SyntaxError||c.SyntaxError,p=t.TypeError||c.TypeError,f=t.Math||c.Math,l=t.JSON||c.JSON;"object"==typeof l&&l&&(e.stringify=l.stringify,e.parse=l.parse);var d,y,g,m=a.prototype,v=m.toString,b=new u(-0xc782b5b800cec);try{b=b.getUTCFullYear()==-109252&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(t){}if(!r("json")){var w="[object Function]",k="[object Date]",x="[object Number]",A="[object String]",C="[object Array]",B="[object Boolean]",S=r("bug-string-char-index");if(!b)var T=f.floor,E=[0,31,59,90,120,151,181,212,243,273,304,334],_=function(t,e){return E[e]+365*(t-1970)+T((t-1969+(e=+(e>1)))/4)-T((t-1901+e)/100)+T((t-1601+e)/400)};if((d=m.hasOwnProperty)||(d=function(t){var e,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=v?d=function(t){var e=this.__proto__,r=t in(this.__proto__=null,this);return this.__proto__=e,r}:(e=r.constructor,d=function(t){var r=(this.constructor||e).prototype;return t in this&&!(t in r&&this[t]===r[t])}),r=null,d.call(this,t)}),y=function(t,e){var r,n,o,i=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,n=new r;for(o in n)d.call(n,o)&&i++;return r=n=null,i?y=2==i?function(t,e){var r,n={},o=v.call(t)==w;for(r in t)o&&"prototype"==r||d.call(n,r)||!(n[r]=1)||!d.call(t,r)||e(r)}:function(t,e){var r,n,o=v.call(t)==w;for(r in t)o&&"prototype"==r||!d.call(t,r)||(n="constructor"===r)||e(r);(n||d.call(t,r="constructor"))&&e(r)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],y=function(t,e){var r,o,i=v.call(t)==w,a=!i&&"function"!=typeof t.constructor&&s[typeof t.hasOwnProperty]&&t.hasOwnProperty||d;for(r in t)i&&"prototype"==r||!a.call(t,r)||e(r);for(o=n.length;r=n[--o];a.call(t,r)&&e(r));}),y(t,e)},!r("json-stringify")){var N={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},j="000000",O=function(t,e){return(j+(e||0)).slice(-t)},P="\\u00",R=function(t){for(var e='"',r=0,n=t.length,o=!S||n>10,i=o&&(S?t.split(""):t);r<n;r++){var s=t.charCodeAt(r);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=N[s];break;default:if(s<32){e+=P+O(2,s.toString(16));break}e+=o?i[r]:t.charAt(r)}}return e+'"'},D=function(t,e,r,n,o,i,s){var a,c,u,h,f,l,m,b,w,S,E,N,j,P,q,U;try{a=e[t]}catch(t){}if("object"==typeof a&&a)if(c=v.call(a),c!=k||d.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=x&&c!=A&&c!=C||d.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&a<1/0){if(_){for(f=T(a/864e5),u=T(f/365.2425)+1970-1;_(u+1,0)<=f;u++);for(h=T((f-_(u,0))/30.42);_(u,h+1)<=f;h++);f=1+f-_(u,h),l=(a%864e5+864e5)%864e5,m=T(l/36e5)%24,b=T(l/6e4)%60,w=T(l/1e3)%60,S=l%1e3}else u=a.getUTCFullYear(),h=a.getUTCMonth(),f=a.getUTCDate(),m=a.getUTCHours(),b=a.getUTCMinutes(),w=a.getUTCSeconds(),S=a.getUTCMilliseconds();a=(u<=0||u>=1e4?(u<0?"-":"+")+O(6,u<0?-u:u):O(4,u))+"-"+O(2,h+1)+"-"+O(2,f)+"T"+O(2,m)+":"+O(2,b)+":"+O(2,w)+"."+O(3,S)+"Z"}else a=null;if(r&&(a=r.call(e,t,a)),null===a)return"null";if(c=v.call(a),c==B)return""+a;if(c==x)return a>-1/0&&a<1/0?""+a:"null";if(c==A)return R(""+a);if("object"==typeof a){for(P=s.length;P--;)if(s[P]===a)throw p();if(s.push(a),E=[],q=i,i+=o,c==C){for(j=0,P=a.length;j<P;j++)N=D(j,a,r,n,o,i,s),E.push(N===g?"null":N);U=E.length?o?"[\n"+i+E.join(",\n"+i)+"\n"+q+"]":"["+E.join(",")+"]":"[]"}else y(n||a,function(t){var e=D(t,a,r,n,o,i,s);e!==g&&E.push(R(t)+":"+(o?" ":"")+e)}),U=E.length?o?"{\n"+i+E.join(",\n"+i)+"\n"+q+"}":"{"+E.join(",")+"}":"{}";return s.pop(),U}};e.stringify=function(t,e,r){var n,o,i,a;if(s[typeof e]&&e)if((a=v.call(e))==w)o=e;else if(a==C){i={};for(var c,u=0,h=e.length;u<h;c=e[u++],a=v.call(c),(a==A||a==x)&&(i[c]=1));}if(r)if((a=v.call(r))==x){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else a==A&&(n=r.length<=10?r:r.slice(0,10));return D("",(c={},c[""]=t,c),o,i,n,"",[])}}if(!r("json-parse")){var q,U,M=i.fromCharCode,L={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},I=function(){throw q=U=null,h()},H=function(){for(var t,e,r,n,o,i=U,s=i.length;q<s;)switch(o=i.charCodeAt(q)){case 9:case 10:case 13:case 32:q++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=S?i.charAt(q):i[q],q++,t;case 34:for(t="@",q++;q<s;)if(o=i.charCodeAt(q),o<32)I();else if(92==o)switch(o=i.charCodeAt(++q)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=L[o],q++;break;case 117:for(e=++q,r=q+4;q<r;q++)o=i.charCodeAt(q),o>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||I();t+=M("0x"+i.slice(e,q));break;default:I()}else{if(34==o)break;for(o=i.charCodeAt(q),e=q;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++q);t+=i.slice(e,q)}if(34==i.charCodeAt(q))return q++,t;I();default:if(e=q,45==o&&(n=!0,o=i.charCodeAt(++q)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(q+1),o>=48&&o<=57)&&I(),n=!1;q<s&&(o=i.charCodeAt(q),o>=48&&o<=57);q++);if(46==i.charCodeAt(q)){for(r=++q;r<s&&(o=i.charCodeAt(r),o>=48&&o<=57);r++);r==q&&I(),q=r}if(o=i.charCodeAt(q),101==o||69==o){for(o=i.charCodeAt(++q),43!=o&&45!=o||q++,r=q;r<s&&(o=i.charCodeAt(r),o>=48&&o<=57);r++);r==q&&I(),q=r}return+i.slice(e,q)}if(n&&I(),"true"==i.slice(q,q+4))return q+=4,!0;if("false"==i.slice(q,q+5))return q+=5,!1;if("null"==i.slice(q,q+4))return q+=4,null;I()}return"$"},z=function(t){var e,r;if("$"==t&&I(),"string"==typeof t){if("@"==(S?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=H(),"]"!=t;r||(r=!0))r&&(","==t?(t=H(),"]"==t&&I()):I()),","==t&&I(),e.push(z(t));return e}if("{"==t){for(e={};t=H(),"}"!=t;r||(r=!0))r&&(","==t?(t=H(),"}"==t&&I()):I()),","!=t&&"string"==typeof t&&"@"==(S?t.charAt(0):t[0])&&":"==H()||I(),e[t.slice(1)]=z(H());return e}I()}return t},J=function(t,e,r){var n=X(t,e,r);n===g?delete t[e]:t[e]=n},X=function(t,e,r){var n,o=t[e];if("object"==typeof o&&o)if(v.call(o)==C)for(n=o.length;n--;)J(o,n,r);else y(o,function(t){J(o,t,r)});return r.call(t,e,o)};e.parse=function(t,e){var r,n;return q=0,U=""+t,r=z(H()),"$"!=H()&&I(),q=U=null,e&&v.call(e)==w?X((n={},n[""]=r,n),"",e):r}}}return e.runInContext=o,e}var i="function"==typeof n&&n.amd,s={function:!0,object:!0},a=s[typeof e]&&e&&!e.nodeType&&e,c=s[typeof window]&&window||this,u=a&&s[typeof t]&&t&&!t.nodeType&&"object"==typeof r&&r;if(!u||u.global!==u&&u.window!==u&&u.self!==u||(c=u),a&&!i)o(c,a);else{var h=c.JSON,p=c.JSON3,f=!1,l=o(c,c.JSON3={noConflict:function(){return f||(f=!0,c.JSON=h,c.JSON3=p,h=p=null),l}});c.JSON={parse:l.parse,stringify:l.stringify}}i&&n(function(){return l})}).call(this)}).call(e,r(12)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){function r(t){if(t)return n(t)}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,r){(function(t){var n=r(15),o=r(16);e.deconstructPacket=function(t){function e(t){if(!t)return t;if(o(t)){var i={_placeholder:!0,num:r.length};return r.push(t),i}if(n(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a]);return s}if("object"==typeof t&&!(t instanceof Date)){var s={};for(var c in t)s[c]=e(t[c]);return s}return t}var r=[],i=t.data,s=t;return s.data=e(i),s.attachments=r.length,{packet:s,buffers:r}},e.reconstructPacket=function(t,e){function r(t){if(t&&t._placeholder){var o=e[t.num];return o}if(n(t)){for(var i=0;i<t.length;i++)t[i]=r(t[i]);return t}if(t&&"object"==typeof t){for(var s in t)t[s]=r(t[s]);return t}return t}return t.data=r(t.data),t.attachments=void 0,t},e.removeBlobs=function(e,r){function i(e,c,u){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var h=new FileReader;h.onload=function(){u?u[c]=this.result:a=this.result,--s||r(a)},h.readAsArrayBuffer(e)}else if(n(e))for(var p=0;p<e.length;p++)i(e[p],p,e);else if(e&&"object"==typeof e&&!o(e))for(var f in e)i(e[f],f,e)}var s=0,a=e;i(a),s||r(a)}}).call(e,function(){return this}())},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){(function(e){function r(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=r}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t,e){return this instanceof n?(t&&"object"===("undefined"==typeof t?"undefined":o(t))&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new c.Encoder,this.decoder=new c.Decoder,this.autoConnect=e.autoConnect!==!1,void(this.autoConnect&&this.open())):new n(t,e)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(18),s=r(44),a=r(35),c=r(7),u=r(46),h=r(47),p=r(3)("socket.io-client:manager"),f=r(42),l=r(48),d=Object.prototype.hasOwnProperty;t.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},n.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)},a(n.prototype),n.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},n.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},n.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(t,e){if(p("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;p("opening %s",this.uri),this.engine=i(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=u(r,"open",function(){n.onopen(),t&&t()}),s=u(r,"error",function(e){if(p("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var r=new Error("Connection error");r.data=e,t(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;p("connect attempt will timeout after %d",a);var c=setTimeout(function(){p("connect attempt timed out after %d",a),o.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},n.prototype.onopen=function(){p("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(u(t,"data",h(this,"ondata"))),this.subs.push(u(t,"ping",h(this,"onping"))),this.subs.push(u(t,"pong",h(this,"onpong"))),this.subs.push(u(t,"error",h(this,"onerror"))),this.subs.push(u(t,"close",h(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",h(this,"ondecoded")))},n.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},n.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},n.prototype.ondata=function(t){this.decoder.add(t)},n.prototype.ondecoded=function(t){this.emit("packet",t)},n.prototype.onerror=function(t){p("error",t),this.emitAll("error",t)},n.prototype.socket=function(t,e){function r(){~f(o.connecting,n)||o.connecting.push(n)}var n=this.nsps[t];if(!n){n=new s(this,t,e),this.nsps[t]=n;var o=this;n.on("connecting",r),n.on("connect",function(){n.id=o.engine.id}),this.autoConnect&&r()}return n},n.prototype.destroy=function(t){var e=f(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},n.prototype.packet=function(t){p("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(r){for(var n=0;n<r.length;n++)e.engine.write(r[n],t.options);e.encoding=!1,e.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},n.prototype.cleanup=function(){p("cleanup");for(var t=this.subs.length,e=0;e<t;e++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){p("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(t){p("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)p("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();p("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var r=setTimeout(function(){t.skipReconnect||(p("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(p("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(p("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(r)}})}},n.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,r){t.exports=r(19)},function(t,e,r){t.exports=r(20),t.exports.parser=r(27)},function(t,e,r){(function(e){function n(t,r){if(!(this instanceof n))return new n(t,r);r=r||{},t&&"object"==typeof t&&(r=t,t=null),t?(t=h(t),r.hostname=t.host,r.secure="https"===t.protocol||"wss"===t.protocol,r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=h(r.host).host),
this.secure=null!=r.secure?r.secure:e.location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.agent=r.agent||!1,this.hostname=r.hostname||(e.location?location.hostname:"localhost"),this.port=r.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=r.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==r.upgrade,this.path=(r.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!r.forceJSONP,this.jsonp=!1!==r.jsonp,this.forceBase64=!!r.forceBase64,this.enablesXDR=!!r.enablesXDR,this.timestampParam=r.timestampParam||"t",this.timestampRequests=r.timestampRequests,this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=r.policyPort||843,this.rememberUpgrade=r.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=r.onlyBinaryUpgrades,this.perMessageDeflate=!1!==r.perMessageDeflate&&(r.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=r.pfx||null,this.key=r.key||null,this.passphrase=r.passphrase||null,this.cert=r.cert||null,this.ca=r.ca||null,this.ciphers=r.ciphers||null,this.rejectUnauthorized=void 0===r.rejectUnauthorized?null:r.rejectUnauthorized,this.forceNode=!!r.forceNode;var o="object"==typeof e&&e;o.global===o&&(r.extraHeaders&&Object.keys(r.extraHeaders).length>0&&(this.extraHeaders=r.extraHeaders),r.localAddress&&(this.localAddress=r.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var i=r(21),s=r(35),a=r(3)("engine.io-client:socket"),c=r(42),u=r(27),h=r(2),p=r(43),f=r(36);t.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=u.protocol,n.Socket=n,n.Transport=r(26),n.transports=r(21),n.parser=r(27),n.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=o(this.query);e.EIO=u.protocol,e.transport=t,this.id&&(e.sid=this.id);var r=new i[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress});return r},n.prototype.open=function(){var t;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},n.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},n.prototype.probe=function(t){function e(){if(f.onlyBinaryUpgrades){var e=!this.supportsBinary&&f.transport.supportsBinary;p=p||e}p||(a('probe transport "%s" opened',t),h.send([{type:"ping",data:"probe"}]),h.once("packet",function(e){if(!p)if("pong"===e.type&&"probe"===e.data){if(a('probe transport "%s" pong',t),f.upgrading=!0,f.emit("upgrading",h),!h)return;n.priorWebsocketSuccess="websocket"===h.name,a('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){p||"closed"!==f.readyState&&(a("changing transport and sending upgrade packet"),u(),f.setTransport(h),h.send([{type:"upgrade"}]),f.emit("upgrade",h),h=null,f.upgrading=!1,f.flush())})}else{a('probe transport "%s" failed',t);var r=new Error("probe error");r.transport=h.name,f.emit("upgradeError",r)}}))}function r(){p||(p=!0,u(),h.close(),h=null)}function o(e){var n=new Error("probe error: "+e);n.transport=h.name,r(),a('probe transport "%s" failed because of error: %s',t,e),f.emit("upgradeError",n)}function i(){o("transport closed")}function s(){o("socket closed")}function c(t){h&&t.name!==h.name&&(a('"%s" works - aborting "%s"',t.name,h.name),r())}function u(){h.removeListener("open",e),h.removeListener("error",o),h.removeListener("close",i),f.removeListener("close",s),f.removeListener("upgrading",c)}a('probing transport "%s"',t);var h=this.createTransport(t,{probe:1}),p=!1,f=this;n.priorWebsocketSuccess=!1,h.once("open",e),h.once("error",o),h.once("close",i),this.once("close",s),this.once("upgrading",c),h.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},n.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(p(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},n.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},n.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(t,e,r){return this.sendPacket("message",t,e,r),this},n.prototype.sendPacket=function(t,e,r,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){r=r||{},r.compress=!1!==r.compress;var o={type:t,data:e,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},n.prototype.close=function(){function t(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function e(){n.removeListener("upgrade",e),n.removeListener("upgradeError",e),t()}function r(){n.once("upgrade",e),n.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}return this},n.prototype.onError=function(t){a("socket error %j",t),n.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},n.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',t);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),r.writeBuffer=[],r.prevBufferLen=0}},n.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;r<n;r++)~c(this.transports,t[r])&&e.push(t[r]);return e}}).call(e,function(){return this}())},function(t,e,r){(function(t){function n(e){var r,n=!1,a=!1,c=!1!==e.jsonp;if(t.location){var u="https:"===location.protocol,h=location.port;h||(h=u?443:80),n=e.hostname!==location.hostname||h!==e.port,a=e.secure!==u}if(e.xdomain=n,e.xscheme=a,r=new o(e),"open"in r&&!e.forceJSONP)return new i(e);if(!c)throw new Error("JSONP disabled");return new s(e)}var o=r(22),i=r(24),s=r(39),a=r(40);e.polling=n,e.websocket=a}).call(e,function(){return this}())},function(t,e,r){(function(e){var n=r(23);t.exports=function(t){var r=t.xdomain,o=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!r||n))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(t){}if(!r)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(e,function(){return this}())},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,r){(function(e){function n(){}function o(t){if(c.call(this,t),this.requestTimeout=t.requestTimeout,e.location){var r="https:"===location.protocol,n=location.port;n||(n=r?443:80),this.xd=t.hostname!==e.location.hostname||n!==t.port,this.xs=t.secure!==r}else this.extraHeaders=t.extraHeaders}function i(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in i.requests)i.requests.hasOwnProperty(t)&&i.requests[t].abort()}var a=r(22),c=r(25),u=r(35),h=r(37),p=r(3)("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=i,h(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new i(t)},o.prototype.doWrite=function(t,e){var r="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:r}),o=this;n.on("success",e),n.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=n},o.prototype.doPoll=function(){p("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},u(i.prototype),i.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new a(t),n=this;try{p("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.extraHeaders){r.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.extraHeaders[o])}}catch(t){}if(this.supportsBinary&&(r.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?r.setRequestHeader("Content-type","application/octet-stream"):r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{r.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in r&&(r.withCredentials=!0),this.requestTimeout&&(r.timeout=this.requestTimeout),this.hasXDR()?(r.onload=function(){n.onLoad()},r.onerror=function(){n.onError(r.responseText)}):r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?n.onLoad():setTimeout(function(){n.onError(r.status)},0))},p("xhr data %s",this.data),r.send(this.data)}catch(t){return void setTimeout(function(){n.onError(t)},0)}e.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},i.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},i.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,t)try{this.xhr.abort()}catch(t){}e.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}if("application/octet-stream"===e)t=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){for(var r=new Uint8Array(this.xhr.response),n=[],o=0,i=r.length;o<i;o++)n.push(r[o]);t=String.fromCharCode.apply(null,n)}else t=this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return"undefined"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",s):e.addEventListener&&e.addEventListener("beforeunload",s,!1))}).call(e,function(){return this}())},function(t,e,r){function n(t){var e=t&&t.forceBase64;h&&!e||(this.supportsBinary=!1),o.call(this,t)}var o=r(26),i=r(36),s=r(27),a=r(37),c=r(38),u=r(3)("engine.io-client:polling");t.exports=n;var h=function(){var t=r(22),e=new t({xdomain:!1});return null!=e.responseType}();a(n,o),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(t){function e(){u("paused"),r.readyState="paused",t()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(u("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){u("pre-pause polling complete"),--n||e()})),this.writable||(u("we are currently writing - waiting to pause"),n++,this.once("drain",function(){u("pre-pause writing complete"),--n||e()}))}else e()},n.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(t){var e=this;u("polling got data %s",t);var r=function(t,r,n){return"opening"===e.readyState&&e.onOpen(),"close"===t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,r),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function t(){u("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))},n.prototype.write=function(t){var e=this;this.writable=!1;var r=function(){e.writable=!0,e.emit("drain")};s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,r)})},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",r="";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(r=":"+this.port),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t}},function(t,e,r){function n(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var o=r(27),i=r(35);t.exports=n,i(n.prototype),n.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},n.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},n.prototype.onPacket=function(t){this.emit("packet",t)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,r){(function(t){function n(t,r){var n="b"+e.packets[t.type]+t.data.data;return r(n)}function o(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=t.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=v[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}function i(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=new FileReader;return o.onload=function(){t.data=o.result,e.encodePacket(t,r,!0,n)},o.readAsArrayBuffer(t.data)}function s(t,r,n){if(!r)return e.encodeBase64Packet(t,n);if(m)return i(t,r,n);var o=new Uint8Array(1);o[0]=v[t.type];var s=new k([o.buffer,t.data]);return n(s)}function a(t){try{t=d.decode(t)}catch(t){return!1}return t}function c(t,e,r){for(var n=new Array(t.length),o=l(t.length,r),i=function(t,r,o){e(r,function(e,r){n[t]=r,o(e,n)})},s=0;s<t.length;s++)i(s,t[s],o)}var u,h=r(28),p=r(29),f=r(30),l=r(31),d=r(32);t&&t.ArrayBuffer&&(u=r(33));var y="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),g="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),m=y||g;e.protocol=3;var v=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=h(v),w={type:"error",data:"parser error"},k=r(34);e.encodePacket=function(e,r,i,a){"function"==typeof r&&(a=r,r=!1),"function"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,r,a);if(k&&c instanceof t.Blob)return s(e,r,a);if(c&&c.base64)return n(e,a);var u=v[e.type];return void 0!==e.data&&(u+=i?d.encode(String(e.data)):String(e.data)),a(""+u)},e.encodeBase64Packet=function(r,n){var o="b"+e.packets[r.type];if(k&&r.data instanceof t.Blob){var i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];n(o+t)},i.readAsDataURL(r.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(r.data))}catch(t){for(var a=new Uint8Array(r.data),c=new Array(a.length),u=0;u<a.length;u++)c[u]=a[u];s=String.fromCharCode.apply(null,c)}return o+=t.btoa(s),n(o)},e.decodePacket=function(t,r,n){if(void 0===t)return w;if("string"==typeof t){if("b"==t.charAt(0))return e.decodeBase64Packet(t.substr(1),r);if(n&&(t=a(t),t===!1))return w;var o=t.charAt(0);return Number(o)==o&&b[o]?t.length>1?{type:b[o],data:t.substring(1)}:{type:b[o]}:w}var i=new Uint8Array(t),o=i[0],s=f(t,1);return k&&"blob"===r&&(s=new k([s])),{type:b[o],data:s}},e.decodeBase64Packet=function(t,e){var r=b[t.charAt(0)];if(!u)return{type:r,data:{base64:!0,data:t.substr(1)}};var n=u.decode(t.substr(1));return"blob"===e&&k&&(n=new k([n])),{type:r,data:n}},e.encodePayload=function(t,r,n){function o(t){return t.length+":"+t}function i(t,n){e.encodePacket(t,!!s&&r,!0,function(t){n(null,o(t))})}"function"==typeof r&&(n=r,r=null);var s=p(t);return r&&s?k&&!m?e.encodePayloadAsBlob(t,n):e.encodePayloadAsArrayBuffer(t,n):t.length?void c(t,i,function(t,e){return n(e.join(""))}):n("0:")},e.decodePayload=function(t,r,n){if("string"!=typeof t)return e.decodePayloadAsBinary(t,r,n);"function"==typeof r&&(n=r,r=null);var o;if(""==t)return n(w,0,1);for(var i,s,a="",c=0,u=t.length;c<u;c++){var h=t.charAt(c);if(":"!=h)a+=h;else{if(""==a||a!=(i=Number(a)))return n(w,0,1);if(s=t.substr(c+1,i),a!=s.length)return n(w,0,1);if(s.length){if(o=e.decodePacket(s,r,!0),w.type==o.type&&w.data==o.data)return n(w,0,1);var p=n(o,c+i,u);if(!1===p)return}c+=i,a=""}}return""!=a?n(w,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){return r(null,t)})}return t.length?void c(t,n,function(t,e){var n=e.reduce(function(t,e){var r;return r="string"==typeof e?e.length:e.byteLength,t+r.toString().length+r+2},0),o=new Uint8Array(n),i=0;return e.forEach(function(t){var e="string"==typeof t,r=t;if(e){for(var n=new Uint8Array(t.length),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);r=n.buffer}e?o[i++]=0:o[i++]=1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var n=new Uint8Array(r),s=0;s<n.length;s++)o[i++]=n[s]}),r(o.buffer)}):r(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);t=n.buffer,e[0]=0}for(var i=t instanceof ArrayBuffer?t.byteLength:t.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,k){var c=new k([e.buffer,a.buffer,t]);r(null,c)}})}c(t,n,function(t,e){return r(new k(e))})},e.decodePayloadAsBinary=function(t,r,n){"function"==typeof r&&(n=r,r=null);for(var o=t,i=[],s=!1;o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],u="",h=1;255!=a[h];h++){if(u.length>310){s=!0;break}u+=a[h]}if(s)return n(w,0,1);o=f(o,2+u.length),u=parseInt(u);var p=f(o,0,u);if(c)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(t){var l=new Uint8Array(p);p="";for(var h=0;h<l.length;h++)p+=String.fromCharCode(l[h])}i.push(p),o=f(o,u)}var d=i.length;i.forEach(function(t,o){n(e.decodePacket(t,r,!0),o,d)})}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&e.push(n);return e}},function(t,e,r){(function(e){function n(t){function r(t){if(!t)return!1;if(e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||e.Blob&&t instanceof Blob||e.File&&t instanceof File)return!0;if(o(t)){for(var n=0;n<t.length;n++)if(r(t[n]))return!0}else if(t&&"object"==typeof t){t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON());for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&r(t[i]))return!0}return!1}return r(t)}var o=r(15);t.exports=n}).call(e,function(){return this}())},function(t,e){t.exports=function(t,e,r){var n=t.byteLength;if(e=e||0,r=r||n,t.slice)return t.slice(e,r);if(e<0&&(e+=n),r<0&&(r+=n),r>n&&(r=n),e>=n||e>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(r-e),s=e,a=0;s<r;s++,a++)i[a]=o[s];return i.buffer}},function(t,e){function r(t,e,r){function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=r):0!==o.count||i||e(null,n)}var i=!1;return r=r||n,o.count=t,0===t?e():o}function n(){}t.exports=r},function(t,e,r){var n;(function(t,o){!function(i){function s(t){for(var e,r,n=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function a(t){for(var e,r=t.length,n=-1,o="";++n<r;)e=t[n],e>65535&&(e-=65536,o+=b(e>>>10&1023|55296),e=56320|1023&e),o+=b(e);return o}function c(t,e){return b(t>>e&63|128)}function u(t){if(0==(4294967168&t))return b(t);var e="";return 0==(4294965248&t)?e=b(t>>6&31|192):0==(4294901760&t)?(e=b(t>>12&15|224),e+=c(t,6)):0==(4292870144&t)&&(e=b(t>>18&7|240),e+=c(t,12),e+=c(t,6)),e+=b(63&t|128)}function h(t){for(var e,r=s(t),n=r.length,o=-1,i="";++o<n;)e=r[o],i+=u(e);return i}function p(){if(v>=m)throw Error("Invalid byte index");var t=255&g[v];if(v++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function f(){var t,e,r,n,o;if(v>m)throw Error("Invalid byte index");if(v==m)return!1;if(t=255&g[v],v++,0==(128&t))return t;if(192==(224&t)){var e=p();if(o=(31&t)<<6|e,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=p(),r=p(),o=(15&t)<<12|e<<6|r,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=p(),r=p(),n=p(),o=(15&t)<<18|e<<12|r<<6|n,o>=65536&&o<=1114111))return o;throw Error("Invalid WTF-8 detected")}function l(t){g=s(t),m=g.length,v=0;for(var e,r=[];(e=f())!==!1;)r.push(e);return a(r)}var d="object"==typeof e&&e,y=("object"==typeof t&&t&&t.exports==d&&t,"object"==typeof o&&o);y.global!==y&&y.window!==y||(i=y);var g,m,v,b=String.fromCharCode,w={version:"1.0.0",encode:h,decode:l};n=function(){return w}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(12)(t),function(){return this}())},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<t.length;n++)r[t.charCodeAt(n)]=n;e.encode=function(e){var r,n=new Uint8Array(e),o=n.length,i="";for(r=0;r<o;r+=3)i+=t[n[r]>>2],i+=t[(3&n[r])<<4|n[r+1]>>4],i+=t[(15&n[r+1])<<2|n[r+2]>>6],i+=t[63&n[r+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(t){var e,n,o,i,s,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h=new ArrayBuffer(a),p=new Uint8Array(h);for(e=0;e<c;e+=4)n=r[t.charCodeAt(e)],o=r[t.charCodeAt(e+1)],i=r[t.charCodeAt(e+2)],s=r[t.charCodeAt(e+3)],p[u++]=n<<2|o>>4,p[u++]=(15&o)<<4|i>>2,p[u++]=(3&i)<<6|63&s;return h}}()},function(t,e){(function(e){function r(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}t[e]=n}}}function n(t,e){e=e||{};var n=new i;r(t);for(var o=0;o<t.length;o++)n.append(t[o]);return e.type?n.getBlob(e.type):n.getBlob()}function o(t,e){return r(t),new Blob(t,e||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(t){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(t){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return s?a?e.Blob:o:c?n:void 0}()}).call(e,function(){return this}())},function(t,e,r){function n(t){if(t)return o(t)}function o(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){e.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e},e.decode=function(t){for(var e={},r=t.split("&"),n=0,o=r.length;n<o;n++){var i=r[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t,e){t.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){"use strict";function r(t){var e="";do e=s[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function n(t){var e=0;for(h=0;h<t.length;h++)e=e*a+c[t.charAt(h)];return e}function o(){var t=r(+new Date);return t!==i?(u=0,i=t):t+"."+r(u++)}for(var i,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},u=0,h=0;h<a;h++)c[s[h]]=h;o.encode=r,o.decode=n,t.exports=o},function(t,e,r){(function(e){function n(){}function o(t){i.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var r=this;a.push(function(t){r.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){r.script&&(r.script.onerror=n)},!1)}var i=r(25),s=r(37);t.exports=o;var a,c=/\n/g,u=/\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function r(){n(),e()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(t)}catch(t){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),h=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=h,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),t=t.replace(u,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&r();
}:this.iframe.onload=r}}).call(e,function(){return this}())},function(t,e,r){(function(e){function n(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=p&&!t.forceNode,this.usingBrowserWebSocket||(f=o),i.call(this,t)}var o,i=r(26),s=r(27),a=r(36),c=r(37),u=r(38),h=r(3)("engine.io-client:websocket"),p=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{o=r(41)}catch(t){}var f=p;f||"undefined"!=typeof window||(f=o),t.exports=n,c(n,i),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new f(t):new f(t,e,r)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},n.prototype.write=function(t){function r(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}var n=this;this.writable=!1;for(var o=t.length,i=0,a=o;i<a;i++)!function(t){s.encodePacket(t,n.supportsBinary,function(i){if(!n.usingBrowserWebSocket){var s={};if(t.options&&(s.compress=t.options.compress),n.perMessageDeflate){var a="string"==typeof i?e.Buffer.byteLength(i):i.length;a<n.perMessageDeflate.threshold&&(s.compress=!1)}}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,s)}catch(t){h("websocket closed before onclose event")}--o||r()})}(t[i])},n.prototype.onClose=function(){i.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",r="";this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=u()),this.supportsBinary||(t.b64=1),t=a.encode(t),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t},n.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===n.prototype.name)}}).call(e,function(){return this}())},function(t,e){},function(t,e){var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e){(function(e){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):r.test(t.replace(n,"@").replace(o,"]").replace(i,""))?new Function("return "+t)():void 0):null}}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t,e,r){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}var o=r(7),i=r(35),s=r(45),a=r(46),c=r(47),u=r(3)("socket.io-client:socket"),h=r(29);t.exports=e=n;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=i.prototype.emit;i(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",c(this,"onopen")),a(t,"packet",c(this,"onpacket")),a(t,"close",c(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},n.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},n.prototype.emit=function(t){if(p.hasOwnProperty(t))return f.apply(this,arguments),this;var e=s(arguments),r=o.EVENT;h(e)&&(r=o.BINARY_EVENT);var n={type:r,data:e};return n.options={},n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this},n.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},n.prototype.onopen=function(){u("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:o.CONNECT,query:this.query}):this.packet({type:o.CONNECT}))},n.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},n.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case o.CONNECT:this.onconnect();break;case o.EVENT:this.onevent(t);break;case o.BINARY_EVENT:this.onevent(t);break;case o.ACK:this.onack(t);break;case o.BINARY_ACK:this.onack(t);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",t.data)}},n.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},n.prototype.ack=function(t){var e=this,r=!1;return function(){if(!r){r=!0;var n=s(arguments);u("sending ack %j",n);var i=h(n)?o.BINARY_ACK:o.ACK;e.packet({type:i,id:t,data:n})}}},n.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e){function r(t,e){var r=[];e=e||0;for(var n=e||0;n<t.length;n++)r[n-e]=t[n];return r}t.exports=r},function(t,e){"use strict";function r(t,e,r){return t.on(e,r),{destroy:function(){t.removeListener(e,r)}}}t.exports=r},function(t,e){var r=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},function(t,e){function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}}])});
/*! Hammer.JS - v2.0.8 - 2016-04-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a)return e;g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new(b=c?c:xa?M:ya?P:wa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb))return jb;var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":""}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":""}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ka(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0)},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart"in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)S.call(this,b,c);else if(e&&U.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb)))return!1;a++}return!0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void(this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void(this.state=tb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f)this.reset();else if(a.eventType&Ea)this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this);else if(a.eventType&Ga)return rb;return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ga)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.8",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Y)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});var wb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};wb.Hammer=ha,"function"==typeof define&&define.amd?define(function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,"Hammer");
//# sourceMappingURL=hammer.min.js.map
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.StartAudioContext=t()}(this,function(){function e(e){var t=e.createBuffer(1,1,e.sampleRate),n=e.createBufferSource();n.buffer=t,n.connect(e.destination),n.start(0),e.resume&&e.resume()}function t(e){return"running"===e.state}function n(e,n){function i(){t(e)?n():(requestAnimationFrame(i),e.resume&&e.resume())}t(e)?n():i()}function i(e,t,n){if(Array.isArray(e)||NodeList&&e instanceof NodeList)for(var o=0;o<e.length;o++)i(e[o],t,n);else if("string"==typeof e)i(document.querySelectorAll(e),t,n);else if(e.jquery&&"function"==typeof e.toArray)i(e.toArray(),t,n);else if(Element&&e instanceof Element){var s=new d(e,n);t.push(s)}}function o(e,t,o){var d=new Promise(function(t){n(e,t)}),s=[];return t||(t=document.body),i(t,s,e),d.then(function(){for(var e=0;e<s.length;e++)s[e].dispose();s=null,o&&o()}),d}console.log("start");var d=function(e,t){this._dragged=!1,this._element=e,this._bindedMove=this._moved.bind(this),this._bindedEnd=this._ended.bind(this,t),e.addEventListener("touchstart",this._bindedEnd),e.addEventListener("touchmove",this._bindedMove),e.addEventListener("touchend",this._bindedEnd),e.addEventListener("mouseup",this._bindedEnd)};return d.prototype._moved=function(e){this._dragged=!0},d.prototype._ended=function(t){this._dragged||e(t),this._dragged=!1},d.prototype.dispose=function(){this._element.removeEventListener("touchstart",this._bindedEnd),this._element.removeEventListener("touchmove",this._bindedMove),this._element.removeEventListener("touchend",this._bindedEnd),this._element.removeEventListener("mouseup",this._bindedEnd),this._bindedMove=null,this._bindedEnd=null,this._element=null},o});
!function(t,e){"function"==typeof define&&define.amd?define(function(){return e()}):"object"==typeof module?module.exports=e():t.Tone=e()}(this,function(){"use strict";function t(t){t(e)}var e;return function(t){e=t()}(function(){var t=function(t,e){this.isUndef(t)||1===t?this.input=this.context.createGain():t>1&&(this.input=new Array(t)),this.isUndef(e)||1===e?this.output=this.context.createGain():e>1&&(this.output=new Array(t))};t.prototype.set=function(e,i,n){if(this.isObject(e))n=i;else if(this.isString(e)){var s={};s[e]=i,e=s}t:for(var o in e){i=e[o];var r=this;if(-1!==o.indexOf(".")){for(var a=o.split("."),h=0;h<a.length-1;h++)if((r=r[a[h]])instanceof t){a.splice(0,h+1);var l=a.join(".");r.set(l,i);continue t}o=a[a.length-1]}var u=r[o];this.isUndef(u)||(t.Signal&&u instanceof t.Signal||t.Param&&u instanceof t.Param?u.value!==i&&(this.isUndef(n)?u.value=i:u.rampTo(i,n)):u instanceof AudioParam?u.value!==i&&(u.value=i):u instanceof t?u.set(i):u!==i&&(r[o]=i))}return this},t.prototype.get=function(e){this.isUndef(e)?e=this._collectDefaults(this.constructor):this.isString(e)&&(e=[e]);for(var i={},n=0;n<e.length;n++){var s=e[n],o=this,r=i;if(-1!==s.indexOf(".")){for(var a=s.split("."),h=0;h<a.length-1;h++){var l=a[h];r[l]=r[l]||{},r=r[l],o=o[l]}s=a[a.length-1]}var u=o[s];this.isObject(e[s])?r[s]=u.get():t.Signal&&u instanceof t.Signal?r[s]=u.value:t.Param&&u instanceof t.Param?r[s]=u.value:u instanceof AudioParam?r[s]=u.value:u instanceof t?r[s]=u.get():this.isFunction(u)||this.isUndef(u)||(r[s]=u)}return i},t.prototype._collectDefaults=function(t){var e=[];if(this.isUndef(t.defaults)||(e=Object.keys(t.defaults)),!this.isUndef(t._super))for(var i=this._collectDefaults(t._super),n=0;n<i.length;n++)-1===e.indexOf(i[n])&&e.push(i[n]);return e},t.prototype.toString=function(){for(var e in t){var i=e[0].match(/^[A-Z]$/),n=t[e]===this.constructor;if(this.isFunction(t[e])&&i&&n)return e}return"Tone"},Object.defineProperty(t.prototype,"numberOfInputs",{get:function(){return this.input?this.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(t.prototype,"numberOfOutputs",{get:function(){return this.output?this.isArray(this.output)?this.output.length:1:0}}),t.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this},t.prototype.connect=function(t,e,i){return Array.isArray(this.output)?(e=this.defaultArg(e,0),this.output[e].connect(t,0,i)):this.output.connect(t,e,i),this},t.prototype.disconnect=function(t,e,i){this.isArray(this.output)?this.isNumber(t)?this.output[t].disconnect():(e=this.defaultArg(e,0),this.output[e].disconnect(t,0,i)):this.output.disconnect.apply(this.output,arguments)},t.prototype.connectSeries=function(){if(arguments.length>1)for(var t=arguments[0],e=1;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},t.prototype.chain=function(){if(arguments.length>0)for(var t=this,e=0;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},t.prototype.fan=function(){if(arguments.length>0)for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},AudioNode.prototype.chain=t.prototype.chain,AudioNode.prototype.fan=t.prototype.fan,t.prototype.defaultArg=function(t,e){if(this.isObject(t)&&this.isObject(e)){var i={};for(var n in t)i[n]=this.defaultArg(e[n],t[n]);for(var s in e)i[s]=this.defaultArg(t[s],e[s]);return i}return this.isUndef(t)?e:t},t.prototype.optionsObject=function(t,e,i){var n={};if(1===t.length&&this.isObject(t[0]))n=t[0];else for(var s=0;s<e.length;s++)n[e[s]]=t[s];return this.isUndef(i)?n:this.defaultArg(n,i)},t.prototype.isUndef=function(t){return void 0===t},t.prototype.isFunction=function(t){return"function"==typeof t},t.prototype.isNumber=function(t){return"number"==typeof t},t.prototype.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},t.prototype.isBoolean=function(t){return"boolean"==typeof t},t.prototype.isArray=function(t){return Array.isArray(t)},t.prototype.isString=function(t){return"string"==typeof t},t.noOp=function(){},t.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},t.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},t.State={Started:"started",Stopped:"stopped",Paused:"paused"},t.prototype.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},t.prototype.dbToGain=function(t){return Math.pow(2,t/6)},t.prototype.gainToDb=function(t){return Math.log(t)/Math.LN10*20},t.prototype.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},t.prototype.now=function(){return t.context.now()},t.now=function(){return t.context.now()},t.extend=function(e,i){function n(){}t.prototype.isUndef(i)&&(i=t),n.prototype=i.prototype,e.prototype=new n,e.prototype.constructor=e,e._super=i};var e;return Object.defineProperty(t,"context",{get:function(){return e},set:function(i){e=t.Context&&i instanceof t.Context?i:new t.Context(i),t.Context&&t.Context.emit("init",e)}}),Object.defineProperty(t.prototype,"context",{get:function(){return t.context}}),t.setContext=function(e){t.context=e},Object.defineProperty(t.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(t.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(t,"supported",{get:function(){var t=window.hasOwnProperty("AudioContext")||window.hasOwnProperty("webkitAudioContext"),e=window.hasOwnProperty("Promise"),i=window.hasOwnProperty("Worker");return t&&e&&i}}),t.version="r10",window.TONE_SILENCE_VERSION_LOGGING||console.log("%c * Tone.js "+t.version+" * ","background: #000; color: #fff"),t}),t(function(t){return t.SignalBase=function(){},t.extend(t.SignalBase),t.SignalBase.prototype.connect=function(e,i,n){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.prototype.connect.call(this,e,i,n),this},t.SignalBase}),t(function(t){return t.WaveShaper=function(t,e){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||this.isUndef(t)?this._curve=new Float32Array(this.defaultArg(t,1024)):this.isFunction(t)&&(this._curve=new Float32Array(this.defaultArg(e,1024)),this.setMap(t))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=0,i=this._curve.length;e<i;e++){var n=e/(i-1)*2-1;this._curve[e]=t(n,e)}return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(-1===["none","2x","4x"].indexOf(t))throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}),t(function(t){return t.TimeBase=function(e,i){if(!(this instanceof t.TimeBase))return new t.TimeBase(e,i);if(this._expr=this._noOp,e instanceof t.TimeBase)this.copy(e);else if(!this.isUndef(i)||this.isNumber(e)){i=this.defaultArg(i,this._defaultUnits);var n=this._primaryExpressions[i].method;this._expr=n.bind(this,e)}else this.isString(e)?this.set(e):this.isUndef(e)&&(this._expr=this._defaultExpr())},t.extend(t.TimeBase),t.TimeBase.prototype.set=function(t){return this._expr=this._parseExprString(t),this},t.TimeBase.prototype.clone=function(){var t=new this.constructor;return t.copy(this),t},t.TimeBase.prototype.copy=function(t){var e=t._expr();return this.set(e)},t.TimeBase.prototype._primaryExpressions={n:{regexp:/^(\d+)n/i,method:function(t){return t=parseInt(t),1===t?this._beatsToUnits(this._timeSignature()):this._beatsToUnits(4/t)}},t:{regexp:/^(\d+)t/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._timeSignature())}},i:{regexp:/^(\d+)i/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,i){var n=0;return t&&"0"!==t&&(n+=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(n+=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n+=this._beatsToUnits(parseFloat(i)/4)),n}},s:{regexp:/^(\d+(?:\.\d+)?s)/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)/,method:function(t){return this._primaryExpressions[this._defaultUnits].method.call(this,t)}}},t.TimeBase.prototype._binaryExpressions={"+":{regexp:/^\+/,precedence:2,method:function(t,e){return t()+e()}},"-":{regexp:/^\-/,precedence:2,method:function(t,e){return t()-e()}},"*":{regexp:/^\*/,precedence:1,method:function(t,e){return t()*e()}},"/":{regexp:/^\//,precedence:1,method:function(t,e){return t()/e()}}},t.TimeBase.prototype._unaryExpressions={neg:{regexp:/^\-/,method:function(t){return-t()}}},t.TimeBase.prototype._syntaxGlue={"(":{regexp:/^\(/},")":{regexp:/^\)/}},t.TimeBase.prototype._tokenize=function(t){for(var e=-1,i=[];t.length>0;){var n=function(t,e){for(var i=["_binaryExpressions","_unaryExpressions","_primaryExpressions","_syntaxGlue"],n=0;n<i.length;n++){var s=e[i[n]];for(var o in s){var r=s[o],a=r.regexp,h=t.match(a);if(null!==h)return{method:r.method,precedence:r.precedence,regexp:r.regexp,value:h[0]}}}throw new SyntaxError("Tone.TimeBase: Unexpected token "+t)}(t=t.trim(),this);i.push(n),t=t.substr(n.value.length)}return{next:function(){return i[++e]},peek:function(){return i[e+1]}}},t.TimeBase.prototype._matchGroup=function(t,e,i){if(!this.isUndef(t))for(var n in e){var s=e[n];if(s.regexp.test(t.value)){if(this.isUndef(i))return s;if(s.precedence===i)return s}}return!1},t.TimeBase.prototype._parseBinary=function(t,e){this.isUndef(e)&&(e=2);var i;i=e<0?this._parseUnary(t):this._parseBinary(t,e-1);for(var n=t.peek();n&&this._matchGroup(n,this._binaryExpressions,e);)i=(n=t.next()).method.bind(this,i,this._parseBinary(t,e-1)),n=t.peek();return i},t.TimeBase.prototype._parseUnary=function(t){var e,i;e=t.peek();var n=this._matchGroup(e,this._unaryExpressions);return n?(e=t.next(),i=this._parseUnary(t),n.method.bind(this,i)):this._parsePrimary(t)},t.TimeBase.prototype._parsePrimary=function(t){var e,i;if(e=t.peek(),this.isUndef(e))throw new SyntaxError("Tone.TimeBase: Unexpected end of expression");if(this._matchGroup(e,this._primaryExpressions)){var n=(e=t.next()).value.match(e.regexp);return e.method.bind(this,n[1],n[2],n[3])}if(e&&"("===e.value){if(t.next(),i=this._parseBinary(t),!(e=t.next())||")"!==e.value)throw new SyntaxError("Expected )");return i}throw new SyntaxError("Tone.TimeBase: Cannot process token "+e.value)},t.TimeBase.prototype._parseExprString=function(t){this.isString(t)||(t=t.toString());var e=this._tokenize(t);return this._parseBinary(e)},t.TimeBase.prototype._noOp=function(){return 0},t.TimeBase.prototype._defaultExpr=function(){return this._noOp},t.TimeBase.prototype._defaultUnits="s",t.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},t.TimeBase.prototype._beatsToUnits=function(e){return 60/t.Transport.bpm.value*e},t.TimeBase.prototype._secondsToUnits=function(t){return t},t.TimeBase.prototype._ticksToUnits=function(e){return e*(this._beatsToUnits(1)/t.Transport.PPQ)},t.TimeBase.prototype._timeSignature=function(){return t.Transport.timeSignature},t.TimeBase.prototype._pushExpr=function(e,i,n){return e instanceof t.TimeBase||(e=new this.constructor(e,n)),this._expr=this._binaryExpressions[i].method.bind(this,this._expr,e._expr),this},t.TimeBase.prototype.add=function(t,e){return this._pushExpr(t,"+",e)},t.TimeBase.prototype.sub=function(t,e){return this._pushExpr(t,"-",e)},t.TimeBase.prototype.mult=function(t,e){return this._pushExpr(t,"*",e)},t.TimeBase.prototype.div=function(t,e){return this._pushExpr(t,"/",e)},t.TimeBase.prototype.valueOf=function(){return this._expr()},t.TimeBase.prototype.dispose=function(){this._expr=null},t.TimeBase}),t(function(t){return t.Time=function(e,i){if(!(this instanceof t.Time))return new t.Time(e,i);this._plusNow=!1,t.TimeBase.call(this,e,i)},t.extend(t.Time,t.TimeBase),t.Time.prototype._unaryExpressions=Object.create(t.TimeBase.prototype._unaryExpressions),t.Time.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){return t.Transport.nextSubdivision(e())}},t.Time.prototype._unaryExpressions.now={regexp:/^\+/,method:function(t){return this._plusNow=!0,t()}},t.Time.prototype.quantize=function(t,e){return e=this.defaultArg(e,1),this._expr=function(t,e,i){return t=t(),e=e.toSeconds(),t+(Math.round(t/e)*e-t)*i}.bind(this,this._expr,new this.constructor(t),e),this},t.Time.prototype.addNow=function(){return this._plusNow=!0,this},t.Time.prototype._defaultExpr=function(){return this._plusNow=!0,this._noOp},t.Time.prototype.copy=function(e){return t.TimeBase.prototype.copy.call(this,e),this._plusNow=e._plusNow,this},t.Time.prototype.toNotation=function(){var t=this.toSeconds(),e=["1m","2n","4n","8n","16n","32n","64n","128n"],i=this._toNotationHelper(t,e),n=["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"],s=this._toNotationHelper(t,n);return s.split("+").length<i.split("+").length?s:i},t.Time.prototype._toNotationHelper=function(t,e){for(var i=this._notationToUnits(e[e.length-1]),n="",s=0;s<e.length;s++){var o=this._notationToUnits(e[s]),r=t/o;if(1-r%1<1e-6&&(r+=1e-6),(r=Math.floor(r))>0){if(n+=1===r?e[s]:r.toString()+"*"+e[s],(t-=r*o)<i)break;n+=" + "}}return""===n&&(n="0"),n},t.Time.prototype._notationToUnits=function(t){for(var e=this._primaryExpressions,i=[e.n,e.t,e.m],n=0;n<i.length;n++){var s=i[n],o=t.match(s.regexp);if(o)return s.method.call(this,o[1])}},t.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.toSeconds()/t,i=Math.floor(e/this._timeSignature()),n=e%1*4;return e=Math.floor(e)%this._timeSignature(),(n=n.toString()).length>3&&(n=parseFloat(n).toFixed(3)),[i,e,n].join(":")},t.Time.prototype.toTicks=function(){var e=this._beatsToUnits(1),i=this.valueOf()/e;return Math.floor(i*t.Transport.PPQ)},t.Time.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},t.Time.prototype.toFrequency=function(){return 1/this.toSeconds()},t.Time.prototype.toSeconds=function(){return this.valueOf()},t.Time.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},t.Time.prototype.valueOf=function(){return this._expr()+(this._plusNow?this.now():0)},t.Time}),t(function(t){t.Frequency=function(e,i){if(!(this instanceof t.Frequency))return new t.Frequency(e,i);t.TimeBase.call(this,e,i)},t.extend(t.Frequency,t.TimeBase),t.Frequency.prototype._primaryExpressions=Object.create(t.TimeBase.prototype._primaryExpressions),t.Frequency.prototype._primaryExpressions.midi={regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return this.midiToFrequency(t)}},t.Frequency.prototype._primaryExpressions.note={regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,i){var n=e[t.toLowerCase()]+12*(parseInt(i)+1);return this.midiToFrequency(n)}},t.Frequency.prototype._primaryExpressions.tr={regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,i){var n=1;return t&&"0"!==t&&(n*=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(n*=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n*=this._beatsToUnits(parseFloat(i)/4)),n}},t.Frequency.prototype.transpose=function(t){return this._expr=function(t,e){return t()*this.intervalToFrequencyRatio(e)}.bind(this,this._expr,t),this},t.Frequency.prototype.harmonize=function(t){return this._expr=function(t,e){for(var i=t(),n=[],s=0;s<e.length;s++)n[s]=i*this.intervalToFrequencyRatio(e[s]);return n}.bind(this,this._expr,t),this},t.Frequency.prototype.toMidi=function(){return this.frequencyToMidi(this.valueOf())},t.Frequency.prototype.toNote=function(){var e=this.valueOf(),n=Math.log(e/t.Frequency.A4)/Math.LN2,s=Math.round(12*n)+57,o=Math.floor(s/12);return o<0&&(s+=-12*o),i[s%12]+o.toString()},t.Frequency.prototype.toSeconds=function(){return 1/this.valueOf()},t.Frequency.prototype.toFrequency=function(){return this.valueOf()},t.Frequency.prototype.toTicks=function(){var e=this._beatsToUnits(1),i=this.valueOf()/e;return Math.floor(i*t.Transport.PPQ)},t.Frequency.prototype._frequencyToUnits=function(t){return t},t.Frequency.prototype._ticksToUnits=function(e){return 1/(60*e/(t.Transport.bpm.value*t.Transport.PPQ))},t.Frequency.prototype._beatsToUnits=function(e){return 1/t.TimeBase.prototype._beatsToUnits.call(this,e)},t.Frequency.prototype._secondsToUnits=function(t){return 1/t},t.Frequency.prototype._defaultUnits="hz";var e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.Frequency.A4=440,t.Frequency.prototype.midiToFrequency=function(e){return t.Frequency.A4*Math.pow(2,(e-69)/12)},t.Frequency.prototype.frequencyToMidi=function(e){return 69+12*Math.log(e/t.Frequency.A4)/Math.LN2},t.Frequency}),t(function(t){return t.TransportTime=function(e,i){if(!(this instanceof t.TransportTime))return new t.TransportTime(e,i);t.Time.call(this,e,i)},t.extend(t.TransportTime,t.Time),t.TransportTime.prototype._unaryExpressions=Object.create(t.Time.prototype._unaryExpressions),t.TransportTime.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){var i=this._secondsToTicks(e()),n=Math.ceil(t.Transport.ticks/i);return this._ticksToUnits(n*i)}},t.TransportTime.prototype._secondsToTicks=function(e){var i=e/this._beatsToUnits(1);return Math.round(i*t.Transport.PPQ)},t.TransportTime.prototype.valueOf=function(){return this._secondsToTicks(this._expr())+(this._plusNow?t.Transport.ticks:0)},t.TransportTime.prototype.toTicks=function(){return this.valueOf()},t.TransportTime.prototype.toSeconds=function(){return this._expr()+(this._plusNow?t.Transport.seconds:0)},t.TransportTime.prototype.toFrequency=function(){return 1/this.toSeconds()},t.TransportTime}),t(function(t){return t.Emitter=function(){this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){for(var i=t.split(/\W+/),n=0;n<i.length;n++){var s=i[n];this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(e)}return this},t.Emitter.prototype.off=function(e,i){for(var n=e.split(/\W+/),s=0;s<n.length;s++)if(e=n[s],this._events.hasOwnProperty(e))if(t.prototype.isUndef(i))this._events[e]=[];else for(var o=this._events[e],r=0;r<o.length;r++)o[r]===i&&o.splice(r,1);return this},t.Emitter.prototype.emit=function(t){if(this._events){var e=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(t))for(var i=this._events[t],n=0,s=i.length;n<s;n++)i[n].apply(this,e)}return this},t.Emitter.mixin=function(e){var i=["on","off","emit"];e._events={};for(var n=0;n<i.length;n++){var s=i[n],o=t.Emitter.prototype[s];e[s]=o}},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}),t(function(t){return!window.hasOwnProperty("AudioContext")&&window.hasOwnProperty("webkitAudioContext")&&(window.AudioContext=window.webkitAudioContext),t.Context=function(e){t.Emitter.call(this),e||(e=new window.AudioContext),this._context=e;for(var i in this._context)this._defineProperty(this._context,i);this._latencyHint="interactive",this._lookAhead=.1,this._updateInterval=this._lookAhead/3,this._computedUpdateInterval=0,this._worker=this._createWorker(),this._constants={}},t.extend(t.Context,t.Emitter),t.Emitter.mixin(t.Context),t.Context.prototype._defineProperty=function(t,e){this.isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return"function"==typeof t[e]?t[e].bind(t):t[e]},set:function(i){t[e]=i}})},t.Context.prototype.now=function(){return this._context.currentTime},t.Context.prototype._createWorker=function(){window.URL=window.URL||window.webkitURL;var t=new Blob(["var timeoutTime = "+(1e3*this._updateInterval).toFixed(1)+";self.onmessage = function(msg){\ttimeoutTime = parseInt(msg.data);};function tick(){\tsetTimeout(tick, timeoutTime);\tself.postMessage('tick');}tick();"]),e=URL.createObjectURL(t),i=new Worker(e);return i.addEventListener("message",function(){this.emit("tick")}.bind(this)),i.addEventListener("message",function(){var t=this.now();if(this.isNumber(this._lastUpdate)){var e=t-this._lastUpdate;this._computedUpdateInterval=Math.max(e,.97*this._computedUpdateInterval)}this._lastUpdate=t}.bind(this)),i},t.Context.prototype.getConstant=function(t){if(this._constants[t])return this._constants[t];for(var e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0),n=0;n<i.length;n++)i[n]=t;var s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=e,s.loop=!0,s.start(0),this._constants[t]=s,s},Object.defineProperty(t.Context.prototype,"lag",{get:function(){var t=this._computedUpdateInterval-this._updateInterval;return t=Math.max(t,0)}}),Object.defineProperty(t.Context.prototype,"lookAhead",{get:function(){return this._lookAhead},set:function(t){this._lookAhead=t}}),Object.defineProperty(t.Context.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(e){this._updateInterval=Math.max(e,t.prototype.blockTime),this._worker.postMessage(Math.max(1e3*e,1))}}),Object.defineProperty(t.Context.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(t){var e=t;if(this._latencyHint=t,this.isString(t))switch(t){case"interactive":e=.1,this._context.latencyHint=t;break;case"playback":e=.8,this._context.latencyHint=t;break;case"balanced":e=.25,this._context.latencyHint=t;break;case"fastest":e=.01}this.lookAhead=e,this.updateInterval=e/3}}),t.supported?(!function(){function e(e,i,s){if(e.input)Array.isArray(e.input)?(t.prototype.isUndef(s)&&(s=0),this.connect(e.input[s])):this.connect(e.input,i,s);else try{e instanceof AudioNode?n.call(this,e,i,s):n.call(this,e,i)}catch(t){throw new Error("error connecting to node: "+e+"\n"+t)}}function i(e,i,n){if(e&&e.input&&Array.isArray(e.input))t.prototype.isUndef(n)&&(n=0),this.disconnect(e.input[n],i,n);else if(e&&e.input)this.disconnect(e.input,i,n);else try{s.apply(this,arguments)}catch(t){throw new Error("error disconnecting node: "+e+"\n"+t)}}var n=AudioNode.prototype.connect,s=AudioNode.prototype.disconnect;AudioNode.prototype.connect!==e&&(AudioNode.prototype.connect=e,AudioNode.prototype.disconnect=i)}(),t.context=new t.Context):console.warn("This browser does not support Tone.js"),t.Context}),t(function(t){return t.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},t.prototype.toSeconds=function(e){return this.isNumber(e)?e:this.isUndef(e)?this.now():this.isString(e)?new t.Time(e).toSeconds():e instanceof t.TimeBase?e.toSeconds():void 0},t.prototype.toFrequency=function(e){return this.isNumber(e)?e:this.isString(e)||this.isUndef(e)?new t.Frequency(e).valueOf():e instanceof t.TimeBase?e.toFrequency():void 0},t.prototype.toTicks=function(e){return this.isNumber(e)||this.isString(e)?new t.TransportTime(e).toTicks():this.isUndef(e)?t.Transport.ticks:e instanceof t.TimeBase?e.toTicks():void 0},t}),t(function(t){return t.Param=function(){var e=this.optionsObject(arguments,["param","units","convert"],t.Param.defaults);this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this._lfo=null,this.isObject(e.lfo)?this.value=e.lfo:this.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(e){if(this.isObject(e)){if(this.isUndef(t.LFO))throw new Error("Include 'Tone.LFO' to use an LFO as a Param value.");this._lfo&&this._lfo.dispose(),this._lfo=new t.LFO(e).start(),this._lfo.connect(this.input)}else{var i=this._fromUnits(e);this._param.cancelScheduledValues(0),this._param.value=i}}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return this.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return this.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(t,e){return t=this._fromUnits(t),e=this.toSeconds(e),e<=this.now()+this.blockTime?this._param.value=t:this._param.setValueAtTime(t,e),this},t.Param.prototype.setRampPoint=function(t){t=this.defaultArg(t,this.now());var e=this._param.value;return 0===e&&(e=this._minOutput),this._param.setValueAtTime(e,t),this},t.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.linearRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),this._param.exponentialRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValue=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.linearRampToValue=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,i){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),i=Math.max(this._minOutput,i),this._param.setTargetAtTime(t,this.toSeconds(e),i),this},t.Param.prototype.setValueCurveAtTime=function(t,e,i){for(var n=0;n<t.length;n++)t[n]=this._fromUnits(t[n]);return this._param.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(i)),this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.rampTo=function(e,i,n){return i=this.defaultArg(i,0),this.units===t.Type.Frequency||this.units===t.Type.BPM||this.units===t.Type.Decibels?this.exponentialRampToValue(e,i,n):this.linearRampToValue(e,i,n),this},Object.defineProperty(t.Param.prototype,"lfo",{get:function(){return this._lfo}}),t.Param.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param=null,this._lfo&&(this._lfo.dispose(),this._lfo=null),this},t.Param}),t(function(t){return window.GainNode&&!AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),t.Gain=function(){var e=this.optionsObject(arguments,["gain","units"],t.Gain.defaults);this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly("gain")},t.extend(t.Gain),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},t.prototype.createInsOuts=function(e,i){1===e?this.input=new t.Gain:e>1&&(this.input=new Array(e)),1===i?this.output=new t.Gain:i>1&&(this.output=new Array(e))},t.Gain}),t(function(t){return t.Signal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this.output=this._gain=this.context.createGain(),e.param=this._gain.gain,t.Param.call(this,e),this.input=this._param=this._gain.gain,this.context.getConstant(1).chain(this._gain)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._param=null,this._gain.disconnect(),this._gain=null,this},t.Signal}),t(function(t){return t.Timeline=function(){var e=this.optionsObject(arguments,["memory"],t.Timeline.defaults);this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),t.Timeline.prototype.add=function(t){if(this.isUndef(t.time))throw new Error("Tone.Timeline: events must have a time attribute");if(this._timeline.length){var e=this._search(t.time);this._timeline.splice(e+1,0,t)}else this._timeline.push(t);if(this.length>this.memory){var i=this.length-this.memory;this._timeline.splice(0,i)}return this},t.Timeline.prototype.remove=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);-1!==e&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.get=function(t){var e=this._search(t);return-1!==e?this._timeline[e]:null},t.Timeline.prototype.peek=function(){return this._timeline[0]},t.Timeline.prototype.shift=function(){return this._timeline.shift()},t.Timeline.prototype.getAfter=function(t){var e=this._search(t);return e+1<this._timeline.length?this._timeline[e+1]:null},t.Timeline.prototype.getBefore=function(t){var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var i=this._search(t);return i-1>=0?this._timeline[i-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var i=e;i>=0&&this._timeline[i].time===t;i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){if(this._timeline.length){var e=this._search(t);e>=0&&(this._timeline=this._timeline.slice(e+1))}return this},t.Timeline.prototype._search=function(t){var e=0,i=this._timeline.length,n=i;if(i>0&&this._timeline[i-1].time<=t)return i-1;for(;e<n;){var s=Math.floor(e+(n-e)/2),o=this._timeline[s],r=this._timeline[s+1];if(o.time===t){for(var a=s;a<this._timeline.length;a++)this._timeline[a].time===t&&(s=a);return s}if(o.time<t&&r.time>t)return s;o.time>t?n=s:o.time<t&&(e=s+1)}return-1},t.Timeline.prototype._iterate=function(t,e,i){this._iterating=!0,e=this.defaultArg(e,0),i=this.defaultArg(i,this._timeline.length-1);for(var n=e;n<=i;n++)t(this._timeline[n]);if(this._iterating=!1,this._toRemove.length>0){for(var s=0;s<this._toRemove.length;s++){var o=this._timeline.indexOf(this._toRemove[s]);-1!==o&&this._timeline.splice(o,1)}this._toRemove=[]}},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(e,0,i),this},t.Timeline.prototype.forEachAfter=function(t,e){var i=this._search(t);return this._iterate(e,i+1),this},t.Timeline.prototype.forEachFrom=function(t,e){for(var i=this._search(t);i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(function(i){i.time===t&&e(i)},0,i),this},t.Timeline.prototype.dispose=function(){t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null},t.Timeline}),t(function(t){return t.TimelineSignal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this._events=new t.Timeline(10),t.Signal.apply(this,e),e.param=this._param,t.Param.call(this,e),this._initial=this._fromUnits(this._param.value)},t.extend(t.TimelineSignal,t.Param),t.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Curve:"curve",Set:"set"},Object.defineProperty(t.TimelineSignal.prototype,"value",{get:function(){var t=this.now(),e=this.getValueAtTime(t);return this._toUnits(e)},set:function(t){var e=this._fromUnits(t);this._initial=e,this.cancelScheduledValues(),this._param.value=e}}),t.TimelineSignal.prototype.setValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.add({type:t.TimelineSignal.Type.Set,value:e,time:i}),this._param.setValueAtTime(e,i),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.add({type:t.TimelineSignal.Type.Linear,value:e,time:i}),this._param.linearRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,i){i=this.toSeconds(i);var n=this._searchBefore(i);n&&0===n.value&&this.setValueAtTime(this._minOutput,n.time),e=this._fromUnits(e);var s=Math.max(e,this._minOutput);return this._events.add({type:t.TimelineSignal.Type.Exponential,value:s,time:i}),e<this._minOutput?(this._param.exponentialRampToValueAtTime(this._minOutput,i-this.sampleTime),this.setValueAtTime(0,i)):this._param.exponentialRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,i,n){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),n=Math.max(this._minOutput,n),i=this.toSeconds(i),this._events.add({type:t.TimelineSignal.Type.Target,value:e,time:i,constant:n}),this._param.setTargetAtTime(e,i,n),this},t.TimelineSignal.prototype.setValueCurveAtTime=function(e,i,n,s){s=this.defaultArg(s,1);for(var o=new Array(e.length),r=0;r<o.length;r++)o[r]=this._fromUnits(e[r])*s;i=this.toSeconds(i),n=this.toSeconds(n),this._events.add({type:t.TimelineSignal.Type.Curve,value:o,time:i,duration:n}),this._param.setValueAtTime(o[0],i);for(var a=1;a<o.length;a++){var h=i+a/(o.length-1)*n;this._param.linearRampToValueAtTime(o[a],h)}return this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this},t.TimelineSignal.prototype.setRampPoint=function(e){e=this.toSeconds(e);var i=this._toUnits(this.getValueAtTime(e)),n=this._searchBefore(e);if(n&&n.time===e)this.cancelScheduledValues(e+this.sampleTime);else if(n&&n.type===t.TimelineSignal.Type.Curve&&n.time+n.duration>e)this.cancelScheduledValues(e),this.linearRampToValueAtTime(i,e);else{var s=this._searchAfter(e);s&&(this.cancelScheduledValues(e),s.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(i,e):s.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(i,e)),this.setValueAtTime(i,e)}return this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.linearRampToValueAtTime(t,i),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,i),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.get(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){e=this.toSeconds(e);var i=this._searchAfter(e),n=this._searchBefore(e),s=this._initial;if(null===n)s=this._initial;else if(n.type===t.TimelineSignal.Type.Target){var o,r=this._events.getBefore(n.time);o=null===r?this._initial:r.value,s=this._exponentialApproach(n.time,o,n.value,n.constant,e)}else s=n.type===t.TimelineSignal.Type.Curve?this._curveInterpolate(n.time,n.value,n.duration,e):null===i?n.value:i.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(n.time,n.value,i.time,i.value,e):i.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(n.time,n.value,i.time,i.value,e):n.value;return s},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,i,n,s){return i+(e-i)*Math.exp(-(s-t)/n)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,i,n,s){return e+(s-t)/(i-t)*(n-e)},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,i,n,s){return(e=Math.max(this._minOutput,e))*Math.pow(n/e,(s-t)/(i-t))},t.TimelineSignal.prototype._curveInterpolate=function(t,e,i,n){var s=e.length;if(n>=t+i)return e[s-1];if(n<=t)return e[0];var o=(n-t)/i,r=Math.floor((s-1)*o),a=Math.ceil((s-1)*o),h=e[r],l=e[a];return a===r?h:this._linearInterpolate(r,h,a,l,o*(s-1))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),t.Param.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}),t(function(t){return t.Pow=function(e){this._exp=this.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}),t(function(t){return t.Envelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this._attackCurve="linear",this._releaseCurve="exponential",this._sig=this.output=new t.TimelineSignal,this._sig.setValueAtTime(0,0),this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve},t.extend(t.Envelope),t.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:"linear",releaseCurve:"exponential"},Object.defineProperty(t.Envelope.prototype,"value",{get:function(){return this.getValueAtTime(this.now())}}),Object.defineProperty(t.Envelope.prototype,"attackCurve",{get:function(){if(this.isString(this._attackCurve))return this._attackCurve;if(this.isArray(this._attackCurve)){for(var e in t.Envelope.Type)if(t.Envelope.Type[e].In===this._attackCurve)return e;return this._attackCurve}},set:function(e){if(t.Envelope.Type.hasOwnProperty(e)){var i=t.Envelope.Type[e];this.isObject(i)?this._attackCurve=i.In:this._attackCurve=i}else{if(!this.isArray(e))throw new Error("Tone.Envelope: invalid curve: "+e);this._attackCurve=e}}}),Object.defineProperty(t.Envelope.prototype,"releaseCurve",{get:function(){if(this.isString(this._releaseCurve))return this._releaseCurve;if(this.isArray(this._releaseCurve)){for(var e in t.Envelope.Type)if(t.Envelope.Type[e].Out===this._releaseCurve)return e;return this._releaseCurve}},set:function(e){if(t.Envelope.Type.hasOwnProperty(e)){var i=t.Envelope.Type[e];this.isObject(i)?this._releaseCurve=i.Out:this._releaseCurve=i}else{if(!this.isArray(e))throw new Error("Tone.Envelope: invalid curve: "+e);this._releaseCurve=e}}}),t.Envelope.prototype.triggerAttack=function(t,e){t=this.toSeconds(t);var i=this.toSeconds(this.attack),n=i,s=this.toSeconds(this.decay);e=this.defaultArg(e,1);var o=this.getValueAtTime(t);if(o>0&&(n=(1-o)/(1/n)),"linear"===this._attackCurve)this._sig.linearRampToValue(e,n,t);else if("exponential"===this._attackCurve)this._sig.exponentialRampToValue(e,n,t);else if(n>0){this._sig.setRampPoint(t);var r=this._attackCurve;if(n<i){var a=1-n/i,h=Math.floor(a*this._attackCurve.length);(r=this._attackCurve.slice(h))[0]=o}this._sig.setValueCurveAtTime(r,t,n,e)}return this._sig.exponentialRampToValue(e*this.sustain,s,n+t),this},t.Envelope.prototype.triggerRelease=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var i=this.toSeconds(this.release);if("linear"===this._releaseCurve)this._sig.linearRampToValue(0,i,t);else if("exponential"===this._releaseCurve)this._sig.exponentialRampToValue(0,i,t);else{var n=this._releaseCurve;this.isArray(n)&&(this._sig.setRampPoint(t),this._sig.setValueCurveAtTime(n,t,i,e))}}return this},t.Envelope.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},t.Envelope.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this},t.Envelope.prototype.cancel=function(t){return this._sig.cancelScheduledValues(t),this},t.Envelope.prototype.connect=t.Signal.prototype.connect,function(){function e(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=1-t[i];return e}var i,n,s=[];for(i=0;i<128;i++)s[i]=Math.sin(i/127*(Math.PI/2));var o=[];for(i=0;i<127;i++){n=i/127;var r=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;o[i]=r/10+.83*n}o[127]=1;var a=[];for(i=0;i<128;i++)a[i]=Math.ceil(i/127*5)/5;var h=[];for(i=0;i<128;i++)n=i/127,h[i]=.5*(1-Math.cos(Math.PI*n));var l=[];for(i=0;i<128;i++){n=i/127;var u=4*Math.pow(n,3)+.2,p=Math.cos(u*Math.PI*2*n);l[i]=Math.abs(p*(1-n))}t.Envelope.Type={linear:"linear",exponential:"exponential",bounce:{In:e(l),Out:l},cosine:{In:s,Out:function(t){return t.slice(0).reverse()}(s)},step:{In:a,Out:e(a)},ripple:{In:o,Out:e(o)},sine:{In:h,Out:e(h)}}}(),t.Envelope.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this._attackCurve=null,this._releaseCurve=null,this},t.Envelope}),t(function(t){return t.AmplitudeEnvelope=function(){t.Envelope.apply(this,arguments),this.input=this.output=new t.Gain,this._sig.connect(this.output.gain)},t.extend(t.AmplitudeEnvelope,t.Envelope),t.AmplitudeEnvelope.prototype.dispose=function(){return this.input.dispose(),this.input=null,t.Envelope.prototype.dispose.call(this),this},t.AmplitudeEnvelope}),t(function(t){return window.AnalyserNode&&!AnalyserNode.prototype.getFloatTimeDomainData&&(AnalyserNode.prototype.getFloatTimeDomainData=function(t){var e=new Uint8Array(t.length);this.getByteTimeDomainData(e);for(var i=0;i<e.length;i++)t[i]=(e[i]-128)/128}),t.Analyser=function(){var e=this.optionsObject(arguments,["type","size"],t.Analyser.defaults);this._analyser=this.input=this.output=this.context.createAnalyser(),this._type=e.type,this._returnType=e.returnType,this._buffer=null,this.size=e.size,this.type=e.type,this.returnType=e.returnType,this.minDecibels=e.minDecibels,this.maxDecibels=e.maxDecibels},t.extend(t.Analyser),t.Analyser.defaults={size:1024,returnType:"byte",type:"fft",smoothing:.8,maxDecibels:-30,minDecibels:-100},t.Analyser.Type={Waveform:"waveform",FFT:"fft"},t.Analyser.ReturnType={Byte:"byte",Float:"float"},t.Analyser.prototype.analyse=function(){return this._type===t.Analyser.Type.FFT?this._returnType===t.Analyser.ReturnType.Byte?this._analyser.getByteFrequencyData(this._buffer):this._analyser.getFloatFrequencyData(this._buffer):this._type===t.Analyser.Type.Waveform&&(this._returnType===t.Analyser.ReturnType.Byte?this._analyser.getByteTimeDomainData(this._buffer):this._analyser.getFloatTimeDomainData(this._buffer)),this._buffer},Object.defineProperty(t.Analyser.prototype,"size",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this.type=this._type}}),Object.defineProperty(t.Analyser.prototype,"returnType",{get:function(){return this._returnType},set:function(e){if(e===t.Analyser.ReturnType.Byte)this._buffer=new Uint8Array(this._analyser.frequencyBinCount);else{if(e!==t.Analyser.ReturnType.Float)throw new TypeError("Tone.Analayser: invalid return type: "+e);this._buffer=new Float32Array(this._analyser.frequencyBinCount)}this._returnType=e}}),Object.defineProperty(t.Analyser.prototype,"type",{get:function(){return this._type},set:function(e){if(e!==t.Analyser.Type.Waveform&&e!==t.Analyser.Type.FFT)throw new TypeError("Tone.Analyser: invalid type: "+e);this._type=e}}),Object.defineProperty(t.Analyser.prototype,"smoothing",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t}}),Object.defineProperty(t.Analyser.prototype,"minDecibels",{get:function(){return this._analyser.minDecibels},set:function(t){this._analyser.minDecibels=t}}),Object.defineProperty(t.Analyser.prototype,"maxDecibels",{get:function(){return this._analyser.maxDecibels},set:function(t){this._analyser.maxDecibels=t}}),t.Analyser.prototype.dispose=function(){t.prototype.dispose.call(this),this._analyser.disconnect(),this._analyser=null,this._buffer=null},t.Analyser}),t(function(t){return t.Compressor=function(){var e=this.optionsObject(arguments,["threshold","ratio"],t.Compressor.defaults);this._compressor=this.input=this.output=this.context.createDynamicsCompressor(),this.threshold=new t.Param({param:this._compressor.threshold,units:t.Type.Decibels,convert:!1}),this.attack=new t.Param(this._compressor.attack,t.Type.Time),this.release=new t.Param(this._compressor.release,t.Type.Time),this.knee=new t.Param({param:this._compressor.knee,units:t.Type.Decibels,convert:!1}),this.ratio=new t.Param({param:this._compressor.ratio,convert:!1}),this._readOnly(["knee","release","attack","ratio","threshold"]),this.set(e)},t.extend(t.Compressor),t.Compressor.defaults={ratio:12,threshold:-24,release:.25,attack:.003,knee:30},t.Compressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["knee","release","attack","ratio","threshold"]),this._compressor.disconnect(),this._compressor=null,this.attack.dispose(),this.attack=null,this.release.dispose(),this.release=null,this.threshold.dispose(),this.threshold=null,this.ratio.dispose(),this.ratio=null,this.knee.dispose(),this.knee=null,this},t.Compressor}),t(function(t){return t.Add=function(e){this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new t.Gain,this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this._param.dispose(),this._param=null,this},t.Add}),t(function(t){return t.Multiply=function(e){this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new t.Gain,this._param=this.input[1]=this.output.gain,this._param.value=this.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},t.Multiply}),t(function(t){return t.Negate=function(){this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}),t(function(t){return t.Subtract=function(e){this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new t.Gain,this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum)},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},t.Subtract}),t(function(t){return t.GreaterThanZero=function(){this._thresh=this.output=new t.WaveShaper(function(t){return t<=0?0:1},127),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}),t(function(t){return t.GreaterThan=function(e){this.createInsOuts(2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz)},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._param=null,this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}),t(function(t){return t.Abs=function(){this._abs=this.input=this.output=new t.WaveShaper(function(t){return 0===t?0:Math.abs(t)},127)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},t.Abs}),t(function(t){return t.Modulo=function(e){this.createInsOuts(1,0),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){return Math.floor((e+1e-4)/t)})},Object.defineProperty(t.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}),t(function(t){return t.AudioToGain=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}),t(function(t){function e(t,e,i){var n=new t;return i._eval(e[0]).connect(n,0,0),i._eval(e[1]).connect(n,0,1),n}function i(t,e,i){var n=new t;return i._eval(e[0]).connect(n,0,0),n}function n(t){return t?parseFloat(t):void 0}function s(t){return t&&t.args?parseFloat(t.args):void 0}return t.Expr=function(){var t=this._replacements(Array.prototype.slice.call(arguments)),e=this._parseInputs(t);this._nodes=[],this.input=new Array(e);for(var i=0;i<e;i++)this.input[i]=this.context.createGain();var n,s=this._parseTree(t);try{n=this._eval(s)}catch(e){throw this._disposeNodes(),new Error("Tone.Expr: Could evaluate expression: "+t)}this.output=n},t.extend(t.Expr,t.SignalBase),t.Expr._Expressions={value:{signal:{regexp:/^\d+\.\d+|^\d+/,method:function(e){return new t.Signal(n(e))}},input:{regexp:/^\$\d/,method:function(t,e){return e.input[n(t.substr(1))]}}},glue:{"(":{regexp:/^\(/},")":{regexp:/^\)/},",":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:i.bind(this,t.Abs)},mod:{regexp:/^mod/,method:function(e,i){var n=s(e[1]),o=new t.Modulo(n);return i._eval(e[0]).connect(o),o}},pow:{regexp:/^pow/,method:function(e,i){var n=s(e[1]),o=new t.Pow(n);return i._eval(e[0]).connect(o),o}},a2g:{regexp:/^a2g/,method:function(e,i){var n=new t.AudioToGain;return i._eval(e[0]).connect(n),n}}},binary:{"+":{regexp:/^\+/,precedence:1,method:e.bind(this,t.Add)},"-":{regexp:/^\-/,precedence:1,method:function(n,s){return 1===n.length?i(t.Negate,n,s):e(t.Subtract,n,s)}},"*":{regexp:/^\*/,precedence:0,method:e.bind(this,t.Multiply)}},unary:{"-":{regexp:/^\-/,method:i.bind(this,t.Negate)},"!":{regexp:/^\!/,method:i.bind(this,t.NOT)}}},t.Expr.prototype._parseInputs=function(t){var e=t.match(/\$\d/g),i=0;if(null!==e)for(var n=0;n<e.length;n++){var s=parseInt(e[n].substr(1))+1;i=Math.max(i,s)}return i},t.Expr.prototype._replacements=function(t){for(var e=t.shift(),i=0;i<t.length;i++)e=e.replace(/\%/i,t[i]);return e},t.Expr.prototype._tokenize=function(e){for(var i=-1,n=[];e.length>0;){var s=function(e){for(var i in t.Expr._Expressions){var n=t.Expr._Expressions[i];for(var s in n){var o=n[s],r=o.regexp,a=e.match(r);if(null!==a)return{type:i,value:a[0],method:o.method}}}throw new SyntaxError("Tone.Expr: Unexpected token "+e)}(e=e.trim());n.push(s),e=e.substr(s.value.length)}return{next:function(){return n[++i]},peek:function(){return n[i+1]}}},t.Expr.prototype._parseTree=function(e){function i(t,e){return!u(t)&&"glue"===t.type&&t.value===e}function n(e,i,n){var s=t.Expr._Expressions[i];if(!u(e))for(var o in s){var r=s[o];if(r.regexp.test(e.value)){if(u(n))return!0;if(r.precedence===n)return!0}}return!1}function s(t){u(t)&&(t=5);var e;e=t<0?o():s(t-1);for(var i=l.peek();n(i,"binary",t);)e={operator:(i=l.next()).value,method:i.method,args:[e,s(t-1)]},i=l.peek();return e}function o(){var t,e;return t=l.peek(),n(t,"unary")?(t=l.next(),e=o(),{operator:t.value,method:t.method,args:[e]}):r()}function r(){var t,e;if(t=l.peek(),u(t))throw new SyntaxError("Tone.Expr: Unexpected termination of expression");if("func"===t.type)return t=l.next(),a(t);if("value"===t.type)return t=l.next(),{method:t.method,args:t.value};if(i(t,"(")){if(l.next(),e=s(),t=l.next(),!i(t,")"))throw new SyntaxError("Expected )");return e}throw new SyntaxError("Tone.Expr: Parse error, cannot process token "+t.value)}function a(t){var e,n=[];if(e=l.next(),!i(e,"("))throw new SyntaxError('Tone.Expr: Expected ( in a function call "'+t.value+'"');if(e=l.peek(),i(e,")")||(n=h()),e=l.next(),!i(e,")"))throw new SyntaxError('Tone.Expr: Expected ) in a function call "'+t.value+'"');return{method:t.method,args:n,name:name}}function h(){for(var t,e,n=[];;){if(e=s(),u(e))break;if(n.push(e),t=l.peek(),!i(t,","))break;l.next()}return n}var l=this._tokenize(e),u=this.isUndef.bind(this);return s()},t.Expr.prototype._eval=function(t){if(!this.isUndef(t)){var e=t.method(t.args,this);return this._nodes.push(e),e}},t.Expr.prototype._disposeNodes=function(){for(var t=0;t<this._nodes.length;t++){var e=this._nodes[t];this.isFunction(e.dispose)?e.dispose():this.isFunction(e.disconnect)&&e.disconnect(),e=null,this._nodes[t]=null}this._nodes=null},t.Expr.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeNodes()},t.Expr}),t(function(t){return t.EqualPowerGain=function(){this._eqPower=this.input=this.output=new t.WaveShaper(function(t){return Math.abs(t)<.001?0:this.equalPowerScale(t)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}),t(function(t){return t.CrossFade=function(e){this.createInsOuts(2,1),this.a=this.input[0]=new t.Gain,this.b=this.input[1]=new t.Gain,this.fade=new t.Signal(this.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._invert=new t.Expr("1 - $0"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly("fade")},t.extend(t.CrossFade),t.CrossFade.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},t.CrossFade}),t(function(t){return t.Filter=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["frequency","type","rolloff"],t.Filter.defaults);this._filters=[],this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(0,t.Type.Cents),this.gain=new t.Signal({value:e.gain,convert:!1}),this.Q=new t.Signal(e.Q),this._type=e.type,this._rolloff=e.rolloff,this.rolloff=e.rolloff,this._readOnly(["detune","frequency","gain","Q"])},t.extend(t.Filter),t.Filter.defaults={type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0},Object.defineProperty(t.Filter.prototype,"type",{get:function(){return this._type},set:function(t){if(-1===["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t))throw new TypeError("Tone.Filter: invalid type "+t);this._type=t;for(var e=0;e<this._filters.length;e++)this._filters[e].type=t}}),Object.defineProperty(t.Filter.prototype,"rolloff",{get:function(){return this._rolloff},set:function(t){t=parseInt(t,10);var e=[-12,-24,-48,-96].indexOf(t);if(-1===e)throw new RangeError("Tone.Filter: rolloff can only be -12, -24, -48 or -96");e+=1,this._rolloff=t,this.input.disconnect();for(var i=0;i<this._filters.length;i++)this._filters[i].disconnect(),this._filters[i]=null;this._filters=new Array(e);for(var n=0;n<e;n++){var s=this.context.createBiquadFilter();s.type=this._type,this.frequency.connect(s.frequency),this.detune.connect(s.detune),this.Q.connect(s.Q),this.gain.connect(s.gain),this._filters[n]=s}var o=[this.input].concat(this._filters).concat([this.output]);this.connectSeries.apply(this,o)}}),t.Filter.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=0;e<this._filters.length;e++)this._filters[e].disconnect(),this._filters[e]=null;return this._filters=null,this._writable(["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.frequency=null,this.Q=null,this.detune.dispose(),this.detune=null,this.gain.dispose(),this.gain=null,this},t.Filter}),t(function(t){return t.MultibandSplit=function(){var e=this.optionsObject(arguments,["lowFrequency","highFrequency"],t.MultibandSplit.defaults);this.input=new t.Gain,this.output=new Array(3),this.low=this.output[0]=new t.Filter(0,"lowpass"),this._lowMidFilter=new t.Filter(0,"highpass"),this.mid=this.output[1]=new t.Filter(0,"lowpass"),this.high=this.output[2]=new t.Filter(0,"highpass"),this.lowFrequency=new t.Signal(e.lowFrequency,t.Type.Frequency),this.highFrequency=new t.Signal(e.highFrequency,t.Type.Frequency),this.Q=new t.Signal(e.Q),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.connect(this.low.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this.mid.frequency),this.highFrequency.connect(this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandSplit),t.MultibandSplit.defaults={lowFrequency:400,highFrequency:2500,Q:1},t.MultibandSplit.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.low=null,this._lowMidFilter.dispose(),this._lowMidFilter=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.lowFrequency.dispose(),this.lowFrequency=null,this.highFrequency.dispose(),this.highFrequency=null,this.Q.dispose(),this.Q=null,this},t.MultibandSplit}),t(function(t){return t.EQ3=function(){var e=this.optionsObject(arguments,["low","mid","high"],t.EQ3.defaults);this.output=new t.Gain,this._multibandSplit=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this._lowGain=new t.Gain(e.low,t.Type.Decibels),this._midGain=new t.Gain(e.mid,t.Type.Decibels),this._highGain=new t.Gain(e.high,t.Type.Decibels),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),this._readOnly(["low","mid","high","lowFrequency","highFrequency"])},t.extend(t.EQ3),t.EQ3.defaults={low:0,mid:0,high:0,lowFrequency:400,highFrequency:2500},t.EQ3.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this._multibandSplit=null,this.lowFrequency=null,this.highFrequency=null,this._lowGain.dispose(),this._lowGain=null,this._midGain.dispose(),this._midGain=null,this._highGain.dispose(),this._highGain=null,this.low=null,this.mid=null,this.high=null,this.Q=null,this},t.EQ3}),t(function(t){return t.Scale=function(e,i){this._outputMin=this.defaultArg(e,0),this._outputMax=this.defaultArg(i,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}),t(function(t){return t.ScaleExp=function(e,i,n){this._scale=this.output=new t.Scale(e,i),this._exp=this.input=new t.Pow(this.defaultArg(n,2)),this._exp.connect(this._scale)},t.extend(t.ScaleExp,t.SignalBase),Object.defineProperty(t.ScaleExp.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),Object.defineProperty(t.ScaleExp.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaleExp.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),t.ScaleExp.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaleExp}),t(function(t){return window.DelayNode&&!AudioContext.prototype.createDelay&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),t.Delay=function(){var e=this.optionsObject(arguments,["delayTime","maxDelay"],t.Delay.defaults);this._delayNode=this.input=this.output=this.context.createDelay(this.toSeconds(e.maxDelay)),this.delayTime=new t.Param({param:this._delayNode.delayTime,units:t.Type.Time,value:e.delayTime}),this._readOnly("delayTime")},t.extend(t.Delay),t.Delay.defaults={maxDelay:1,delayTime:0},t.Delay.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._delayNode.disconnect(),this._delayNode=null,this._writable("delayTime"),this.delayTime=null,this},t.Delay}),t(function(t){return t.FeedbackCombFilter=function(){var e=this.optionsObject(arguments,["delayTime","resonance"],t.FeedbackCombFilter.defaults);this._delay=this.input=this.output=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._feedback,this._delay),this._readOnly(["resonance","delayTime"])},t.extend(t.FeedbackCombFilter),t.FeedbackCombFilter.defaults={delayTime:.1,resonance:.5},t.FeedbackCombFilter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["resonance","delayTime"]),this._delay.dispose(),this._delay=null,this.delayTime=null,this._feedback.dispose(),this._feedback=null,this.resonance=null,this},t.FeedbackCombFilter}),t(function(t){return t.Follower=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["attack","release"],t.Follower.defaults);this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type="lowpass",this._filter.frequency.value=0,this._filter.Q.value=-100,this._frequencyValues=new t.WaveShaper,this._sub=new t.Subtract,this._delay=new t.Delay(this.blockTime),this._mult=new t.Multiply(1e4),this._attack=e.attack,this._release=e.release,this.input.chain(this._abs,this._filter,this.output),this._abs.connect(this._sub,0,1),this._filter.chain(this._delay,this._sub),this._sub.chain(this._mult,this._frequencyValues,this._filter.frequency),this._setAttackRelease(this._attack,this._release)},t.extend(t.Follower),t.Follower.defaults={attack:.05,release:.5},t.Follower.prototype._setAttackRelease=function(e,i){var n=this.blockTime;e=t.Time(e).toFrequency(),i=t.Time(i).toFrequency(),e=Math.max(e,n),i=Math.max(i,n),this._frequencyValues.setMap(function(t){return t<=0?e:i})},Object.defineProperty(t.Follower.prototype,"attack",{get:function(){return this._attack},set:function(t){this._attack=t,this._setAttackRelease(this._attack,this._release)}}),Object.defineProperty(t.Follower.prototype,"release",{get:function(){return this._release},set:function(t){this._release=t,this._setAttackRelease(this._attack,this._release)}}),t.Follower.prototype.connect=t.Signal.prototype.connect,t.Follower.prototype.dispose=function(){return t.prototype.dispose.call(this),this._filter.disconnect(),this._filter=null,this._frequencyValues.disconnect(),this._frequencyValues=null,this._delay.dispose(),this._delay=null,this._sub.disconnect(),this._sub=null,this._abs.dispose(),this._abs=null,this._mult.dispose(),this._mult=null,this._curve=null,this},t.Follower}),t(function(t){return t.ScaledEnvelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);t.Envelope.call(this,e),e=this.defaultArg(e,t.ScaledEnvelope.defaults),this._exp=this.output=new t.Pow(e.exponent),this._scale=this.output=new t.Scale(e.min,e.max),this._sig.chain(this._exp,this._scale)},t.extend(t.ScaledEnvelope,t.Envelope),t.ScaledEnvelope.defaults={min:0,max:1,exponent:1},Object.defineProperty(t.ScaledEnvelope.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.ScaledEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaledEnvelope}),t(function(t){return t.FrequencyEnvelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);t.ScaledEnvelope.call(this,e),e=this.defaultArg(e,t.FrequencyEnvelope.defaults),this._octaves=e.octaves,this.baseFrequency=e.baseFrequency,this.octaves=e.octaves},t.extend(t.FrequencyEnvelope,t.Envelope),t.FrequencyEnvelope.defaults={baseFrequency:200,octaves:4,exponent:2},Object.defineProperty(t.FrequencyEnvelope.prototype,"baseFrequency",{get:function(){return this._scale.min},set:function(t){this._scale.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this.baseFrequency*Math.pow(2,t)}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.FrequencyEnvelope.prototype.dispose=function(){return t.ScaledEnvelope.prototype.dispose.call(this),this},t.FrequencyEnvelope}),t(function(t){return t.Gate=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["threshold","attack","release"],t.Gate.defaults);this._follower=new t.Follower(e.attack,e.release),this._gt=new t.GreaterThan(this.dbToGain(e.threshold)),this.input.connect(this.output),this.input.chain(this._gt,this._follower,this.output.gain)},t.extend(t.Gate),t.Gate.defaults={attack:.1,release:.1,threshold:-40},Object.defineProperty(t.Gate.prototype,"threshold",{get:function(){return this.gainToDb(this._gt.value)},set:function(t){this._gt.value=this.dbToGain(t)}}),Object.defineProperty(t.Gate.prototype,"attack",{get:function(){return this._follower.attack},set:function(t){this._follower.attack=t}}),Object.defineProperty(t.Gate.prototype,"release",{get:function(){return this._follower.release},set:function(t){this._follower.release=t}}),t.Gate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null,this},t.Gate}),t(function(t){return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){this.add({state:t,time:e})},t.TimelineState}),t(function(t){return t.Clock=function(){t.Emitter.call(this);var e=this.optionsObject(arguments,["callback","frequency"],t.Clock.defaults);this.callback=e.callback,this._nextTick=0,this._lastState=t.State.Stopped,this.frequency=new t.TimelineSignal(e.frequency,t.Type.Frequency),this._readOnly("frequency"),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),this.context.on("tick",this._boundLoop)},t.extend(t.Clock,t.Emitter),t.Clock.defaults={callback:t.noOp,frequency:1,lookAhead:"auto"},Object.defineProperty(t.Clock.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),t.Clock.prototype.start=function(e,i){return e=this.toSeconds(e),this._state.getValueAtTime(e)!==t.State.Started&&this._state.add({state:t.State.Started,time:e,offset:i}),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(){for(var e=this.now()+this.context.lookAhead+this.context.updateInterval+2*this.context.lag;e>this._nextTick&&this._state;){var i=this._state.getValueAtTime(this._nextTick);if(i!==this._lastState){this._lastState=i;var n=this._state.get(this._nextTick);i===t.State.Started?(this._nextTick=n.time,this.isUndef(n.offset)||(this.ticks=n.offset),this.emit("start",n.time,this.ticks)):i===t.State.Stopped?(this.ticks=0,this.emit("stop",n.time)):i===t.State.Paused&&this.emit("pause",n.time)}var s=this._nextTick;this.frequency&&(this._nextTick+=1/this.frequency.getValueAtTime(this._nextTick),i===t.State.Started&&(this.callback(s),this.ticks++))}},t.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},t.Clock.prototype.dispose=function(){t.Emitter.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},t.Clock}),t(function(t){t.IntervalTimeline=function(){this._root=null,this._length=0},t.extend(t.IntervalTimeline),t.IntervalTimeline.prototype.add=function(t){if(this.isUndef(t.time)||this.isUndef(t.duration))throw new Error("Tone.IntervalTimeline: events must have time and duration parameters");var i=new e(t.time,t.time+t.duration,t);for(null===this._root?this._root=i:this._root.insert(i),this._length++;null!==i;)i.updateHeight(),i.updateMax(),this._rebalance(i),i=i.parent;return this},t.IntervalTimeline.prototype.remove=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var i=0;i<e.length;i++){var n=e[i];if(n.event===t){this._removeNode(n),this._length--;break}}}return this},Object.defineProperty(t.IntervalTimeline.prototype,"length",{get:function(){return this._length}}),t.IntervalTimeline.prototype.cancel=function(t){return this.forEachAfter(t,function(t){this.remove(t)}.bind(this)),this},t.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},t.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},t.IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,i;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)(e=t.right).left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent=e.parent,e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(i)}t.dispose()},t.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,i=t.isLeftChild(),n=t.right;t.right=n.left,n.left=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},t.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,i=t.isLeftChild(),n=t.left;t.left=n.right,n.right=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},t.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},t.IntervalTimeline.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var i=e[0],n=1;n<e.length;n++)e[n].low>i.low&&(i=e[n]);return i.event}}return null},t.IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];null!==this._root&&this._root.traverse(function(t){e.push(t)});for(var i=0;i<e.length;i++){var n=e[i].event;n&&t(n)}}return this},t.IntervalTimeline.prototype.forEachAtTime=function(t,e){if(null!==this._root){var i=[];this._root.search(t,i);for(var n=i.length-1;n>=0;n--){var s=i[n].event;s&&e(s)}}return this},t.IntervalTimeline.prototype.forEachAfter=function(t,e){if(null!==this._root){var i=[];this._root.searchAfter(t,i);for(var n=i.length-1;n>=0;n--){var s=i[n].event;s&&e(s)}}return this},t.IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse(function(e){t.push(e)});for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var e=function(t,e,i){this.event=i,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};return e.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},e.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},e.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},e.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},e.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},e.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},e.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},e.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),e.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t.IntervalTimeline}),t(function(t){t.Transport=function(){t.Emitter.call(this),this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=e.defaults.PPQ,this._clock=new t.Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=t.Type.BPM,this.bpm.value=e.defaults.bpm,this._readOnly("bpm"),this._timeSignature=e.defaults.timeSignature,this._scheduledEvents={},this._eventID=0,this._timeline=new t.Timeline,this._repeatedEvents=new t.IntervalTimeline,this._onceEvents=new t.Timeline,this._syncedSignals=[],this._swingTicks=e.defaults.PPQ/2,this._swingAmount=0},t.extend(t.Transport,t.Emitter),t.Transport.defaults={bpm:120,swing:0,swingSubdivision:"8n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:192},t.Transport.prototype._processTick=function(e){var i=this._clock.ticks;if(this._swingAmount>0&&i%this._ppq!=0&&i%(2*this._swingTicks)!=0){var n=i%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(n*Math.PI)*this._swingAmount;e+=t.Time(2*this._swingTicks/3,"i")*s}this.loop&&i===this._loopEnd&&(this.emit("loopEnd",e),this._clock.ticks=this._loopStart,i=this._loopStart,this.emit("loopStart",e,this.seconds),this.emit("loop",e)),this._onceEvents.forEachBefore(i,function(t){t.callback(e),delete this._scheduledEvents[t.id.toString()]}.bind(this)),this._onceEvents.cancelBefore(i),this._timeline.forEachAtTime(i,function(t){t.callback(e)}),this._repeatedEvents.forEachAtTime(i,function(t){(i-t.time)%t.interval==0&&t.callback(e)})},t.Transport.prototype.schedule=function(t,e){var i={time:this.toTicks(e),callback:t},n=this._eventID++;return this._scheduledEvents[n.toString()]={event:i,timeline:this._timeline},this._timeline.add(i),n},t.Transport.prototype.scheduleRepeat=function(t,e,i,n){if(e<=0)throw new Error("Tone.Transport: repeat events must have an interval larger than 0");var s={time:this.toTicks(i),duration:this.toTicks(this.defaultArg(n,1/0)),interval:this.toTicks(e),callback:t},o=this._eventID++;return this._scheduledEvents[o.toString()]={event:s,timeline:this._repeatedEvents},this._repeatedEvents.add(s),o},t.Transport.prototype.scheduleOnce=function(t,e){var i=this._eventID++,n={time:this.toTicks(e),callback:t,id:i};return this._scheduledEvents[i.toString()]={event:n,timeline:this._onceEvents},this._onceEvents.add(n),i},t.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),delete this._scheduledEvents[t.toString()]}return this},t.Transport.prototype.cancel=function(t){return t=this.defaultArg(t,0),t=this.toTicks(t),this._timeline.cancel(t),this._onceEvents.cancel(t),this._repeatedEvents.cancel(t),this},t.Transport.prototype._bindClockEvents=function(){this._clock.on("start",function(e,i){i=t.Time(this._clock.ticks,"i").toSeconds(),this.emit("start",e,i)}.bind(this)),this._clock.on("stop",function(t){this.emit("stop",t)}.bind(this)),this._clock.on("pause",function(t){this.emit("pause",t)}.bind(this))},Object.defineProperty(t.Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),t.Transport.prototype.start=function(t,e){return this.isUndef(e)||(e=this.toTicks(e)),this._clock.start(t,e),this},t.Transport.prototype.stop=function(t){return this._clock.stop(t),this},t.Transport.prototype.pause=function(t){return this._clock.pause(t),this},Object.defineProperty(t.Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){this.isArray(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}}),Object.defineProperty(t.Transport.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),t.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Transport.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(t.Transport.prototype,"swingSubdivision",{get:function(){return t.Time(this._swingTicks,"i").toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"position",{get:function(){return t.TransportTime(this.ticks,"i").toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"seconds",{get:function(){return t.TransportTime(this.ticks,"i").toSeconds()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"progress",{get:function(){return this.loop?(this.ticks-this._loopStart)/(this._loopEnd-this._loopStart):0}}),Object.defineProperty(t.Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(e){if(this._clock.ticks!==e){var i=this.now();this.state===t.State.Started?(this.emit("stop",i),this._clock.ticks=e,this.emit("start",i,this.seconds)):this._clock.ticks=e}}}),Object.defineProperty(t.Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),Object.defineProperty(t.Transport.prototype,"latencyHint",{get:function(){return t.Clock.latencyHint},set:function(e){t.Clock.latencyHint=e}}),t.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},t.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},t.Transport.prototype.nextSubdivision=function(e){e=this.toSeconds(e);var i;if(this.state!==t.State.Started)return 0;i=this._clock._nextTick;var n=e-t.Time(this.ticks,"i")%e;return 0===n&&(n=e),i+n},t.Transport.prototype.syncSignal=function(e,i){i||(i=0!==e._param.value?e._param.value/this.bpm._param.value:0);var n=new t.Gain(i);return this.bpm.chain(n,e._param),this._syncedSignals.push({ratio:n,signal:e,initial:e._param.value}),e._param.value=0,this},t.Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal._param.value=i.initial,this._syncedSignals.splice(e,1))}return this},t.Transport.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._onceEvents.dispose(),this._onceEvents=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var e=t.Transport;return t.Transport=new e,t.Context.on("init",function(i){i.Transport instanceof e?t.Transport=i.Transport:(t.Transport=new e,i.Transport=t.Transport)}),t.Transport}),t(function(t){return t.Volume=function(){var e=this.optionsObject(arguments,["volume"],t.Volume.defaults);this.output=this.input=new t.Gain(e.volume,t.Type.Decibels),this._unmutedVolume=e.volume,this.volume=this.output.gain,this._readOnly("volume"),this.mute=e.mute},t.extend(t.Volume),t.Volume.defaults={volume:0,mute:!1},Object.defineProperty(t.Volume.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}}),t.Volume.prototype.dispose=function(){return this.input.dispose(),t.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this},t.Volume}),t(function(t){t.Master=function(){this.createInsOuts(1,1),this._volume=this.output=new t.Volume,this.volume=this._volume.volume,this._readOnly("volume"),this.input.chain(this.output,this.context.destination)},t.extend(t.Master),t.Master.defaults={volume:0,mute:!1},Object.defineProperty(t.Master.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.Master.prototype.dispose=function(){t.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},t.prototype.toMaster=function(){return this.connect(t.Master),this},AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this};var e=t.Master;return t.Master=new e,t.Context.on("init",function(i){i.Master instanceof e?t.Master=i.Master:t.Master=new e,i.Master=t.Master}),t.Master}),t(function(t){return t.Source=function(e){e=this.defaultArg(e,t.Source.defaults),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new t.TimelineState(t.State.Stopped),this._state.memory=10,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=e.mute},t.extend(t.Source),t.Source.defaults={volume:0,mute:!1},Object.defineProperty(t.Source.prototype,"state",{get:function(){return this._synced?t.Transport.state===t.State.Started?this._state.getValueAtTime(t.Transport.seconds):t.State.Stopped:this._state.getValueAtTime(this.now())}}),Object.defineProperty(t.Source.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Source.prototype._start=t.noOp,t.Source.prototype._stop=t.noOp,t.Source.prototype.start=function(e,i,n){if(e=this.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this.retrigger||this._state.getValueAtTime(e)!==t.State.Started||this.stop(e),this._state.setStateAtTime(t.State.Started,e),this._synced){var s=this._state.get(e);s.offset=this.defaultArg(i,0),s.duration=n;var o=t.Transport.schedule(function(t){this._start(t,i,n)}.bind(this),e);this._scheduled.push(o)}else this._start.apply(this,arguments);return this},t.Source.prototype.stop=function(e){if(e=this.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this._synced){var i=t.Transport.schedule(this._stop.bind(this),e);this._scheduled.push(i)}else this._stop.apply(this,arguments);return this},t.Source.prototype.sync=function(){return this._synced=!0,t.Transport.on("start loopStart",function(e,i){if(i>0){var n=this._state.get(i);if(n&&n.state===t.State.Started&&n.time!==i){var s,o=i-this.toSeconds(n.time);n.duration&&(s=this.toSeconds(n.duration)-o),this._start(e,this.toSeconds(n.offset)+o,s)}}}.bind(this)),t.Transport.on("stop pause loopEnd",function(e){this._state.getValueAtTime(t.Transport.seconds)===t.State.Started&&this._stop(e)}.bind(this)),this},t.Source.prototype.unsync=function(){this._synced=!1,t.Transport.off("start stop pause loopEnd loopStart");for(var e=0;e<this._scheduled.length;e++){var i=this._scheduled[e];t.Transport.clear(i)}return this._scheduled=[],this._state.cancel(0),this},t.Source.prototype.dispose=function(){t.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null},t.Source}),t(function(t){return window.OscillatorNode&&!OscillatorNode.prototype.start&&(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn,OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff,OscillatorNode.prototype.setPeriodicWave||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioContext.prototype.createPeriodicWave||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable)),t.Oscillator=function(){var e=this.optionsObject(arguments,["frequency","type"],t.Oscillator.defaults);t.Source.call(this,e),this._oscillator=null,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._wave=null,this._partials=this.defaultArg(e.partials,[1]),this._phase=e.phase,this._type=null,this.type=e.type,this.phase=this._phase,this._readOnly(["frequency","detune"])},t.extend(t.Oscillator,t.Source),t.Oscillator.defaults={type:"sine",frequency:440,detune:0,phase:0,partials:[]},t.Oscillator.Type={Sine:"sine",Triangle:"triangle",Sawtooth:"sawtooth",Square:"square",Custom:"custom"},t.Oscillator.prototype._start=function(t){this._oscillator=this.context.createOscillator(),this._oscillator.setPeriodicWave(this._wave),this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(this.toSeconds(t))},t.Oscillator.prototype._stop=function(t){return this._oscillator&&(this._oscillator.stop(this.toSeconds(t)),this._oscillator=null),this},t.Oscillator.prototype.syncFrequency=function(){return t.Transport.syncSignal(this.frequency),this},t.Oscillator.prototype.unsyncFrequency=function(){return t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Oscillator.prototype,"type",{get:function(){return this._type},set:function(t){var e=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e[0],e[1]);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),this._type=t}}),t.Oscillator.prototype._getRealImaginary=function(e,i){var n=2048,s=new Float32Array(n),o=new Float32Array(n),r=1;if(e===t.Oscillator.Type.Custom)n=r=this._partials.length+1;else{var a=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);a&&(r=parseInt(a[2])+1,e=a[1],n=r=Math.max(r,2))}for(var h=1;h<n;++h){var l,u=2/(h*Math.PI);switch(e){case t.Oscillator.Type.Sine:l=h<=r?1:0;break;case t.Oscillator.Type.Square:l=1&h?2*u:0;break;case t.Oscillator.Type.Sawtooth:l=u*(1&h?1:-1);break;case t.Oscillator.Type.Triangle:l=1&h?u*u*2*(h-1>>1&1?-1:1):0;break;case t.Oscillator.Type.Custom:l=this._partials[h-1];break;default:throw new TypeError("Tone.Oscillator: invalid type: "+e)}0!==l?(s[h]=-l*Math.sin(i*h),o[h]=l*Math.cos(i*h)):(s[h]=0,o[h]=0)}return[s,o]},t.Oscillator.prototype._inverseFFT=function(t,e,i){for(var n=0,s=t.length,o=0;o<s;o++)n+=t[o]*Math.cos(o*i)+e[o]*Math.sin(o*i);return n},t.Oscillator.prototype._getInitialValue=function(){for(var t=this._getRealImaginary(this._type,0),e=t[0],i=t[1],n=0,s=2*Math.PI,o=0;o<8;o++)n=Math.max(this._inverseFFT(e,i,o/8*s),n);return-this._inverseFFT(e,i,this._phase)/n},Object.defineProperty(t.Oscillator.prototype,"partials",{get:function(){return this._type!==t.Oscillator.Type.Custom?[]:this._partials},set:function(e){this._partials=e,this.type=t.Oscillator.Type.Custom}}),Object.defineProperty(t.Oscillator.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),t.Oscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.disconnect(),this._oscillator=null),this._wave=null,this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._partials=null,this},t.Oscillator}),t(function(t){return t.Zero=function(){this._gain=this.input=this.output=new t.Gain,this.context.getConstant(0).connect(this._gain)},t.extend(t.Zero),t.Zero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gain.dispose(),this._gain=null,this},t.Zero}),t(function(t){return t.LFO=function(){var e=this.optionsObject(arguments,["frequency","min","max"],t.LFO.defaults);this._oscillator=new t.Oscillator({frequency:e.frequency,type:e.type}),this.frequency=this._oscillator.frequency,this.amplitude=this._oscillator.volume,this.amplitude.units=t.Type.NormalRange,this.amplitude.value=e.amplitude,this._stoppedSignal=new t.Signal(0,t.Type.AudioRange),this._zeros=new t.Zero,this._stoppedValue=0,this._a2g=new t.AudioToGain,this._scaler=this.output=new t.Scale(e.min,e.max),this._units=t.Type.Default,this.units=e.units,this._oscillator.chain(this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),this._readOnly(["amplitude","frequency"]),this.phase=e.phase},t.extend(t.LFO,t.Oscillator),t.LFO.defaults={type:"sine",min:0,max:1,phase:0,frequency:"4n",amplitude:1,units:t.Type.Default},t.LFO.prototype.start=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this},t.LFO.prototype.stop=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this},t.LFO.prototype.sync=function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this},t.LFO.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(t.LFO.prototype,"min",{get:function(){return this._toUnits(this._scaler.min)},set:function(t){t=this._fromUnits(t),this._scaler.min=t}}),Object.defineProperty(t.LFO.prototype,"max",{get:function(){return this._toUnits(this._scaler.max)},set:function(t){t=this._fromUnits(t),this._scaler.max=t}}),Object.defineProperty(t.LFO.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"units",{get:function(){return this._units},set:function(t){var e=this.min,i=this.max;this._units=t,this.min=e,this.max=i}}),Object.defineProperty(t.LFO.prototype,"mute",{get:function(){return this._oscillator.mute},set:function(t){this._oscillator.mute=t}}),Object.defineProperty(t.LFO.prototype,"state",{get:function(){return this._oscillator.state}}),t.LFO.prototype.connect=function(e){return e.constructor!==t.Signal&&e.constructor!==t.Param&&e.constructor!==t.TimelineSignal||(this.convert=e.convert,this.units=e.units),t.Signal.prototype.connect.apply(this,arguments),this},t.LFO.prototype._fromUnits=t.Param.prototype._fromUnits,t.LFO.prototype._toUnits=t.Param.prototype._toUnits,t.LFO.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["amplitude","frequency"]),this._oscillator.dispose(),this._oscillator=null,this._stoppedSignal.dispose(),this._stoppedSignal=null,this._zeros.dispose(),this._zeros=null,this._scaler.dispose(),this._scaler=null,this._a2g.dispose(),this._a2g=null,this.frequency=null,this.amplitude=null,this},t.LFO}),t(function(t){return t.Limiter=function(){var e=this.optionsObject(arguments,["threshold"],t.Limiter.defaults);this._compressor=this.input=this.output=new t.Compressor({attack:.001,decay:.001,threshold:e.threshold}),this.threshold=this._compressor.threshold,this._readOnly("threshold")},t.extend(t.Limiter),t.Limiter.defaults={threshold:-12},t.Limiter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._compressor.dispose(),this._compressor=null,this._writable("threshold"),this.threshold=null,this},t.Limiter}),t(function(t){return t.LowpassCombFilter=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["delayTime","resonance","dampening"],t.LowpassCombFilter.defaults);this._delay=this.input=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._lowpass=this.output=this.context.createBiquadFilter(),this._lowpass.Q.value=-3.0102999566398125,this._lowpass.type="lowpass",this.dampening=new t.Param({param:this._lowpass.frequency,units:t.Type.Frequency,value:e.dampening}),this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._lowpass,this._feedback,this._delay),this._readOnly(["dampening","resonance","delayTime"])},t.extend(t.LowpassCombFilter),t.LowpassCombFilter.defaults={delayTime:.1,resonance:.5,dampening:3e3},t.LowpassCombFilter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["dampening","resonance","delayTime"]),this.dampening.dispose(),this.dampening=null,this.resonance.dispose(),this.resonance=null,this._delay.dispose(),this._delay=null,this.delayTime=null,this._lowpass.disconnect(),this._lowpass=null,this._feedback.disconnect(),this._feedback=null,this},t.LowpassCombFilter}),t(function(t){return t.Merge=function(){this.createInsOuts(2,0),this.left=this.input[0]=new t.Gain,this.right=this.input[1]=new t.Gain,this._merger=this.output=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1),this.left.channelCount=1,this.right.channelCount=1,this.left.channelCountMode="explicit",this.right.channelCountMode="explicit"},t.extend(t.Merge),t.Merge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._merger.disconnect(),this._merger=null,this},t.Merge}),t(function(t){return t.Meter=function(){var e=this.optionsObject(arguments,["type","smoothing"],t.Meter.defaults);this.type=e.type,this.input=this.output=this._analyser=new t.Analyser("waveform",512),this._analyser.returnType="float",this.smoothing=e.smoothing,this._lastValue=0},t.extend(t.Meter),t.Meter.Type={Level:"level",Signal:"signal"},t.Meter.defaults={smoothing:.8,type:t.Meter.Type.Level},Object.defineProperty(t.Meter.prototype,"value",{get:function(){var e=this._analyser.analyse();if(this.type===t.Meter.Type.Level){for(var i=0,n=0;n<e.length;n++)i+=Math.pow(e[n],2);var s=Math.sqrt(i/e.length);s=Math.max(s,this._lastValue*this.smoothing),this._lastValue=s;var o=s/.35;return Math.sqrt(o)}return e[0]}}),t.Meter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null,this},t.Meter}),t(function(t){return t.Split=function(){this.createInsOuts(0,2),this._splitter=this.input=this.context.createChannelSplitter(2),this.left=this.output[0]=new t.Gain,this.right=this.output[1]=new t.Gain,this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split),t.Split.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.disconnect(),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._splitter=null,this},t.Split}),t(function(t){return t.MidSideSplit=function(){this.createInsOuts(0,2),this._split=this.input=new t.Split,this.mid=this.output[0]=new t.Expr("($0 + $1) * $2"),this.side=this.output[1]=new t.Expr("($0 - $1) * $2"),this._split.connect(this.mid,0,0),this._split.connect(this.mid,1,1),this._split.connect(this.side,0,0),this._split.connect(this.side,1,1),this.context.getConstant(Math.SQRT1_2).connect(this.mid,0,2),this.context.getConstant(Math.SQRT1_2).connect(this.side,0,2)},t.extend(t.MidSideSplit),t.MidSideSplit.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._split.dispose(),this._split=null,this},t.MidSideSplit}),t(function(t){return t.MidSideMerge=function(){this.createInsOuts(2,0),this.mid=this.input[0]=new t.Gain,this._left=new t.Expr("($0 + $1) * $2"),this.side=this.input[1]=new t.Gain,this._right=new t.Expr("($0 - $1) * $2"),this._merge=this.output=new t.Merge,this.mid.connect(this._left,0,0),this.side.connect(this._left,0,1),this.mid.connect(this._right,0,0),this.side.connect(this._right,0,1),this._left.connect(this._merge,0,0),this._right.connect(this._merge,0,1),this.context.getConstant(Math.SQRT1_2).connect(this._left,0,2),this.context.getConstant(Math.SQRT1_2).connect(this._right,0,2)},t.extend(t.MidSideMerge),t.MidSideMerge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._left.dispose(),this._left=null,this._right.dispose(),this._right=null,this._merge.dispose(),this._merge=null,this},t.MidSideMerge}),t(function(t){return t.MidSideCompressor=function(e){e=this.defaultArg(e,t.MidSideCompressor.defaults),this._midSideSplit=this.input=new t.MidSideSplit,this._midSideMerge=this.output=new t.MidSideMerge,this.mid=new t.Compressor(e.mid),this.side=new t.Compressor(e.side),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),this._readOnly(["mid","side"])},t.extend(t.MidSideCompressor),t.MidSideCompressor.defaults={mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}},t.MidSideCompressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["mid","side"]),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this},t.MidSideCompressor}),t(function(t){return t.Mono=function(){this.createInsOuts(1,0),this._merge=this.output=new t.Merge,this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1),this.input.gain.value=this.dbToGain(-10)},t.extend(t.Mono),t.Mono.prototype.dispose=function(){return t.prototype.dispose.call(this),this._merge.dispose(),this._merge=null,this},t.Mono}),t(function(t){return t.MultibandCompressor=function(e){e=this.defaultArg(arguments,t.MultibandCompressor.defaults),this._splitter=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new t.Gain,this.low=new t.Compressor(e.low),this.mid=new t.Compressor(e.mid),this.high=new t.Compressor(e.high),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandCompressor),t.MultibandCompressor.defaults={low:t.Compressor.defaults,mid:t.Compressor.defaults,high:t.Compressor.defaults,lowFrequency:250,highFrequency:2e3},t.MultibandCompressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.dispose(),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this._splitter=null,this.low=null,this.mid=null,this.high=null,this.lowFrequency=null,this.highFrequency=null,this},t.MultibandCompressor}),t(function(t){return t.Panner=function(e){this._hasStereoPanner?(this._panner=this.input=this.output=this.context.createStereoPanner(),this.pan=this._panner.pan):(this._crossFade=new t.CrossFade,this._merger=this.output=new t.Merge,this._splitter=this.input=new t.Split,this.pan=new t.Signal(0,t.Type.AudioRange),this._zero=new t.Zero,this._a2g=new t.AudioToGain,this._zero.connect(this._a2g),this.pan.chain(this._a2g,this._crossFade.fade),this._splitter.connect(this._crossFade,0,0),this._splitter.connect(this._crossFade,1,1),this._crossFade.a.connect(this._merger,0,0),this._crossFade.b.connect(this._merger,0,1)),this.pan.value=this.defaultArg(e,0),this._readOnly("pan")},t.extend(t.Panner),t.Panner.prototype._hasStereoPanner=t.prototype.isFunction(t.context.createStereoPanner),t.Panner.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("pan"),this._hasStereoPanner?(this._panner.disconnect(),this._panner=null,this.pan=null):(this._zero.dispose(),this._zero=null,this._crossFade.dispose(),this._crossFade=null,this._splitter.dispose(),this._splitter=null,this._merger.dispose(),this._merger=null,this.pan.dispose(),this.pan=null,this._a2g.dispose(),this._a2g=null),this},t.Panner}),t(function(t){return t.Panner3D=function(){var e=this.optionsObject(arguments,["positionX","positionY","positionZ"],t.Panner3D.defaults);this._panner=this.input=this.output=this.context.createPanner(),this._panner.panningModel=e.panningModel,this._panner.maxDistance=e.maxDistance,this._panner.distanceModel=e.distanceModel,this._panner.coneOuterGain=e.coneOuterGain,this._panner.coneOuterAngle=e.coneOuterAngle,this._panner.coneInnerAngle=e.coneInnerAngle,this._panner.refDistance=e.refDistance,this._panner.rolloffFactor=e.rolloffFactor,this._orientation=[e.orientationX,e.orientationY,e.orientationZ],this._position=[e.positionX,e.positionY,e.positionZ],this.orientationX=e.orientationX,this.orientationY=e.orientationY,this.orientationZ=e.orientationZ,this.positionX=e.positionX,this.positionY=e.positionY,this.positionZ=e.positionZ},t.extend(t.Panner3D),t.Panner3D.defaults={positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",maxDistance:1e4,distanceModel:"inverse",coneOuterGain:0,coneOuterAngle:360,coneInnerAngle:360,refDistance:1,rolloffFactor:1},t.Panner3D.prototype._rampTimeConstant=.01,t.Panner3D.prototype.setPosition=function(t,e,i){if(this._panner.positionX){var n=this.now();this._panner.positionX.setTargetAtTime(t,n,this._rampTimeConstant),this._panner.positionY.setTargetAtTime(e,n,this._rampTimeConstant),this._panner.positionZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this._panner.setPosition(t,e,i);return this._position=Array.prototype.slice.call(arguments),this},t.Panner3D.prototype.setOrientation=function(t,e,i){if(this._panner.orientationX){var n=this.now();this._panner.orientationX.setTargetAtTime(t,n,this._rampTimeConstant),this._panner.orientationY.setTargetAtTime(e,n,this._rampTimeConstant),this._panner.orientationZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this._panner.setOrientation(t,e,i);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Panner3D.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Panner3D.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Panner3D.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Panner3D.prototype,"orientationX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Panner3D.prototype,"orientationY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Panner3D.prototype,"orientationZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),t.Panner3D._aliasProperty=function(e){Object.defineProperty(t.Panner3D.prototype,e,{set:function(t){this._panner[e]=t},get:function(){return this._panner[e]}})},t.Panner3D._aliasProperty("panningModel"),t.Panner3D._aliasProperty("refDistance"),t.Panner3D._aliasProperty("rolloffFactor"),t.Panner3D._aliasProperty("distanceModel"),t.Panner3D._aliasProperty("coneInnerAngle"),t.Panner3D._aliasProperty("coneOuterAngle"),t.Panner3D._aliasProperty("coneOuterGain"),t.Panner3D._aliasProperty("maxDistance"),t.Panner3D.prototype.dispose=function(){return this._panner.disconnect(),this._panner=null,this._orientation=null,this._position=null,this},t.Panner3D}),t(function(t){return t.PanVol=function(){var e=this.optionsObject(arguments,["pan","volume"],t.PanVol.defaults);this._panner=this.input=new t.Panner(e.pan),this.pan=this._panner.pan,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._panner.connect(this._volume),this._readOnly(["pan","volume"])},t.extend(t.PanVol),t.PanVol.defaults={pan:.5,volume:0},t.PanVol.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["pan","volume"]),this._panner.dispose(),this._panner=null,this.pan=null,this._volume.dispose(),this._volume=null,this.volume=null,this},t.PanVol}),t(function(t){return t.CtrlInterpolate=function(){var e=this.optionsObject(arguments,["values","index"],t.CtrlInterpolate.defaults);this.values=e.values,this.index=e.index},t.extend(t.CtrlInterpolate),t.CtrlInterpolate.defaults={index:0,values:[]},Object.defineProperty(t.CtrlInterpolate.prototype,"value",{get:function(){var t=this.index;t=Math.min(t,this.values.length-1);var e=Math.floor(t),i=this.values[e],n=this.values[Math.ceil(t)];return this._interpolate(t-e,i,n)}}),t.CtrlInterpolate.prototype._interpolate=function(t,e,i){if(this.isArray(e)){for(var n=[],s=0;s<e.length;s++)n[s]=this._interpolate(t,e[s],i[s]);return n}if(this.isObject(e)){var o={};for(var r in e)o[r]=this._interpolate(t,e[r],i[r]);return o}return e=this._toNumber(e),i=this._toNumber(i),(1-t)*e+t*i},t.CtrlInterpolate.prototype._toNumber=function(t){return this.isNumber(t)?t:this.toSeconds(t)},t.CtrlInterpolate.prototype.dispose=function(){this.values=null},t.CtrlInterpolate}),t(function(t){return t.CtrlMarkov=function(t,e){this.values=this.defaultArg(t,{}),this.value=this.defaultArg(e,Object.keys(this.values)[0])},t.extend(t.CtrlMarkov),t.CtrlMarkov.prototype.next=function(){if(this.values.hasOwnProperty(this.value)){var t=this.values[this.value];if(this.isArray(t))for(var e=this._getProbDistribution(t),i=Math.random(),n=0,s=0;s<e.length;s++){var o=e[s];if(i>n&&i<n+o){var r=t[s];this.isObject(r)?this.value=r.value:this.value=r}n+=o}else this.value=t}return this.value},t.CtrlMarkov.prototype._getProbDistribution=function(t){for(var e=[],i=0,n=!1,s=0;s<t.length;s++){var o=t[s];this.isObject(o)?(n=!0,e[s]=o.probability):e[s]=1/t.length,i+=e[s]}if(n)for(var r=0;r<e.length;r++)e[r]=e[r]/i;return e},t.CtrlMarkov.prototype.dispose=function(){this.values=null},t.CtrlMarkov}),t(function(t){return t.CtrlPattern=function(){var e=this.optionsObject(arguments,["values","type"],t.CtrlPattern.defaults);this.values=e.values,this.index=0,this._type=null,this._shuffled=null,this._direction=null,this.type=e.type},t.extend(t.CtrlPattern),t.CtrlPattern.Type={Up:"up",Down:"down",UpDown:"upDown",DownUp:"downUp",AlternateUp:"alternateUp",AlternateDown:"alternateDown",Random:"random",RandomWalk:"randomWalk",RandomOnce:"randomOnce"},t.CtrlPattern.defaults={type:t.CtrlPattern.Type.Up,values:[]},Object.defineProperty(t.CtrlPattern.prototype,"value",{get:function(){if(0!==this.values.length){if(1===this.values.length)return this.values[0];this.index=Math.min(this.index,this.values.length-1);var e=this.values[this.index];return this.type===t.CtrlPattern.Type.RandomOnce&&(this.values.length!==this._shuffled.length&&this._shuffleValues(),e=this.values[this._shuffled[this.index]]),e}}}),Object.defineProperty(t.CtrlPattern.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._shuffled=null,this._type===t.CtrlPattern.Type.Up||this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.RandomOnce||this._type===t.CtrlPattern.Type.AlternateUp?this.index=0:this._type!==t.CtrlPattern.Type.Down&&this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this.index=this.values.length-1),this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.AlternateUp?this._direction=t.CtrlPattern.Type.Up:this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this._direction=t.CtrlPattern.Type.Down),this._type===t.CtrlPattern.Type.RandomOnce?this._shuffleValues():this._type===t.CtrlPattern.Random&&(this.index=Math.floor(Math.random()*this.values.length))}}),t.CtrlPattern.prototype.next=function(){var e=this.type;return e===t.CtrlPattern.Type.Up?++this.index>=this.values.length&&(this.index=0):e===t.CtrlPattern.Type.Down?--this.index<0&&(this.index=this.values.length-1):e===t.CtrlPattern.Type.UpDown||e===t.CtrlPattern.Type.DownUp?(this._direction===t.CtrlPattern.Type.Up?this.index++:this.index--,this.index<0?(this.index=1,this._direction=t.CtrlPattern.Type.Up):this.index>=this.values.length&&(this.index=this.values.length-2,this._direction=t.CtrlPattern.Type.Down)):e===t.CtrlPattern.Type.Random?this.index=Math.floor(Math.random()*this.values.length):e===t.CtrlPattern.Type.RandomWalk?Math.random()<.5?(this.index--,this.index=Math.max(this.index,0)):(this.index++,this.index=Math.min(this.index,this.values.length-1)):e===t.CtrlPattern.Type.RandomOnce?++this.index>=this.values.length&&(this.index=0,this._shuffleValues()):e===t.CtrlPattern.Type.AlternateUp?(this._direction===t.CtrlPattern.Type.Up?(this.index+=2,this._direction=t.CtrlPattern.Type.Down):(this.index-=1,this._direction=t.CtrlPattern.Type.Up),this.index>=this.values.length&&(this.index=0,this._direction=t.CtrlPattern.Type.Up)):e===t.CtrlPattern.Type.AlternateDown&&(this._direction===t.CtrlPattern.Type.Up?(this.index+=1,this._direction=t.CtrlPattern.Type.Down):(this.index-=2,this._direction=t.CtrlPattern.Type.Up),this.index<0&&(this.index=this.values.length-1,this._direction=t.CtrlPattern.Type.Down)),this.value},t.CtrlPattern.prototype._shuffleValues=function(){var t=[];this._shuffled=[];for(var e=0;e<this.values.length;e++)t[e]=e;for(;t.length>0;){var i=t.splice(Math.floor(t.length*Math.random()),1);this._shuffled.push(i[0])}},t.CtrlPattern.prototype.dispose=function(){this._shuffled=null,this.values=null},t.CtrlPattern}),t(function(t){return t.CtrlRandom=function(){var e=this.optionsObject(arguments,["min","max"],t.CtrlRandom.defaults);this.min=e.min,this.max=e.max,this.integer=e.integer},t.extend(t.CtrlRandom),t.CtrlRandom.defaults={min:0,max:1,integer:!1},Object.defineProperty(t.CtrlRandom.prototype,"value",{get:function(){var t=this.toSeconds(this.min),e=this.toSeconds(this.max),i=Math.random(),n=i*t+(1-i)*e;return this.integer&&(n=Math.floor(n)),n}}),t.CtrlRandom}),t(function(t){return window.AudioBuffer&&!AudioBuffer.prototype.copyToChannel&&(AudioBuffer.prototype.copyToChannel=function(t,e,i){var n=this.getChannelData(e);i=i||0;for(var s=0;s<n.length;s++)n[s+i]=t[s]},AudioBuffer.prototype.copyFromChannel=function(t,e,i){var n=this.getChannelData(e);i=i||0;for(var s=0;s<n.length;s++)t[s]=n[s+i]}),t.Buffer=function(){var e=this.optionsObject(arguments,["url","onload","onerror"],t.Buffer.defaults);this._buffer=null,this._reversed=e.reverse,this._xhr=null,e.url instanceof AudioBuffer||e.url instanceof t.Buffer?(this.set(e.url),e.onload&&e.onload(this)):this.isString(e.url)&&this.load(e.url,e.onload,e.onerror)},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,reverse:!1},t.Buffer.prototype.set=function(e){return e instanceof t.Buffer?this._buffer=e.get():this._buffer=e,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,i,n){return new Promise(function(s,o){this._xhr=t.Buffer.load(e,function(t){this._xhr=null,this.set(t),s(this),i&&i(this)}.bind(this),function(t){this._xhr=null,o(t),n&&n(t)}.bind(this))}.bind(this))},t.Buffer.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._buffer=null,this._xhr&&(t.Buffer._currentDownloads--,this._xhr.abort(),this._xhr=null),this},Object.defineProperty(t.Buffer.prototype,"loaded",{get:function(){return this.length>0}}),Object.defineProperty(t.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(t.Buffer.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(t.Buffer.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),t.Buffer.prototype.fromArray=function(t){var e=t[0].length>0,i=e?t.length:1,n=e?t[0].length:t.length,s=this.context.createBuffer(i,n,this.context.sampleRate);e||1!==i||(t=[t]);for(var o=0;o<i;o++)s.copyToChannel(t[o],o);return this._buffer=s,this},t.Buffer.prototype.toMono=function(t){if(this.isNumber(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),i=this.numberOfChannels,n=0;n<i;n++)for(var s=this.toArray(n),o=0;o<s.length;o++)e[o]+=s[o];e=e.map(function(t){return t/i}),this.fromArray(e)}return this},t.Buffer.prototype.toArray=function(t){if(this.isNumber(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],i=0;i<this.numberOfChannels;i++)e[i]=this.getChannelData(i);return e},t.Buffer.prototype.getChannelData=function(t){return this._buffer.getChannelData(t)},t.Buffer.prototype.slice=function(e,i){i=this.defaultArg(i,this.duration);for(var n=Math.floor(this.context.sampleRate*this.toSeconds(e)),s=Math.floor(this.context.sampleRate*this.toSeconds(i)),o=[],r=0;r<this.numberOfChannels;r++)o[r]=this.toArray(r).slice(n,s);return(new t.Buffer).fromArray(o)},t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Emitter.mixin(t.Buffer),t.Buffer._downloadQueue=[],t.Buffer._currentDownloads=0,t.Buffer.baseUrl="",t.Buffer.load=function(e,i,n){function s(e){if(!n)throw new Error(e);n(e),t.Buffer.emit("error",e)}function o(){for(var e=0,i=0;i<t.Buffer._downloadQueue.length;i++)e+=t.Buffer._downloadQueue[i].progress;t.Buffer.emit("progress",e/t.Buffer._downloadQueue.length)}i=i||t.noOp;var r=new XMLHttpRequest;return r.open("GET",t.Buffer.baseUrl+e,!0),r.responseType="arraybuffer",r.progress=0,t.Buffer._currentDownloads++,t.Buffer._downloadQueue.push(r),r.addEventListener("load",function(){200===r.status?t.context.decodeAudioData(r.response,function(e){r.progress=1,o(),i(e),0===--t.Buffer._currentDownloads&&(t.Buffer._downloadQueue=[],t.Buffer.emit("load"))},function(){s("Tone.Buffer: could not decode audio data: "+e)}):s("Tone.Buffer: could not locate file: "+e)}),r.addEventListener("error",s),r.addEventListener("progress",function(t){t.lengthComputable&&(r.progress=t.loaded/t.total*.95,o())}),r.send(),r},t.Buffer.cancelDownloads=function(){return t.Buffer._downloadQueue.forEach(function(t){t.abort()}),t.Buffer._currentDownloads=0,t.Buffer},t.Buffer.supportsType=function(t){var e=t.split(".");return e=e[e.length-1],""!==document.createElement("audio").canPlayType("audio/"+e)},t.loaded=function(){function e(){t.Buffer.off("load",i),t.Buffer.off("error",n)}var i,n;return new Promise(function(e,s){i=function(){e()},n=function(){s()},t.Buffer.on("load",i),t.Buffer.on("error",n)}).then(e).catch(function(t){throw e(),new Error(t)})},t.Buffer}),t(function(t){return t.Buffers=function(t,e,i){this._buffers={},this.baseUrl=this.defaultArg(i,""),t=this._flattenUrls(t),this._loadingCount=0;for(var n in t)this._loadingCount++,this.add(n,t[n],this._bufferLoaded.bind(this,e))},t.extend(t.Buffers),t.Buffers.prototype.has=function(t){return this._buffers.hasOwnProperty(t)},t.Buffers.prototype.get=function(t){if(this.has(t))return this._buffers[t];throw new Error("Tone.Buffers: no buffer named "+t)},t.Buffers.prototype._bufferLoaded=function(t){0===--this._loadingCount&&t&&t(this)},Object.defineProperty(t.Buffers.prototype,"loaded",{get:function(){var t=!0;for(var e in this._buffers){var i=this.get(e);t=t&&i.loaded}return t}}),t.Buffers.prototype.add=function(e,i,n){return n=this.defaultArg(n,t.noOp),i instanceof t.Buffer?(this._buffers[e]=i,n(this)):i instanceof AudioBuffer?(this._buffers[e]=new t.Buffer(i),n(this)):this.isString(i)&&(this._buffers[e]=new t.Buffer(this.baseUrl+i,n)),this},t.Buffers.prototype._flattenUrls=function(t){var e={};for(var i in t)if(t.hasOwnProperty(i))if(this.isObject(t[i])){var n=this._flattenUrls(t[i]);for(var s in n)n.hasOwnProperty(s)&&(e[i+"."+s]=n[s])}else e[i]=t[i];return e},t.Buffers.prototype.dispose=function(){for(var t in this._buffers)this._buffers[t].dispose();return this._buffers=null,this},t.Buffers}),t(function(t){var e={};return t.prototype.send=function(i,n){e.hasOwnProperty(i)||(e[i]=this.context.createGain()),n=this.defaultArg(n,0);var s=new t.Gain(n,t.Type.Decibels);return this.output.chain(s,e[i]),s},t.prototype.receive=function(t,i){return e.hasOwnProperty(t)||(e[t]=this.context.createGain()),this.isUndef(i)&&(i=this.input),e[t].connect(i),this},t.Context.on("init",function(t){t.Buses?e=t.Buses:(e={},t.Buses=e)}),t}),t(function(t){return t.Draw=function(){this._events=new t.Timeline,this.expiration=.25,this.anticipation=.008,this._boundDrawLoop=this._drawLoop.bind(this)},t.extend(t.Draw),t.Draw.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&requestAnimationFrame(this._boundDrawLoop),this},t.Draw.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},t.Draw.prototype._drawLoop=function(){for(var e=t.now();this._events.length&&this._events.peek().time-this.anticipation<=e;){var i=this._events.shift();e-i.time<=this.expiration&&i.callback()}this._events.length>0&&requestAnimationFrame(this._boundDrawLoop)},t.Draw=new t.Draw,t.Draw}),t(function(t){t.Listener=function(){var t=this.optionsObject(arguments,["positionX","positionY","positionZ"],e.defaults);this._orientation=[t.forwardX,t.forwardY,t.forwardZ,t.upX,t.upY,t.upZ],this._position=[t.positionX,t.positionY,t.positionZ],this.forwardX=t.forwardX,this.forwardY=t.forwardY,this.forwardZ=t.forwardZ,this.upX=t.upX,this.upY=t.upY,this.upZ=t.upZ,this.positionX=t.positionX,this.positionY=t.positionY,this.positionZ=t.positionZ},t.extend(t.Listener),t.Listener.defaults={positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:1,upX:0,upY:1,upZ:0},t.Listener.prototype._rampTimeConstant=.01,t.Listener.prototype.setPosition=function(t,e,i){if(this.context.listener.positionX){var n=this.now();this.context.listener.positionX.setTargetAtTime(t,n,this._rampTimeConstant),this.context.listener.positionY.setTargetAtTime(e,n,this._rampTimeConstant),this.context.listener.positionZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this.context.listener.setPosition(t,e,i);return this._position=Array.prototype.slice.call(arguments),this},t.Listener.prototype.setOrientation=function(t,e,i,n,s,o){if(this.context.listener.forwardX){var r=this.now();this.context.listener.forwardX.setTargetAtTime(t,r,this._rampTimeConstant),this.context.listener.forwardY.setTargetAtTime(e,r,this._rampTimeConstant),this.context.listener.forwardZ.setTargetAtTime(i,r,this._rampTimeConstant),this.context.listener.upX.setTargetAtTime(n,r,this._rampTimeConstant),this.context.listener.upY.setTargetAtTime(s,r,this._rampTimeConstant),this.context.listener.upZ.setTargetAtTime(o,r,this._rampTimeConstant)}else this.context.listener.setOrientation(t,e,i,n,s,o);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Listener.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Listener.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Listener.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Listener.prototype,"forwardX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Listener.prototype,"forwardY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Listener.prototype,"forwardZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),Object.defineProperty(t.Listener.prototype,"upX",{set:function(t){this._orientation[3]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[3]}}),Object.defineProperty(t.Listener.prototype,"upY",{set:function(t){this._orientation[4]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[4]}}),Object.defineProperty(t.Listener.prototype,"upZ",{set:function(t){this._orientation[5]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[5]}}),t.Listener.prototype.dispose=function(){return this._orientation=null,this._position=null,this};var e=t.Listener;return t.Listener=new e,t.Context.on("init",function(i){i.Listener instanceof e?t.Listener=i.Listener:t.Listener=new e,i.Listener=t.Listener}),t.Listener}),t(function(t){return!window.hasOwnProperty("OfflineAudioContext")&&window.hasOwnProperty("webkitOfflineAudioContext")&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t.OfflineContext=function(e,i,n){var s=new OfflineAudioContext(e,i*n,n);t.Context.call(this,s),this._duration=i,this._currentTime=0,this.lookAhead=this.blockTime,this.updateInterval=this.blockTime},t.extend(t.OfflineContext,t.Context),t.OfflineContext.prototype.now=function(){return this._currentTime},t.OfflineContext.prototype._createWorker=function(){return{postMessage:function(){}}},t.OfflineContext.prototype.render=function(){for(;this._duration-this._currentTime>=0;)this.emit("tick"),this._currentTime+=t.prototype.blockTime;return new Promise(function(t){this._context.oncomplete=function(e){t(e.renderedBuffer)},this._context.startRendering()}.bind(this))},t.OfflineContext}),t(function(t){return t.Offline=function(e,i){var n=t.context.sampleRate,s=t.context,o=new t.OfflineContext(2,i,n);t.context=o,e(t.Transport);var r=o.render();return t.context=s,r.then(function(e){return new t.Buffer(e)})},t.Offline}),t(function(t){return t.Effect=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["wet"],t.Effect.defaults);this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this.effectSend=new t.Gain,this.effectReturn=new t.Gain,this.input.connect(this._dryWet.a),this.input.connect(this.effectSend),this.effectReturn.connect(this._dryWet.b),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.Effect),t.Effect.defaults={wet:1},t.Effect.prototype.connectEffect=function(t){return this.effectSend.chain(t,this.effectReturn),this},t.Effect.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this.effectSend.dispose(),this.effectSend=null,this.effectReturn.dispose(),this.effectReturn=null,this._writable(["wet"]),this.wet=null,this},t.Effect}),t(function(t){return t.AutoFilter=function(){var e=this.optionsObject(arguments,["frequency","baseFrequency","octaves"],t.AutoFilter.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.filter=new t.Filter(e.filter),this._octaves=0,this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.type=e.type,this._readOnly(["frequency","depth"]),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency},t.extend(t.AutoFilter,t.Effect),t.AutoFilter.defaults={frequency:1,type:"sine",depth:1,baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}},t.AutoFilter.prototype.start=function(t){return this._lfo.start(t),this},t.AutoFilter.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoFilter.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoFilter.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoFilter.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),Object.defineProperty(t.AutoFilter.prototype,"baseFrequency",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.AutoFilter.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this.baseFrequency*Math.pow(2,t)}}),t.AutoFilter.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this.filter.dispose(),this.filter=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null,this},t.AutoFilter}),t(function(t){return t.AutoPanner=function(){var e=this.optionsObject(arguments,["frequency"],t.AutoPanner.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:-1,max:1}),this.depth=this._lfo.amplitude,this._panner=new t.Panner,this.frequency=this._lfo.frequency,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.type=e.type,this._readOnly(["depth","frequency"])},t.extend(t.AutoPanner,t.Effect),t.AutoPanner.defaults={frequency:1,type:"sine",depth:1},t.AutoPanner.prototype.start=function(t){return this._lfo.start(t),this},t.AutoPanner.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoPanner.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoPanner.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoPanner.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.AutoPanner.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this._panner.dispose(),this._panner=null,this._writable(["depth","frequency"]),this.frequency=null,this.depth=null,this},t.AutoPanner}),t(function(t){return t.AutoWah=function(){var e=this.optionsObject(arguments,["baseFrequency","octaves","sensitivity"],t.AutoWah.defaults);t.Effect.call(this,e),this.follower=new t.Follower(e.follower),this._sweepRange=new t.ScaleExp(0,1,.5),this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this._inputBoost=new t.Gain,this._bandpass=new t.Filter({rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new t.Filter(0,"peaking"),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this.follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,this._readOnly(["gain","Q"])},t.extend(t.AutoWah,t.Effect),t.AutoWah.defaults={baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:{attack:.3,release:.5}},Object.defineProperty(t.AutoWah.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"sensitivity",{get:function(){return this.gainToDb(1/this._inputBoost.gain.value)},set:function(t){this._inputBoost.gain.value=1/this.dbToGain(t)}}),t.AutoWah.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},t.AutoWah.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this.follower.dispose(),this.follower=null,this._sweepRange.dispose(),this._sweepRange=null,this._bandpass.dispose(),this._bandpass=null,this._peaking.dispose(),this._peaking=null,this._inputBoost.dispose(),this._inputBoost=null,this._writable(["gain","Q"]),this.gain=null,this.Q=null,this},t.AutoWah}),t(function(t){return t.BitCrusher=function(){var e=this.optionsObject(arguments,["bits"],t.BitCrusher.defaults);t.Effect.call(this,e);var i=1/Math.pow(2,e.bits-1);this._subtract=new t.Subtract,this._modulo=new t.Modulo(i),this._bits=e.bits,this.effectSend.fan(this._subtract,this._modulo),this._modulo.connect(this._subtract,0,1),this._subtract.connect(this.effectReturn)},t.extend(t.BitCrusher,t.Effect),t.BitCrusher.defaults={bits:4},Object.defineProperty(t.BitCrusher.prototype,"bits",{get:function(){return this._bits},set:function(t){this._bits=t;var e=1/Math.pow(2,t-1);this._modulo.value=e}}),t.BitCrusher.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._subtract.dispose(),this._subtract=null,this._modulo.dispose(),this._modulo=null,this},t.BitCrusher}),t(function(t){return t.Chebyshev=function(){var e=this.optionsObject(arguments,["order"],t.Chebyshev.defaults);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample},t.extend(t.Chebyshev,t.Effect),t.Chebyshev.defaults={order:1,oversample:"none"},t.Chebyshev.prototype._getCoefficient=function(t,e,i){return i.hasOwnProperty(e)?i[e]:(i[e]=0===e?0:1===e?t:2*t*this._getCoefficient(t,e-1,i)-this._getCoefficient(t,e-2,i),i[e])},Object.defineProperty(t.Chebyshev.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t;for(var e=new Array(4096),i=e.length,n=0;n<i;++n){var s=2*n/i-1;e[n]=0===s?0:this._getCoefficient(s,t,{})}this._shaper.curve=e}}),Object.defineProperty(t.Chebyshev.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Chebyshev.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Chebyshev}),t(function(t){return t.StereoEffect=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["wet"],t.Effect.defaults);this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this._split=new t.Split,this.effectSendL=this._split.left,this.effectSendR=this._split.right,this._merge=new t.Merge,this.effectReturnL=this._merge.left,this.effectReturnR=this._merge.right,this.input.connect(this._split),this.input.connect(this._dryWet,0,0),this._merge.connect(this._dryWet,0,1),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.StereoEffect,t.Effect),t.StereoEffect.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this._split.dispose(),this._split=null,this._merge.dispose(),this._merge=null,this.effectSendL=null,this.effectSendR=null,this.effectReturnL=null,this.effectReturnR=null,this._writable(["wet"]),this.wet=null,this},t.StereoEffect}),t(function(t){return t.FeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"]);e=this.defaultArg(e,t.FeedbackEffect.defaults),t.Effect.call(this,e),this._feedbackGain=new t.Gain(e.feedback,t.Type.NormalRange),this.feedback=this._feedbackGain.gain,this.effectReturn.chain(this._feedbackGain,this.effectSend),this._readOnly(["feedback"])},t.extend(t.FeedbackEffect,t.Effect),t.FeedbackEffect.defaults={feedback:.125},t.FeedbackEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._writable(["feedback"]),this._feedbackGain.dispose(),this._feedbackGain=null,this.feedback=null,this},t.FeedbackEffect}),t(function(t){return t.StereoXFeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"],t.FeedbackEffect.defaults);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackLR=new t.Gain,this._feedbackRL=new t.Gain,this.effectReturnL.chain(this._feedbackLR,this.effectSendR),this.effectReturnR.chain(this._feedbackRL,this.effectSendL),this.feedback.fan(this._feedbackLR.gain,this._feedbackRL.gain),this._readOnly(["feedback"])},t.extend(t.StereoXFeedbackEffect,t.FeedbackEffect),t.StereoXFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackLR.dispose(),this._feedbackLR=null,this._feedbackRL.dispose(),this._feedbackRL=null,this},t.StereoXFeedbackEffect}),t(function(t){return t.Chorus=function(){var e=this.optionsObject(arguments,["frequency","delayTime","depth"],t.Chorus.defaults);t.StereoXFeedbackEffect.call(this,e),this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new t.LFO({frequency:e.frequency,min:0,max:1}),this._lfoR=new t.LFO({frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new t.Delay,this._delayNodeR=new t.Delay,this.frequency=this._lfoL.frequency,this.effectSendL.chain(this._delayNodeL,this.effectReturnL),this.effectSendR.chain(this._delayNodeR,this.effectReturnR),this.effectSendL.connect(this.effectReturnL),this.effectSendR.connect(this.effectReturnR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this._lfoL.start(),this._lfoR.start(),this._lfoL.frequency.connect(this._lfoR.frequency),this.depth=this._depth,this.frequency.value=e.frequency,this.type=e.type,this._readOnly(["frequency"]),this.spread=e.spread},t.extend(t.Chorus,t.StereoXFeedbackEffect),t.Chorus.defaults={frequency:1.5,delayTime:3.5,depth:.7,feedback:.1,type:"sine",spread:180},Object.defineProperty(t.Chorus.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}}),Object.defineProperty(t.Chorus.prototype,"delayTime",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}}),Object.defineProperty(t.Chorus.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Chorus.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Chorus.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._delayNodeL.dispose(),this._delayNodeL=null,this._delayNodeR.dispose(),this._delayNodeR=null,this._writable("frequency"),this.frequency=null,this},t.Chorus}),t(function(t){return t.Convolver=function(){var e=this.optionsObject(arguments,["url","onload"],t.Convolver.defaults);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this._buffer=new t.Buffer,this.isString(e.url)?this._buffer.load(e.url,function(t){this.buffer=t,e.onload()}.bind(this)):e.url&&(this.buffer=e.url,e.onload()),this.connectEffect(this._convolver)},t.extend(t.Convolver,t.Effect),t.Convolver.defaults={onload:t.noOp},Object.defineProperty(t.Convolver.prototype,"buffer",{get:function(){return this._buffer.get()},set:function(t){this._buffer.set(t),this._convolver.buffer=this._buffer.get()}}),t.Convolver.prototype.load=function(t,e){return this._buffer.load(t,function(t){this.buffer=t,e&&e()}.bind(this))},t.Convolver.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._convolver.disconnect(),this._convolver=null,this._buffer.dispose(),this._buffer=null,this},t.Convolver}),t(function(t){return t.Distortion=function(){var e=this.optionsObject(arguments,["distortion"],t.Distortion.defaults);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample},t.extend(t.Distortion,t.Effect),t.Distortion.defaults={distortion:.4,oversample:"none"},Object.defineProperty(t.Distortion.prototype,"distortion",{get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,i=Math.PI/180;this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*i/(Math.PI+e*Math.abs(t))})}}),Object.defineProperty(t.Distortion.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Distortion.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Distortion}),t(function(t){return t.FeedbackDelay=function(){var e=this.optionsObject(arguments,["delayTime","feedback"],t.FeedbackDelay.defaults);t.FeedbackEffect.call(this,e),this._delayNode=new t.Delay(e.delayTime),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),this._readOnly(["delayTime"])},t.extend(t.FeedbackDelay,t.FeedbackEffect),t.FeedbackDelay.defaults={delayTime:.25},t.FeedbackDelay.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._writable(["delayTime"]),this.delayTime=null,this},t.FeedbackDelay}),t(function(t){var e=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],i=[225,556,441,341];return t.Freeverb=function(){var n=this.optionsObject(arguments,["roomSize","dampening"],t.Freeverb.defaults);t.StereoEffect.call(this,n),this.roomSize=new t.Signal(n.roomSize,t.Type.NormalRange),this.dampening=new t.Signal(n.dampening,t.Type.Frequency),this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];for(var s=0;s<i.length;s++){var o=this.context.createBiquadFilter();o.type="allpass",o.frequency.value=i[s],this._allpassFiltersL.push(o)}for(var r=0;r<i.length;r++){var a=this.context.createBiquadFilter();a.type="allpass",a.frequency.value=i[r],this._allpassFiltersR.push(a)}for(var h=0;h<e.length;h++){var l=new t.LowpassCombFilter(e[h]);h<e.length/2?this.effectSendL.chain(l,this._allpassFiltersL[0]):this.effectSendR.chain(l,this._allpassFiltersR[0]),this.roomSize.connect(l.resonance),this.dampening.connect(l.dampening),this._combFilters.push(l)}this.connectSeries.apply(this,this._allpassFiltersL),this.connectSeries.apply(this,this._allpassFiltersR),this._allpassFiltersL[this._allpassFiltersL.length-1].connect(this.effectReturnL),this._allpassFiltersR[this._allpassFiltersR.length-1].connect(this.effectReturnR),this._readOnly(["roomSize","dampening"])},t.extend(t.Freeverb,t.StereoEffect),t.Freeverb.defaults={roomSize:.7,dampening:3e3},t.Freeverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFiltersL.length;e++)this._allpassFiltersL[e].disconnect(),this._allpassFiltersL[e]=null;this._allpassFiltersL=null;for(var i=0;i<this._allpassFiltersR.length;i++)this._allpassFiltersR[i].disconnect(),this._allpassFiltersR[i]=null;this._allpassFiltersR=null;for(var n=0;n<this._combFilters.length;n++)this._combFilters[n].dispose(),this._combFilters[n]=null;return this._combFilters=null,this._writable(["roomSize","dampening"]),this.roomSize.dispose(),this.roomSize=null,this.dampening.dispose(),this.dampening=null,this},t.Freeverb}),t(function(t){var e=[.06748,.06404,.08212,.09004],i=[.773,.802,.753,.733],n=[347,113,37];return t.JCReverb=function(){var s=this.optionsObject(arguments,["roomSize"],t.JCReverb.defaults);t.StereoEffect.call(this,s),this.roomSize=new t.Signal(s.roomSize,t.Type.NormalRange),this._scaleRoomSize=new t.Scale(-.733,.197),this._allpassFilters=[],this._feedbackCombFilters=[];for(var o=0;o<n.length;o++){var r=this.context.createBiquadFilter();r.type="allpass",r.frequency.value=n[o],this._allpassFilters.push(r)}for(var a=0;a<e.length;a++){var h=new t.FeedbackCombFilter(e[a],.1);this._scaleRoomSize.connect(h.resonance),h.resonance.value=i[a],this._allpassFilters[this._allpassFilters.length-1].connect(h),a<e.length/2?h.connect(this.effectReturnL):h.connect(this.effectReturnR),this._feedbackCombFilters.push(h)}this.roomSize.connect(this._scaleRoomSize),this.connectSeries.apply(this,this._allpassFilters),this.effectSendL.connect(this._allpassFilters[0]),this.effectSendR.connect(this._allpassFilters[0]),this._readOnly(["roomSize"])},t.extend(t.JCReverb,t.StereoEffect),t.JCReverb.defaults={roomSize:.5},t.JCReverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFilters.length;e++)this._allpassFilters[e].disconnect(),this._allpassFilters[e]=null;this._allpassFilters=null;for(var i=0;i<this._feedbackCombFilters.length;i++)this._feedbackCombFilters[i].dispose(),this._feedbackCombFilters[i]=null;return this._feedbackCombFilters=null,this._writable(["roomSize"]),this.roomSize.dispose(),this.roomSize=null,this._scaleRoomSize.dispose(),this._scaleRoomSize=null,this},t.JCReverb}),t(function(t){return t.MidSideEffect=function(){t.Effect.apply(this,arguments),this._midSideSplit=new t.MidSideSplit,this._midSideMerge=new t.MidSideMerge,this.midSend=this._midSideSplit.mid,this.sideSend=this._midSideSplit.side,this.midReturn=this._midSideMerge.mid,this.sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)},t.extend(t.MidSideEffect,t.Effect),t.MidSideEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this.midSend=null,this.sideSend=null,this.midReturn=null,this.sideReturn=null,this},t.MidSideEffect}),t(function(t){return t.Phaser=function(){var e=this.optionsObject(arguments,["frequency","octaves","baseFrequency"],t.Phaser.defaults);t.StereoEffect.call(this,e),this._lfoL=new t.LFO(e.frequency,0,1),this._lfoR=new t.LFO(e.frequency,0,1),this._lfoR.phase=180,this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this.Q=new t.Signal(e.Q,t.Type.Positive),this._filtersL=this._makeFilters(e.stages,this._lfoL,this.Q),this._filtersR=this._makeFilters(e.stages,this._lfoR,this.Q),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.effectSendL.connect(this._filtersL[0]),this.effectSendR.connect(this._filtersR[0]),this._filtersL[e.stages-1].connect(this.effectReturnL),this._filtersR[e.stages-1].connect(this.effectReturnR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),this._readOnly(["frequency","Q"])},t.extend(t.Phaser,t.StereoEffect),t.Phaser.defaults={frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350},t.Phaser.prototype._makeFilters=function(t,e,i){for(var n=new Array(t),s=0;s<t;s++){var o=this.context.createBiquadFilter();o.type="allpass",i.connect(o.Q),e.connect(o.frequency),n[s]=o}return this.connectSeries.apply(this,n),n},Object.defineProperty(t.Phaser.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}}),Object.defineProperty(t.Phaser.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._lfoL.min=t,this._lfoR.min=t,this.octaves=this._octaves}}),t.Phaser.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","Q"]),this.Q.dispose(),this.Q=null,this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null;for(var e=0;e<this._filtersL.length;e++)this._filtersL[e].disconnect(),this._filtersL[e]=null;this._filtersL=null;for(var i=0;i<this._filtersR.length;i++)this._filtersR[i].disconnect(),this._filtersR[i]=null;return this._filtersR=null,this.frequency=null,this},t.Phaser}),t(function(t){return t.PingPongDelay=function(){var e=this.optionsObject(arguments,["delayTime","feedback"],t.PingPongDelay.defaults);t.StereoXFeedbackEffect.call(this,e),this._leftDelay=new t.Delay(0,e.maxDelayTime),this._rightDelay=new t.Delay(0,e.maxDelayTime),this._rightPreDelay=new t.Delay(0,e.maxDelayTime),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this.effectSendL.chain(this._leftDelay,this.effectReturnL),this.effectSendR.chain(this._rightPreDelay,this._rightDelay,this.effectReturnR),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackLR.disconnect(),this._feedbackLR.connect(this._rightDelay),this._readOnly(["delayTime"])},t.extend(t.PingPongDelay,t.StereoXFeedbackEffect),t.PingPongDelay.defaults={delayTime:.25,maxDelayTime:1},t.PingPongDelay.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._leftDelay.dispose(),this._leftDelay=null,this._rightDelay.dispose(),this._rightDelay=null,this._rightPreDelay.dispose(),this._rightPreDelay=null,this._writable(["delayTime"]),this.delayTime.dispose(),this.delayTime=null,this},t.PingPongDelay}),t(function(t){return t.PitchShift=function(){var e=this.optionsObject(arguments,["pitch"],t.PitchShift.defaults);t.FeedbackEffect.call(this,e),this._frequency=new t.Signal(0),this._delayA=new t.Delay(0,1),this._lfoA=new t.LFO({min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new t.Delay(0,1),this._lfoB=new t.LFO({min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new t.CrossFade,this._crossFadeLFO=new t.LFO({min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new t.Delay(e.delayTime),this.delayTime=this._feedbackDelay.delayTime,this._readOnly("delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);var i=this.now();this._lfoA.start(i),this._lfoB.start(i),this._crossFadeLFO.start(i),this.windowSize=this._windowSize},t.extend(t.PitchShift,t.FeedbackEffect),t.PitchShift.defaults={pitch:0,windowSize:.1,delayTime:0,feedback:0},Object.defineProperty(t.PitchShift.prototype,"pitch",{get:function(){return this._pitch},set:function(t){this._pitch=t;var e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=this.intervalToFrequencyRatio(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=this.intervalToFrequencyRatio(t)-1),this._frequency.value=e*(1.2/this._windowSize)}}),Object.defineProperty(t.PitchShift.prototype,"windowSize",{get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}}),t.PitchShift.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._frequency.dispose(),this._frequency=null,this._delayA.disconnect(),this._delayA=null,this._delayB.disconnect(),this._delayB=null,this._lfoA.dispose(),this._lfoA=null,this._lfoB.dispose(),this._lfoB=null,this._crossFade.dispose(),this._crossFade=null,this._crossFadeLFO.dispose(),this._crossFadeLFO=null,this._writable("delayTime"),this._feedbackDelay.dispose(),this._feedbackDelay=null,this.delayTime=null,this},t.PitchShift}),t(function(t){return t.StereoFeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"],t.FeedbackEffect.defaults);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackL=new t.Gain,this._feedbackR=new t.Gain,this.effectReturnL.chain(this._feedbackL,this.effectSendL),this.effectReturnR.chain(this._feedbackR,this.effectSendR),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),this._readOnly(["feedback"])},t.extend(t.StereoFeedbackEffect,t.FeedbackEffect),t.StereoFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackL.dispose(),this._feedbackL=null,this._feedbackR.dispose(),this._feedbackR=null,this},t.StereoFeedbackEffect}),t(function(t){return t.StereoWidener=function(){var e=this.optionsObject(arguments,["width"],t.StereoWidener.defaults);t.MidSideEffect.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._midMult=new t.Expr("$0 * ($1 * (1 - $2))"),this._sideMult=new t.Expr("$0 * ($1 * $2)"),this._two=new t.Signal(2),this._two.connect(this._midMult,0,1),this.width.connect(this._midMult,0,2),this._two.connect(this._sideMult,0,1),this.width.connect(this._sideMult,0,2),this.midSend.chain(this._midMult,this.midReturn),this.sideSend.chain(this._sideMult,this.sideReturn),this._readOnly(["width"])},t.extend(t.StereoWidener,t.MidSideEffect),t.StereoWidener.defaults={width:.5},t.StereoWidener.prototype.dispose=function(){return t.MidSideEffect.prototype.dispose.call(this),this._writable(["width"]),this.width.dispose(),this.width=null,this._midMult.dispose(),this._midMult=null,this._sideMult.dispose(),this._sideMult=null,this._two.dispose(),this._two=null,this},t.StereoWidener}),t(function(t){return t.Tremolo=function(){var e=this.optionsObject(arguments,["frequency","depth"],t.Tremolo.defaults);t.StereoEffect.call(this,e),this._lfoL=new t.LFO({phase:e.spread,min:1,max:0}),this._lfoR=new t.LFO({phase:e.spread,min:1,max:0}),this._amplitudeL=new t.Gain,this._amplitudeR=new t.Gain,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.depth=new t.Signal(e.depth,t.Type.NormalRange),this._readOnly(["frequency","depth"]),this.effectSendL.chain(this._amplitudeL,this.effectReturnL),this.effectSendR.chain(this._amplitudeR,this.effectReturnR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.type=e.type,this.spread=e.spread},t.extend(t.Tremolo,t.StereoEffect),t.Tremolo.defaults={frequency:10,type:"sine",depth:.5,spread:180},t.Tremolo.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},t.Tremolo.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},t.Tremolo.prototype.sync=function(t){return this._lfoL.sync(t),this._lfoR.sync(t),this},t.Tremolo.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),this},Object.defineProperty(t.Tremolo.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Tremolo.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Tremolo.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","depth"]),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._amplitudeL.dispose(),this._amplitudeL=null,this._amplitudeR.dispose(),this._amplitudeR=null,this.frequency=null,this.depth=null,this},t.Tremolo}),t(function(t){return t.Vibrato=function(){var e=this.optionsObject(arguments,["frequency","depth"],t.Vibrato.defaults);t.Effect.call(this,e),this._delayNode=new t.Delay(0,e.maxDelay),this._lfo=new t.LFO({type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,this._readOnly(["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)},t.extend(t.Vibrato,t.Effect),t.Vibrato.defaults={maxDelay:.005,frequency:5,depth:.1,type:"sine"},Object.defineProperty(t.Vibrato.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.Vibrato.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._lfo.dispose(),this._lfo=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null},t.Vibrato}),t(function(t){return t.Event=function(){var e=this.optionsObject(arguments,["callback","value"],t.Event.defaults);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._state=new t.TimelineState(t.State.Stopped),this._playbackRate=1,this._startOffset=0,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate},t.extend(t.Event),t.Event.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,value:null,probability:1,mute:!1,humanize:!1},t.Event.prototype._rescheduleEvents=function(e){return e=this.defaultArg(e,-1),this._state.forEachFrom(e,function(e){var i;if(e.state===t.State.Started){this.isUndef(e.id)||t.Transport.clear(e.id);var n=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop){i=1/0,this.isNumber(this._loop)&&(i=this._loop*this._getLoopDuration());var s=this._state.getAfter(n);null!==s&&(i=Math.min(i,s.time-n)),i!==1/0&&(this._state.setStateAtTime(t.State.Stopped,n+i+1),i=t.Time(i,"i"));var o=t.Time(this._getLoopDuration(),"i");e.id=t.Transport.scheduleRepeat(this._tick.bind(this),o,t.TransportTime(n,"i"),i)}else e.id=t.Transport.schedule(this._tick.bind(this),n+"i")}}.bind(this)),this},Object.defineProperty(t.Event.prototype,"state",{get:function(){return this._state.getValueAtTime(t.Transport.ticks)}}),Object.defineProperty(t.Event.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t}}),t.Event.prototype.start=function(e){return e=this.toTicks(e),this._state.getValueAtTime(e)===t.State.Stopped&&(this._state.add({state:t.State.Started,time:e,id:void 0}),this._rescheduleEvents(e)),this},t.Event.prototype.stop=function(e){if(this.cancel(e),e=this.toTicks(e),this._state.getValueAtTime(e)===t.State.Started){this._state.setStateAtTime(t.State.Stopped,e);var i=this._state.getBefore(e),n=e;null!==i&&(n=i.time),this._rescheduleEvents(n)}return this},t.Event.prototype.cancel=function(e){return e=this.defaultArg(e,-1/0),e=this.toTicks(e),this._state.forEachFrom(e,function(e){t.Transport.clear(e.id)}),this._state.cancel(e),this},t.Event.prototype._tick=function(e){if(!this.mute&&this._state.getValueAtTime(t.Transport.ticks)===t.State.Started){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var i=.02;this.isBoolean(this.humanize)||(i=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*i}this.callback(e,this.value)}},t.Event.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(t.Event.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"progress",{get:function(){if(this._loop){var e=t.Transport.ticks,i=this._state.get(e);if(null!==i&&i.state===t.State.Started){var n=this._getLoopDuration();return(e-i.time)%n/n}return 0}return 0}}),t.Event.prototype.dispose=function(){this.cancel(),this._state.dispose(),this._state=null,this.callback=null,this.value=null},t.Event}),t(function(t){return t.Loop=function(){var e=this.optionsObject(arguments,["callback","interval"],t.Loop.defaults);this._event=new t.Event({callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations},t.extend(t.Loop),t.Loop.defaults={interval:"4n",callback:t.noOp,playbackRate:1,iterations:1/0,probability:!0,mute:!1},t.Loop.prototype.start=function(t){return this._event.start(t),this},t.Loop.prototype.stop=function(t){return this._event.stop(t),this},t.Loop.prototype.cancel=function(t){return this._event.cancel(t),this},t.Loop.prototype._tick=function(t){this.callback(t)},Object.defineProperty(t.Loop.prototype,"state",{get:function(){return this._event.state}}),Object.defineProperty(t.Loop.prototype,"progress",{get:function(){return this._event.progress}}),Object.defineProperty(t.Loop.prototype,"interval",{get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t}}),Object.defineProperty(t.Loop.prototype,"playbackRate",{get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t}}),Object.defineProperty(t.Loop.prototype,"humanize",{get:function(){return this._event.humanize},set:function(t){this._event.humanize=t}}),Object.defineProperty(t.Loop.prototype,"probability",{get:function(){return this._event.probability},set:function(t){this._event.probability=t}}),Object.defineProperty(t.Loop.prototype,"mute",{get:function(){return this._event.mute},set:function(t){this._event.mute=t}}),Object.defineProperty(t.Loop.prototype,"iterations",{get:function(){return!0===this._event.loop?1/0:this._event.loop},set:function(t){this._event.loop=t===1/0||t}}),t.Loop.prototype.dispose=function(){this._event.dispose(),this._event=null,this.callback=null},t.Loop}),t(function(t){return t.Part=function(){var e=this.optionsObject(arguments,["callback","events"],t.Part.defaults);this._loop=e.loop,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this._startOffset=0,this._state=new t.TimelineState(t.State.Stopped),this._events=[],this.callback=e.callback,this.mute=e.mute;var i=this.defaultArg(e.events,[]);if(!this.isUndef(e.events))for(var n=0;n<i.length;n++)Array.isArray(i[n])?this.add(i[n][0],i[n][1]):this.add(i[n])},t.extend(t.Part,t.Event),t.Part.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,probability:1,humanize:!1,mute:!1},t.Part.prototype.start=function(e,i){var n=this.toTicks(e);return this._state.getValueAtTime(n)!==t.State.Started&&(i=this._loop?this.defaultArg(i,this._loopStart):this.defaultArg(i,0),i=this.toTicks(i),this._state.add({state:t.State.Started,time:n,offset:i}),this._forEach(function(t){this._startNote(t,n,i)})),this},t.Part.prototype._startNote=function(e,i,n){i-=n,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<n&&(i+=this._getLoopDuration()),e.start(t.TransportTime(i,"i"))):e.startOffset<this._loopStart&&e.startOffset>=n&&(e.loop=!1,e.start(t.TransportTime(i,"i"))):e.startOffset>=n&&e.start(t.TransportTime(i,"i"))},Object.defineProperty(t.Part.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t,this._forEach(function(t){t.startOffset+=this._startOffset})}}),t.Part.prototype.stop=function(e){var i=this.toTicks(e);return this._state.cancel(i),this._state.setStateAtTime(t.State.Stopped,i),this._forEach(function(t){t.stop(e)}),this},t.Part.prototype.at=function(e,i){e=t.TransportTime(e);for(var n=t.Time(1,"i").toSeconds(),s=0;s<this._events.length;s++){var o=this._events[s];if(Math.abs(e.toTicks()-o.startOffset)<n)return this.isUndef(i)||(o.value=i),o}return this.isUndef(i)?null:(this.add(e,i),this._events[this._events.length-1])},t.Part.prototype.add=function(e,i){e.hasOwnProperty("time")&&(e=(i=e).time),e=this.toTicks(e);var n;return i instanceof t.Event?(n=i).callback=this._tick.bind(this):n=new t.Event({callback:this._tick.bind(this),value:i}),n.startOffset=e,n.set({loopEnd:this.loopEnd,loopStart:this.loopStart,loop:this.loop,humanize:this.humanize,playbackRate:this.playbackRate,probability:this.probability}),this._events.push(n),this._restartEvent(n),this},t.Part.prototype._restartEvent=function(e){this._state.forEach(function(i){i.state===t.State.Started?this._startNote(e,i.time,i.offset):e.stop(t.TransportTime(i.time,"i"))}.bind(this))},t.Part.prototype.remove=function(e,i){e.hasOwnProperty("time")&&(e=(i=e).time),e=this.toTicks(e);for(var n=this._events.length-1;n>=0;n--){var s=this._events[n];s instanceof t.Part?s.remove(e,i):s.startOffset===e&&(this.isUndef(i)||!this.isUndef(i)&&s.value===i)&&(this._events.splice(n,1),s.dispose())}return this},t.Part.prototype.removeAll=function(){return this._forEach(function(t){t.dispose()}),this._events=[],this},t.Part.prototype.cancel=function(t){return t=this.toTicks(t),this._forEach(function(e){e.cancel(t)}),this._state.cancel(t),this},t.Part.prototype._forEach=function(e,i){i=this.defaultArg(i,this);for(var n=this._events.length-1;n>=0;n--){var s=this._events[n];s instanceof t.Part?s._forEach(e,i):e.call(i,s)}return this},t.Part.prototype._setAll=function(t,e){this._forEach(function(i){i[t]=e})},t.Part.prototype._tick=function(t,e){this.mute||this.callback(t,e)},t.Part.prototype._testLoopBoundries=function(e){e.startOffset<this._loopStart||e.startOffset>=this._loopEnd?e.cancel(0):e.state===t.State.Stopped&&this._restartEvent(e)},Object.defineProperty(t.Part.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)}}),Object.defineProperty(t.Part.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)}}),Object.defineProperty(t.Part.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._forEach(function(e){e._loopStart=this._loopStart,e._loopEnd=this._loopEnd,e.loop=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(e){e.loopEnd=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=this.loopStart,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)}}),Object.defineProperty(t.Part.prototype,"length",{get:function(){return this._events.length}}),t.Part.prototype.dispose=function(){return this.removeAll(),this._state.dispose(),this._state=null,this.callback=null,this._events=null,this},t.Part}),t(function(t){return t.Pattern=function(){var e=this.optionsObject(arguments,["callback","values","pattern"],t.Pattern.defaults);t.Loop.call(this,e),this._pattern=new t.CtrlPattern({values:e.values,type:e.pattern,index:e.index})},t.extend(t.Pattern,t.Loop),t.Pattern.defaults={pattern:t.CtrlPattern.Type.Up,values:[]},t.Pattern.prototype._tick=function(t){this.callback(t,this._pattern.value),this._pattern.next()},Object.defineProperty(t.Pattern.prototype,"index",{get:function(){return this._pattern.index},set:function(t){this._pattern.index=t}}),Object.defineProperty(t.Pattern.prototype,"values",{get:function(){return this._pattern.values},set:function(t){this._pattern.values=t}}),Object.defineProperty(t.Pattern.prototype,"value",{get:function(){return this._pattern.value}}),Object.defineProperty(t.Pattern.prototype,"pattern",{get:function(){return this._pattern.type},set:function(t){this._pattern.type=t}}),t.Pattern.prototype.dispose=function(){t.Loop.prototype.dispose.call(this),this._pattern.dispose(),this._pattern=null},t.Pattern}),t(function(t){return t.Sequence=function(){var e=this.optionsObject(arguments,["callback","events","subdivision"],t.Sequence.defaults),i=e.events;if(delete e.events,t.Part.call(this,e),this._subdivision=this.toTicks(e.subdivision),this.isUndef(e.loopEnd)&&!this.isUndef(i)&&(this._loopEnd=i.length*this._subdivision),this._loop=!0,!this.isUndef(i))for(var n=0;n<i.length;n++)this.add(n,i[n])},t.extend(t.Sequence,t.Part),t.Sequence.defaults={subdivision:"4n"},Object.defineProperty(t.Sequence.prototype,"subdivision",{get:function(){return t.Time(this._subdivision,"i").toNotation()}}),t.Sequence.prototype.at=function(e,i){return this.isArray(i)&&this.remove(e),t.Part.prototype.at.call(this,this._indexTime(e),i)},t.Sequence.prototype.add=function(e,i){if(null===i)return this;if(this.isArray(i)){var n=Math.round(this._subdivision/i.length);i=new t.Sequence(this._tick.bind(this),i,t.Time(n,"i"))}return t.Part.prototype.add.call(this,this._indexTime(e),i),this},t.Sequence.prototype.remove=function(e,i){return t.Part.prototype.remove.call(this,this._indexTime(e),i),this},t.Sequence.prototype._indexTime=function(e){return e instanceof t.TransportTime?e:t.TransportTime(e*this._subdivision+this.startOffset,"i")},t.Sequence.prototype.dispose=function(){return t.Part.prototype.dispose.call(this),this},t.Sequence}),t(function(t){return t.PulseOscillator=function(){var e=this.optionsObject(arguments,["frequency","width"],t.Oscillator.defaults);t.Source.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._widthGate=new t.Gain,this._sawtooth=new t.Oscillator({frequency:e.frequency,detune:e.detune,type:"sawtooth",phase:e.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new t.WaveShaper(function(t){return t<0?-1:1}),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly(["width","frequency","detune"])},t.extend(t.PulseOscillator,t.Oscillator),t.PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},t.PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},t.PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},Object.defineProperty(t.PulseOscillator.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(t.PulseOscillator.prototype,"type",{get:function(){return"pulse"}}),Object.defineProperty(t.PulseOscillator.prototype,"partials",{get:function(){return[]}}),t.PulseOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable(["width","frequency","detune"]),this.width.dispose(),this.width=null,this._widthGate.dispose(),this._widthGate=null,this._thresh.dispose(),this._thresh=null,this.frequency=null,this.detune=null,this},t.PulseOscillator}),t(function(t){return t.PWMOscillator=function(){var e=this.optionsObject(arguments,["frequency","modulationFrequency"],t.PWMOscillator.defaults);t.Source.call(this,e),this._pulse=new t.PulseOscillator(e.modulationFrequency),this._pulse._sawtooth.type="sine",this._modulator=new t.Oscillator({frequency:e.frequency,detune:e.detune,phase:e.phase}),this._scale=new t.Multiply(2),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly(["modulationFrequency","frequency","detune"])},t.extend(t.PWMOscillator,t.Oscillator),t.PWMOscillator.defaults={frequency:440,detune:0,phase:0,modulationFrequency:.4},t.PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},t.PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},Object.defineProperty(t.PWMOscillator.prototype,"type",{get:function(){return"pwm"}}),Object.defineProperty(t.PWMOscillator.prototype,"partials",{get:function(){return[]}}),Object.defineProperty(t.PWMOscillator.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),t.PWMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable(["modulationFrequency","frequency","detune"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this},t.PWMOscillator}),t(function(t){return t.FMOscillator=function(){var e=this.optionsObject(arguments,["frequency","type","modulationType"],t.FMOscillator.defaults);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=this._carrier.detune,this.detune.value=e.detune,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),this.phase=e.phase,this._readOnly(["modulationIndex","frequency","detune","harmonicity"])},t.extend(t.FMOscillator,t.Oscillator),t.FMOscillator.defaults={frequency:440,detune:0,phase:0,modulationIndex:2,modulationType:"square",harmonicity:1},t.FMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._carrier.start(t)},t.FMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._carrier.stop(t)},Object.defineProperty(t.FMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.FMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.FMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.FMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.FMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["modulationIndex","frequency","detune","harmonicity"]),this.frequency.dispose(),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this.modulationIndex.dispose(),this.modulationIndex=null,this},t.FMOscillator}),t(function(t){return t.AMOscillator=function(){var e=this.optionsObject(arguments,["frequency","type","modulationType"],t.AMOscillator.defaults);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this.detune.value=e.detune,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this._modulationScale=new t.AudioToGain,this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.connect(this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this.phase=e.phase,this._readOnly(["frequency","detune","harmonicity"])},t.extend(t.AMOscillator,t.Oscillator),t.AMOscillator.defaults={frequency:440,detune:0,phase:0,modulationType:"square",harmonicity:1},t.AMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._carrier.start(t)},t.AMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._carrier.stop(t)},Object.defineProperty(t.AMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.AMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.AMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.AMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.AMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune","harmonicity"]),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this._modulationScale.dispose(),this._modulationScale=null,this},t.AMOscillator}),t(function(t){return t.FatOscillator=function(){var e=this.optionsObject(arguments,["frequency","type","spread"],t.FatOscillator.defaults);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._oscillators=[],this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=this.defaultArg(e.partials,[]),this.count=e.count,this._readOnly(["frequency","detune"])},t.extend(t.FatOscillator,t.Oscillator),t.FatOscillator.defaults={frequency:440,detune:0,phase:0,spread:20,count:3,type:"sawtooth"},t.FatOscillator.prototype._start=function(t){t=this.toSeconds(t),this._forEach(function(e){e.start(t)})},t.FatOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._forEach(function(e){e.stop(t)})},t.FatOscillator.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t.call(this,this._oscillators[e],e)},Object.defineProperty(t.FatOscillator.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._forEach(function(e){e.type=t})}}),Object.defineProperty(t.FatOscillator.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,i=t/(this._oscillators.length-1);this._forEach(function(t,n){t.detune.value=e+i*n})}}}),Object.defineProperty(t.FatOscillator.prototype,"count",{get:function(){return this._oscillators.length},set:function(e){if(e=Math.max(e,1),this._oscillators.length!==e){this._forEach(function(t){t.dispose()}),this._oscillators=[];for(var i=0;i<e;i++){var n=new t.Oscillator;this.type===t.Oscillator.Type.Custom?n.partials=this._partials:n.type=this._type,n.phase=this._phase,n.volume.value=-6-e,this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.connect(this.output),this._oscillators[i]=n}this.spread=this._spread,this.state===t.State.Started&&this._forEach(function(t){t.start()})}}}),Object.defineProperty(t.FatOscillator.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach(function(e){e.phase=t})}}),Object.defineProperty(t.FatOscillator.prototype,"partials",{get:function(){return this._partials},set:function(e){this._partials=e,this._type=t.Oscillator.Type.Custom,this._forEach(function(t){t.partials=e})}}),t.FatOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._forEach(function(t){t.dispose()}),this._oscillators=null,this._partials=null,this},t.FatOscillator}),t(function(t){t.OmniOscillator=function(){var e=this.optionsObject(arguments,["frequency","type"],t.OmniOscillator.defaults);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=e.type,this._readOnly(["frequency","detune"]),this.set(e)},t.extend(t.OmniOscillator,t.Oscillator),t.OmniOscillator.defaults={frequency:440,detune:0,type:"sine",phase:0};var e={Pulse:"PulseOscillator",PWM:"PWMOscillator",Osc:"Oscillator",FM:"FMOscillator",AM:"AMOscillator",Fat:"FatOscillator"};return t.OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},t.OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},Object.defineProperty(t.OmniOscillator.prototype,"type",{get:function(){var t="";return this._sourceType===e.FM?t="fm":this._sourceType===e.AM?t="am":this._sourceType===e.Fat&&(t="fat"),t+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator(e.FM),this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator(e.AM),this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator(e.Fat),this._oscillator.type=t.substr(3)):"pwm"===t?this._createNewOscillator(e.PWM):"pulse"===t?this._createNewOscillator(e.Pulse):(this._createNewOscillator(e.Osc),this._oscillator.type=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._oscillator.partials=t}}),t.OmniOscillator.prototype.set=function(e,i){return"type"===e?this.type=i:this.isObject(e)&&e.hasOwnProperty("type")&&(this.type=e.type),t.prototype.set.apply(this,arguments),this},t.OmniOscillator.prototype._createNewOscillator=function(e){if(e!==this._sourceType){this._sourceType=e;var i=t[e],n=this.now()+this.blockTime;if(null!==this._oscillator){var s=this._oscillator;s.stop(n),setTimeout(function(){s.dispose(),s=null},1e3*this.blockTime)}this._oscillator=new i,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===t.State.Started&&this._oscillator.start(n)}},Object.defineProperty(t.OmniOscillator.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}}),Object.defineProperty(t.OmniOscillator.prototype,"width",{get:function(){if(this._sourceType===e.Pulse)return this._oscillator.width}}),Object.defineProperty(t.OmniOscillator.prototype,"count",{get:function(){if(this._sourceType===e.Fat)return this._oscillator.count},set:function(t){this._sourceType===e.Fat&&(this._oscillator.count=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"spread",{get:function(){if(this._sourceType===e.Fat)return this._oscillator.spread},set:function(t){this._sourceType===e.Fat&&(this._oscillator.spread=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationType",{get:function(){if(this._sourceType===e.FM||this._sourceType===e.AM)return this._oscillator.modulationType},set:function(t){this._sourceType!==e.FM&&this._sourceType!==e.AM||(this._oscillator.modulationType=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationIndex",{get:function(){if(this._sourceType===e.FM)return this._oscillator.modulationIndex}}),Object.defineProperty(t.OmniOscillator.prototype,"harmonicity",{get:function(){if(this._sourceType===e.FM||this._sourceType===e.AM)return this._oscillator.harmonicity}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationFrequency",{get:function(){if(this._sourceType===e.PWM)return this._oscillator.modulationFrequency}}),t.OmniOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this},t.OmniOscillator}),t(function(t){return t.Instrument=function(e){e=this.defaultArg(e,t.Instrument.defaults),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume")},t.extend(t.Instrument),t.Instrument.defaults={volume:0},t.Instrument.prototype.triggerAttack=t.noOp,t.Instrument.prototype.triggerRelease=t.noOp,t.Instrument.prototype.triggerAttackRelease=function(t,e,i,n){return i=this.isUndef(i)?this.now()+this.blockTime:this.toSeconds(i),e=this.toSeconds(e),this.triggerAttack(t,i,n),this.triggerRelease(i+e),this},t.Instrument.prototype.dispose=function(){return t.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(["volume"]),this.volume=null,this},t.Instrument}),t(function(t){return t.Monophonic=function(e){e=this.defaultArg(e,t.Monophonic.defaults),t.Instrument.call(this,e),this.portamento=e.portamento},t.extend(t.Monophonic,t.Instrument),t.Monophonic.defaults={portamento:0},t.Monophonic.prototype.triggerAttack=function(t,e,i){return e=this.isUndef(e)?this.now()+this.blockTime:this.toSeconds(e),this._triggerEnvelopeAttack(e,i),this.setNote(t,e),this},t.Monophonic.prototype.triggerRelease=function(t){return t=this.isUndef(t)?this.now()+this.blockTime:this.toSeconds(t),this._triggerEnvelopeRelease(t),this},t.Monophonic.prototype._triggerEnvelopeAttack=function(){},t.Monophonic.prototype._triggerEnvelopeRelease=function(){},t.Monophonic.prototype.setNote=function(t,e){if(e=this.toSeconds(e),this.portamento>0){var i=this.frequency.value;this.frequency.setValueAtTime(i,e);var n=this.toSeconds(this.portamento);this.frequency.exponentialRampToValueAtTime(t,e+n)}else this.frequency.setValueAtTime(t,e);return this},t.Monophonic}),t(function(t){return t.Synth=function(e){e=this.defaultArg(e,t.Synth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.envelope,this.output),this.oscillator.start(),this._readOnly(["oscillator","frequency","detune","envelope"])},t.extend(t.Synth,t.Monophonic),t.Synth.defaults={oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},t.Synth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.Synth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this},t.Synth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this},t.Synth}),t(function(t){return t.AMSynth=function(e){e=this.defaultArg(e,t.AMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth,this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth,this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=new t.Gain,this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this._readOnly(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])},t.extend(t.AMSynth,t.Monophonic),t.AMSynth.defaults={harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.AMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.modulationEnvelope.triggerAttack(t,e),this},t.AMSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.modulationEnvelope.triggerRelease(t),this},t.AMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.AMSynth}),t(function(t){return t.MonoSynth=function(e){e=this.defaultArg(e,t.MonoSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new t.Filter(e.filter),this.filterEnvelope=new t.FrequencyEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.filter,this.envelope,this.output),this.oscillator.start(),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["oscillator","frequency","detune","filter","filterEnvelope","envelope"])},t.extend(t.MonoSynth,t.Monophonic),t.MonoSynth.defaults={frequency:"C4",detune:0,oscillator:{type:"square"},filter:{Q:6,type:"lowpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,baseFrequency:200,octaves:7,exponent:2}},t.MonoSynth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this},t.MonoSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this},t.MonoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this.frequency=null,this.detune=null,this},t.MonoSynth}),t(function(t){return t.DuoSynth=function(e){e=this.defaultArg(e,t.DuoSynth.defaults),t.Monophonic.call(this,e),this.voice0=new t.MonoSynth(e.voice0),this.voice0.volume.value=-10,this.voice1=new t.MonoSynth(e.voice1),this.voice1.volume.value=-10,this._vibrato=new t.LFO(e.vibratoRate,-50,50),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new t.Gain(e.vibratoAmount,t.Type.Positive),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),this._readOnly(["voice0","voice1","frequency","vibratoAmount","vibratoRate"])},t.extend(t.DuoSynth,t.Monophonic),t.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.DuoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.voice0.envelope.triggerAttack(t,e),this.voice1.envelope.triggerAttack(t,e),this.voice0.filterEnvelope.triggerAttack(t),this.voice1.filterEnvelope.triggerAttack(t),this},t.DuoSynth.prototype._triggerEnvelopeRelease=function(t){return this.voice0.triggerRelease(t),this.voice1.triggerRelease(t),this},t.DuoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),this.voice0.dispose(),this.voice0=null,this.voice1.dispose(),this.voice1=null,this.frequency.dispose(),this.frequency=null,this._vibratoGain.dispose(),this._vibratoGain=null,this._vibrato=null,this.harmonicity.dispose(),this.harmonicity=null,this.vibratoAmount.dispose(),this.vibratoAmount=null,this.vibratoRate=null,this},t.DuoSynth}),t(function(t){return t.FMSynth=function(e){e=this.defaultArg(e,t.FMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth(e.carrier),this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth(e.modulator),this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this._readOnly(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"])},t.extend(t.FMSynth,t.Monophonic),t.FMSynth.defaults={harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.FMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.modulationEnvelope.triggerAttack(t),this},t.FMSynth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.modulationEnvelope.triggerRelease(t),this},t.FMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.FMSynth}),t(function(t){return t.MembraneSynth=function(e){e=this.defaultArg(e,t.MembraneSynth.defaults),t.Instrument.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator).start(),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.octaves=e.octaves,this.pitchDecay=e.pitchDecay,this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","envelope"])},t.extend(t.MembraneSynth,t.Instrument),t.MembraneSynth.defaults={pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential"}},t.MembraneSynth.prototype.triggerAttack=function(t,e,i){e=this.toSeconds(e);var n=(t=this.toFrequency(t))*this.octaves;return this.oscillator.frequency.setValueAtTime(n,e),this.oscillator.frequency.exponentialRampToValueAtTime(t,e+this.toSeconds(this.pitchDecay)),this.envelope.triggerAttack(e,i),this},t.MembraneSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.MembraneSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["oscillator","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this},t.MembraneSynth}),t(function(t){var e=[1,1.483,1.932,2.546,2.63,3.897];return t.MetalSynth=function(i){i=this.defaultArg(i,t.MetalSynth.defaults),t.Instrument.call(this,i),this.frequency=new t.Signal(i.frequency,t.Type.Frequency),this._oscillators=[],this._freqMultipliers=[],this._amplitue=new t.Gain(0).connect(this.output),this._highpass=new t.Filter({type:"highpass",Q:-3.0102999566398125}).connect(this._amplitue),this._octaves=i.octaves,this._filterFreqScaler=new t.Scale(i.resonance,7e3),this.envelope=new t.Envelope({attack:i.envelope.attack,attackCurve:"linear",decay:i.envelope.decay,sustain:0,release:i.envelope.release}).chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitue.gain);for(var n=0;n<e.length;n++){var s=new t.FMOscillator({type:"square",modulationType:"square",harmonicity:i.harmonicity,modulationIndex:i.modulationIndex});s.connect(this._highpass).start(0),this._oscillators[n]=s;var o=new t.Multiply(e[n]);this._freqMultipliers[n]=o,this.frequency.chain(o,s.frequency)}this.octaves=i.octaves},t.extend(t.MetalSynth,t.Instrument),t.MetalSynth.defaults={frequency:200,envelope:{attack:.001,decay:1.4,release:.2},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5},t.MetalSynth.prototype.triggerAttack=function(t,e){return t=this.toSeconds(t),e=this.defaultArg(e,1),this.envelope.triggerAttack(t,e),this},t.MetalSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this},t.MetalSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},Object.defineProperty(t.MetalSynth.prototype,"modulationIndex",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].modulationIndex.value=t}}),Object.defineProperty(t.MetalSynth.prototype,"harmonicity",{get:function(){return this._oscillators[0].harmonicity.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].harmonicity.value=t}}),Object.defineProperty(t.MetalSynth.prototype,"resonance",{get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=t,this.octaves=this._octaves}}),Object.defineProperty(t.MetalSynth.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}}),t.MetalSynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].dispose(),this._freqMultipliers[e].dispose();this._oscillators=null,this._freqMultipliers=null,this.frequency.dispose(),this.frequency=null,this._filterFreqScaler.dispose(),this._filterFreqScaler=null,this._amplitue.dispose(),this._amplitue=null,this.envelope.dispose(),this.envelope=null,this._highpass.dispose(),this._highpass=null},t.MetalSynth}),t(function(t){return window.AudioBufferSourceNode&&!AudioBufferSourceNode.prototype.start&&(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn,AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),t.BufferSource=function(){var e=this.optionsObject(arguments,["buffer","onended"],t.BufferSource.defaults);this.onended=e.onended,this._startTime=-1,this._stopTime=-1,this._gainNode=this.output=new t.Gain,this._source=this.context.createBufferSource(),this._source.connect(this._gainNode),this.playbackRate=new t.Param(this._source.playbackRate,t.Type.Positive),this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this._gain=1,this._onendedTimeout=-1,this.isUndef(e.buffer)||(this.buffer=e.buffer),this.loop=e.loop},t.extend(t.BufferSource),t.BufferSource.defaults={onended:t.noOp,fadeIn:0,fadeOut:0},Object.defineProperty(t.BufferSource.prototype,"state",{get:function(){var e=this.now();return-1!==this._startTime&&e>=this._startTime&&e<this._stopTime?t.State.Started:t.State.Stopped}}),t.BufferSource.prototype.start=function(t,e,i,n,s){if(-1!==this._startTime)throw new Error("Tone.BufferSource: can only be started once.");return this.buffer&&(t=this.toSeconds(t),e=this.loop?this.defaultArg(e,this.loopStart):this.defaultArg(e,0),e=this.toSeconds(e),t=this.toSeconds(t),this._source.start(t,e),n=this.defaultArg(n,1),this._gain=n,(s=this.isUndef(s)?this.toSeconds(this.fadeIn):this.toSeconds(s))>0?(this._gainNode.gain.setValueAtTime(0,t),this._gainNode.gain.linearRampToValueAtTime(this._gain,t+s)):this._gainNode.gain.setValueAtTime(n,t),this._startTime=t+s,this.isUndef(i)||(i=this.defaultArg(i,this.buffer.duration-e),i=this.toSeconds(i),this.stop(t+i+s,s))),this},t.BufferSource.prototype.stop=function(t,e){return this.buffer&&(t=this.toSeconds(t),e=this.isUndef(e)?this.toSeconds(this.fadeOut):this.toSeconds(e),this._stopTime=t+e,this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),e>0?(this._gainNode.gain.setValueAtTime(this._gain,t),this._gainNode.gain.linearRampToValueAtTime(0,t+e),t+=e):this._gainNode.gain.setValueAtTime(0,t),this.isNumber(this._source.playbackState)&&2!==this._source.playbackState||this._source.stop(t),clearTimeout(this._onendedTimeout),this._onendedTimeout=setTimeout(this._onended.bind(this),1e3*(this._stopTime-this.now()))),this},t.BufferSource.prototype._onended=function(){this.onended(this),this.dispose()},Object.defineProperty(t.BufferSource.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"buffer",{get:function(){return this._source?this._source.buffer:null},set:function(e){e instanceof t.Buffer?this._source.buffer=e.get():this._source.buffer=e}}),Object.defineProperty(t.BufferSource.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t}}),t.BufferSource.prototype.dispose=function(){return this.onended=null,this._source&&(this._source.disconnect(),this._source=null),this._gainNode&&(this._gainNode.dispose(),this._gainNode=null),this._startTime=-1,this.playbackRate=null,this.output=null,clearTimeout(this._onendedTimeout),this},t.BufferSource}),t(function(t){function e(){for(var e in i)n[e]=(new t.Buffer).fromArray(i[e])}t.Noise=function(){var e=this.optionsObject(arguments,["type"],t.Noise.defaults);t.Source.call(this,e),this._source=null,this._type=e.type,this._playbackRate=e.playbackRate},t.extend(t.Noise,t.Source),t.Noise.defaults={type:"white",playbackRate:1},Object.defineProperty(t.Noise.prototype,"type",{get:function(){return this._type},set:function(e){if(this._type!==e){if(!(e in n))throw new TypeError("Tone.Noise: invalid type: "+e);if(this._type=e,this.state===t.State.Started){var i=this.now()+this.blockTime;this._stop(i),this._start(i)}}}}),Object.defineProperty(t.Noise.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),t.Noise.prototype._start=function(e){var i=n[this._type];this._source=new t.BufferSource(i).connect(this.output),this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.start(this.toSeconds(e),Math.random()*(i.duration-.001))},t.Noise.prototype._stop=function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)},t.Noise.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null,this};var i={pink:function(){for(var t=[],e=0;e<2;e++){var i=new Float32Array(220500);t[e]=i;var n,s,o,r,a,h,l;n=s=o=r=a=h=l=0;for(var u=0;u<220500;u++){var p=2*Math.random()-1;n=.99886*n+.0555179*p,s=.99332*s+.0750759*p,o=.969*o+.153852*p,r=.8665*r+.3104856*p,a=.55*a+.5329522*p,h=-.7616*h-.016898*p,i[u]=n+s+o+r+a+h+l+.5362*p,i[u]*=.11,l=.115926*p}}return t}(),brown:function(){for(var t=[],e=0;e<2;e++){var i=new Float32Array(220500);t[e]=i;for(var n=0,s=0;s<220500;s++){var o=2*Math.random()-1;i[s]=(n+.02*o)/1.02,n=i[s],i[s]*=3.5}}return t}(),white:function(){for(var t=[],e=0;e<2;e++){var i=new Float32Array(220500);t[e]=i;for(var n=0;n<220500;n++)i[n]=2*Math.random()-1}return t}()},n={};return e(),t.Context.on("init",e),t.Noise}),t(function(t){return t.NoiseSynth=function(e){e=this.defaultArg(e,t.NoiseSynth.defaults),t.Instrument.call(this,e),this.noise=new t.Noise,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.noise.chain(this.envelope,this.output),this.noise.start(),this._readOnly(["noise","envelope"])},t.extend(t.NoiseSynth,t.Instrument),t.NoiseSynth.defaults={noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0}},t.NoiseSynth.prototype.triggerAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.NoiseSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.NoiseSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},t.NoiseSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["noise","envelope"]),this.noise.dispose(),this.noise=null,this.envelope.dispose(),this.envelope=null,this},t.NoiseSynth}),t(function(t){return t.PluckSynth=function(e){e=this.defaultArg(e,t.PluckSynth.defaults),t.Instrument.call(this,e),this._noise=new t.Noise("pink"),this.attackNoise=e.attackNoise,this._lfcf=new t.LowpassCombFilter({resonance:e.resonance,dampening:e.dampening}),this.resonance=this._lfcf.resonance,this.dampening=this._lfcf.dampening,this._noise.connect(this._lfcf),this._lfcf.connect(this.output),this._readOnly(["resonance","dampening"])},t.extend(t.PluckSynth,t.Instrument),t.PluckSynth.defaults={attackNoise:1,dampening:4e3,resonance:.9},t.PluckSynth.prototype.triggerAttack=function(t,e){t=this.toFrequency(t),e=this.toSeconds(e);var i=1/t;return this._lfcf.delayTime.setValueAtTime(i,e),this._noise.start(e),this._noise.stop(e+i*this.attackNoise),this},t.PluckSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this._noise=null,this._lfcf=null,this._writable(["resonance","dampening"]),this.dampening=null,this.resonance=null,this},t.PluckSynth}),t(function(t){return t.PolySynth=function(){t.Instrument.call(this);var e=this.optionsObject(arguments,["polyphony","voice"],t.PolySynth.defaults);(e=this.defaultArg(e,t.Instrument.defaults)).polyphony=Math.min(t.PolySynth.MAX_POLYPHONY,e.polyphony),this.voices=new Array(e.polyphony),this._triggers=new Array(e.polyphony),this.detune=new t.Signal(e.detune,t.Type.Cents),this._readOnly("detune");for(var i=0;i<e.polyphony;i++){var n=new e.voice(arguments[2],arguments[3]);this.voices[i]=n,n.connect(this.output),n.hasOwnProperty("detune")&&this.detune.connect(n.detune),this._triggers[i]={release:-1,note:null,voice:n}}this.volume.value=e.volume},t.extend(t.PolySynth,t.Instrument),t.PolySynth.defaults={polyphony:4,volume:0,detune:0,voice:t.Synth},t.PolySynth.prototype.triggerAttack=function(t,e,i){Array.isArray(t)||(t=[t]),e=this.toSeconds(e);for(var n=0;n<t.length;n++){for(var s=t[n],o=this._triggers[0],r=1;r<this._triggers.length;r++)this._triggers[r].release<o.release&&(o=this._triggers[r],r);o.release=1/0,o.note=JSON.stringify(s),o.voice.triggerAttack(s,e,i)}return this},t.PolySynth.prototype.triggerAttackRelease=function(t,e,i,n){if(i=this.toSeconds(i),this.triggerAttack(t,i,n),this.isArray(e)&&this.isArray(t))for(var s=0;s<t.length;s++){var o=e[Math.min(s,e.length-1)];this.triggerRelease(t[s],i+this.toSeconds(o))}else this.triggerRelease(t,i+this.toSeconds(e));return this},t.PolySynth.prototype.triggerRelease=function(t,e){Array.isArray(t)||(t=[t]),e=this.toSeconds(e);for(var i=0;i<t.length;i++)for(var n=JSON.stringify(t[i]),s=0;s<this._triggers.length;s++){var o=this._triggers[s];o.note===n&&o.release>e&&(o.voice.triggerRelease(e),o.release=e)}return this},t.PolySynth.prototype.set=function(t,e,i){for(var n=0;n<this.voices.length;n++)this.voices[n].set(t,e,i);return this},t.PolySynth.prototype.get=function(t){return this.voices[0].get(t)},t.PolySynth.prototype.releaseAll=function(t){t=this.toSeconds(t);for(var e=0;e<this._triggers.length;e++){var i=this._triggers[e];i.release>t&&(i.release=t,i.voice.triggerRelease(t))}return this},t.PolySynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this.voices.length;e++)this.voices[e].dispose(),this.voices[e]=null;return this._writable("detune"),this.detune.dispose(),this.detune=null,this.voices=null,this._triggers=null,this},t.PolySynth.MAX_POLYPHONY=20,t.PolySynth}),t(function(t){return t.Player=function(e){var i;e instanceof t.Buffer?(e=e.get(),i=t.Player.defaults):i=this.optionsObject(arguments,["url","onload"],t.Player.defaults),t.Source.call(this,i),this._source=null,this.autostart=i.autostart,this._buffer=new t.Buffer({url:i.url,onload:this._onload.bind(this,i.onload),reverse:i.reverse}),e instanceof AudioBuffer&&this._buffer.set(e),this._loop=i.loop,this._loopStart=i.loopStart,this._loopEnd=i.loopEnd,this._playbackRate=i.playbackRate,this.retrigger=i.retrigger},t.extend(t.Player,t.Source),t.Player.defaults={onload:t.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,retrigger:!1,reverse:!1},t.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e))},t.Player.prototype._onload=function(e){(e=this.defaultArg(e,t.noOp))(this),this.autostart&&this.start()},t.Player.prototype._start=function(e,i,n){if(!this._buffer.loaded)throw Error("Tone.Player: tried to start Player before the buffer was loaded");if(i=this._loop?this.defaultArg(i,this._loopStart):this.defaultArg(i,0),i=this.toSeconds(i),n=this.defaultArg(n,Math.max(this._buffer.duration-i,0)),n=this.toSeconds(n),e=this.toSeconds(e),this._source=this.context.createBufferSource(),this._source.buffer=this._buffer.get(),this._loop?(this._source.loop=this._loop,this._source.loopStart=this.toSeconds(this._loopStart),this._source.loopEnd=this.toSeconds(this._loopEnd)):this._synced||this._state.setStateAtTime(t.State.Stopped,e+n),this._source.playbackRate.value=this._playbackRate,this._source.connect(this.output),this._loop){var s=this._source.loopEnd||this._buffer.duration,o=s-this._source.loopStart;if(i>s)for(;i>s;)i-=o;this._source.start(e,i)}else this._source.start(e,i,n);return this},t.Player.prototype._stop=function(t){return this._source&&(this._source.stop(this.toSeconds(t)),this._source=null),this},t.Player.prototype.seek=function(e,i){return i=this.toSeconds(i),this._state.getValueAtTime(i)===t.State.Started&&(e=this.toSeconds(e),this._stop(i),this._start(i,e)),this},t.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Player.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._source&&(this._source.loopStart=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._source&&(this._source.loopEnd=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.Player.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._source&&(this._source.loop=t)}}),Object.defineProperty(t.Player.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),Object.defineProperty(t.Player.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),t.Player.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer.dispose(),this._buffer=null,this},t.Player}),t(function(t){return t.Sampler=function(){var e=this.optionsObject(arguments,["url","onload"],t.Sampler.defaults);t.Instrument.call(this,e),this.player=new t.Player(e.url,e.onload),this.player.retrigger=!0,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.player.chain(this.envelope,this.output),this._readOnly(["player","envelope"]),this.loop=e.loop,this.reverse=e.reverse},t.extend(t.Sampler,t.Instrument),t.Sampler.defaults={onload:t.noOp,loop:!1,reverse:!1,envelope:{attack:.001,decay:0,sustain:1,release:.1}},t.Sampler.prototype.triggerAttack=function(t,e,i){return e=this.toSeconds(e),t=this.defaultArg(t,0),this.player.playbackRate=this.intervalToFrequencyRatio(t),this.player.start(e),this.envelope.triggerAttack(e,i),this},t.Sampler.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.player.stop(this.toSeconds(this.envelope.release)+t),this},Object.defineProperty(t.Sampler.prototype,"loop",{get:function(){return this.player.loop},set:function(t){this.player.loop=t}}),Object.defineProperty(t.Sampler.prototype,"reverse",{get:function(){return this.player.reverse},set:function(t){this.player.reverse=t}}),Object.defineProperty(t.Sampler.prototype,"buffer",{get:function(){return this.player.buffer},set:function(t){this.player.buffer=t}}),t.Sampler.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["player","envelope"]),this.player.dispose(),this.player=null,this.envelope.dispose(),this.envelope=null,this},t.Sampler}),t(function(t){return t.GainToAudio=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return 2*Math.abs(t)-1})},t.extend(t.GainToAudio,t.SignalBase),t.GainToAudio.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.GainToAudio}),t(function(t){return t.Normalize=function(e,i){this._inputMin=this.defaultArg(e,0),this._inputMax=this.defaultArg(i,1),this._sub=this.input=new t.Add(0),this._div=this.output=new t.Multiply(1),this._sub.connect(this._div),this._setRange()},t.extend(t.Normalize,t.SignalBase),Object.defineProperty(t.Normalize.prototype,"min",{get:function(){return this._inputMin},set:function(t){this._inputMin=t,this._setRange()}}),Object.defineProperty(t.Normalize.prototype,"max",{get:function(){return this._inputMax},set:function(t){this._inputMax=t,this._setRange()}}),t.Normalize.prototype._setRange=function(){this._sub.value=-this._inputMin,this._div.value=1/(this._inputMax-this._inputMin)},t.Normalize.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sub.dispose(),this._sub=null,this._div.dispose(),this._div=null,this},t.Normalize}),t(function(t){return t.MultiPlayer=function(){var e=this.optionsObject(arguments,["urls","onload"],t.MultiPlayer.defaults);e.urls instanceof t.Buffers?this.buffers=e.urls:this.buffers=new t.Buffers(e.urls,e.onload),this._activeSources={},this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=e.mute},t.extend(t.MultiPlayer,t.Source),t.MultiPlayer.defaults={onload:t.noOp,fadeIn:0,fadeOut:0},t.MultiPlayer.prototype._makeSource=function(e){var i;this.isString(e)||this.isNumber(e)?i=this.buffers.get(e).get():e instanceof t.Buffer?i=e.get():e instanceof AudioBuffer&&(i=e);var n=new t.BufferSource(i).connect(this.output);return this._activeSources.hasOwnProperty(e)||(this._activeSources[e]=[]),this._activeSources[e].push(n),n},t.MultiPlayer.prototype.start=function(t,e,i,n,s,o){e=this.toSeconds(e);var r=this._makeSource(t);return r.start(e,i,n,this.defaultArg(o,1),this.fadeIn),n&&r.stop(e+this.toSeconds(n),this.fadeOut),s=this.defaultArg(s,0),r.playbackRate.value=this.intervalToFrequencyRatio(s),this},t.MultiPlayer.prototype.startLoop=function(t,e,i,n,s,o,r){e=this.toSeconds(e);var a=this._makeSource(t);return a.loop=!0,a.loopStart=this.toSeconds(this.defaultArg(n,0)),a.loopEnd=this.toSeconds(this.defaultArg(s,0)),a.start(e,i,void 0,this.defaultArg(r,1),this.fadeIn),o=this.defaultArg(o,0),a.playbackRate.value=this.intervalToFrequencyRatio(o),this},t.MultiPlayer.prototype.stop=function(t,e){if(!this._activeSources[t]||!this._activeSources[t].length)throw new Error("Tone.MultiPlayer: cannot stop a buffer that hasn't been started or is already stopped");return e=this.toSeconds(e),this._activeSources[t].shift().stop(e,this.fadeOut),this},t.MultiPlayer.prototype.stopAll=function(t){t=this.toSeconds(t);for(var e in this._activeSources)for(var i=this._activeSources[e],n=0;n<i.length;n++)i[n].stop(t);return this},t.MultiPlayer.prototype.add=function(t,e,i){return this.buffers.add(t,e,i),this},Object.defineProperty(t.MultiPlayer.prototype,"state",{get:function(){return this._activeSources.length>0?t.State.Started:t.State.Stopped}}),Object.defineProperty(t.MultiPlayer.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.MultiPlayer.prototype.dispose=function(){t.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable("volume"),this.volume=null;for(var e in this._activeSources)this._activeSources[e].forEach(function(t){t.dispose()});return this.buffers.dispose(),this.buffers=null,this._activeSources=null,this},t.MultiPlayer}),t(function(t){return t.GrainPlayer=function(){var e=this.optionsObject(arguments,["url","onload"],t.GrainPlayer.defaults);t.Source.call(this),this.buffer=new t.Buffer(e.url,e.onload),this._player=(new t.MultiPlayer).connect(this.output),this._clock=new t.Clock(this._tick.bind(this),1),this._loopStart=0,this._loopEnd=0,this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.drift=e.drift,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse},t.extend(t.GrainPlayer,t.Source),t.GrainPlayer.defaults={onload:t.noOp,overlap:.1,grainSize:.2,drift:0,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1},t.GrainPlayer.prototype._start=function(t,e,i){e=this.defaultArg(e,0),e=this.toSeconds(e),t=this.toSeconds(t),this._offset=e,this._clock.start(t),this._player.volume.setValueAtTime(0,t),i&&this._stop(t+this.toSeconds(i))},t.GrainPlayer.prototype._stop=function(t){this._clock.stop(t),this._player.volume.cancelScheduledValues(t),this._player.volume.setValueAtTime(-1/0,t)},t.GrainPlayer.prototype._tick=function(t){var e=this.buffer.duration;this.loop&&this._loopEnd>0&&(e=this._loopEnd);var i=(2*Math.random()-1)*this.drift,n=this._offset-this._overlap+i,s=this.detune/100;n=Math.max(n,0),n=Math.min(n,e);var o=this._player.fadeIn;if(this.loop&&this._offset>e){var r=this._offset-e;this._player.start(this.buffer,t,n,r+this._overlap,s),n=this._offset%e,this._offset=this._loopStart,this._player.fadeIn=0,this._player.start(this.buffer,t+r,this._offset,n+this._overlap,s)}else this._offset>e?this.stop(t):(0===n&&(this._player.fadeIn=0),this._player.start(this.buffer,t,n,this.grainSize+this._overlap,s));this._player.fadeIn=o;var a=this._clock._nextTick-t;this._offset+=a*this._playbackRate},t.GrainPlayer.prototype.scrub=function(t,e){return this._offset=this.toSeconds(t),this._tick(this.toSeconds(e)),this},Object.defineProperty(t.GrainPlayer.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this.grainSize=this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"reverse",{get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t}}),Object.defineProperty(t.GrainPlayer.prototype,"grainSize",{get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.value=this._playbackRate/this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,"overlap",{get:function(){return this._overlap},set:function(t){t=this.toSeconds(t),this._overlap=t,this._overlap<0?(this._player.fadeIn=.01,this._player.fadeOut=.01):(this._player.fadeIn=t,this._player.fadeOut=t)}}),t.GrainPlayer.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this.buffer.dispose(),this.buffer=null,this._player.dispose(),this._player=null,this._clock.dispose(),this._clock=null,this},t.GrainPlayer}),t(function(t){return t.UserMedia=function(){var e=this.optionsObject(arguments,["volume"],t.UserMedia.defaults);this._mediaStream=null,this._stream=null,this._device=null,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this.mute=e.mute},t.extend(t.UserMedia),t.UserMedia.defaults={volume:0,mute:!1},t.UserMedia.prototype.open=function(t){return t=this.defaultArg(t,"default"),this.enumerateDevices().then(function(e){var i;if(this.isNumber(t)?i=e[t]:(i=e.find(function(e){return e.label===t||e.deviceId===t}))||(i=e[0]),!i)throw new Error("Tone.UserMedia: no matching audio inputs.");this._device=i;var n={audio:{deviceId:i.deviceId,echoCancellation:!1,sampleRate:this.context.sampleRate}};return navigator.mediaDevices.getUserMedia(n).then(function(t){return this._stream||(this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),this._mediaStream.connect(this.output)),this}.bind(this))}.bind(this))},t.UserMedia.prototype.close=function(){return this._stream&&(this._stream.getAudioTracks().forEach(function(t){t.stop()}),this._stream=null,this._mediaStream.disconnect(),this._mediaStream=null),this._device=null,this},t.UserMedia.prototype.enumerateDevices=function(){return navigator.mediaDevices.enumerateDevices().then(function(t){return t.filter(function(t){return"audioinput"===t.kind})})},Object.defineProperty(t.UserMedia.prototype,"state",{get:function(){return this._stream&&this._stream.active?t.State.Started:t.State.Stopped}}),Object.defineProperty(t.UserMedia.prototype,"deviceId",{get:function(){if(this._device)return this._device.deviceId}}),Object.defineProperty(t.UserMedia.prototype,"groupId",{get:function(){if(this._device)return this._device.groupId}}),Object.defineProperty(t.UserMedia.prototype,"label",{get:function(){if(this._device)return this._device.label}}),Object.defineProperty(t.UserMedia.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.UserMedia.prototype.dispose=function(){return t.prototype.dispose.call(this),this.close(),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this},Object.defineProperty(t.UserMedia,"supported",{get:function(){return!t.prototype.isUndef(navigator.mediaDevices)&&t.prototype.isFunction(navigator.mediaDevices.getUserMedia)}}),t.UserMedia}),e});
!function(t,r){t.tracking=t.tracking||{},tracking.inherits=function(t,r){function n(){}n.prototype=r.prototype,t.superClass_=r.prototype,t.prototype=new n,t.prototype.constructor=t,t.base=function(t,n){var e=Array.prototype.slice.call(arguments,2);return r.prototype[n].apply(t,e)}},tracking.initUserMedia_=function(r,n){t.navigator.getUserMedia({video:!0,audio:!(!n||!n.audio)},function(n){tracking.localStream=n;try{r.src=t.URL.createObjectURL(n)}catch(t){r.src=n}},function(){throw Error("Cannot capture user camera.")})},tracking.stopUserMedia=function(){tracking.localStream&&tracking.localStream.stop()},tracking.isNode=function(t){return t.nodeType||this.isWindow(t)},tracking.isWindow=function(t){return!!(t&&t.alert&&t.document)},tracking.one=function(t,r){return this.isNode(t)?t:(r||document).querySelector(t)},tracking.track=function(t,r,n){if(!(t=tracking.one(t)))throw new Error("Element not found, try a different element or selector.");if(!r)throw new Error("Tracker not specified, try `tracking.track(element, new tracking.FaceTracker())`.");switch(t.nodeName.toLowerCase()){case"canvas":return this.trackCanvas_(t,r,n);case"img":return this.trackImg_(t,r,n);case"video":return n&&n.camera&&this.initUserMedia_(t,n),this.trackVideo_(t,r,n);default:throw new Error("Element not supported, try in a canvas, img, or video.")}},tracking.trackCanvas_=function(t,r){var n=this,e=new tracking.TrackerTask(r);return e.on("run",function(){n.trackCanvasInternal_(t,r)}),e.run()},tracking.trackCanvasInternal_=function(t,r){var n=t.width,e=t.height,i=t.getContext("2d").getImageData(0,0,n,e);r.track(i.data,n,e)},tracking.trackImg_=function(t,r){var n=t.width,e=t.height,i=document.createElement("canvas");i.width=n,i.height=e;var a=new tracking.TrackerTask(r);return a.on("run",function(){tracking.Canvas.loadImage(i,t.src,0,0,n,e,function(){tracking.trackCanvasInternal_(i,r)})}),a.run()},tracking.trackVideo_=function(r,n){var e,i,a=document.createElement("canvas"),o=a.getContext("2d"),c=function(){e=r.offsetWidth,i=r.offsetHeight,a.width=e,a.height=i};c(),r.addEventListener("resize",c);var s,g=function(){s=t.requestAnimationFrame(function(){if(r.readyState===r.HAVE_ENOUGH_DATA){try{o.drawImage(r,0,0,e,i)}catch(t){}tracking.trackCanvasInternal_(a,n)}g()})},h=new tracking.TrackerTask(n);return h.on("stop",function(){t.cancelAnimationFrame(s)}),h.on("run",function(){g()}),h.run()},t.URL||(t.URL=t.URL||t.webkitURL||t.msURL||t.oURL),navigator.getUserMedia||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)}(window),function(){tracking.EventEmitter=function(){},tracking.EventEmitter.prototype.events_=null,tracking.EventEmitter.prototype.addListener=function(t,r){if("function"!=typeof r)throw new TypeError("Listener must be a function");return this.events_||(this.events_={}),this.emit("newListener",t,r),this.events_[t]||(this.events_[t]=[]),this.events_[t].push(r),this},tracking.EventEmitter.prototype.listeners=function(t){return this.events_&&this.events_[t]},tracking.EventEmitter.prototype.emit=function(t){var r=this.listeners(t);if(r){for(var n=Array.prototype.slice.call(arguments,1),e=0;e<r.length;e++)r[e]&&r[e].apply(this,n);return!0}return!1},tracking.EventEmitter.prototype.on=tracking.EventEmitter.prototype.addListener,tracking.EventEmitter.prototype.once=function(t,r){var n=this;n.on(t,function e(){n.removeListener(t,e),r.apply(this,arguments)})},tracking.EventEmitter.prototype.removeAllListeners=function(t){return this.events_?(t?delete this.events_[t]:delete this.events_,this):this},tracking.EventEmitter.prototype.removeListener=function(t,r){if("function"!=typeof r)throw new TypeError("Listener must be a function");if(!this.events_)return this;var n=this.listeners(t);if(Array.isArray(n)){var e=n.indexOf(r);if(e<0)return this;n.splice(e,1)}return this},tracking.EventEmitter.prototype.setMaxListeners=function(){throw new Error("Not implemented")}}(),function(){tracking.Canvas={},tracking.Canvas.loadImage=function(t,r,n,e,i,a,o){var c=this,s=new window.Image;s.crossOrigin="*",s.onload=function(){var r=t.getContext("2d");t.width=i,t.height=a,r.drawImage(s,n,e,i,a),o&&o.call(c),s=null},s.src=r}}(),function(){tracking.DisjointSet=function(t){if(void 0===t)throw new Error("DisjointSet length not specified.");this.length=t,this.parent=new Uint32Array(t);for(var r=0;r<t;r++)this.parent[r]=r},tracking.DisjointSet.prototype.length=null,tracking.DisjointSet.prototype.parent=null,tracking.DisjointSet.prototype.find=function(t){return this.parent[t]===t?t:this.parent[t]=this.find(this.parent[t])},tracking.DisjointSet.prototype.union=function(t,r){var n=this.find(t),e=this.find(r);this.parent[n]=e}}(),function(){tracking.Image={},tracking.Image.blur=function(t,r,n,e){if((e=Math.abs(e))<=1)throw new Error("Diameter should be greater than 1.");for(var i=e/2,a=Math.ceil(e)+(1-Math.ceil(e)%2),o=new Float32Array(a),c=(i+.5)/3,s=c*c,g=1/Math.sqrt(2*Math.PI*s),h=-1/(2*c*c),k=0,f=Math.floor(a/2),u=0;u<a;u++){var l=u-f,p=g*Math.exp(l*l*h);o[u]=p,k+=p}for(var v=0;v<o.length;v++)o[v]/=k;return this.separableConvolve(t,r,n,o,o,!1)},tracking.Image.computeIntegralImage=function(t,r,n,e,i,a,o){if(arguments.length<4)throw new Error("You should specify at least one output array in the order: sum, square, tilted, sobel.");var c;o&&(c=tracking.Image.sobel(t,r,n));for(var s=0;s<n;s++)for(var g=0;g<r;g++){var h=s*r*4+4*g,k=~~(.299*t[h]+.587*t[h+1]+.114*t[h+2]);if(e&&this.computePixelValueSAT_(e,r,s,g,k),i&&this.computePixelValueSAT_(i,r,s,g,k*k),a){var f=h-4*r,u=~~(.299*t[f]+.587*t[f+1]+.114*t[f+2]);this.computePixelValueRSAT_(a,r,s,g,k,u||0)}o&&this.computePixelValueSAT_(o,r,s,g,c[h])}},tracking.Image.computePixelValueRSAT_=function(t,r,n,e,i,a){var o=n*r+e;t[o]=(t[o-r-1]||0)+(t[o-r+1]||0)-(t[o-r-r]||0)+i+a},tracking.Image.computePixelValueSAT_=function(t,r,n,e,i){var a=n*r+e;t[a]=(t[a-r]||0)+(t[a-1]||0)+i-(t[a-r-1]||0)},tracking.Image.grayscale=function(t,r,n,e){for(var i=new Uint8ClampedArray(e?t.length:t.length>>2),a=0,o=0,c=0;c<n;c++)for(var s=0;s<r;s++){var g=.299*t[o]+.587*t[o+1]+.114*t[o+2];i[a++]=g,e&&(i[a++]=g,i[a++]=g,i[a++]=t[o+3]),o+=4}return i},tracking.Image.horizontalConvolve=function(t,r,n,e,i){for(var a=e.length,o=Math.floor(a/2),c=new Float32Array(r*n*4),s=i?1:0,g=0;g<n;g++)for(var h=0;h<r;h++){for(var k=g,f=h,u=4*(g*r+h),l=0,p=0,v=0,m=0,y=0;y<a;y++){var d=4*(k*r+Math.min(r-1,Math.max(0,f+y-o))),w=e[y];l+=t[d]*w,p+=t[d+1]*w,v+=t[d+2]*w,m+=t[d+3]*w}c[u]=l,c[u+1]=p,c[u+2]=v,c[u+3]=m+s*(255-m)}return c},tracking.Image.verticalConvolve=function(t,r,n,e,i){for(var a=e.length,o=Math.floor(a/2),c=new Float32Array(r*n*4),s=i?1:0,g=0;g<n;g++)for(var h=0;h<r;h++){for(var k=g,f=h,u=4*(g*r+h),l=0,p=0,v=0,m=0,y=0;y<a;y++){var d=4*(Math.min(n-1,Math.max(0,k+y-o))*r+f),w=e[y];l+=t[d]*w,p+=t[d+1]*w,v+=t[d+2]*w,m+=t[d+3]*w}c[u]=l,c[u+1]=p,c[u+2]=v,c[u+3]=m+s*(255-m)}return c},tracking.Image.separableConvolve=function(t,r,n,e,i,a){var o=this.verticalConvolve(t,r,n,i,a);return this.horizontalConvolve(o,r,n,e,a)},tracking.Image.sobel=function(t,r,n){t=this.grayscale(t,r,n,!0);for(var e=new Float32Array(r*n*4),i=new Float32Array([-1,0,1]),a=new Float32Array([1,2,1]),o=this.separableConvolve(t,r,n,i,a),c=this.separableConvolve(t,r,n,a,i),s=0;s<e.length;s+=4){var g=o[s],h=c[s],k=Math.sqrt(h*h+g*g);e[s]=k,e[s+1]=k,e[s+2]=k,e[s+3]=255}return e}}(),function(){tracking.ViolaJones={},tracking.ViolaJones.REGIONS_OVERLAP=.5,tracking.ViolaJones.classifiers={},tracking.ViolaJones.detect=function(t,r,n,e,i,a,o,c){var s,g=0,h=[],k=new Int32Array(r*n),f=new Int32Array(r*n),u=new Int32Array(r*n);o>0&&(s=new Int32Array(r*n)),tracking.Image.computeIntegralImage(t,r,n,k,f,u,s);for(var l=c[0],p=c[1],v=e*i,m=v*l|0,y=v*p|0;m<r&&y<n;){for(var d=v*a+.5|0,w=0;w<n-y;w+=d)for(var T=0;T<r-m;T+=d)o>0&&this.isTriviallyExcluded(o,s,w,T,r,m,y)||this.evalStages_(c,k,f,u,w,T,r,m,y,v)&&(h[g++]={width:m,height:y,x:T,y:w});m=(v*=i)*l|0,y=v*p|0}return this.mergeRectangles_(h)},tracking.ViolaJones.isTriviallyExcluded=function(t,r,n,e,i,a,o){var c=n*i+e,s=c+a,g=c+o*i,h=g+a;return(r[c]-r[s]-r[g]+r[h])/(a*o*255)<t},tracking.ViolaJones.evalStages_=function(t,r,n,e,i,a,o,c,s,g){var h=1/(c*s),k=i*o+a,f=k+c,u=k+s*o,l=u+c,p=(r[k]-r[f]-r[u]+r[l])*h,v=(n[k]-n[f]-n[u]+n[l])*h-p*p,m=1;v>0&&(m=Math.sqrt(v));for(var y=t.length,d=2;d<y;){for(var w=0,T=t[d++],C=t[d++];C--;){for(var _=0,E=t[d++],M=t[d++],x=0;x<M;x++){var I,b,O,S,A=a+t[d++]*g+.5|0,D=i+t[d++]*g+.5|0,R=t[d++]*g+.5|0,j=t[d++]*g+.5|0,F=t[d++];E?(b=A+(D-1)*o,O=A-j+(D+j-1)*o,S=A+R+(D+R-1)*o,_+=(e[I=A-j+R+(D+R+j-1)*o]+e[b]-e[O]-e[S])*F):(b=(I=D*o+A)+R,S=(O=I+j*o)+R,_+=(r[I]-r[b]-r[O]+r[S])*F)}var L=t[d++],U=t[d++],V=t[d++];w+=_*h<L*m?U:V}if(w<T)return!1}return!0},tracking.ViolaJones.mergeRectangles_=function(t){for(var r=new tracking.DisjointSet(t.length),n=0;n<t.length;n++)for(var e=t[n],i=0;i<t.length;i++){var a=t[i];if(tracking.Math.intersectRect(e.x,e.y,e.x+e.width,e.y+e.height,a.x,a.y,a.x+a.width,a.y+a.height)){var o=Math.max(e.x,a.x),c=Math.max(e.y,a.y),s=(o-Math.min(e.x+e.width,a.x+a.width))*(c-Math.min(e.y+e.height,a.y+a.height)),g=e.width*e.height,h=a.width*a.height;s/(g*(g/h))>=this.REGIONS_OVERLAP&&s/(h*(g/h))>=this.REGIONS_OVERLAP&&r.union(n,i)}}for(var k={},f=0;f<r.length;f++){var u=r.find(f);k[u]?(k[u].total++,k[u].width+=t[f].width,k[u].height+=t[f].height,k[u].x+=t[f].x,k[u].y+=t[f].y):k[u]={total:1,width:t[f].width,height:t[f].height,x:t[f].x,y:t[f].y}}var l=[];return Object.keys(k).forEach(function(t){var r=k[t];l.push({total:r.total,width:r.width/r.total+.5|0,height:r.height/r.total+.5|0,x:r.x/r.total+.5|0,y:r.y/r.total+.5|0})}),l}}(),function(){tracking.Brief={},tracking.Brief.N=512,tracking.Brief.randomImageOffsets_={},tracking.Brief.randomWindowOffsets_=null,tracking.Brief.getDescriptors=function(t,r,n){for(var e=new Int32Array((n.length>>1)*(this.N>>5)),i=0,a=this.getRandomOffsets_(r),o=0,c=0;c<n.length;c+=2)for(var s=r*n[c+1]+n[c],g=0,h=0,k=this.N;h<k;h++)t[a[g++]+s]<t[a[g++]+s]&&(i|=1<<(31&h)),h+1&31||(e[o++]=i,i=0);return e},tracking.Brief.match=function(t,r,n,e){for(var i=t.length>>1,a=n.length>>1,o=new Array(i),c=0;c<i;c++){for(var s=1/0,g=0,h=0;h<a;h++){for(var k=0,f=0,u=this.N>>5;f<u;f++)k+=tracking.Math.hammingWeight(r[c*u+f]^e[h*u+f]);k<s&&(s=k,g=h)}o[c]={index1:c,index2:g,keypoint1:[t[2*c],t[2*c+1]],keypoint2:[n[2*g],n[2*g+1]],confidence:1-s/this.N}}return o},tracking.Brief.reciprocalMatch=function(t,r,n,e){var i=[];if(0===t.length||0===n.length)return i;for(var a=tracking.Brief.match(t,r,n,e),o=tracking.Brief.match(n,e,t,r),c=0;c<a.length;c++)o[a[c].index2].index2===c&&i.push(a[c]);return i},tracking.Brief.getRandomOffsets_=function(t){if(!this.randomWindowOffsets_){for(var r=0,n=new Int32Array(4*this.N),e=0;e<this.N;e++)n[r++]=Math.round(tracking.Math.uniformRandom(-15,16)),n[r++]=Math.round(tracking.Math.uniformRandom(-15,16)),n[r++]=Math.round(tracking.Math.uniformRandom(-15,16)),n[r++]=Math.round(tracking.Math.uniformRandom(-15,16));this.randomWindowOffsets_=n}if(!this.randomImageOffsets_[t]){for(var i=0,a=new Int32Array(2*this.N),o=0;o<this.N;o++)a[i++]=this.randomWindowOffsets_[4*o]*t+this.randomWindowOffsets_[4*o+1],a[i++]=this.randomWindowOffsets_[4*o+2]*t+this.randomWindowOffsets_[4*o+3];this.randomImageOffsets_[t]=a}return this.randomImageOffsets_[t]}}(),function(){tracking.Fast={},tracking.Fast.THRESHOLD=40,tracking.Fast.circles_={},tracking.Fast.findCorners=function(t,r,n,e){var i=this.getCircleOffsets_(r),a=new Int32Array(16),o=[];void 0===e&&(e=this.THRESHOLD);for(var c=3;c<n-3;c++)for(var s=3;s<r-3;s++){for(var g=c*r+s,h=t[g],k=0;k<16;k++)a[k]=t[g+i[k]];this.isCorner(h,a,e)&&(o.push(s,c),s+=3)}return o},tracking.Fast.isBrighter=function(t,r,n){return t-r>n},tracking.Fast.isCorner=function(t,r,n){if(this.isTriviallyExcluded(r,t,n))return!1;for(var e=0;e<16;e++){for(var i=!0,a=!0,o=0;o<9;o++){var c=r[e+o&15];if(!this.isBrighter(t,c,n)&&(a=!1,!1===i))break;if(!this.isDarker(t,c,n)&&(i=!1,!1===a))break}if(a||i)return!0}return!1},tracking.Fast.isDarker=function(t,r,n){return r-t>n},tracking.Fast.isTriviallyExcluded=function(t,r,n){var e=0,i=t[8],a=t[12],o=t[4],c=t[0];return this.isBrighter(c,r,n)&&e++,this.isBrighter(o,r,n)&&e++,this.isBrighter(i,r,n)&&e++,this.isBrighter(a,r,n)&&e++,e<3&&(e=0,this.isDarker(c,r,n)&&e++,this.isDarker(o,r,n)&&e++,this.isDarker(i,r,n)&&e++,this.isDarker(a,r,n)&&e++,e<3)},tracking.Fast.getCircleOffsets_=function(t){if(this.circles_[t])return this.circles_[t];var r=new Int32Array(16);return r[0]=-t-t-t,r[1]=r[0]+1,r[2]=r[1]+t+1,r[3]=r[2]+t+1,r[4]=r[3]+t,r[5]=r[4]+t,r[6]=r[5]+t-1,r[7]=r[6]+t-1,r[8]=r[7]-1,r[9]=r[8]-1,r[10]=r[9]-t-1,r[11]=r[10]-t-1,r[12]=r[11]-t,r[13]=r[12]-t,r[14]=r[13]-t+1,r[15]=r[14]-t+1,this.circles_[t]=r,r}}(),function(){tracking.Math={},tracking.Math.distance=function(t,r,n,e){var i=n-t,a=e-r;return Math.sqrt(i*i+a*a)},tracking.Math.hammingWeight=function(t){return t-=t>>1&1431655765,16843009*((t=(858993459&t)+(t>>2&858993459))+(t>>4)&252645135)>>24},tracking.Math.uniformRandom=function(t,r){return t+Math.random()*(r-t)},tracking.Math.intersectRect=function(t,r,n,e,i,a,o,c){return!(i>n||o<t||a>e||c<r)}}(),function(){tracking.Matrix={},tracking.Matrix.forEach=function(t,r,n,e,i){i=i||1;for(var a=0;a<n;a+=i)for(var o=0;o<r;o+=i){var c=a*r*4+4*o;e.call(this,t[c],t[c+1],t[c+2],t[c+3],c,a,o)}}}(),function(){tracking.EPnP={},tracking.EPnP.solve=function(t,r,n){}}(),function(){tracking.Tracker=function(){tracking.Tracker.base(this,"constructor")},tracking.inherits(tracking.Tracker,tracking.EventEmitter),tracking.Tracker.prototype.track=function(){}}(),function(){tracking.TrackerTask=function(t){if(tracking.TrackerTask.base(this,"constructor"),!t)throw new Error("Tracker instance not specified.");this.setTracker(t)},tracking.inherits(tracking.TrackerTask,tracking.EventEmitter),tracking.TrackerTask.prototype.tracker_=null,tracking.TrackerTask.prototype.running_=!1,tracking.TrackerTask.prototype.getTracker=function(){return this.tracker_},tracking.TrackerTask.prototype.inRunning=function(){return this.running_},tracking.TrackerTask.prototype.setRunning=function(t){this.running_=t},tracking.TrackerTask.prototype.setTracker=function(t){this.tracker_=t},tracking.TrackerTask.prototype.run=function(){var t=this;if(!this.inRunning())return this.setRunning(!0),this.reemitTrackEvent_=function(r){t.emit("track",r)},this.tracker_.on("track",this.reemitTrackEvent_),this.emit("run"),this},tracking.TrackerTask.prototype.stop=function(){if(this.inRunning())return this.setRunning(!1),this.emit("stop"),this.tracker_.removeListener("track",this.reemitTrackEvent_),this}}(),function(){tracking.ColorTracker=function(t){tracking.ColorTracker.base(this,"constructor"),"string"==typeof t&&(t=[t]),t&&(t.forEach(function(t){if(!tracking.ColorTracker.getColor(t))throw new Error('Color not valid, try `new tracking.ColorTracker("magenta")`.')}),this.setColors(t))},tracking.inherits(tracking.ColorTracker,tracking.Tracker),tracking.ColorTracker.knownColors_={},tracking.ColorTracker.neighbours_={},tracking.ColorTracker.registerColor=function(t,r){tracking.ColorTracker.knownColors_[t]=r},tracking.ColorTracker.getColor=function(t){return tracking.ColorTracker.knownColors_[t]},tracking.ColorTracker.prototype.colors=["magenta"],tracking.ColorTracker.prototype.minDimension=20,tracking.ColorTracker.prototype.maxDimension=1/0,tracking.ColorTracker.prototype.minGroupSize=30,tracking.ColorTracker.prototype.calculateDimensions_=function(t,r){for(var n=-1,e=-1,i=1/0,a=1/0,o=0;o<r;o+=2){var c=t[o],s=t[o+1];c<i&&(i=c),c>n&&(n=c),s<a&&(a=s),s>e&&(e=s)}return{width:n-i,height:e-a,x:i,y:a}},tracking.ColorTracker.prototype.getColors=function(){return this.colors},tracking.ColorTracker.prototype.getMinDimension=function(){return this.minDimension},tracking.ColorTracker.prototype.getMaxDimension=function(){return this.maxDimension},tracking.ColorTracker.prototype.getMinGroupSize=function(){return this.minGroupSize},tracking.ColorTracker.prototype.getNeighboursForWidth_=function(t){if(tracking.ColorTracker.neighbours_[t])return tracking.ColorTracker.neighbours_[t];var r=new Int32Array(8);return r[0]=4*-t,r[1]=4*-t+4,r[2]=4,r[3]=4*t+4,r[4]=4*t,r[5]=4*t-4,r[6]=-4,r[7]=4*-t-4,tracking.ColorTracker.neighbours_[t]=r,r},tracking.ColorTracker.prototype.mergeRectangles_=function(t){for(var r,n=[],e=this.getMinDimension(),i=this.getMaxDimension(),a=0;a<t.length;a++){var o=t[a];r=!0;for(var c=a+1;c<t.length;c++){var s=t[c];if(tracking.Math.intersectRect(o.x,o.y,o.x+o.width,o.y+o.height,s.x,s.y,s.x+s.width,s.y+s.height)){r=!1;var g=Math.min(o.x,s.x),h=Math.min(o.y,s.y),k=Math.max(o.x+o.width,s.x+s.width),f=Math.max(o.y+o.height,s.y+s.height);s.height=f-h,s.width=k-g,s.x=g,s.y=h;break}}r&&o.width>=e&&o.height>=e&&o.width<=i&&o.height<=i&&n.push(o)}return n},tracking.ColorTracker.prototype.setColors=function(t){this.colors=t},tracking.ColorTracker.prototype.setMinDimension=function(t){this.minDimension=t},tracking.ColorTracker.prototype.setMaxDimension=function(t){this.maxDimension=t},tracking.ColorTracker.prototype.setMinGroupSize=function(t){this.minGroupSize=t},tracking.ColorTracker.prototype.track=function(t,r,n){var e=this,i=this.getColors();if(!i)throw new Error('Colors not specified, try `new tracking.ColorTracker("magenta")`.');var a=[];i.forEach(function(i){a=a.concat(e.trackColor_(t,r,n,i))}),this.emit("track",{data:a})},tracking.ColorTracker.prototype.trackColor_=function(n,e,i,a){var o,c,s,g,h,k=tracking.ColorTracker.knownColors_[a],f=new Int32Array(n.length>>2),u=new Int8Array(n.length),l=this.getMinGroupSize(),p=this.getNeighboursForWidth_(e),v=new Int32Array(n.length),m=[],y=-4;if(!k)return m;for(var d=0;d<i;d++)for(var w=0;w<e;w++)if(y+=4,!u[y]){for(o=0,h=-1,v[++h]=y,v[++h]=d,v[++h]=w,u[y]=1;h>=0;)if(s=v[h--],c=v[h--],g=v[h--],k(n[g],n[g+1],n[g+2],n[g+3],g,c,s)){f[o++]=s,f[o++]=c;for(var T=0;T<p.length;T++){var C=g+p[T],_=c+t[T],E=s+r[T];!u[C]&&_>=0&&_<i&&E>=0&&E<e&&(v[++h]=C,v[++h]=_,v[++h]=E,u[C]=1)}}if(o>=l){var M=this.calculateDimensions_(f,o);M&&(M.color=a,m.push(M))}}return this.mergeRectangles_(m)},tracking.ColorTracker.registerColor("cyan",function(t,r,n){var e=t-0,i=r-255,a=n-255;return r-t>=50&&n-t>=70||e*e+i*i+a*a<6400}),tracking.ColorTracker.registerColor("magenta",function(t,r,n){var e=t-255,i=r-0,a=n-255;return t-r>=50&&n-r>=50||e*e+i*i+a*a<19600}),tracking.ColorTracker.registerColor("yellow",function(t,r,n){var e=t-255,i=r-255,a=n-0;return t-n>=50&&r-n>=50||e*e+i*i+a*a<1e4});var t=new Int32Array([-1,-1,0,1,1,1,0,-1]),r=new Int32Array([0,1,1,1,0,-1,-1,-1])}(),function(){tracking.ObjectTracker=function(t){tracking.ObjectTracker.base(this,"constructor"),t&&(Array.isArray(t)||(t=[t]),Array.isArray(t)&&t.forEach(function(r,n){if("string"==typeof r&&(t[n]=tracking.ViolaJones.classifiers[r]),!t[n])throw new Error('Object classifier not valid, try `new tracking.ObjectTracker("face")`.')})),this.setClassifiers(t)},tracking.inherits(tracking.ObjectTracker,tracking.Tracker),tracking.ObjectTracker.prototype.edgesDensity=.2,tracking.ObjectTracker.prototype.initialScale=1,tracking.ObjectTracker.prototype.scaleFactor=1.25,tracking.ObjectTracker.prototype.stepSize=1.5,tracking.ObjectTracker.prototype.getClassifiers=function(){return this.classifiers},tracking.ObjectTracker.prototype.getEdgesDensity=function(){return this.edgesDensity},tracking.ObjectTracker.prototype.getInitialScale=function(){return this.initialScale},tracking.ObjectTracker.prototype.getScaleFactor=function(){return this.scaleFactor},tracking.ObjectTracker.prototype.getStepSize=function(){return this.stepSize},tracking.ObjectTracker.prototype.track=function(t,r,n){var e=this,i=this.getClassifiers();if(!i)throw new Error('Object classifier not specified, try `new tracking.ObjectTracker("face")`.');var a=[];i.forEach(function(i){a=a.concat(tracking.ViolaJones.detect(t,r,n,e.getInitialScale(),e.getScaleFactor(),e.getStepSize(),e.getEdgesDensity(),i))}),this.emit("track",{data:a})},tracking.ObjectTracker.prototype.setClassifiers=function(t){this.classifiers=t},tracking.ObjectTracker.prototype.setEdgesDensity=function(t){this.edgesDensity=t},tracking.ObjectTracker.prototype.setInitialScale=function(t){this.initialScale=t},tracking.ObjectTracker.prototype.setScaleFactor=function(t){this.scaleFactor=t},tracking.ObjectTracker.prototype.setStepSize=function(t){this.stepSize=t}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9zb2NrZXQuanMiLCJoYW1tZXIubWluLmpzIiwic3RhcnRBdWRpb0NvbnRleHQuanMiLCJ0b25lLmpzIiwidHJhY2tlci1taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQ0FBO0FDQUEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5pbz1lKCk6dC5pbz1lKCl9KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShuKXtpZihyW25dKXJldHVybiByW25dLmV4cG9ydHM7dmFyIG89cltuXT17ZXhwb3J0czp7fSxpZDpuLGxvYWRlZDohMX07cmV0dXJuIHRbbl0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsZSksby5sb2FkZWQ9ITAsby5leHBvcnRzfXZhciByPXt9O3JldHVybiBlLm09dCxlLmM9cixlLnA9XCJcIixlKDApfShbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0P1widW5kZWZpbmVkXCI6aSh0KSkmJihlPXQsdD12b2lkIDApLGU9ZXx8e307dmFyIHIsbj1zKHQpLGE9bi5zb3VyY2UscD1uLmlkLGY9bi5wYXRoLGw9aFtwXSYmZiBpbiBoW3BdLm5zcHMsZD1lLmZvcmNlTmV3fHxlW1wiZm9yY2UgbmV3IGNvbm5lY3Rpb25cIl18fCExPT09ZS5tdWx0aXBsZXh8fGw7cmV0dXJuIGQ/KHUoXCJpZ25vcmluZyBzb2NrZXQgY2FjaGUgZm9yICVzXCIsYSkscj1jKGEsZSkpOihoW3BdfHwodShcIm5ldyBpbyBpbnN0YW5jZSBmb3IgJXNcIixhKSxoW3BdPWMoYSxlKSkscj1oW3BdKSxuLnF1ZXJ5JiYhZS5xdWVyeT9lLnF1ZXJ5PW4ucXVlcnk6ZSYmXCJvYmplY3RcIj09PWkoZS5xdWVyeSkmJihlLnF1ZXJ5PW8oZS5xdWVyeSkpLHIuc29ja2V0KG4ucGF0aCxlKX1mdW5jdGlvbiBvKHQpe3ZhciBlPVtdO2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJmUucHVzaChlbmNvZGVVUklDb21wb25lbnQocikrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRbcl0pKTtyZXR1cm4gZS5qb2luKFwiJlwiKX12YXIgaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxzPXIoMSksYT1yKDcpLGM9cigxNyksdT1yKDMpKFwic29ja2V0LmlvLWNsaWVudFwiKTt0LmV4cG9ydHM9ZT1uO3ZhciBoPWUubWFuYWdlcnM9e307ZS5wcm90b2NvbD1hLnByb3RvY29sLGUuY29ubmVjdD1uLGUuTWFuYWdlcj1yKDE3KSxlLlNvY2tldD1yKDQ0KX0sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQscil7dmFyIG49dDtyPXJ8fGUubG9jYXRpb24sbnVsbD09dCYmKHQ9ci5wcm90b2NvbCtcIi8vXCIrci5ob3N0KSxcInN0cmluZ1wiPT10eXBlb2YgdCYmKFwiL1wiPT09dC5jaGFyQXQoMCkmJih0PVwiL1wiPT09dC5jaGFyQXQoMSk/ci5wcm90b2NvbCt0OnIuaG9zdCt0KSwvXihodHRwcz98d3NzPyk6XFwvXFwvLy50ZXN0KHQpfHwoaShcInByb3RvY29sLWxlc3MgdXJsICVzXCIsdCksdD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygcj9yLnByb3RvY29sK1wiLy9cIit0OlwiaHR0cHM6Ly9cIit0KSxpKFwicGFyc2UgJXNcIix0KSxuPW8odCkpLG4ucG9ydHx8KC9eKGh0dHB8d3MpJC8udGVzdChuLnByb3RvY29sKT9uLnBvcnQ9XCI4MFwiOi9eKGh0dHB8d3MpcyQvLnRlc3Qobi5wcm90b2NvbCkmJihuLnBvcnQ9XCI0NDNcIikpLG4ucGF0aD1uLnBhdGh8fFwiL1wiO3ZhciBzPW4uaG9zdC5pbmRleE9mKFwiOlwiKSE9PS0xLGE9cz9cIltcIituLmhvc3QrXCJdXCI6bi5ob3N0O3JldHVybiBuLmlkPW4ucHJvdG9jb2wrXCI6Ly9cIithK1wiOlwiK24ucG9ydCxuLmhyZWY9bi5wcm90b2NvbCtcIjovL1wiK2ErKHImJnIucG9ydD09PW4ucG9ydD9cIlwiOlwiOlwiK24ucG9ydCksbn12YXIgbz1yKDIpLGk9cigzKShcInNvY2tldC5pby1jbGllbnQ6dXJsXCIpO3QuZXhwb3J0cz1ufSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe3ZhciByPS9eKD86KD8hW146QF0rOlteOkBcXC9dKkApKGh0dHB8aHR0cHN8d3N8d3NzKTpcXC9cXC8pPygoPzooKFteOkBdKikoPzo6KFteOkBdKikpPyk/QCk/KCg/OlthLWYwLTldezAsNH06KXsyLDd9W2EtZjAtOV17MCw0fXxbXjpcXC8/I10qKSg/OjooXFxkKikpPykoKChcXC8oPzpbXj8jXSg/IVtePyNcXC9dKlxcLltePyNcXC8uXSsoPzpbPyNdfCQpKSkqXFwvPyk/KFtePyNcXC9dKikpKD86XFw/KFteI10qKSk/KD86IyguKikpPykvLG49W1wic291cmNlXCIsXCJwcm90b2NvbFwiLFwiYXV0aG9yaXR5XCIsXCJ1c2VySW5mb1wiLFwidXNlclwiLFwicGFzc3dvcmRcIixcImhvc3RcIixcInBvcnRcIixcInJlbGF0aXZlXCIsXCJwYXRoXCIsXCJkaXJlY3RvcnlcIixcImZpbGVcIixcInF1ZXJ5XCIsXCJhbmNob3JcIl07dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXQsbz10LmluZGV4T2YoXCJbXCIpLGk9dC5pbmRleE9mKFwiXVwiKTtvIT0tMSYmaSE9LTEmJih0PXQuc3Vic3RyaW5nKDAsbykrdC5zdWJzdHJpbmcobyxpKS5yZXBsYWNlKC86L2csXCI7XCIpK3Quc3Vic3RyaW5nKGksdC5sZW5ndGgpKTtmb3IodmFyIHM9ci5leGVjKHR8fFwiXCIpLGE9e30sYz0xNDtjLS07KWFbbltjXV09c1tjXXx8XCJcIjtyZXR1cm4gbyE9LTEmJmkhPS0xJiYoYS5zb3VyY2U9ZSxhLmhvc3Q9YS5ob3N0LnN1YnN0cmluZygxLGEuaG9zdC5sZW5ndGgtMSkucmVwbGFjZSgvOy9nLFwiOlwiKSxhLmF1dGhvcml0eT1hLmF1dGhvcml0eS5yZXBsYWNlKFwiW1wiLFwiXCIpLnJlcGxhY2UoXCJdXCIsXCJcIikucmVwbGFjZSgvOy9nLFwiOlwiKSxhLmlwdjZ1cmk9ITApLGF9fSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIG8oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQmJlwiV2Via2l0QXBwZWFyYW5jZVwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlfHx3aW5kb3cuY29uc29sZSYmKGNvbnNvbGUuZmlyZWJ1Z3x8Y29uc29sZS5leGNlcHRpb24mJmNvbnNvbGUudGFibGUpfHxuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSYmcGFyc2VJbnQoUmVnRXhwLiQxLDEwKT49MzF9ZnVuY3Rpb24gaSgpe3ZhciB0PWFyZ3VtZW50cyxyPXRoaXMudXNlQ29sb3JzO2lmKHRbMF09KHI/XCIlY1wiOlwiXCIpK3RoaXMubmFtZXNwYWNlKyhyP1wiICVjXCI6XCIgXCIpK3RbMF0rKHI/XCIlYyBcIjpcIiBcIikrXCIrXCIrZS5odW1hbml6ZSh0aGlzLmRpZmYpLCFyKXJldHVybiB0O3ZhciBuPVwiY29sb3I6IFwiK3RoaXMuY29sb3I7dD1bdFswXSxuLFwiY29sb3I6IGluaGVyaXRcIl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQsMSkpO3ZhciBvPTAsaT0wO3JldHVybiB0WzBdLnJlcGxhY2UoLyVbYS16JV0vZyxmdW5jdGlvbih0KXtcIiUlXCIhPT10JiYobysrLFwiJWNcIj09PXQmJihpPW8pKX0pLHQuc3BsaWNlKGksMCxuKSx0fWZ1bmN0aW9uIHMoKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgY29uc29sZSYmY29uc29sZS5sb2cmJkZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGNvbnNvbGUubG9nLGNvbnNvbGUsYXJndW1lbnRzKX1mdW5jdGlvbiBhKHQpe3RyeXtudWxsPT10P2Uuc3RvcmFnZS5yZW1vdmVJdGVtKFwiZGVidWdcIik6ZS5zdG9yYWdlLmRlYnVnPXR9Y2F0Y2godCl7fX1mdW5jdGlvbiBjKCl7dHJ5e3JldHVybiBlLnN0b3JhZ2UuZGVidWd9Y2F0Y2godCl7fWlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBuJiZcImVudlwiaW4gbilyZXR1cm4gbi5lbnYuREVCVUd9ZnVuY3Rpb24gdSgpe3RyeXtyZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZX1jYXRjaCh0KXt9fWU9dC5leHBvcnRzPXIoNSksZS5sb2c9cyxlLmZvcm1hdEFyZ3M9aSxlLnNhdmU9YSxlLmxvYWQ9YyxlLnVzZUNvbG9ycz1vLGUuc3RvcmFnZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgY2hyb21lJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgY2hyb21lLnN0b3JhZ2U/Y2hyb21lLnN0b3JhZ2UubG9jYWw6dSgpLGUuY29sb3JzPVtcImxpZ2h0c2VhZ3JlZW5cIixcImZvcmVzdGdyZWVuXCIsXCJnb2xkZW5yb2RcIixcImRvZGdlcmJsdWVcIixcImRhcmtvcmNoaWRcIixcImNyaW1zb25cIl0sZS5mb3JtYXR0ZXJzLmo9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBKU09OLnN0cmluZ2lmeSh0KX1jYXRjaCh0KXtyZXR1cm5cIltVbmV4cGVjdGVkSlNPTlBhcnNlRXJyb3JdOiBcIit0Lm1lc3NhZ2V9fSxlLmVuYWJsZShjKCkpfSkuY2FsbChlLHIoNCkpfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIoKXt0aHJvdyBuZXcgRXJyb3IoXCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkXCIpfWZ1bmN0aW9uIG4oKXt0aHJvdyBuZXcgRXJyb3IoXCJjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWRcIil9ZnVuY3Rpb24gbyh0KXtpZihoPT09c2V0VGltZW91dClyZXR1cm4gc2V0VGltZW91dCh0LDApO2lmKChoPT09cnx8IWgpJiZzZXRUaW1lb3V0KXJldHVybiBoPXNldFRpbWVvdXQsc2V0VGltZW91dCh0LDApO3RyeXtyZXR1cm4gaCh0LDApfWNhdGNoKGUpe3RyeXtyZXR1cm4gaC5jYWxsKG51bGwsdCwwKX1jYXRjaChlKXtyZXR1cm4gaC5jYWxsKHRoaXMsdCwwKX19fWZ1bmN0aW9uIGkodCl7aWYocD09PWNsZWFyVGltZW91dClyZXR1cm4gY2xlYXJUaW1lb3V0KHQpO2lmKChwPT09bnx8IXApJiZjbGVhclRpbWVvdXQpcmV0dXJuIHA9Y2xlYXJUaW1lb3V0LGNsZWFyVGltZW91dCh0KTt0cnl7cmV0dXJuIHAodCl9Y2F0Y2goZSl7dHJ5e3JldHVybiBwLmNhbGwobnVsbCx0KX1jYXRjaChlKXtyZXR1cm4gcC5jYWxsKHRoaXMsdCl9fX1mdW5jdGlvbiBzKCl7eSYmbCYmKHk9ITEsbC5sZW5ndGg/ZD1sLmNvbmNhdChkKTpnPS0xLGQubGVuZ3RoJiZhKCkpfWZ1bmN0aW9uIGEoKXtpZigheSl7dmFyIHQ9byhzKTt5PSEwO2Zvcih2YXIgZT1kLmxlbmd0aDtlOyl7Zm9yKGw9ZCxkPVtdOysrZzxlOylsJiZsW2ddLnJ1bigpO2c9LTEsZT1kLmxlbmd0aH1sPW51bGwseT0hMSxpKHQpfX1mdW5jdGlvbiBjKHQsZSl7dGhpcy5mdW49dCx0aGlzLmFycmF5PWV9ZnVuY3Rpb24gdSgpe312YXIgaCxwLGY9dC5leHBvcnRzPXt9OyFmdW5jdGlvbigpe3RyeXtoPVwiZnVuY3Rpb25cIj09dHlwZW9mIHNldFRpbWVvdXQ/c2V0VGltZW91dDpyfWNhdGNoKHQpe2g9cn10cnl7cD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBjbGVhclRpbWVvdXQ/Y2xlYXJUaW1lb3V0Om59Y2F0Y2godCl7cD1ufX0oKTt2YXIgbCxkPVtdLHk9ITEsZz0tMTtmLm5leHRUaWNrPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSlmb3IodmFyIHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKWVbci0xXT1hcmd1bWVudHNbcl07ZC5wdXNoKG5ldyBjKHQsZSkpLDEhPT1kLmxlbmd0aHx8eXx8byhhKX0sYy5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX0sZi50aXRsZT1cImJyb3dzZXJcIixmLmJyb3dzZXI9ITAsZi5lbnY9e30sZi5hcmd2PVtdLGYudmVyc2lvbj1cIlwiLGYudmVyc2lvbnM9e30sZi5vbj11LGYuYWRkTGlzdGVuZXI9dSxmLm9uY2U9dSxmLm9mZj11LGYucmVtb3ZlTGlzdGVuZXI9dSxmLnJlbW92ZUFsbExpc3RlbmVycz11LGYuZW1pdD11LGYuYmluZGluZz1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX0sZi5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn0sZi5jaGRpcj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIil9LGYudW1hc2s9ZnVuY3Rpb24oKXtyZXR1cm4gMH19LGZ1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKCl7cmV0dXJuIGUuY29sb3JzW2grKyVlLmNvbG9ycy5sZW5ndGhdfWZ1bmN0aW9uIG8odCl7ZnVuY3Rpb24gcigpe31mdW5jdGlvbiBvKCl7dmFyIHQ9byxyPStuZXcgRGF0ZSxpPXItKHV8fHIpO3QuZGlmZj1pLHQucHJldj11LHQuY3Vycj1yLHU9cixudWxsPT10LnVzZUNvbG9ycyYmKHQudXNlQ29sb3JzPWUudXNlQ29sb3JzKCkpLG51bGw9PXQuY29sb3ImJnQudXNlQ29sb3JzJiYodC5jb2xvcj1uKCkpO2Zvcih2YXIgcz1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksYT0wO2E8cy5sZW5ndGg7YSsrKXNbYV09YXJndW1lbnRzW2FdO3NbMF09ZS5jb2VyY2Uoc1swXSksXCJzdHJpbmdcIiE9dHlwZW9mIHNbMF0mJihzPVtcIiVvXCJdLmNvbmNhdChzKSk7dmFyIGM9MDtzWzBdPXNbMF0ucmVwbGFjZSgvJShbYS16JV0pL2csZnVuY3Rpb24ocixuKXtpZihcIiUlXCI9PT1yKXJldHVybiByO2MrKzt2YXIgbz1lLmZvcm1hdHRlcnNbbl07aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygbyl7dmFyIGk9c1tjXTtyPW8uY2FsbCh0LGkpLHMuc3BsaWNlKGMsMSksYy0tfXJldHVybiByfSkscz1lLmZvcm1hdEFyZ3MuYXBwbHkodCxzKTt2YXIgaD1vLmxvZ3x8ZS5sb2d8fGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSk7aC5hcHBseSh0LHMpfXIuZW5hYmxlZD0hMSxvLmVuYWJsZWQ9ITA7dmFyIGk9ZS5lbmFibGVkKHQpP286cjtyZXR1cm4gaS5uYW1lc3BhY2U9dCxpfWZ1bmN0aW9uIGkodCl7ZS5zYXZlKHQpO2Zvcih2YXIgcj0odHx8XCJcIikuc3BsaXQoL1tcXHMsXSsvKSxuPXIubGVuZ3RoLG89MDtvPG47bysrKXJbb10mJih0PXJbb10ucmVwbGFjZSgvW1xcXFxeJCs/LigpfFtcXF17fV0vZyxcIlxcXFwkJlwiKS5yZXBsYWNlKC9cXCovZyxcIi4qP1wiKSxcIi1cIj09PXRbMF0/ZS5za2lwcy5wdXNoKG5ldyBSZWdFeHAoXCJeXCIrdC5zdWJzdHIoMSkrXCIkXCIpKTplLm5hbWVzLnB1c2gobmV3IFJlZ0V4cChcIl5cIit0K1wiJFwiKSkpfWZ1bmN0aW9uIHMoKXtlLmVuYWJsZShcIlwiKX1mdW5jdGlvbiBhKHQpe3ZhciByLG47Zm9yKHI9MCxuPWUuc2tpcHMubGVuZ3RoO3I8bjtyKyspaWYoZS5za2lwc1tyXS50ZXN0KHQpKXJldHVybiExO2ZvcihyPTAsbj1lLm5hbWVzLmxlbmd0aDtyPG47cisrKWlmKGUubmFtZXNbcl0udGVzdCh0KSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBjKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRXJyb3I/dC5zdGFja3x8dC5tZXNzYWdlOnR9ZT10LmV4cG9ydHM9by5kZWJ1Zz1vLGUuY29lcmNlPWMsZS5kaXNhYmxlPXMsZS5lbmFibGU9aSxlLmVuYWJsZWQ9YSxlLmh1bWFuaXplPXIoNiksZS5uYW1lcz1bXSxlLnNraXBzPVtdLGUuZm9ybWF0dGVycz17fTt2YXIgdSxoPTB9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcih0KXtpZih0PVN0cmluZyh0KSwhKHQubGVuZ3RoPjFlNCkpe3ZhciBlPS9eKCg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWModCk7aWYoZSl7dmFyIHI9cGFyc2VGbG9hdChlWzFdKSxuPShlWzJdfHxcIm1zXCIpLnRvTG93ZXJDYXNlKCk7c3dpdGNoKG4pe2Nhc2VcInllYXJzXCI6Y2FzZVwieWVhclwiOmNhc2VcInlyc1wiOmNhc2VcInlyXCI6Y2FzZVwieVwiOnJldHVybiByKmg7Y2FzZVwiZGF5c1wiOmNhc2VcImRheVwiOmNhc2VcImRcIjpyZXR1cm4gcip1O2Nhc2VcImhvdXJzXCI6Y2FzZVwiaG91clwiOmNhc2VcImhyc1wiOmNhc2VcImhyXCI6Y2FzZVwiaFwiOnJldHVybiByKmM7Y2FzZVwibWludXRlc1wiOmNhc2VcIm1pbnV0ZVwiOmNhc2VcIm1pbnNcIjpjYXNlXCJtaW5cIjpjYXNlXCJtXCI6cmV0dXJuIHIqYTtjYXNlXCJzZWNvbmRzXCI6Y2FzZVwic2Vjb25kXCI6Y2FzZVwic2Vjc1wiOmNhc2VcInNlY1wiOmNhc2VcInNcIjpyZXR1cm4gcipzO2Nhc2VcIm1pbGxpc2Vjb25kc1wiOmNhc2VcIm1pbGxpc2Vjb25kXCI6Y2FzZVwibXNlY3NcIjpjYXNlXCJtc2VjXCI6Y2FzZVwibXNcIjpyZXR1cm4gcjtkZWZhdWx0OnJldHVybn19fX1mdW5jdGlvbiBuKHQpe3JldHVybiB0Pj11P01hdGgucm91bmQodC91KStcImRcIjp0Pj1jP01hdGgucm91bmQodC9jKStcImhcIjp0Pj1hP01hdGgucm91bmQodC9hKStcIm1cIjp0Pj1zP01hdGgucm91bmQodC9zKStcInNcIjp0K1wibXNcIn1mdW5jdGlvbiBvKHQpe3JldHVybiBpKHQsdSxcImRheVwiKXx8aSh0LGMsXCJob3VyXCIpfHxpKHQsYSxcIm1pbnV0ZVwiKXx8aSh0LHMsXCJzZWNvbmRcIil8fHQrXCIgbXNcIn1mdW5jdGlvbiBpKHQsZSxyKXtpZighKHQ8ZSkpcmV0dXJuIHQ8MS41KmU/TWF0aC5mbG9vcih0L2UpK1wiIFwiK3I6TWF0aC5jZWlsKHQvZSkrXCIgXCIrcitcInNcIn12YXIgcz0xZTMsYT02MCpzLGM9NjAqYSx1PTI0KmMsaD0zNjUuMjUqdTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtlPWV8fHt9O3ZhciBpPXR5cGVvZiB0O2lmKFwic3RyaW5nXCI9PT1pJiZ0Lmxlbmd0aD4wKXJldHVybiByKHQpO2lmKFwibnVtYmVyXCI9PT1pJiZpc05hTih0KT09PSExKXJldHVybiBlLmxvbmc/byh0KTpuKHQpO3Rocm93IG5ldyBFcnJvcihcInZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9XCIrSlNPTi5zdHJpbmdpZnkodCkpfX0sZnVuY3Rpb24odCxlLHIpe2Z1bmN0aW9uIG4oKXt9ZnVuY3Rpb24gbyh0KXt2YXIgcj1cIlwiLG49ITE7cmV0dXJuIHIrPXQudHlwZSxlLkJJTkFSWV9FVkVOVCE9dC50eXBlJiZlLkJJTkFSWV9BQ0shPXQudHlwZXx8KHIrPXQuYXR0YWNobWVudHMscis9XCItXCIpLHQubnNwJiZcIi9cIiE9dC5uc3AmJihuPSEwLHIrPXQubnNwKSxudWxsIT10LmlkJiYobiYmKHIrPVwiLFwiLG49ITEpLHIrPXQuaWQpLG51bGwhPXQuZGF0YSYmKG4mJihyKz1cIixcIikscis9Zi5zdHJpbmdpZnkodC5kYXRhKSkscChcImVuY29kZWQgJWogYXMgJXNcIix0LHIpLHJ9ZnVuY3Rpb24gaSh0LGUpe2Z1bmN0aW9uIHIodCl7dmFyIHI9ZC5kZWNvbnN0cnVjdFBhY2tldCh0KSxuPW8oci5wYWNrZXQpLGk9ci5idWZmZXJzO2kudW5zaGlmdChuKSxlKGkpfWQucmVtb3ZlQmxvYnModCxyKX1mdW5jdGlvbiBzKCl7dGhpcy5yZWNvbnN0cnVjdG9yPW51bGx9ZnVuY3Rpb24gYSh0KXt2YXIgcj17fSxuPTA7aWYoci50eXBlPU51bWJlcih0LmNoYXJBdCgwKSksbnVsbD09ZS50eXBlc1tyLnR5cGVdKXJldHVybiBoKCk7aWYoZS5CSU5BUllfRVZFTlQ9PXIudHlwZXx8ZS5CSU5BUllfQUNLPT1yLnR5cGUpe2Zvcih2YXIgbz1cIlwiO1wiLVwiIT10LmNoYXJBdCgrK24pJiYobys9dC5jaGFyQXQobiksbiE9dC5sZW5ndGgpOyk7aWYobyE9TnVtYmVyKG8pfHxcIi1cIiE9dC5jaGFyQXQobikpdGhyb3cgbmV3IEVycm9yKFwiSWxsZWdhbCBhdHRhY2htZW50c1wiKTtyLmF0dGFjaG1lbnRzPU51bWJlcihvKX1pZihcIi9cIj09dC5jaGFyQXQobisxKSlmb3Ioci5uc3A9XCJcIjsrK247KXt2YXIgaT10LmNoYXJBdChuKTtpZihcIixcIj09aSlicmVhaztpZihyLm5zcCs9aSxuPT10Lmxlbmd0aClicmVha31lbHNlIHIubnNwPVwiL1wiO3ZhciBzPXQuY2hhckF0KG4rMSk7aWYoXCJcIiE9PXMmJk51bWJlcihzKT09cyl7Zm9yKHIuaWQ9XCJcIjsrK247KXt2YXIgaT10LmNoYXJBdChuKTtpZihudWxsPT1pfHxOdW1iZXIoaSkhPWkpey0tbjticmVha31pZihyLmlkKz10LmNoYXJBdChuKSxuPT10Lmxlbmd0aClicmVha31yLmlkPU51bWJlcihyLmlkKX1yZXR1cm4gdC5jaGFyQXQoKytuKSYmKHI9YyhyLHQuc3Vic3RyKG4pKSkscChcImRlY29kZWQgJXMgYXMgJWpcIix0LHIpLHJ9ZnVuY3Rpb24gYyh0LGUpe3RyeXt0LmRhdGE9Zi5wYXJzZShlKX1jYXRjaCh0KXtyZXR1cm4gaCgpfXJldHVybiB0fWZ1bmN0aW9uIHUodCl7dGhpcy5yZWNvblBhY2s9dCx0aGlzLmJ1ZmZlcnM9W119ZnVuY3Rpb24gaCh0KXtyZXR1cm57dHlwZTplLkVSUk9SLGRhdGE6XCJwYXJzZXIgZXJyb3JcIn19dmFyIHA9cig4KShcInNvY2tldC5pby1wYXJzZXJcIiksZj1yKDExKSxsPXIoMTMpLGQ9cigxNCkseT1yKDE2KTtlLnByb3RvY29sPTQsZS50eXBlcz1bXCJDT05ORUNUXCIsXCJESVNDT05ORUNUXCIsXCJFVkVOVFwiLFwiQUNLXCIsXCJFUlJPUlwiLFwiQklOQVJZX0VWRU5UXCIsXCJCSU5BUllfQUNLXCJdLGUuQ09OTkVDVD0wLGUuRElTQ09OTkVDVD0xLGUuRVZFTlQ9MixlLkFDSz0zLGUuRVJST1I9NCxlLkJJTkFSWV9FVkVOVD01LGUuQklOQVJZX0FDSz02LGUuRW5jb2Rlcj1uLGUuRGVjb2Rlcj1zLG4ucHJvdG90eXBlLmVuY29kZT1mdW5jdGlvbih0LHIpe2lmKHAoXCJlbmNvZGluZyBwYWNrZXQgJWpcIix0KSxlLkJJTkFSWV9FVkVOVD09dC50eXBlfHxlLkJJTkFSWV9BQ0s9PXQudHlwZSlpKHQscik7ZWxzZXt2YXIgbj1vKHQpO3IoW25dKX19LGwocy5wcm90b3R5cGUpLHMucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt2YXIgcjtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyPWEodCksZS5CSU5BUllfRVZFTlQ9PXIudHlwZXx8ZS5CSU5BUllfQUNLPT1yLnR5cGU/KHRoaXMucmVjb25zdHJ1Y3Rvcj1uZXcgdShyKSwwPT09dGhpcy5yZWNvbnN0cnVjdG9yLnJlY29uUGFjay5hdHRhY2htZW50cyYmdGhpcy5lbWl0KFwiZGVjb2RlZFwiLHIpKTp0aGlzLmVtaXQoXCJkZWNvZGVkXCIscik7ZWxzZXtpZigheSh0KSYmIXQuYmFzZTY0KXRocm93IG5ldyBFcnJvcihcIlVua25vd24gdHlwZTogXCIrdCk7aWYoIXRoaXMucmVjb25zdHJ1Y3Rvcil0aHJvdyBuZXcgRXJyb3IoXCJnb3QgYmluYXJ5IGRhdGEgd2hlbiBub3QgcmVjb25zdHJ1Y3RpbmcgYSBwYWNrZXRcIik7cj10aGlzLnJlY29uc3RydWN0b3IudGFrZUJpbmFyeURhdGEodCksciYmKHRoaXMucmVjb25zdHJ1Y3Rvcj1udWxsLHRoaXMuZW1pdChcImRlY29kZWRcIixyKSl9fSxzLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5yZWNvbnN0cnVjdG9yJiZ0aGlzLnJlY29uc3RydWN0b3IuZmluaXNoZWRSZWNvbnN0cnVjdGlvbigpfSx1LnByb3RvdHlwZS50YWtlQmluYXJ5RGF0YT1mdW5jdGlvbih0KXtpZih0aGlzLmJ1ZmZlcnMucHVzaCh0KSx0aGlzLmJ1ZmZlcnMubGVuZ3RoPT10aGlzLnJlY29uUGFjay5hdHRhY2htZW50cyl7dmFyIGU9ZC5yZWNvbnN0cnVjdFBhY2tldCh0aGlzLnJlY29uUGFjayx0aGlzLmJ1ZmZlcnMpO3JldHVybiB0aGlzLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKSxlfXJldHVybiBudWxsfSx1LnByb3RvdHlwZS5maW5pc2hlZFJlY29uc3RydWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5yZWNvblBhY2s9bnVsbCx0aGlzLmJ1ZmZlcnM9W119fSxmdW5jdGlvbih0LGUscil7ZnVuY3Rpb24gbigpe3JldHVyblwiV2Via2l0QXBwZWFyYW5jZVwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlfHx3aW5kb3cuY29uc29sZSYmKGNvbnNvbGUuZmlyZWJ1Z3x8Y29uc29sZS5leGNlcHRpb24mJmNvbnNvbGUudGFibGUpfHxuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSYmcGFyc2VJbnQoUmVnRXhwLiQxLDEwKT49MzF9ZnVuY3Rpb24gbygpe3ZhciB0PWFyZ3VtZW50cyxyPXRoaXMudXNlQ29sb3JzO2lmKHRbMF09KHI/XCIlY1wiOlwiXCIpK3RoaXMubmFtZXNwYWNlKyhyP1wiICVjXCI6XCIgXCIpK3RbMF0rKHI/XCIlYyBcIjpcIiBcIikrXCIrXCIrZS5odW1hbml6ZSh0aGlzLmRpZmYpLCFyKXJldHVybiB0O3ZhciBuPVwiY29sb3I6IFwiK3RoaXMuY29sb3I7dD1bdFswXSxuLFwiY29sb3I6IGluaGVyaXRcIl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQsMSkpO3ZhciBvPTAsaT0wO3JldHVybiB0WzBdLnJlcGxhY2UoLyVbYS16JV0vZyxmdW5jdGlvbih0KXtcIiUlXCIhPT10JiYobysrLFwiJWNcIj09PXQmJihpPW8pKX0pLHQuc3BsaWNlKGksMCxuKSx0fWZ1bmN0aW9uIGkoKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgY29uc29sZSYmY29uc29sZS5sb2cmJkZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGNvbnNvbGUubG9nLGNvbnNvbGUsYXJndW1lbnRzKX1mdW5jdGlvbiBzKHQpe3RyeXtudWxsPT10P2Uuc3RvcmFnZS5yZW1vdmVJdGVtKFwiZGVidWdcIik6ZS5zdG9yYWdlLmRlYnVnPXR9Y2F0Y2godCl7fX1mdW5jdGlvbiBhKCl7dmFyIHQ7dHJ5e3Q9ZS5zdG9yYWdlLmRlYnVnfWNhdGNoKHQpe31yZXR1cm4gdH1mdW5jdGlvbiBjKCl7dHJ5e3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlfWNhdGNoKHQpe319ZT10LmV4cG9ydHM9cig5KSxlLmxvZz1pLGUuZm9ybWF0QXJncz1vLGUuc2F2ZT1zLGUubG9hZD1hLGUudXNlQ29sb3JzPW4sZS5zdG9yYWdlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBjaHJvbWUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBjaHJvbWUuc3RvcmFnZT9jaHJvbWUuc3RvcmFnZS5sb2NhbDpjKCksZS5jb2xvcnM9W1wibGlnaHRzZWFncmVlblwiLFwiZm9yZXN0Z3JlZW5cIixcImdvbGRlbnJvZFwiLFwiZG9kZ2VyYmx1ZVwiLFwiZGFya29yY2hpZFwiLFwiY3JpbXNvblwiXSxlLmZvcm1hdHRlcnMuaj1mdW5jdGlvbih0KXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkodCl9LGUuZW5hYmxlKGEoKSl9LGZ1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKCl7cmV0dXJuIGUuY29sb3JzW2grKyVlLmNvbG9ycy5sZW5ndGhdfWZ1bmN0aW9uIG8odCl7ZnVuY3Rpb24gcigpe31mdW5jdGlvbiBvKCl7dmFyIHQ9byxyPStuZXcgRGF0ZSxpPXItKHV8fHIpO3QuZGlmZj1pLHQucHJldj11LHQuY3Vycj1yLHU9cixudWxsPT10LnVzZUNvbG9ycyYmKHQudXNlQ29sb3JzPWUudXNlQ29sb3JzKCkpLG51bGw9PXQuY29sb3ImJnQudXNlQ29sb3JzJiYodC5jb2xvcj1uKCkpO3ZhciBzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7c1swXT1lLmNvZXJjZShzWzBdKSxcInN0cmluZ1wiIT10eXBlb2Ygc1swXSYmKHM9W1wiJW9cIl0uY29uY2F0KHMpKTt2YXIgYT0wO3NbMF09c1swXS5yZXBsYWNlKC8lKFthLXolXSkvZyxmdW5jdGlvbihyLG4pe2lmKFwiJSVcIj09PXIpcmV0dXJuIHI7YSsrO3ZhciBvPWUuZm9ybWF0dGVyc1tuXTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBvKXt2YXIgaT1zW2FdO3I9by5jYWxsKHQsaSkscy5zcGxpY2UoYSwxKSxhLS19cmV0dXJuIHJ9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmZvcm1hdEFyZ3MmJihzPWUuZm9ybWF0QXJncy5hcHBseSh0LHMpKTt2YXIgYz1vLmxvZ3x8ZS5sb2d8fGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSk7Yy5hcHBseSh0LHMpfXIuZW5hYmxlZD0hMSxvLmVuYWJsZWQ9ITA7dmFyIGk9ZS5lbmFibGVkKHQpP286cjtyZXR1cm4gaS5uYW1lc3BhY2U9dCxpfWZ1bmN0aW9uIGkodCl7ZS5zYXZlKHQpO2Zvcih2YXIgcj0odHx8XCJcIikuc3BsaXQoL1tcXHMsXSsvKSxuPXIubGVuZ3RoLG89MDtvPG47bysrKXJbb10mJih0PXJbb10ucmVwbGFjZSgvXFwqL2csXCIuKj9cIiksXCItXCI9PT10WzBdP2Uuc2tpcHMucHVzaChuZXcgUmVnRXhwKFwiXlwiK3Quc3Vic3RyKDEpK1wiJFwiKSk6ZS5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoXCJeXCIrdCtcIiRcIikpKX1mdW5jdGlvbiBzKCl7ZS5lbmFibGUoXCJcIil9ZnVuY3Rpb24gYSh0KXt2YXIgcixuO2ZvcihyPTAsbj1lLnNraXBzLmxlbmd0aDtyPG47cisrKWlmKGUuc2tpcHNbcl0udGVzdCh0KSlyZXR1cm4hMTtmb3Iocj0wLG49ZS5uYW1lcy5sZW5ndGg7cjxuO3IrKylpZihlLm5hbWVzW3JdLnRlc3QodCkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gYyh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEVycm9yP3Quc3RhY2t8fHQubWVzc2FnZTp0fWU9dC5leHBvcnRzPW8sZS5jb2VyY2U9YyxlLmRpc2FibGU9cyxlLmVuYWJsZT1pLGUuZW5hYmxlZD1hLGUuaHVtYW5pemU9cigxMCksZS5uYW1lcz1bXSxlLnNraXBzPVtdLGUuZm9ybWF0dGVycz17fTt2YXIgdSxoPTB9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcih0KXtpZih0PVwiXCIrdCwhKHQubGVuZ3RoPjFlNCkpe3ZhciBlPS9eKCg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWModCk7aWYoZSl7dmFyIHI9cGFyc2VGbG9hdChlWzFdKSxuPShlWzJdfHxcIm1zXCIpLnRvTG93ZXJDYXNlKCk7c3dpdGNoKG4pe2Nhc2VcInllYXJzXCI6Y2FzZVwieWVhclwiOmNhc2VcInlyc1wiOmNhc2VcInlyXCI6Y2FzZVwieVwiOnJldHVybiByKmg7Y2FzZVwiZGF5c1wiOmNhc2VcImRheVwiOmNhc2VcImRcIjpyZXR1cm4gcip1O2Nhc2VcImhvdXJzXCI6Y2FzZVwiaG91clwiOmNhc2VcImhyc1wiOmNhc2VcImhyXCI6Y2FzZVwiaFwiOnJldHVybiByKmM7Y2FzZVwibWludXRlc1wiOmNhc2VcIm1pbnV0ZVwiOmNhc2VcIm1pbnNcIjpjYXNlXCJtaW5cIjpjYXNlXCJtXCI6cmV0dXJuIHIqYTtjYXNlXCJzZWNvbmRzXCI6Y2FzZVwic2Vjb25kXCI6Y2FzZVwic2Vjc1wiOmNhc2VcInNlY1wiOmNhc2VcInNcIjpyZXR1cm4gcipzO2Nhc2VcIm1pbGxpc2Vjb25kc1wiOmNhc2VcIm1pbGxpc2Vjb25kXCI6Y2FzZVwibXNlY3NcIjpjYXNlXCJtc2VjXCI6Y2FzZVwibXNcIjpyZXR1cm4gcn19fX1mdW5jdGlvbiBuKHQpe3JldHVybiB0Pj11P01hdGgucm91bmQodC91KStcImRcIjp0Pj1jP01hdGgucm91bmQodC9jKStcImhcIjp0Pj1hP01hdGgucm91bmQodC9hKStcIm1cIjp0Pj1zP01hdGgucm91bmQodC9zKStcInNcIjp0K1wibXNcIn1mdW5jdGlvbiBvKHQpe3JldHVybiBpKHQsdSxcImRheVwiKXx8aSh0LGMsXCJob3VyXCIpfHxpKHQsYSxcIm1pbnV0ZVwiKXx8aSh0LHMsXCJzZWNvbmRcIil8fHQrXCIgbXNcIn1mdW5jdGlvbiBpKHQsZSxyKXtpZighKHQ8ZSkpcmV0dXJuIHQ8MS41KmU/TWF0aC5mbG9vcih0L2UpK1wiIFwiK3I6TWF0aC5jZWlsKHQvZSkrXCIgXCIrcitcInNcIn12YXIgcz0xZTMsYT02MCpzLGM9NjAqYSx1PTI0KmMsaD0zNjUuMjUqdTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT1lfHx7fSxcInN0cmluZ1wiPT10eXBlb2YgdD9yKHQpOmUubG9uZz9vKHQpOm4odCl9fSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKHQscil7dmFyIG49ITE7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbyh0LGUpe2Z1bmN0aW9uIHIodCl7aWYoclt0XSE9PWcpcmV0dXJuIHJbdF07dmFyIG87aWYoXCJidWctc3RyaW5nLWNoYXItaW5kZXhcIj09dClvPVwiYVwiIT1cImFcIlswXTtlbHNlIGlmKFwianNvblwiPT10KW89cihcImpzb24tc3RyaW5naWZ5XCIpJiZyKFwianNvbi1wYXJzZVwiKTtlbHNle3ZhciBzLGE9J3tcImFcIjpbMSx0cnVlLGZhbHNlLG51bGwsXCJcXFxcdTAwMDBcXFxcYlxcXFxuXFxcXGZcXFxcclxcXFx0XCJdfSc7aWYoXCJqc29uLXN0cmluZ2lmeVwiPT10KXt2YXIgYz1lLnN0cmluZ2lmeSxoPVwiZnVuY3Rpb25cIj09dHlwZW9mIGMmJmI7aWYoaCl7KHM9ZnVuY3Rpb24oKXtyZXR1cm4gMX0pLnRvSlNPTj1zO3RyeXtoPVwiMFwiPT09YygwKSYmXCIwXCI9PT1jKG5ldyBuKSYmJ1wiXCInPT1jKG5ldyBpKSYmYyh2KT09PWcmJmMoZyk9PT1nJiZjKCk9PT1nJiZcIjFcIj09PWMocykmJlwiWzFdXCI9PWMoW3NdKSYmXCJbbnVsbF1cIj09YyhbZ10pJiZcIm51bGxcIj09YyhudWxsKSYmXCJbbnVsbCxudWxsLG51bGxdXCI9PWMoW2csdixudWxsXSkmJmMoe2E6W3MsITAsITEsbnVsbCxcIlxcMFxcYlxcblxcZlxcclxcdFwiXX0pPT1hJiZcIjFcIj09PWMobnVsbCxzKSYmXCJbXFxuIDEsXFxuIDJcXG5dXCI9PWMoWzEsMl0sbnVsbCwxKSYmJ1wiLTI3MTgyMS0wNC0yMFQwMDowMDowMC4wMDBaXCInPT1jKG5ldyB1KC04NjRlMTMpKSYmJ1wiKzI3NTc2MC0wOS0xM1QwMDowMDowMC4wMDBaXCInPT1jKG5ldyB1KDg2NGUxMykpJiYnXCItMDAwMDAxLTAxLTAxVDAwOjAwOjAwLjAwMFpcIic9PWMobmV3IHUoLTYyMTk4NzU1MmU1KSkmJidcIjE5NjktMTItMzFUMjM6NTk6NTkuOTk5WlwiJz09YyhuZXcgdSgtMSkpfWNhdGNoKHQpe2g9ITF9fW89aH1pZihcImpzb24tcGFyc2VcIj09dCl7dmFyIHA9ZS5wYXJzZTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBwKXRyeXtpZigwPT09cChcIjBcIikmJiFwKCExKSl7cz1wKGEpO3ZhciBmPTU9PXMuYS5sZW5ndGgmJjE9PT1zLmFbMF07aWYoZil7dHJ5e2Y9IXAoJ1wiXFx0XCInKX1jYXRjaCh0KXt9aWYoZil0cnl7Zj0xIT09cChcIjAxXCIpfWNhdGNoKHQpe31pZihmKXRyeXtmPTEhPT1wKFwiMS5cIil9Y2F0Y2godCl7fX19fWNhdGNoKHQpe2Y9ITF9bz1mfX1yZXR1cm4gclt0XT0hIW99dHx8KHQ9Yy5PYmplY3QoKSksZXx8KGU9Yy5PYmplY3QoKSk7dmFyIG49dC5OdW1iZXJ8fGMuTnVtYmVyLGk9dC5TdHJpbmd8fGMuU3RyaW5nLGE9dC5PYmplY3R8fGMuT2JqZWN0LHU9dC5EYXRlfHxjLkRhdGUsaD10LlN5bnRheEVycm9yfHxjLlN5bnRheEVycm9yLHA9dC5UeXBlRXJyb3J8fGMuVHlwZUVycm9yLGY9dC5NYXRofHxjLk1hdGgsbD10LkpTT058fGMuSlNPTjtcIm9iamVjdFwiPT10eXBlb2YgbCYmbCYmKGUuc3RyaW5naWZ5PWwuc3RyaW5naWZ5LGUucGFyc2U9bC5wYXJzZSk7dmFyIGQseSxnLG09YS5wcm90b3R5cGUsdj1tLnRvU3RyaW5nLGI9bmV3IHUoLTB4Yzc4MmI1YjgwMGNlYyk7dHJ5e2I9Yi5nZXRVVENGdWxsWWVhcigpPT0tMTA5MjUyJiYwPT09Yi5nZXRVVENNb250aCgpJiYxPT09Yi5nZXRVVENEYXRlKCkmJjEwPT1iLmdldFVUQ0hvdXJzKCkmJjM3PT1iLmdldFVUQ01pbnV0ZXMoKSYmNj09Yi5nZXRVVENTZWNvbmRzKCkmJjcwOD09Yi5nZXRVVENNaWxsaXNlY29uZHMoKX1jYXRjaCh0KXt9aWYoIXIoXCJqc29uXCIpKXt2YXIgdz1cIltvYmplY3QgRnVuY3Rpb25dXCIsaz1cIltvYmplY3QgRGF0ZV1cIix4PVwiW29iamVjdCBOdW1iZXJdXCIsQT1cIltvYmplY3QgU3RyaW5nXVwiLEM9XCJbb2JqZWN0IEFycmF5XVwiLEI9XCJbb2JqZWN0IEJvb2xlYW5dXCIsUz1yKFwiYnVnLXN0cmluZy1jaGFyLWluZGV4XCIpO2lmKCFiKXZhciBUPWYuZmxvb3IsRT1bMCwzMSw1OSw5MCwxMjAsMTUxLDE4MSwyMTIsMjQzLDI3MywzMDQsMzM0XSxfPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEVbZV0rMzY1Kih0LTE5NzApK1QoKHQtMTk2OSsoZT0rKGU+MSkpKS80KS1UKCh0LTE5MDErZSkvMTAwKStUKCh0LTE2MDErZSkvNDAwKX07aWYoKGQ9bS5oYXNPd25Qcm9wZXJ0eSl8fChkPWZ1bmN0aW9uKHQpe3ZhciBlLHI9e307cmV0dXJuKHIuX19wcm90b19fPW51bGwsci5fX3Byb3RvX189e3RvU3RyaW5nOjF9LHIpLnRvU3RyaW5nIT12P2Q9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fX3Byb3RvX18scj10IGluKHRoaXMuX19wcm90b19fPW51bGwsdGhpcyk7cmV0dXJuIHRoaXMuX19wcm90b19fPWUscn06KGU9ci5jb25zdHJ1Y3RvcixkPWZ1bmN0aW9uKHQpe3ZhciByPSh0aGlzLmNvbnN0cnVjdG9yfHxlKS5wcm90b3R5cGU7cmV0dXJuIHQgaW4gdGhpcyYmISh0IGluIHImJnRoaXNbdF09PT1yW3RdKX0pLHI9bnVsbCxkLmNhbGwodGhpcyx0KX0pLHk9ZnVuY3Rpb24odCxlKXt2YXIgcixuLG8saT0wOyhyPWZ1bmN0aW9uKCl7dGhpcy52YWx1ZU9mPTB9KS5wcm90b3R5cGUudmFsdWVPZj0wLG49bmV3IHI7Zm9yKG8gaW4gbilkLmNhbGwobixvKSYmaSsrO3JldHVybiByPW49bnVsbCxpP3k9Mj09aT9mdW5jdGlvbih0LGUpe3ZhciByLG49e30sbz12LmNhbGwodCk9PXc7Zm9yKHIgaW4gdClvJiZcInByb3RvdHlwZVwiPT1yfHxkLmNhbGwobixyKXx8IShuW3JdPTEpfHwhZC5jYWxsKHQscil8fGUocil9OmZ1bmN0aW9uKHQsZSl7dmFyIHIsbixvPXYuY2FsbCh0KT09dztmb3IociBpbiB0KW8mJlwicHJvdG90eXBlXCI9PXJ8fCFkLmNhbGwodCxyKXx8KG49XCJjb25zdHJ1Y3RvclwiPT09cil8fGUocik7KG58fGQuY2FsbCh0LHI9XCJjb25zdHJ1Y3RvclwiKSkmJmUocil9OihuPVtcInZhbHVlT2ZcIixcInRvU3RyaW5nXCIsXCJ0b0xvY2FsZVN0cmluZ1wiLFwicHJvcGVydHlJc0VudW1lcmFibGVcIixcImlzUHJvdG90eXBlT2ZcIixcImhhc093blByb3BlcnR5XCIsXCJjb25zdHJ1Y3RvclwiXSx5PWZ1bmN0aW9uKHQsZSl7dmFyIHIsbyxpPXYuY2FsbCh0KT09dyxhPSFpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LmNvbnN0cnVjdG9yJiZzW3R5cGVvZiB0Lmhhc093blByb3BlcnR5XSYmdC5oYXNPd25Qcm9wZXJ0eXx8ZDtmb3IociBpbiB0KWkmJlwicHJvdG90eXBlXCI9PXJ8fCFhLmNhbGwodCxyKXx8ZShyKTtmb3Iobz1uLmxlbmd0aDtyPW5bLS1vXTthLmNhbGwodCxyKSYmZShyKSk7fSkseSh0LGUpfSwhcihcImpzb24tc3RyaW5naWZ5XCIpKXt2YXIgTj17OTI6XCJcXFxcXFxcXFwiLDM0OidcXFxcXCInLDg6XCJcXFxcYlwiLDEyOlwiXFxcXGZcIiwxMDpcIlxcXFxuXCIsMTM6XCJcXFxcclwiLDk6XCJcXFxcdFwifSxqPVwiMDAwMDAwXCIsTz1mdW5jdGlvbih0LGUpe3JldHVybihqKyhlfHwwKSkuc2xpY2UoLXQpfSxQPVwiXFxcXHUwMFwiLFI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPSdcIicscj0wLG49dC5sZW5ndGgsbz0hU3x8bj4xMCxpPW8mJihTP3Quc3BsaXQoXCJcIik6dCk7cjxuO3IrKyl7dmFyIHM9dC5jaGFyQ29kZUF0KHIpO3N3aXRjaChzKXtjYXNlIDg6Y2FzZSA5OmNhc2UgMTA6Y2FzZSAxMjpjYXNlIDEzOmNhc2UgMzQ6Y2FzZSA5MjplKz1OW3NdO2JyZWFrO2RlZmF1bHQ6aWYoczwzMil7ZSs9UCtPKDIscy50b1N0cmluZygxNikpO2JyZWFrfWUrPW8/aVtyXTp0LmNoYXJBdChyKX19cmV0dXJuIGUrJ1wiJ30sRD1mdW5jdGlvbih0LGUscixuLG8saSxzKXt2YXIgYSxjLHUsaCxmLGwsbSxiLHcsUyxFLE4saixQLHEsVTt0cnl7YT1lW3RdfWNhdGNoKHQpe31pZihcIm9iamVjdFwiPT10eXBlb2YgYSYmYSlpZihjPXYuY2FsbChhKSxjIT1rfHxkLmNhbGwoYSxcInRvSlNPTlwiKSlcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLnRvSlNPTiYmKGMhPXgmJmMhPUEmJmMhPUN8fGQuY2FsbChhLFwidG9KU09OXCIpKSYmKGE9YS50b0pTT04odCkpO2Vsc2UgaWYoYT4tMS8wJiZhPDEvMCl7aWYoXyl7Zm9yKGY9VChhLzg2NGU1KSx1PVQoZi8zNjUuMjQyNSkrMTk3MC0xO18odSsxLDApPD1mO3UrKyk7Zm9yKGg9VCgoZi1fKHUsMCkpLzMwLjQyKTtfKHUsaCsxKTw9ZjtoKyspO2Y9MStmLV8odSxoKSxsPShhJTg2NGU1Kzg2NGU1KSU4NjRlNSxtPVQobC8zNmU1KSUyNCxiPVQobC82ZTQpJTYwLHc9VChsLzFlMyklNjAsUz1sJTFlM31lbHNlIHU9YS5nZXRVVENGdWxsWWVhcigpLGg9YS5nZXRVVENNb250aCgpLGY9YS5nZXRVVENEYXRlKCksbT1hLmdldFVUQ0hvdXJzKCksYj1hLmdldFVUQ01pbnV0ZXMoKSx3PWEuZ2V0VVRDU2Vjb25kcygpLFM9YS5nZXRVVENNaWxsaXNlY29uZHMoKTthPSh1PD0wfHx1Pj0xZTQ/KHU8MD9cIi1cIjpcIitcIikrTyg2LHU8MD8tdTp1KTpPKDQsdSkpK1wiLVwiK08oMixoKzEpK1wiLVwiK08oMixmKStcIlRcIitPKDIsbSkrXCI6XCIrTygyLGIpK1wiOlwiK08oMix3KStcIi5cIitPKDMsUykrXCJaXCJ9ZWxzZSBhPW51bGw7aWYociYmKGE9ci5jYWxsKGUsdCxhKSksbnVsbD09PWEpcmV0dXJuXCJudWxsXCI7aWYoYz12LmNhbGwoYSksYz09QilyZXR1cm5cIlwiK2E7aWYoYz09eClyZXR1cm4gYT4tMS8wJiZhPDEvMD9cIlwiK2E6XCJudWxsXCI7aWYoYz09QSlyZXR1cm4gUihcIlwiK2EpO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtmb3IoUD1zLmxlbmd0aDtQLS07KWlmKHNbUF09PT1hKXRocm93IHAoKTtpZihzLnB1c2goYSksRT1bXSxxPWksaSs9byxjPT1DKXtmb3Ioaj0wLFA9YS5sZW5ndGg7ajxQO2orKylOPUQoaixhLHIsbixvLGkscyksRS5wdXNoKE49PT1nP1wibnVsbFwiOk4pO1U9RS5sZW5ndGg/bz9cIltcXG5cIitpK0Uuam9pbihcIixcXG5cIitpKStcIlxcblwiK3ErXCJdXCI6XCJbXCIrRS5qb2luKFwiLFwiKStcIl1cIjpcIltdXCJ9ZWxzZSB5KG58fGEsZnVuY3Rpb24odCl7dmFyIGU9RCh0LGEscixuLG8saSxzKTtlIT09ZyYmRS5wdXNoKFIodCkrXCI6XCIrKG8/XCIgXCI6XCJcIikrZSl9KSxVPUUubGVuZ3RoP28/XCJ7XFxuXCIraStFLmpvaW4oXCIsXFxuXCIraSkrXCJcXG5cIitxK1wifVwiOlwie1wiK0Uuam9pbihcIixcIikrXCJ9XCI6XCJ7fVwiO3JldHVybiBzLnBvcCgpLFV9fTtlLnN0cmluZ2lmeT1mdW5jdGlvbih0LGUscil7dmFyIG4sbyxpLGE7aWYoc1t0eXBlb2YgZV0mJmUpaWYoKGE9di5jYWxsKGUpKT09dylvPWU7ZWxzZSBpZihhPT1DKXtpPXt9O2Zvcih2YXIgYyx1PTAsaD1lLmxlbmd0aDt1PGg7Yz1lW3UrK10sYT12LmNhbGwoYyksKGE9PUF8fGE9PXgpJiYoaVtjXT0xKSk7fWlmKHIpaWYoKGE9di5jYWxsKHIpKT09eCl7aWYoKHItPXIlMSk+MClmb3Iobj1cIlwiLHI+MTAmJihyPTEwKTtuLmxlbmd0aDxyO24rPVwiIFwiKTt9ZWxzZSBhPT1BJiYobj1yLmxlbmd0aDw9MTA/cjpyLnNsaWNlKDAsMTApKTtyZXR1cm4gRChcIlwiLChjPXt9LGNbXCJcIl09dCxjKSxvLGksbixcIlwiLFtdKX19aWYoIXIoXCJqc29uLXBhcnNlXCIpKXt2YXIgcSxVLE09aS5mcm9tQ2hhckNvZGUsTD17OTI6XCJcXFxcXCIsMzQ6J1wiJyw0NzpcIi9cIiw5ODpcIlxcYlwiLDExNjpcIlxcdFwiLDExMDpcIlxcblwiLDEwMjpcIlxcZlwiLDExNDpcIlxcclwifSxJPWZ1bmN0aW9uKCl7dGhyb3cgcT1VPW51bGwsaCgpfSxIPWZ1bmN0aW9uKCl7Zm9yKHZhciB0LGUscixuLG8saT1VLHM9aS5sZW5ndGg7cTxzOylzd2l0Y2gobz1pLmNoYXJDb2RlQXQocSkpe2Nhc2UgOTpjYXNlIDEwOmNhc2UgMTM6Y2FzZSAzMjpxKys7YnJlYWs7Y2FzZSAxMjM6Y2FzZSAxMjU6Y2FzZSA5MTpjYXNlIDkzOmNhc2UgNTg6Y2FzZSA0NDpyZXR1cm4gdD1TP2kuY2hhckF0KHEpOmlbcV0scSsrLHQ7Y2FzZSAzNDpmb3IodD1cIkBcIixxKys7cTxzOylpZihvPWkuY2hhckNvZGVBdChxKSxvPDMyKUkoKTtlbHNlIGlmKDkyPT1vKXN3aXRjaChvPWkuY2hhckNvZGVBdCgrK3EpKXtjYXNlIDkyOmNhc2UgMzQ6Y2FzZSA0NzpjYXNlIDk4OmNhc2UgMTE2OmNhc2UgMTEwOmNhc2UgMTAyOmNhc2UgMTE0OnQrPUxbb10scSsrO2JyZWFrO2Nhc2UgMTE3OmZvcihlPSsrcSxyPXErNDtxPHI7cSsrKW89aS5jaGFyQ29kZUF0KHEpLG8+PTQ4JiZvPD01N3x8bz49OTcmJm88PTEwMnx8bz49NjUmJm88PTcwfHxJKCk7dCs9TShcIjB4XCIraS5zbGljZShlLHEpKTticmVhaztkZWZhdWx0OkkoKX1lbHNle2lmKDM0PT1vKWJyZWFrO2ZvcihvPWkuY2hhckNvZGVBdChxKSxlPXE7bz49MzImJjkyIT1vJiYzNCE9bzspbz1pLmNoYXJDb2RlQXQoKytxKTt0Kz1pLnNsaWNlKGUscSl9aWYoMzQ9PWkuY2hhckNvZGVBdChxKSlyZXR1cm4gcSsrLHQ7SSgpO2RlZmF1bHQ6aWYoZT1xLDQ1PT1vJiYobj0hMCxvPWkuY2hhckNvZGVBdCgrK3EpKSxvPj00OCYmbzw9NTcpe2Zvcig0OD09byYmKG89aS5jaGFyQ29kZUF0KHErMSksbz49NDgmJm88PTU3KSYmSSgpLG49ITE7cTxzJiYobz1pLmNoYXJDb2RlQXQocSksbz49NDgmJm88PTU3KTtxKyspO2lmKDQ2PT1pLmNoYXJDb2RlQXQocSkpe2ZvcihyPSsrcTtyPHMmJihvPWkuY2hhckNvZGVBdChyKSxvPj00OCYmbzw9NTcpO3IrKyk7cj09cSYmSSgpLHE9cn1pZihvPWkuY2hhckNvZGVBdChxKSwxMDE9PW98fDY5PT1vKXtmb3Iobz1pLmNoYXJDb2RlQXQoKytxKSw0MyE9byYmNDUhPW98fHErKyxyPXE7cjxzJiYobz1pLmNoYXJDb2RlQXQociksbz49NDgmJm88PTU3KTtyKyspO3I9PXEmJkkoKSxxPXJ9cmV0dXJuK2kuc2xpY2UoZSxxKX1pZihuJiZJKCksXCJ0cnVlXCI9PWkuc2xpY2UocSxxKzQpKXJldHVybiBxKz00LCEwO2lmKFwiZmFsc2VcIj09aS5zbGljZShxLHErNSkpcmV0dXJuIHErPTUsITE7aWYoXCJudWxsXCI9PWkuc2xpY2UocSxxKzQpKXJldHVybiBxKz00LG51bGw7SSgpfXJldHVyblwiJFwifSx6PWZ1bmN0aW9uKHQpe3ZhciBlLHI7aWYoXCIkXCI9PXQmJkkoKSxcInN0cmluZ1wiPT10eXBlb2YgdCl7aWYoXCJAXCI9PShTP3QuY2hhckF0KDApOnRbMF0pKXJldHVybiB0LnNsaWNlKDEpO2lmKFwiW1wiPT10KXtmb3IoZT1bXTt0PUgoKSxcIl1cIiE9dDtyfHwocj0hMCkpciYmKFwiLFwiPT10Pyh0PUgoKSxcIl1cIj09dCYmSSgpKTpJKCkpLFwiLFwiPT10JiZJKCksZS5wdXNoKHoodCkpO3JldHVybiBlfWlmKFwie1wiPT10KXtmb3IoZT17fTt0PUgoKSxcIn1cIiE9dDtyfHwocj0hMCkpciYmKFwiLFwiPT10Pyh0PUgoKSxcIn1cIj09dCYmSSgpKTpJKCkpLFwiLFwiIT10JiZcInN0cmluZ1wiPT10eXBlb2YgdCYmXCJAXCI9PShTP3QuY2hhckF0KDApOnRbMF0pJiZcIjpcIj09SCgpfHxJKCksZVt0LnNsaWNlKDEpXT16KEgoKSk7cmV0dXJuIGV9SSgpfXJldHVybiB0fSxKPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1YKHQsZSxyKTtuPT09Zz9kZWxldGUgdFtlXTp0W2VdPW59LFg9ZnVuY3Rpb24odCxlLHIpe3ZhciBuLG89dFtlXTtpZihcIm9iamVjdFwiPT10eXBlb2YgbyYmbylpZih2LmNhbGwobyk9PUMpZm9yKG49by5sZW5ndGg7bi0tOylKKG8sbixyKTtlbHNlIHkobyxmdW5jdGlvbih0KXtKKG8sdCxyKX0pO3JldHVybiByLmNhbGwodCxlLG8pfTtlLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbjtyZXR1cm4gcT0wLFU9XCJcIit0LHI9eihIKCkpLFwiJFwiIT1IKCkmJkkoKSxxPVU9bnVsbCxlJiZ2LmNhbGwoZSk9PXc/WCgobj17fSxuW1wiXCJdPXIsbiksXCJcIixlKTpyfX19cmV0dXJuIGUucnVuSW5Db250ZXh0PW8sZX12YXIgaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiZuLmFtZCxzPXtmdW5jdGlvbjohMCxvYmplY3Q6ITB9LGE9c1t0eXBlb2YgZV0mJmUmJiFlLm5vZGVUeXBlJiZlLGM9c1t0eXBlb2Ygd2luZG93XSYmd2luZG93fHx0aGlzLHU9YSYmc1t0eXBlb2YgdF0mJnQmJiF0Lm5vZGVUeXBlJiZcIm9iamVjdFwiPT10eXBlb2YgciYmcjtpZighdXx8dS5nbG9iYWwhPT11JiZ1LndpbmRvdyE9PXUmJnUuc2VsZiE9PXV8fChjPXUpLGEmJiFpKW8oYyxhKTtlbHNle3ZhciBoPWMuSlNPTixwPWMuSlNPTjMsZj0hMSxsPW8oYyxjLkpTT04zPXtub0NvbmZsaWN0OmZ1bmN0aW9uKCl7cmV0dXJuIGZ8fChmPSEwLGMuSlNPTj1oLGMuSlNPTjM9cCxoPXA9bnVsbCksbH19KTtjLkpTT049e3BhcnNlOmwucGFyc2Usc3RyaW5naWZ5Omwuc3RyaW5naWZ5fX1pJiZuKGZ1bmN0aW9uKCl7cmV0dXJuIGx9KX0pLmNhbGwodGhpcyl9KS5jYWxsKGUscigxMikodCksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0LndlYnBhY2tQb2x5ZmlsbHx8KHQuZGVwcmVjYXRlPWZ1bmN0aW9uKCl7fSx0LnBhdGhzPVtdLHQuY2hpbGRyZW49W10sdC53ZWJwYWNrUG9seWZpbGw9MSksdH19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcih0KXtpZih0KXJldHVybiBuKHQpfWZ1bmN0aW9uIG4odCl7Zm9yKHZhciBlIGluIHIucHJvdG90eXBlKXRbZV09ci5wcm90b3R5cGVbZV07cmV0dXJuIHR9dC5leHBvcnRzPXIsci5wcm90b3R5cGUub249ci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSwodGhpcy5fY2FsbGJhY2tzW3RdPXRoaXMuX2NhbGxiYWNrc1t0XXx8W10pLnB1c2goZSksdGhpc30sci5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIoKXtuLm9mZih0LHIpLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXZhciBuPXRoaXM7cmV0dXJuIHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LHIuZm49ZSx0aGlzLm9uKHQsciksdGhpc30sci5wcm90b3R5cGUub2ZmPXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1yLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sMD09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXt9LHRoaXM7dmFyIHI9dGhpcy5fY2FsbGJhY2tzW3RdO2lmKCFyKXJldHVybiB0aGlzO2lmKDE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbdF0sdGhpcztmb3IodmFyIG4sbz0wO288ci5sZW5ndGg7bysrKWlmKG49cltvXSxuPT09ZXx8bi5mbj09PWUpe3Iuc3BsaWNlKG8sMSk7YnJlYWt9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCl7dGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e307dmFyIGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSkscj10aGlzLl9jYWxsYmFja3NbdF07aWYocil7cj1yLnNsaWNlKDApO2Zvcih2YXIgbj0wLG89ci5sZW5ndGg7bjxvOysrbilyW25dLmFwcGx5KHRoaXMsZSl9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sdGhpcy5fY2FsbGJhY2tzW3RdfHxbXX0sci5wcm90b3R5cGUuaGFzTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5saXN0ZW5lcnModCkubGVuZ3RofX0sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbih0KXt2YXIgbj1yKDE1KSxvPXIoMTYpO2UuZGVjb25zdHJ1Y3RQYWNrZXQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtpZighdClyZXR1cm4gdDtpZihvKHQpKXt2YXIgaT17X3BsYWNlaG9sZGVyOiEwLG51bTpyLmxlbmd0aH07cmV0dXJuIHIucHVzaCh0KSxpfWlmKG4odCkpe2Zvcih2YXIgcz1uZXcgQXJyYXkodC5sZW5ndGgpLGE9MDthPHQubGVuZ3RoO2ErKylzW2FdPWUodFthXSk7cmV0dXJuIHN9aWYoXCJvYmplY3RcIj09dHlwZW9mIHQmJiEodCBpbnN0YW5jZW9mIERhdGUpKXt2YXIgcz17fTtmb3IodmFyIGMgaW4gdClzW2NdPWUodFtjXSk7cmV0dXJuIHN9cmV0dXJuIHR9dmFyIHI9W10saT10LmRhdGEscz10O3JldHVybiBzLmRhdGE9ZShpKSxzLmF0dGFjaG1lbnRzPXIubGVuZ3RoLHtwYWNrZXQ6cyxidWZmZXJzOnJ9fSxlLnJlY29uc3RydWN0UGFja2V0PWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcih0KXtpZih0JiZ0Ll9wbGFjZWhvbGRlcil7dmFyIG89ZVt0Lm51bV07cmV0dXJuIG99aWYobih0KSl7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspdFtpXT1yKHRbaV0pO3JldHVybiB0fWlmKHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0KXtmb3IodmFyIHMgaW4gdCl0W3NdPXIodFtzXSk7cmV0dXJuIHR9cmV0dXJuIHR9cmV0dXJuIHQuZGF0YT1yKHQuZGF0YSksdC5hdHRhY2htZW50cz12b2lkIDAsdH0sZS5yZW1vdmVCbG9icz1mdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoZSxjLHUpe2lmKCFlKXJldHVybiBlO2lmKHQuQmxvYiYmZSBpbnN0YW5jZW9mIEJsb2J8fHQuRmlsZSYmZSBpbnN0YW5jZW9mIEZpbGUpe3MrKzt2YXIgaD1uZXcgRmlsZVJlYWRlcjtoLm9ubG9hZD1mdW5jdGlvbigpe3U/dVtjXT10aGlzLnJlc3VsdDphPXRoaXMucmVzdWx0LC0tc3x8cihhKX0saC5yZWFkQXNBcnJheUJ1ZmZlcihlKX1lbHNlIGlmKG4oZSkpZm9yKHZhciBwPTA7cDxlLmxlbmd0aDtwKyspaShlW3BdLHAsZSk7ZWxzZSBpZihlJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmIW8oZSkpZm9yKHZhciBmIGluIGUpaShlW2ZdLGYsZSl9dmFyIHM9MCxhPWU7aShhKSxzfHxyKGEpfX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9fSxmdW5jdGlvbih0LGUpeyhmdW5jdGlvbihlKXtmdW5jdGlvbiByKHQpe3JldHVybiBlLkJ1ZmZlciYmZS5CdWZmZXIuaXNCdWZmZXIodCl8fGUuQXJyYXlCdWZmZXImJnQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcn10LmV4cG9ydHM9cn0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG4/KHQmJlwib2JqZWN0XCI9PT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIHQ/XCJ1bmRlZmluZWRcIjpvKHQpKSYmKGU9dCx0PXZvaWQgMCksZT1lfHx7fSxlLnBhdGg9ZS5wYXRofHxcIi9zb2NrZXQuaW9cIix0aGlzLm5zcHM9e30sdGhpcy5zdWJzPVtdLHRoaXMub3B0cz1lLHRoaXMucmVjb25uZWN0aW9uKGUucmVjb25uZWN0aW9uIT09ITEpLHRoaXMucmVjb25uZWN0aW9uQXR0ZW1wdHMoZS5yZWNvbm5lY3Rpb25BdHRlbXB0c3x8MS8wKSx0aGlzLnJlY29ubmVjdGlvbkRlbGF5KGUucmVjb25uZWN0aW9uRGVsYXl8fDFlMyksdGhpcy5yZWNvbm5lY3Rpb25EZWxheU1heChlLnJlY29ubmVjdGlvbkRlbGF5TWF4fHw1ZTMpLHRoaXMucmFuZG9taXphdGlvbkZhY3RvcihlLnJhbmRvbWl6YXRpb25GYWN0b3J8fC41KSx0aGlzLmJhY2tvZmY9bmV3IGwoe21pbjp0aGlzLnJlY29ubmVjdGlvbkRlbGF5KCksbWF4OnRoaXMucmVjb25uZWN0aW9uRGVsYXlNYXgoKSxqaXR0ZXI6dGhpcy5yYW5kb21pemF0aW9uRmFjdG9yKCl9KSx0aGlzLnRpbWVvdXQobnVsbD09ZS50aW1lb3V0PzJlNDplLnRpbWVvdXQpLHRoaXMucmVhZHlTdGF0ZT1cImNsb3NlZFwiLHRoaXMudXJpPXQsdGhpcy5jb25uZWN0aW5nPVtdLHRoaXMubGFzdFBpbmc9bnVsbCx0aGlzLmVuY29kaW5nPSExLHRoaXMucGFja2V0QnVmZmVyPVtdLHRoaXMuZW5jb2Rlcj1uZXcgYy5FbmNvZGVyLHRoaXMuZGVjb2Rlcj1uZXcgYy5EZWNvZGVyLHRoaXMuYXV0b0Nvbm5lY3Q9ZS5hdXRvQ29ubmVjdCE9PSExLHZvaWQodGhpcy5hdXRvQ29ubmVjdCYmdGhpcy5vcGVuKCkpKTpuZXcgbih0LGUpfXZhciBvPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LGk9cigxOCkscz1yKDQ0KSxhPXIoMzUpLGM9cig3KSx1PXIoNDYpLGg9cig0NykscD1yKDMpKFwic29ja2V0LmlvLWNsaWVudDptYW5hZ2VyXCIpLGY9cig0MiksbD1yKDQ4KSxkPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPW4sbi5wcm90b3R5cGUuZW1pdEFsbD1mdW5jdGlvbigpe3RoaXMuZW1pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Zm9yKHZhciB0IGluIHRoaXMubnNwcylkLmNhbGwodGhpcy5uc3BzLHQpJiZ0aGlzLm5zcHNbdF0uZW1pdC5hcHBseSh0aGlzLm5zcHNbdF0sYXJndW1lbnRzKX0sbi5wcm90b3R5cGUudXBkYXRlU29ja2V0SWRzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMubnNwcylkLmNhbGwodGhpcy5uc3BzLHQpJiYodGhpcy5uc3BzW3RdLmlkPXRoaXMuZW5naW5lLmlkKX0sYShuLnByb3RvdHlwZSksbi5wcm90b3R5cGUucmVjb25uZWN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9yZWNvbm5lY3Rpb249ISF0LHRoaXMpOnRoaXMuX3JlY29ubmVjdGlvbn0sbi5wcm90b3R5cGUucmVjb25uZWN0aW9uQXR0ZW1wdHM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzPXQsdGhpcyk6dGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHN9LG4ucHJvdG90eXBlLnJlY29ubmVjdGlvbkRlbGF5PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9yZWNvbm5lY3Rpb25EZWxheT10LHRoaXMuYmFja29mZiYmdGhpcy5iYWNrb2ZmLnNldE1pbih0KSx0aGlzKTp0aGlzLl9yZWNvbm5lY3Rpb25EZWxheX0sbi5wcm90b3R5cGUucmFuZG9taXphdGlvbkZhY3Rvcj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odGhpcy5fcmFuZG9taXphdGlvbkZhY3Rvcj10LHRoaXMuYmFja29mZiYmdGhpcy5iYWNrb2ZmLnNldEppdHRlcih0KSx0aGlzKTp0aGlzLl9yYW5kb21pemF0aW9uRmFjdG9yfSxuLnByb3RvdHlwZS5yZWNvbm5lY3Rpb25EZWxheU1heD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXg9dCx0aGlzLmJhY2tvZmYmJnRoaXMuYmFja29mZi5zZXRNYXgodCksdGhpcyk6dGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXh9LG4ucHJvdG90eXBlLnRpbWVvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX3RpbWVvdXQ9dCx0aGlzKTp0aGlzLl90aW1lb3V0fSxuLnByb3RvdHlwZS5tYXliZVJlY29ubmVjdE9uT3Blbj1mdW5jdGlvbigpeyF0aGlzLnJlY29ubmVjdGluZyYmdGhpcy5fcmVjb25uZWN0aW9uJiYwPT09dGhpcy5iYWNrb2ZmLmF0dGVtcHRzJiZ0aGlzLnJlY29ubmVjdCgpfSxuLnByb3RvdHlwZS5vcGVuPW4ucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24odCxlKXtpZihwKFwicmVhZHlTdGF0ZSAlc1wiLHRoaXMucmVhZHlTdGF0ZSksfnRoaXMucmVhZHlTdGF0ZS5pbmRleE9mKFwib3BlblwiKSlyZXR1cm4gdGhpcztwKFwib3BlbmluZyAlc1wiLHRoaXMudXJpKSx0aGlzLmVuZ2luZT1pKHRoaXMudXJpLHRoaXMub3B0cyk7dmFyIHI9dGhpcy5lbmdpbmUsbj10aGlzO3RoaXMucmVhZHlTdGF0ZT1cIm9wZW5pbmdcIix0aGlzLnNraXBSZWNvbm5lY3Q9ITE7dmFyIG89dShyLFwib3BlblwiLGZ1bmN0aW9uKCl7bi5vbm9wZW4oKSx0JiZ0KCl9KSxzPXUocixcImVycm9yXCIsZnVuY3Rpb24oZSl7aWYocChcImNvbm5lY3RfZXJyb3JcIiksbi5jbGVhbnVwKCksbi5yZWFkeVN0YXRlPVwiY2xvc2VkXCIsbi5lbWl0QWxsKFwiY29ubmVjdF9lcnJvclwiLGUpLHQpe3ZhciByPW5ldyBFcnJvcihcIkNvbm5lY3Rpb24gZXJyb3JcIik7ci5kYXRhPWUsdChyKX1lbHNlIG4ubWF5YmVSZWNvbm5lY3RPbk9wZW4oKX0pO2lmKCExIT09dGhpcy5fdGltZW91dCl7dmFyIGE9dGhpcy5fdGltZW91dDtwKFwiY29ubmVjdCBhdHRlbXB0IHdpbGwgdGltZW91dCBhZnRlciAlZFwiLGEpO3ZhciBjPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtwKFwiY29ubmVjdCBhdHRlbXB0IHRpbWVkIG91dCBhZnRlciAlZFwiLGEpLG8uZGVzdHJveSgpLHIuY2xvc2UoKSxyLmVtaXQoXCJlcnJvclwiLFwidGltZW91dFwiKSxuLmVtaXRBbGwoXCJjb25uZWN0X3RpbWVvdXRcIixhKX0sYSk7dGhpcy5zdWJzLnB1c2goe2Rlc3Ryb3k6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYyl9fSl9cmV0dXJuIHRoaXMuc3Vicy5wdXNoKG8pLHRoaXMuc3Vicy5wdXNoKHMpLHRoaXN9LG4ucHJvdG90eXBlLm9ub3Blbj1mdW5jdGlvbigpe3AoXCJvcGVuXCIpLHRoaXMuY2xlYW51cCgpLHRoaXMucmVhZHlTdGF0ZT1cIm9wZW5cIix0aGlzLmVtaXQoXCJvcGVuXCIpO3ZhciB0PXRoaXMuZW5naW5lO3RoaXMuc3Vicy5wdXNoKHUodCxcImRhdGFcIixoKHRoaXMsXCJvbmRhdGFcIikpKSx0aGlzLnN1YnMucHVzaCh1KHQsXCJwaW5nXCIsaCh0aGlzLFwib25waW5nXCIpKSksdGhpcy5zdWJzLnB1c2godSh0LFwicG9uZ1wiLGgodGhpcyxcIm9ucG9uZ1wiKSkpLHRoaXMuc3Vicy5wdXNoKHUodCxcImVycm9yXCIsaCh0aGlzLFwib25lcnJvclwiKSkpLHRoaXMuc3Vicy5wdXNoKHUodCxcImNsb3NlXCIsaCh0aGlzLFwib25jbG9zZVwiKSkpLHRoaXMuc3Vicy5wdXNoKHUodGhpcy5kZWNvZGVyLFwiZGVjb2RlZFwiLGgodGhpcyxcIm9uZGVjb2RlZFwiKSkpfSxuLnByb3RvdHlwZS5vbnBpbmc9ZnVuY3Rpb24oKXt0aGlzLmxhc3RQaW5nPW5ldyBEYXRlLHRoaXMuZW1pdEFsbChcInBpbmdcIil9LG4ucHJvdG90eXBlLm9ucG9uZz1mdW5jdGlvbigpe3RoaXMuZW1pdEFsbChcInBvbmdcIixuZXcgRGF0ZS10aGlzLmxhc3RQaW5nKX0sbi5wcm90b3R5cGUub25kYXRhPWZ1bmN0aW9uKHQpe3RoaXMuZGVjb2Rlci5hZGQodCl9LG4ucHJvdG90eXBlLm9uZGVjb2RlZD1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJwYWNrZXRcIix0KX0sbi5wcm90b3R5cGUub25lcnJvcj1mdW5jdGlvbih0KXtwKFwiZXJyb3JcIix0KSx0aGlzLmVtaXRBbGwoXCJlcnJvclwiLHQpfSxuLnByb3RvdHlwZS5zb2NrZXQ9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiByKCl7fmYoby5jb25uZWN0aW5nLG4pfHxvLmNvbm5lY3RpbmcucHVzaChuKX12YXIgbj10aGlzLm5zcHNbdF07aWYoIW4pe249bmV3IHModGhpcyx0LGUpLHRoaXMubnNwc1t0XT1uO3ZhciBvPXRoaXM7bi5vbihcImNvbm5lY3RpbmdcIixyKSxuLm9uKFwiY29ubmVjdFwiLGZ1bmN0aW9uKCl7bi5pZD1vLmVuZ2luZS5pZH0pLHRoaXMuYXV0b0Nvbm5lY3QmJnIoKX1yZXR1cm4gbn0sbi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbih0KXt2YXIgZT1mKHRoaXMuY29ubmVjdGluZyx0KTt+ZSYmdGhpcy5jb25uZWN0aW5nLnNwbGljZShlLDEpLHRoaXMuY29ubmVjdGluZy5sZW5ndGh8fHRoaXMuY2xvc2UoKX0sbi5wcm90b3R5cGUucGFja2V0PWZ1bmN0aW9uKHQpe3AoXCJ3cml0aW5nIHBhY2tldCAlalwiLHQpO3ZhciBlPXRoaXM7dC5xdWVyeSYmMD09PXQudHlwZSYmKHQubnNwKz1cIj9cIit0LnF1ZXJ5KSxlLmVuY29kaW5nP2UucGFja2V0QnVmZmVyLnB1c2godCk6KGUuZW5jb2Rpbmc9ITAsdGhpcy5lbmNvZGVyLmVuY29kZSh0LGZ1bmN0aW9uKHIpe2Zvcih2YXIgbj0wO248ci5sZW5ndGg7bisrKWUuZW5naW5lLndyaXRlKHJbbl0sdC5vcHRpb25zKTtlLmVuY29kaW5nPSExLGUucHJvY2Vzc1BhY2tldFF1ZXVlKCl9KSl9LG4ucHJvdG90eXBlLnByb2Nlc3NQYWNrZXRRdWV1ZT1mdW5jdGlvbigpe2lmKHRoaXMucGFja2V0QnVmZmVyLmxlbmd0aD4wJiYhdGhpcy5lbmNvZGluZyl7dmFyIHQ9dGhpcy5wYWNrZXRCdWZmZXIuc2hpZnQoKTt0aGlzLnBhY2tldCh0KX19LG4ucHJvdG90eXBlLmNsZWFudXA9ZnVuY3Rpb24oKXtwKFwiY2xlYW51cFwiKTtmb3IodmFyIHQ9dGhpcy5zdWJzLmxlbmd0aCxlPTA7ZTx0O2UrKyl7dmFyIHI9dGhpcy5zdWJzLnNoaWZ0KCk7ci5kZXN0cm95KCl9dGhpcy5wYWNrZXRCdWZmZXI9W10sdGhpcy5lbmNvZGluZz0hMSx0aGlzLmxhc3RQaW5nPW51bGwsdGhpcy5kZWNvZGVyLmRlc3Ryb3koKX0sbi5wcm90b3R5cGUuY2xvc2U9bi5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe3AoXCJkaXNjb25uZWN0XCIpLHRoaXMuc2tpcFJlY29ubmVjdD0hMCx0aGlzLnJlY29ubmVjdGluZz0hMSxcIm9wZW5pbmdcIj09PXRoaXMucmVhZHlTdGF0ZSYmdGhpcy5jbGVhbnVwKCksdGhpcy5iYWNrb2ZmLnJlc2V0KCksdGhpcy5yZWFkeVN0YXRlPVwiY2xvc2VkXCIsdGhpcy5lbmdpbmUmJnRoaXMuZW5naW5lLmNsb3NlKCl9LG4ucHJvdG90eXBlLm9uY2xvc2U9ZnVuY3Rpb24odCl7cChcIm9uY2xvc2VcIiksdGhpcy5jbGVhbnVwKCksdGhpcy5iYWNrb2ZmLnJlc2V0KCksdGhpcy5yZWFkeVN0YXRlPVwiY2xvc2VkXCIsdGhpcy5lbWl0KFwiY2xvc2VcIix0KSx0aGlzLl9yZWNvbm5lY3Rpb24mJiF0aGlzLnNraXBSZWNvbm5lY3QmJnRoaXMucmVjb25uZWN0KCl9LG4ucHJvdG90eXBlLnJlY29ubmVjdD1mdW5jdGlvbigpe2lmKHRoaXMucmVjb25uZWN0aW5nfHx0aGlzLnNraXBSZWNvbm5lY3QpcmV0dXJuIHRoaXM7dmFyIHQ9dGhpcztpZih0aGlzLmJhY2tvZmYuYXR0ZW1wdHM+PXRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzKXAoXCJyZWNvbm5lY3QgZmFpbGVkXCIpLHRoaXMuYmFja29mZi5yZXNldCgpLHRoaXMuZW1pdEFsbChcInJlY29ubmVjdF9mYWlsZWRcIiksdGhpcy5yZWNvbm5lY3Rpbmc9ITE7ZWxzZXt2YXIgZT10aGlzLmJhY2tvZmYuZHVyYXRpb24oKTtwKFwid2lsbCB3YWl0ICVkbXMgYmVmb3JlIHJlY29ubmVjdCBhdHRlbXB0XCIsZSksdGhpcy5yZWNvbm5lY3Rpbmc9ITA7dmFyIHI9c2V0VGltZW91dChmdW5jdGlvbigpe3Quc2tpcFJlY29ubmVjdHx8KHAoXCJhdHRlbXB0aW5nIHJlY29ubmVjdFwiKSx0LmVtaXRBbGwoXCJyZWNvbm5lY3RfYXR0ZW1wdFwiLHQuYmFja29mZi5hdHRlbXB0cyksdC5lbWl0QWxsKFwicmVjb25uZWN0aW5nXCIsdC5iYWNrb2ZmLmF0dGVtcHRzKSx0LnNraXBSZWNvbm5lY3R8fHQub3BlbihmdW5jdGlvbihlKXtlPyhwKFwicmVjb25uZWN0IGF0dGVtcHQgZXJyb3JcIiksdC5yZWNvbm5lY3Rpbmc9ITEsdC5yZWNvbm5lY3QoKSx0LmVtaXRBbGwoXCJyZWNvbm5lY3RfZXJyb3JcIixlLmRhdGEpKToocChcInJlY29ubmVjdCBzdWNjZXNzXCIpLHQub25yZWNvbm5lY3QoKSl9KSl9LGUpO3RoaXMuc3Vicy5wdXNoKHtkZXN0cm95OmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHIpfX0pfX0sbi5wcm90b3R5cGUub25yZWNvbm5lY3Q9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJhY2tvZmYuYXR0ZW1wdHM7dGhpcy5yZWNvbm5lY3Rpbmc9ITEsdGhpcy5iYWNrb2ZmLnJlc2V0KCksdGhpcy51cGRhdGVTb2NrZXRJZHMoKSx0aGlzLmVtaXRBbGwoXCJyZWNvbm5lY3RcIix0KX19LGZ1bmN0aW9uKHQsZSxyKXt0LmV4cG9ydHM9cigxOSl9LGZ1bmN0aW9uKHQsZSxyKXt0LmV4cG9ydHM9cigyMCksdC5leHBvcnRzLnBhcnNlcj1yKDI3KX0sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbihlKXtmdW5jdGlvbiBuKHQscil7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpcmV0dXJuIG5ldyBuKHQscik7cj1yfHx7fSx0JiZcIm9iamVjdFwiPT10eXBlb2YgdCYmKHI9dCx0PW51bGwpLHQ/KHQ9aCh0KSxyLmhvc3RuYW1lPXQuaG9zdCxyLnNlY3VyZT1cImh0dHBzXCI9PT10LnByb3RvY29sfHxcIndzc1wiPT09dC5wcm90b2NvbCxyLnBvcnQ9dC5wb3J0LHQucXVlcnkmJihyLnF1ZXJ5PXQucXVlcnkpKTpyLmhvc3QmJihyLmhvc3RuYW1lPWgoci5ob3N0KS5ob3N0KSxcbnRoaXMuc2VjdXJlPW51bGwhPXIuc2VjdXJlP3Iuc2VjdXJlOmUubG9jYXRpb24mJlwiaHR0cHM6XCI9PT1sb2NhdGlvbi5wcm90b2NvbCxyLmhvc3RuYW1lJiYhci5wb3J0JiYoci5wb3J0PXRoaXMuc2VjdXJlP1wiNDQzXCI6XCI4MFwiKSx0aGlzLmFnZW50PXIuYWdlbnR8fCExLHRoaXMuaG9zdG5hbWU9ci5ob3N0bmFtZXx8KGUubG9jYXRpb24/bG9jYXRpb24uaG9zdG5hbWU6XCJsb2NhbGhvc3RcIiksdGhpcy5wb3J0PXIucG9ydHx8KGUubG9jYXRpb24mJmxvY2F0aW9uLnBvcnQ/bG9jYXRpb24ucG9ydDp0aGlzLnNlY3VyZT80NDM6ODApLHRoaXMucXVlcnk9ci5xdWVyeXx8e30sXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMucXVlcnkmJih0aGlzLnF1ZXJ5PWYuZGVjb2RlKHRoaXMucXVlcnkpKSx0aGlzLnVwZ3JhZGU9ITEhPT1yLnVwZ3JhZGUsdGhpcy5wYXRoPShyLnBhdGh8fFwiL2VuZ2luZS5pb1wiKS5yZXBsYWNlKC9cXC8kLyxcIlwiKStcIi9cIix0aGlzLmZvcmNlSlNPTlA9ISFyLmZvcmNlSlNPTlAsdGhpcy5qc29ucD0hMSE9PXIuanNvbnAsdGhpcy5mb3JjZUJhc2U2ND0hIXIuZm9yY2VCYXNlNjQsdGhpcy5lbmFibGVzWERSPSEhci5lbmFibGVzWERSLHRoaXMudGltZXN0YW1wUGFyYW09ci50aW1lc3RhbXBQYXJhbXx8XCJ0XCIsdGhpcy50aW1lc3RhbXBSZXF1ZXN0cz1yLnRpbWVzdGFtcFJlcXVlc3RzLHRoaXMudHJhbnNwb3J0cz1yLnRyYW5zcG9ydHN8fFtcInBvbGxpbmdcIixcIndlYnNvY2tldFwiXSx0aGlzLnJlYWR5U3RhdGU9XCJcIix0aGlzLndyaXRlQnVmZmVyPVtdLHRoaXMucHJldkJ1ZmZlckxlbj0wLHRoaXMucG9saWN5UG9ydD1yLnBvbGljeVBvcnR8fDg0Myx0aGlzLnJlbWVtYmVyVXBncmFkZT1yLnJlbWVtYmVyVXBncmFkZXx8ITEsdGhpcy5iaW5hcnlUeXBlPW51bGwsdGhpcy5vbmx5QmluYXJ5VXBncmFkZXM9ci5vbmx5QmluYXJ5VXBncmFkZXMsdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZT0hMSE9PXIucGVyTWVzc2FnZURlZmxhdGUmJihyLnBlck1lc3NhZ2VEZWZsYXRlfHx7fSksITA9PT10aGlzLnBlck1lc3NhZ2VEZWZsYXRlJiYodGhpcy5wZXJNZXNzYWdlRGVmbGF0ZT17fSksdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSYmbnVsbD09dGhpcy5wZXJNZXNzYWdlRGVmbGF0ZS50aHJlc2hvbGQmJih0aGlzLnBlck1lc3NhZ2VEZWZsYXRlLnRocmVzaG9sZD0xMDI0KSx0aGlzLnBmeD1yLnBmeHx8bnVsbCx0aGlzLmtleT1yLmtleXx8bnVsbCx0aGlzLnBhc3NwaHJhc2U9ci5wYXNzcGhyYXNlfHxudWxsLHRoaXMuY2VydD1yLmNlcnR8fG51bGwsdGhpcy5jYT1yLmNhfHxudWxsLHRoaXMuY2lwaGVycz1yLmNpcGhlcnN8fG51bGwsdGhpcy5yZWplY3RVbmF1dGhvcml6ZWQ9dm9pZCAwPT09ci5yZWplY3RVbmF1dGhvcml6ZWQ/bnVsbDpyLnJlamVjdFVuYXV0aG9yaXplZCx0aGlzLmZvcmNlTm9kZT0hIXIuZm9yY2VOb2RlO3ZhciBvPVwib2JqZWN0XCI9PXR5cGVvZiBlJiZlO28uZ2xvYmFsPT09byYmKHIuZXh0cmFIZWFkZXJzJiZPYmplY3Qua2V5cyhyLmV4dHJhSGVhZGVycykubGVuZ3RoPjAmJih0aGlzLmV4dHJhSGVhZGVycz1yLmV4dHJhSGVhZGVycyksci5sb2NhbEFkZHJlc3MmJih0aGlzLmxvY2FsQWRkcmVzcz1yLmxvY2FsQWRkcmVzcykpLHRoaXMuaWQ9bnVsbCx0aGlzLnVwZ3JhZGVzPW51bGwsdGhpcy5waW5nSW50ZXJ2YWw9bnVsbCx0aGlzLnBpbmdUaW1lb3V0PW51bGwsdGhpcy5waW5nSW50ZXJ2YWxUaW1lcj1udWxsLHRoaXMucGluZ1RpbWVvdXRUaW1lcj1udWxsLHRoaXMub3BlbigpfWZ1bmN0aW9uIG8odCl7dmFyIGU9e307Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSk7cmV0dXJuIGV9dmFyIGk9cigyMSkscz1yKDM1KSxhPXIoMykoXCJlbmdpbmUuaW8tY2xpZW50OnNvY2tldFwiKSxjPXIoNDIpLHU9cigyNyksaD1yKDIpLHA9cig0MyksZj1yKDM2KTt0LmV4cG9ydHM9bixuLnByaW9yV2Vic29ja2V0U3VjY2Vzcz0hMSxzKG4ucHJvdG90eXBlKSxuLnByb3RvY29sPXUucHJvdG9jb2wsbi5Tb2NrZXQ9bixuLlRyYW5zcG9ydD1yKDI2KSxuLnRyYW5zcG9ydHM9cigyMSksbi5wYXJzZXI9cigyNyksbi5wcm90b3R5cGUuY3JlYXRlVHJhbnNwb3J0PWZ1bmN0aW9uKHQpe2EoJ2NyZWF0aW5nIHRyYW5zcG9ydCBcIiVzXCInLHQpO3ZhciBlPW8odGhpcy5xdWVyeSk7ZS5FSU89dS5wcm90b2NvbCxlLnRyYW5zcG9ydD10LHRoaXMuaWQmJihlLnNpZD10aGlzLmlkKTt2YXIgcj1uZXcgaVt0XSh7YWdlbnQ6dGhpcy5hZ2VudCxob3N0bmFtZTp0aGlzLmhvc3RuYW1lLHBvcnQ6dGhpcy5wb3J0LHNlY3VyZTp0aGlzLnNlY3VyZSxwYXRoOnRoaXMucGF0aCxxdWVyeTplLGZvcmNlSlNPTlA6dGhpcy5mb3JjZUpTT05QLGpzb25wOnRoaXMuanNvbnAsZm9yY2VCYXNlNjQ6dGhpcy5mb3JjZUJhc2U2NCxlbmFibGVzWERSOnRoaXMuZW5hYmxlc1hEUix0aW1lc3RhbXBSZXF1ZXN0czp0aGlzLnRpbWVzdGFtcFJlcXVlc3RzLHRpbWVzdGFtcFBhcmFtOnRoaXMudGltZXN0YW1wUGFyYW0scG9saWN5UG9ydDp0aGlzLnBvbGljeVBvcnQsc29ja2V0OnRoaXMscGZ4OnRoaXMucGZ4LGtleTp0aGlzLmtleSxwYXNzcGhyYXNlOnRoaXMucGFzc3BocmFzZSxjZXJ0OnRoaXMuY2VydCxjYTp0aGlzLmNhLGNpcGhlcnM6dGhpcy5jaXBoZXJzLHJlamVjdFVuYXV0aG9yaXplZDp0aGlzLnJlamVjdFVuYXV0aG9yaXplZCxwZXJNZXNzYWdlRGVmbGF0ZTp0aGlzLnBlck1lc3NhZ2VEZWZsYXRlLGV4dHJhSGVhZGVyczp0aGlzLmV4dHJhSGVhZGVycyxmb3JjZU5vZGU6dGhpcy5mb3JjZU5vZGUsbG9jYWxBZGRyZXNzOnRoaXMubG9jYWxBZGRyZXNzfSk7cmV0dXJuIHJ9LG4ucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oKXt2YXIgdDtpZih0aGlzLnJlbWVtYmVyVXBncmFkZSYmbi5wcmlvcldlYnNvY2tldFN1Y2Nlc3MmJnRoaXMudHJhbnNwb3J0cy5pbmRleE9mKFwid2Vic29ja2V0XCIpIT09LTEpdD1cIndlYnNvY2tldFwiO2Vsc2V7aWYoMD09PXRoaXMudHJhbnNwb3J0cy5sZW5ndGgpe3ZhciBlPXRoaXM7cmV0dXJuIHZvaWQgc2V0VGltZW91dChmdW5jdGlvbigpe2UuZW1pdChcImVycm9yXCIsXCJObyB0cmFuc3BvcnRzIGF2YWlsYWJsZVwiKX0sMCl9dD10aGlzLnRyYW5zcG9ydHNbMF19dGhpcy5yZWFkeVN0YXRlPVwib3BlbmluZ1wiO3RyeXt0PXRoaXMuY3JlYXRlVHJhbnNwb3J0KHQpfWNhdGNoKHQpe3JldHVybiB0aGlzLnRyYW5zcG9ydHMuc2hpZnQoKSx2b2lkIHRoaXMub3BlbigpfXQub3BlbigpLHRoaXMuc2V0VHJhbnNwb3J0KHQpfSxuLnByb3RvdHlwZS5zZXRUcmFuc3BvcnQ9ZnVuY3Rpb24odCl7YShcInNldHRpbmcgdHJhbnNwb3J0ICVzXCIsdC5uYW1lKTt2YXIgZT10aGlzO3RoaXMudHJhbnNwb3J0JiYoYShcImNsZWFyaW5nIGV4aXN0aW5nIHRyYW5zcG9ydCAlc1wiLHRoaXMudHJhbnNwb3J0Lm5hbWUpLHRoaXMudHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycygpKSx0aGlzLnRyYW5zcG9ydD10LHQub24oXCJkcmFpblwiLGZ1bmN0aW9uKCl7ZS5vbkRyYWluKCl9KS5vbihcInBhY2tldFwiLGZ1bmN0aW9uKHQpe2Uub25QYWNrZXQodCl9KS5vbihcImVycm9yXCIsZnVuY3Rpb24odCl7ZS5vbkVycm9yKHQpfSkub24oXCJjbG9zZVwiLGZ1bmN0aW9uKCl7ZS5vbkNsb3NlKFwidHJhbnNwb3J0IGNsb3NlXCIpfSl9LG4ucHJvdG90eXBlLnByb2JlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtpZihmLm9ubHlCaW5hcnlVcGdyYWRlcyl7dmFyIGU9IXRoaXMuc3VwcG9ydHNCaW5hcnkmJmYudHJhbnNwb3J0LnN1cHBvcnRzQmluYXJ5O3A9cHx8ZX1wfHwoYSgncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBvcGVuZWQnLHQpLGguc2VuZChbe3R5cGU6XCJwaW5nXCIsZGF0YTpcInByb2JlXCJ9XSksaC5vbmNlKFwicGFja2V0XCIsZnVuY3Rpb24oZSl7aWYoIXApaWYoXCJwb25nXCI9PT1lLnR5cGUmJlwicHJvYmVcIj09PWUuZGF0YSl7aWYoYSgncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBwb25nJyx0KSxmLnVwZ3JhZGluZz0hMCxmLmVtaXQoXCJ1cGdyYWRpbmdcIixoKSwhaClyZXR1cm47bi5wcmlvcldlYnNvY2tldFN1Y2Nlc3M9XCJ3ZWJzb2NrZXRcIj09PWgubmFtZSxhKCdwYXVzaW5nIGN1cnJlbnQgdHJhbnNwb3J0IFwiJXNcIicsZi50cmFuc3BvcnQubmFtZSksZi50cmFuc3BvcnQucGF1c2UoZnVuY3Rpb24oKXtwfHxcImNsb3NlZFwiIT09Zi5yZWFkeVN0YXRlJiYoYShcImNoYW5naW5nIHRyYW5zcG9ydCBhbmQgc2VuZGluZyB1cGdyYWRlIHBhY2tldFwiKSx1KCksZi5zZXRUcmFuc3BvcnQoaCksaC5zZW5kKFt7dHlwZTpcInVwZ3JhZGVcIn1dKSxmLmVtaXQoXCJ1cGdyYWRlXCIsaCksaD1udWxsLGYudXBncmFkaW5nPSExLGYuZmx1c2goKSl9KX1lbHNle2EoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgZmFpbGVkJyx0KTt2YXIgcj1uZXcgRXJyb3IoXCJwcm9iZSBlcnJvclwiKTtyLnRyYW5zcG9ydD1oLm5hbWUsZi5lbWl0KFwidXBncmFkZUVycm9yXCIscil9fSkpfWZ1bmN0aW9uIHIoKXtwfHwocD0hMCx1KCksaC5jbG9zZSgpLGg9bnVsbCl9ZnVuY3Rpb24gbyhlKXt2YXIgbj1uZXcgRXJyb3IoXCJwcm9iZSBlcnJvcjogXCIrZSk7bi50cmFuc3BvcnQ9aC5uYW1lLHIoKSxhKCdwcm9iZSB0cmFuc3BvcnQgXCIlc1wiIGZhaWxlZCBiZWNhdXNlIG9mIGVycm9yOiAlcycsdCxlKSxmLmVtaXQoXCJ1cGdyYWRlRXJyb3JcIixuKX1mdW5jdGlvbiBpKCl7byhcInRyYW5zcG9ydCBjbG9zZWRcIil9ZnVuY3Rpb24gcygpe28oXCJzb2NrZXQgY2xvc2VkXCIpfWZ1bmN0aW9uIGModCl7aCYmdC5uYW1lIT09aC5uYW1lJiYoYSgnXCIlc1wiIHdvcmtzIC0gYWJvcnRpbmcgXCIlc1wiJyx0Lm5hbWUsaC5uYW1lKSxyKCkpfWZ1bmN0aW9uIHUoKXtoLnJlbW92ZUxpc3RlbmVyKFwib3BlblwiLGUpLGgucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLG8pLGgucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLGkpLGYucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLHMpLGYucmVtb3ZlTGlzdGVuZXIoXCJ1cGdyYWRpbmdcIixjKX1hKCdwcm9iaW5nIHRyYW5zcG9ydCBcIiVzXCInLHQpO3ZhciBoPXRoaXMuY3JlYXRlVHJhbnNwb3J0KHQse3Byb2JlOjF9KSxwPSExLGY9dGhpcztuLnByaW9yV2Vic29ja2V0U3VjY2Vzcz0hMSxoLm9uY2UoXCJvcGVuXCIsZSksaC5vbmNlKFwiZXJyb3JcIixvKSxoLm9uY2UoXCJjbG9zZVwiLGkpLHRoaXMub25jZShcImNsb3NlXCIscyksdGhpcy5vbmNlKFwidXBncmFkaW5nXCIsYyksaC5vcGVuKCl9LG4ucHJvdG90eXBlLm9uT3Blbj1mdW5jdGlvbigpe2lmKGEoXCJzb2NrZXQgb3BlblwiKSx0aGlzLnJlYWR5U3RhdGU9XCJvcGVuXCIsbi5wcmlvcldlYnNvY2tldFN1Y2Nlc3M9XCJ3ZWJzb2NrZXRcIj09PXRoaXMudHJhbnNwb3J0Lm5hbWUsdGhpcy5lbWl0KFwib3BlblwiKSx0aGlzLmZsdXNoKCksXCJvcGVuXCI9PT10aGlzLnJlYWR5U3RhdGUmJnRoaXMudXBncmFkZSYmdGhpcy50cmFuc3BvcnQucGF1c2Upe2EoXCJzdGFydGluZyB1cGdyYWRlIHByb2Jlc1wiKTtmb3IodmFyIHQ9MCxlPXRoaXMudXBncmFkZXMubGVuZ3RoO3Q8ZTt0KyspdGhpcy5wcm9iZSh0aGlzLnVwZ3JhZGVzW3RdKX19LG4ucHJvdG90eXBlLm9uUGFja2V0PWZ1bmN0aW9uKHQpe2lmKFwib3BlbmluZ1wiPT09dGhpcy5yZWFkeVN0YXRlfHxcIm9wZW5cIj09PXRoaXMucmVhZHlTdGF0ZXx8XCJjbG9zaW5nXCI9PT10aGlzLnJlYWR5U3RhdGUpc3dpdGNoKGEoJ3NvY2tldCByZWNlaXZlOiB0eXBlIFwiJXNcIiwgZGF0YSBcIiVzXCInLHQudHlwZSx0LmRhdGEpLHRoaXMuZW1pdChcInBhY2tldFwiLHQpLHRoaXMuZW1pdChcImhlYXJ0YmVhdFwiKSx0LnR5cGUpe2Nhc2VcIm9wZW5cIjp0aGlzLm9uSGFuZHNoYWtlKHAodC5kYXRhKSk7YnJlYWs7Y2FzZVwicG9uZ1wiOnRoaXMuc2V0UGluZygpLHRoaXMuZW1pdChcInBvbmdcIik7YnJlYWs7Y2FzZVwiZXJyb3JcIjp2YXIgZT1uZXcgRXJyb3IoXCJzZXJ2ZXIgZXJyb3JcIik7ZS5jb2RlPXQuZGF0YSx0aGlzLm9uRXJyb3IoZSk7YnJlYWs7Y2FzZVwibWVzc2FnZVwiOnRoaXMuZW1pdChcImRhdGFcIix0LmRhdGEpLHRoaXMuZW1pdChcIm1lc3NhZ2VcIix0LmRhdGEpfWVsc2UgYSgncGFja2V0IHJlY2VpdmVkIHdpdGggc29ja2V0IHJlYWR5U3RhdGUgXCIlc1wiJyx0aGlzLnJlYWR5U3RhdGUpfSxuLnByb3RvdHlwZS5vbkhhbmRzaGFrZT1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJoYW5kc2hha2VcIix0KSx0aGlzLmlkPXQuc2lkLHRoaXMudHJhbnNwb3J0LnF1ZXJ5LnNpZD10LnNpZCx0aGlzLnVwZ3JhZGVzPXRoaXMuZmlsdGVyVXBncmFkZXModC51cGdyYWRlcyksdGhpcy5waW5nSW50ZXJ2YWw9dC5waW5nSW50ZXJ2YWwsdGhpcy5waW5nVGltZW91dD10LnBpbmdUaW1lb3V0LHRoaXMub25PcGVuKCksXCJjbG9zZWRcIiE9PXRoaXMucmVhZHlTdGF0ZSYmKHRoaXMuc2V0UGluZygpLHRoaXMucmVtb3ZlTGlzdGVuZXIoXCJoZWFydGJlYXRcIix0aGlzLm9uSGVhcnRiZWF0KSx0aGlzLm9uKFwiaGVhcnRiZWF0XCIsdGhpcy5vbkhlYXJ0YmVhdCkpfSxuLnByb3RvdHlwZS5vbkhlYXJ0YmVhdD1mdW5jdGlvbih0KXtjbGVhclRpbWVvdXQodGhpcy5waW5nVGltZW91dFRpbWVyKTt2YXIgZT10aGlzO2UucGluZ1RpbWVvdXRUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XCJjbG9zZWRcIiE9PWUucmVhZHlTdGF0ZSYmZS5vbkNsb3NlKFwicGluZyB0aW1lb3V0XCIpfSx0fHxlLnBpbmdJbnRlcnZhbCtlLnBpbmdUaW1lb3V0KX0sbi5wcm90b3R5cGUuc2V0UGluZz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7Y2xlYXJUaW1lb3V0KHQucGluZ0ludGVydmFsVGltZXIpLHQucGluZ0ludGVydmFsVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2EoXCJ3cml0aW5nIHBpbmcgcGFja2V0IC0gZXhwZWN0aW5nIHBvbmcgd2l0aGluICVzbXNcIix0LnBpbmdUaW1lb3V0KSx0LnBpbmcoKSx0Lm9uSGVhcnRiZWF0KHQucGluZ1RpbWVvdXQpfSx0LnBpbmdJbnRlcnZhbCl9LG4ucHJvdG90eXBlLnBpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc2VuZFBhY2tldChcInBpbmdcIixmdW5jdGlvbigpe3QuZW1pdChcInBpbmdcIil9KX0sbi5wcm90b3R5cGUub25EcmFpbj1mdW5jdGlvbigpe3RoaXMud3JpdGVCdWZmZXIuc3BsaWNlKDAsdGhpcy5wcmV2QnVmZmVyTGVuKSx0aGlzLnByZXZCdWZmZXJMZW49MCwwPT09dGhpcy53cml0ZUJ1ZmZlci5sZW5ndGg/dGhpcy5lbWl0KFwiZHJhaW5cIik6dGhpcy5mbHVzaCgpfSxuLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe1wiY2xvc2VkXCIhPT10aGlzLnJlYWR5U3RhdGUmJnRoaXMudHJhbnNwb3J0LndyaXRhYmxlJiYhdGhpcy51cGdyYWRpbmcmJnRoaXMud3JpdGVCdWZmZXIubGVuZ3RoJiYoYShcImZsdXNoaW5nICVkIHBhY2tldHMgaW4gc29ja2V0XCIsdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpLHRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy53cml0ZUJ1ZmZlciksdGhpcy5wcmV2QnVmZmVyTGVuPXRoaXMud3JpdGVCdWZmZXIubGVuZ3RoLHRoaXMuZW1pdChcImZsdXNoXCIpKX0sbi5wcm90b3R5cGUud3JpdGU9bi5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbih0LGUscil7cmV0dXJuIHRoaXMuc2VuZFBhY2tldChcIm1lc3NhZ2VcIix0LGUsciksdGhpc30sbi5wcm90b3R5cGUuc2VuZFBhY2tldD1mdW5jdGlvbih0LGUscixuKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiYobj1lLGU9dm9pZCAwKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYobj1yLHI9bnVsbCksXCJjbG9zaW5nXCIhPT10aGlzLnJlYWR5U3RhdGUmJlwiY2xvc2VkXCIhPT10aGlzLnJlYWR5U3RhdGUpe3I9cnx8e30sci5jb21wcmVzcz0hMSE9PXIuY29tcHJlc3M7dmFyIG89e3R5cGU6dCxkYXRhOmUsb3B0aW9uczpyfTt0aGlzLmVtaXQoXCJwYWNrZXRDcmVhdGVcIixvKSx0aGlzLndyaXRlQnVmZmVyLnB1c2gobyksbiYmdGhpcy5vbmNlKFwiZmx1c2hcIixuKSx0aGlzLmZsdXNoKCl9fSxuLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtuLm9uQ2xvc2UoXCJmb3JjZWQgY2xvc2VcIiksYShcInNvY2tldCBjbG9zaW5nIC0gdGVsbGluZyB0cmFuc3BvcnQgdG8gY2xvc2VcIiksbi50cmFuc3BvcnQuY2xvc2UoKX1mdW5jdGlvbiBlKCl7bi5yZW1vdmVMaXN0ZW5lcihcInVwZ3JhZGVcIixlKSxuLnJlbW92ZUxpc3RlbmVyKFwidXBncmFkZUVycm9yXCIsZSksdCgpfWZ1bmN0aW9uIHIoKXtuLm9uY2UoXCJ1cGdyYWRlXCIsZSksbi5vbmNlKFwidXBncmFkZUVycm9yXCIsZSl9aWYoXCJvcGVuaW5nXCI9PT10aGlzLnJlYWR5U3RhdGV8fFwib3BlblwiPT09dGhpcy5yZWFkeVN0YXRlKXt0aGlzLnJlYWR5U3RhdGU9XCJjbG9zaW5nXCI7dmFyIG49dGhpczt0aGlzLndyaXRlQnVmZmVyLmxlbmd0aD90aGlzLm9uY2UoXCJkcmFpblwiLGZ1bmN0aW9uKCl7dGhpcy51cGdyYWRpbmc/cigpOnQoKX0pOnRoaXMudXBncmFkaW5nP3IoKTp0KCl9cmV0dXJuIHRoaXN9LG4ucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24odCl7YShcInNvY2tldCBlcnJvciAlalwiLHQpLG4ucHJpb3JXZWJzb2NrZXRTdWNjZXNzPSExLHRoaXMuZW1pdChcImVycm9yXCIsdCksdGhpcy5vbkNsb3NlKFwidHJhbnNwb3J0IGVycm9yXCIsdCl9LG4ucHJvdG90eXBlLm9uQ2xvc2U9ZnVuY3Rpb24odCxlKXtpZihcIm9wZW5pbmdcIj09PXRoaXMucmVhZHlTdGF0ZXx8XCJvcGVuXCI9PT10aGlzLnJlYWR5U3RhdGV8fFwiY2xvc2luZ1wiPT09dGhpcy5yZWFkeVN0YXRlKXthKCdzb2NrZXQgY2xvc2Ugd2l0aCByZWFzb246IFwiJXNcIicsdCk7dmFyIHI9dGhpcztjbGVhclRpbWVvdXQodGhpcy5waW5nSW50ZXJ2YWxUaW1lciksY2xlYXJUaW1lb3V0KHRoaXMucGluZ1RpbWVvdXRUaW1lciksdGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKFwiY2xvc2VcIiksdGhpcy50cmFuc3BvcnQuY2xvc2UoKSx0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKSx0aGlzLnJlYWR5U3RhdGU9XCJjbG9zZWRcIix0aGlzLmlkPW51bGwsdGhpcy5lbWl0KFwiY2xvc2VcIix0LGUpLHIud3JpdGVCdWZmZXI9W10sci5wcmV2QnVmZmVyTGVuPTB9fSxuLnByb3RvdHlwZS5maWx0ZXJVcGdyYWRlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10scj0wLG49dC5sZW5ndGg7cjxuO3IrKyl+Yyh0aGlzLnRyYW5zcG9ydHMsdFtyXSkmJmUucHVzaCh0W3JdKTtyZXR1cm4gZX19KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxyKXsoZnVuY3Rpb24odCl7ZnVuY3Rpb24gbihlKXt2YXIgcixuPSExLGE9ITEsYz0hMSE9PWUuanNvbnA7aWYodC5sb2NhdGlvbil7dmFyIHU9XCJodHRwczpcIj09PWxvY2F0aW9uLnByb3RvY29sLGg9bG9jYXRpb24ucG9ydDtofHwoaD11PzQ0Mzo4MCksbj1lLmhvc3RuYW1lIT09bG9jYXRpb24uaG9zdG5hbWV8fGghPT1lLnBvcnQsYT1lLnNlY3VyZSE9PXV9aWYoZS54ZG9tYWluPW4sZS54c2NoZW1lPWEscj1uZXcgbyhlKSxcIm9wZW5cImluIHImJiFlLmZvcmNlSlNPTlApcmV0dXJuIG5ldyBpKGUpO2lmKCFjKXRocm93IG5ldyBFcnJvcihcIkpTT05QIGRpc2FibGVkXCIpO3JldHVybiBuZXcgcyhlKX12YXIgbz1yKDIyKSxpPXIoMjQpLHM9cigzOSksYT1yKDQwKTtlLnBvbGxpbmc9bixlLndlYnNvY2tldD1hfSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKGUpe3ZhciBuPXIoMjMpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgcj10Lnhkb21haW4sbz10LnhzY2hlbWUsaT10LmVuYWJsZXNYRFI7dHJ5e2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBYTUxIdHRwUmVxdWVzdCYmKCFyfHxuKSlyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKHQpe310cnl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhEb21haW5SZXF1ZXN0JiYhbyYmaSlyZXR1cm4gbmV3IFhEb21haW5SZXF1ZXN0fWNhdGNoKHQpe31pZighcil0cnl7cmV0dXJuIG5ldyhlW1tcIkFjdGl2ZVwiXS5jb25jYXQoXCJPYmplY3RcIikuam9pbihcIlhcIildKShcIk1pY3Jvc29mdC5YTUxIVFRQXCIpfWNhdGNoKHQpe319fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe3RyeXt0LmV4cG9ydHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhNTEh0dHBSZXF1ZXN0JiZcIndpdGhDcmVkZW50aWFsc1wiaW4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKGUpe3QuZXhwb3J0cz0hMX19LGZ1bmN0aW9uKHQsZSxyKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbigpe31mdW5jdGlvbiBvKHQpe2lmKGMuY2FsbCh0aGlzLHQpLHRoaXMucmVxdWVzdFRpbWVvdXQ9dC5yZXF1ZXN0VGltZW91dCxlLmxvY2F0aW9uKXt2YXIgcj1cImh0dHBzOlwiPT09bG9jYXRpb24ucHJvdG9jb2wsbj1sb2NhdGlvbi5wb3J0O258fChuPXI/NDQzOjgwKSx0aGlzLnhkPXQuaG9zdG5hbWUhPT1lLmxvY2F0aW9uLmhvc3RuYW1lfHxuIT09dC5wb3J0LHRoaXMueHM9dC5zZWN1cmUhPT1yfWVsc2UgdGhpcy5leHRyYUhlYWRlcnM9dC5leHRyYUhlYWRlcnN9ZnVuY3Rpb24gaSh0KXt0aGlzLm1ldGhvZD10Lm1ldGhvZHx8XCJHRVRcIix0aGlzLnVyaT10LnVyaSx0aGlzLnhkPSEhdC54ZCx0aGlzLnhzPSEhdC54cyx0aGlzLmFzeW5jPSExIT09dC5hc3luYyx0aGlzLmRhdGE9dm9pZCAwIT09dC5kYXRhP3QuZGF0YTpudWxsLHRoaXMuYWdlbnQ9dC5hZ2VudCx0aGlzLmlzQmluYXJ5PXQuaXNCaW5hcnksdGhpcy5zdXBwb3J0c0JpbmFyeT10LnN1cHBvcnRzQmluYXJ5LHRoaXMuZW5hYmxlc1hEUj10LmVuYWJsZXNYRFIsdGhpcy5yZXF1ZXN0VGltZW91dD10LnJlcXVlc3RUaW1lb3V0LHRoaXMucGZ4PXQucGZ4LHRoaXMua2V5PXQua2V5LHRoaXMucGFzc3BocmFzZT10LnBhc3NwaHJhc2UsdGhpcy5jZXJ0PXQuY2VydCx0aGlzLmNhPXQuY2EsdGhpcy5jaXBoZXJzPXQuY2lwaGVycyx0aGlzLnJlamVjdFVuYXV0aG9yaXplZD10LnJlamVjdFVuYXV0aG9yaXplZCx0aGlzLmV4dHJhSGVhZGVycz10LmV4dHJhSGVhZGVycyx0aGlzLmNyZWF0ZSgpfWZ1bmN0aW9uIHMoKXtmb3IodmFyIHQgaW4gaS5yZXF1ZXN0cylpLnJlcXVlc3RzLmhhc093blByb3BlcnR5KHQpJiZpLnJlcXVlc3RzW3RdLmFib3J0KCl9dmFyIGE9cigyMiksYz1yKDI1KSx1PXIoMzUpLGg9cigzNykscD1yKDMpKFwiZW5naW5lLmlvLWNsaWVudDpwb2xsaW5nLXhoclwiKTt0LmV4cG9ydHM9byx0LmV4cG9ydHMuUmVxdWVzdD1pLGgobyxjKSxvLnByb3RvdHlwZS5zdXBwb3J0c0JpbmFyeT0hMCxvLnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXR8fHt9LHQudXJpPXRoaXMudXJpKCksdC54ZD10aGlzLnhkLHQueHM9dGhpcy54cyx0LmFnZW50PXRoaXMuYWdlbnR8fCExLHQuc3VwcG9ydHNCaW5hcnk9dGhpcy5zdXBwb3J0c0JpbmFyeSx0LmVuYWJsZXNYRFI9dGhpcy5lbmFibGVzWERSLHQucGZ4PXRoaXMucGZ4LHQua2V5PXRoaXMua2V5LHQucGFzc3BocmFzZT10aGlzLnBhc3NwaHJhc2UsdC5jZXJ0PXRoaXMuY2VydCx0LmNhPXRoaXMuY2EsdC5jaXBoZXJzPXRoaXMuY2lwaGVycyx0LnJlamVjdFVuYXV0aG9yaXplZD10aGlzLnJlamVjdFVuYXV0aG9yaXplZCx0LnJlcXVlc3RUaW1lb3V0PXRoaXMucmVxdWVzdFRpbWVvdXQsdC5leHRyYUhlYWRlcnM9dGhpcy5leHRyYUhlYWRlcnMsbmV3IGkodCl9LG8ucHJvdG90eXBlLmRvV3JpdGU9ZnVuY3Rpb24odCxlKXt2YXIgcj1cInN0cmluZ1wiIT10eXBlb2YgdCYmdm9pZCAwIT09dCxuPXRoaXMucmVxdWVzdCh7bWV0aG9kOlwiUE9TVFwiLGRhdGE6dCxpc0JpbmFyeTpyfSksbz10aGlzO24ub24oXCJzdWNjZXNzXCIsZSksbi5vbihcImVycm9yXCIsZnVuY3Rpb24odCl7by5vbkVycm9yKFwieGhyIHBvc3QgZXJyb3JcIix0KX0pLHRoaXMuc2VuZFhocj1ufSxvLnByb3RvdHlwZS5kb1BvbGw9ZnVuY3Rpb24oKXtwKFwieGhyIHBvbGxcIik7dmFyIHQ9dGhpcy5yZXF1ZXN0KCksZT10aGlzO3Qub24oXCJkYXRhXCIsZnVuY3Rpb24odCl7ZS5vbkRhdGEodCl9KSx0Lm9uKFwiZXJyb3JcIixmdW5jdGlvbih0KXtlLm9uRXJyb3IoXCJ4aHIgcG9sbCBlcnJvclwiLHQpfSksdGhpcy5wb2xsWGhyPXR9LHUoaS5wcm90b3R5cGUpLGkucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbigpe3ZhciB0PXthZ2VudDp0aGlzLmFnZW50LHhkb21haW46dGhpcy54ZCx4c2NoZW1lOnRoaXMueHMsZW5hYmxlc1hEUjp0aGlzLmVuYWJsZXNYRFJ9O3QucGZ4PXRoaXMucGZ4LHQua2V5PXRoaXMua2V5LHQucGFzc3BocmFzZT10aGlzLnBhc3NwaHJhc2UsdC5jZXJ0PXRoaXMuY2VydCx0LmNhPXRoaXMuY2EsdC5jaXBoZXJzPXRoaXMuY2lwaGVycyx0LnJlamVjdFVuYXV0aG9yaXplZD10aGlzLnJlamVjdFVuYXV0aG9yaXplZDt2YXIgcj10aGlzLnhocj1uZXcgYSh0KSxuPXRoaXM7dHJ5e3AoXCJ4aHIgb3BlbiAlczogJXNcIix0aGlzLm1ldGhvZCx0aGlzLnVyaSksci5vcGVuKHRoaXMubWV0aG9kLHRoaXMudXJpLHRoaXMuYXN5bmMpO3RyeXtpZih0aGlzLmV4dHJhSGVhZGVycyl7ci5zZXREaXNhYmxlSGVhZGVyQ2hlY2soITApO2Zvcih2YXIgbyBpbiB0aGlzLmV4dHJhSGVhZGVycyl0aGlzLmV4dHJhSGVhZGVycy5oYXNPd25Qcm9wZXJ0eShvKSYmci5zZXRSZXF1ZXN0SGVhZGVyKG8sdGhpcy5leHRyYUhlYWRlcnNbb10pfX1jYXRjaCh0KXt9aWYodGhpcy5zdXBwb3J0c0JpbmFyeSYmKHIucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIiksXCJQT1NUXCI9PT10aGlzLm1ldGhvZCl0cnl7dGhpcy5pc0JpbmFyeT9yLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIixcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiKTpyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIixcInRleHQvcGxhaW47Y2hhcnNldD1VVEYtOFwiKX1jYXRjaCh0KXt9dHJ5e3Iuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLFwiKi8qXCIpfWNhdGNoKHQpe31cIndpdGhDcmVkZW50aWFsc1wiaW4gciYmKHIud2l0aENyZWRlbnRpYWxzPSEwKSx0aGlzLnJlcXVlc3RUaW1lb3V0JiYoci50aW1lb3V0PXRoaXMucmVxdWVzdFRpbWVvdXQpLHRoaXMuaGFzWERSKCk/KHIub25sb2FkPWZ1bmN0aW9uKCl7bi5vbkxvYWQoKX0sci5vbmVycm9yPWZ1bmN0aW9uKCl7bi5vbkVycm9yKHIucmVzcG9uc2VUZXh0KX0pOnIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PXIucmVhZHlTdGF0ZSYmKDIwMD09PXIuc3RhdHVzfHwxMjIzPT09ci5zdGF0dXM/bi5vbkxvYWQoKTpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5vbkVycm9yKHIuc3RhdHVzKX0sMCkpfSxwKFwieGhyIGRhdGEgJXNcIix0aGlzLmRhdGEpLHIuc2VuZCh0aGlzLmRhdGEpfWNhdGNoKHQpe3JldHVybiB2b2lkIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLm9uRXJyb3IodCl9LDApfWUuZG9jdW1lbnQmJih0aGlzLmluZGV4PWkucmVxdWVzdHNDb3VudCsrLGkucmVxdWVzdHNbdGhpcy5pbmRleF09dGhpcyl9LGkucHJvdG90eXBlLm9uU3VjY2Vzcz1mdW5jdGlvbigpe3RoaXMuZW1pdChcInN1Y2Nlc3NcIiksdGhpcy5jbGVhbnVwKCl9LGkucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJkYXRhXCIsdCksdGhpcy5vblN1Y2Nlc3MoKX0saS5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJlcnJvclwiLHQpLHRoaXMuY2xlYW51cCghMCl9LGkucHJvdG90eXBlLmNsZWFudXA9ZnVuY3Rpb24odCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRoaXMueGhyJiZudWxsIT09dGhpcy54aHIpe2lmKHRoaXMuaGFzWERSKCk/dGhpcy54aHIub25sb2FkPXRoaXMueGhyLm9uZXJyb3I9bjp0aGlzLnhoci5vbnJlYWR5c3RhdGVjaGFuZ2U9bix0KXRyeXt0aGlzLnhoci5hYm9ydCgpfWNhdGNoKHQpe31lLmRvY3VtZW50JiZkZWxldGUgaS5yZXF1ZXN0c1t0aGlzLmluZGV4XSx0aGlzLnhocj1udWxsfX0saS5wcm90b3R5cGUub25Mb2FkPWZ1bmN0aW9uKCl7dmFyIHQ7dHJ5e3ZhciBlO3RyeXtlPXRoaXMueGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpLnNwbGl0KFwiO1wiKVswXX1jYXRjaCh0KXt9aWYoXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIj09PWUpdD10aGlzLnhoci5yZXNwb25zZXx8dGhpcy54aHIucmVzcG9uc2VUZXh0O2Vsc2UgaWYodGhpcy5zdXBwb3J0c0JpbmFyeSl0cnl7dD1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkodGhpcy54aHIucmVzcG9uc2UpKX1jYXRjaChlKXtmb3IodmFyIHI9bmV3IFVpbnQ4QXJyYXkodGhpcy54aHIucmVzcG9uc2UpLG49W10sbz0wLGk9ci5sZW5ndGg7bzxpO28rKyluLnB1c2gocltvXSk7dD1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbil9ZWxzZSB0PXRoaXMueGhyLnJlc3BvbnNlVGV4dH1jYXRjaCh0KXt0aGlzLm9uRXJyb3IodCl9bnVsbCE9dCYmdGhpcy5vbkRhdGEodCl9LGkucHJvdG90eXBlLmhhc1hEUj1mdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBlLlhEb21haW5SZXF1ZXN0JiYhdGhpcy54cyYmdGhpcy5lbmFibGVzWERSfSxpLnByb3RvdHlwZS5hYm9ydD1mdW5jdGlvbigpe3RoaXMuY2xlYW51cCgpfSxpLnJlcXVlc3RzQ291bnQ9MCxpLnJlcXVlc3RzPXt9LGUuZG9jdW1lbnQmJihlLmF0dGFjaEV2ZW50P2UuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLHMpOmUuYWRkRXZlbnRMaXN0ZW5lciYmZS5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIscywhMSkpfSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUscil7ZnVuY3Rpb24gbih0KXt2YXIgZT10JiZ0LmZvcmNlQmFzZTY0O2gmJiFlfHwodGhpcy5zdXBwb3J0c0JpbmFyeT0hMSksby5jYWxsKHRoaXMsdCl9dmFyIG89cigyNiksaT1yKDM2KSxzPXIoMjcpLGE9cigzNyksYz1yKDM4KSx1PXIoMykoXCJlbmdpbmUuaW8tY2xpZW50OnBvbGxpbmdcIik7dC5leHBvcnRzPW47dmFyIGg9ZnVuY3Rpb24oKXt2YXIgdD1yKDIyKSxlPW5ldyB0KHt4ZG9tYWluOiExfSk7cmV0dXJuIG51bGwhPWUucmVzcG9uc2VUeXBlfSgpO2EobixvKSxuLnByb3RvdHlwZS5uYW1lPVwicG9sbGluZ1wiLG4ucHJvdG90eXBlLmRvT3Blbj1mdW5jdGlvbigpe3RoaXMucG9sbCgpfSxuLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dShcInBhdXNlZFwiKSxyLnJlYWR5U3RhdGU9XCJwYXVzZWRcIix0KCl9dmFyIHI9dGhpcztpZih0aGlzLnJlYWR5U3RhdGU9XCJwYXVzaW5nXCIsdGhpcy5wb2xsaW5nfHwhdGhpcy53cml0YWJsZSl7dmFyIG49MDt0aGlzLnBvbGxpbmcmJih1KFwid2UgYXJlIGN1cnJlbnRseSBwb2xsaW5nIC0gd2FpdGluZyB0byBwYXVzZVwiKSxuKyssdGhpcy5vbmNlKFwicG9sbENvbXBsZXRlXCIsZnVuY3Rpb24oKXt1KFwicHJlLXBhdXNlIHBvbGxpbmcgY29tcGxldGVcIiksLS1ufHxlKCl9KSksdGhpcy53cml0YWJsZXx8KHUoXCJ3ZSBhcmUgY3VycmVudGx5IHdyaXRpbmcgLSB3YWl0aW5nIHRvIHBhdXNlXCIpLG4rKyx0aGlzLm9uY2UoXCJkcmFpblwiLGZ1bmN0aW9uKCl7dShcInByZS1wYXVzZSB3cml0aW5nIGNvbXBsZXRlXCIpLC0tbnx8ZSgpfSkpfWVsc2UgZSgpfSxuLnByb3RvdHlwZS5wb2xsPWZ1bmN0aW9uKCl7dShcInBvbGxpbmdcIiksdGhpcy5wb2xsaW5nPSEwLHRoaXMuZG9Qb2xsKCksdGhpcy5lbWl0KFwicG9sbFwiKX0sbi5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dShcInBvbGxpbmcgZ290IGRhdGEgJXNcIix0KTt2YXIgcj1mdW5jdGlvbih0LHIsbil7cmV0dXJuXCJvcGVuaW5nXCI9PT1lLnJlYWR5U3RhdGUmJmUub25PcGVuKCksXCJjbG9zZVwiPT09dC50eXBlPyhlLm9uQ2xvc2UoKSwhMSk6dm9pZCBlLm9uUGFja2V0KHQpfTtzLmRlY29kZVBheWxvYWQodCx0aGlzLnNvY2tldC5iaW5hcnlUeXBlLHIpLFwiY2xvc2VkXCIhPT10aGlzLnJlYWR5U3RhdGUmJih0aGlzLnBvbGxpbmc9ITEsdGhpcy5lbWl0KFwicG9sbENvbXBsZXRlXCIpLFwib3BlblwiPT09dGhpcy5yZWFkeVN0YXRlP3RoaXMucG9sbCgpOnUoJ2lnbm9yaW5nIHBvbGwgLSB0cmFuc3BvcnQgc3RhdGUgXCIlc1wiJyx0aGlzLnJlYWR5U3RhdGUpKX0sbi5wcm90b3R5cGUuZG9DbG9zZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt1KFwid3JpdGluZyBjbG9zZSBwYWNrZXRcIiksZS53cml0ZShbe3R5cGU6XCJjbG9zZVwifV0pfXZhciBlPXRoaXM7XCJvcGVuXCI9PT10aGlzLnJlYWR5U3RhdGU/KHUoXCJ0cmFuc3BvcnQgb3BlbiAtIGNsb3NpbmdcIiksdCgpKToodShcInRyYW5zcG9ydCBub3Qgb3BlbiAtIGRlZmVycmluZyBjbG9zZVwiKSx0aGlzLm9uY2UoXCJvcGVuXCIsdCkpfSxuLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMud3JpdGFibGU9ITE7dmFyIHI9ZnVuY3Rpb24oKXtlLndyaXRhYmxlPSEwLGUuZW1pdChcImRyYWluXCIpfTtzLmVuY29kZVBheWxvYWQodCx0aGlzLnN1cHBvcnRzQmluYXJ5LGZ1bmN0aW9uKHQpe2UuZG9Xcml0ZSh0LHIpfSl9LG4ucHJvdG90eXBlLnVyaT1mdW5jdGlvbigpe3ZhciB0PXRoaXMucXVlcnl8fHt9LGU9dGhpcy5zZWN1cmU/XCJodHRwc1wiOlwiaHR0cFwiLHI9XCJcIjshMSE9PXRoaXMudGltZXN0YW1wUmVxdWVzdHMmJih0W3RoaXMudGltZXN0YW1wUGFyYW1dPWMoKSksdGhpcy5zdXBwb3J0c0JpbmFyeXx8dC5zaWR8fCh0LmI2ND0xKSx0PWkuZW5jb2RlKHQpLHRoaXMucG9ydCYmKFwiaHR0cHNcIj09PWUmJjQ0MyE9PU51bWJlcih0aGlzLnBvcnQpfHxcImh0dHBcIj09PWUmJjgwIT09TnVtYmVyKHRoaXMucG9ydCkpJiYocj1cIjpcIit0aGlzLnBvcnQpLHQubGVuZ3RoJiYodD1cIj9cIit0KTt2YXIgbj10aGlzLmhvc3RuYW1lLmluZGV4T2YoXCI6XCIpIT09LTE7cmV0dXJuIGUrXCI6Ly9cIisobj9cIltcIit0aGlzLmhvc3RuYW1lK1wiXVwiOnRoaXMuaG9zdG5hbWUpK3IrdGhpcy5wYXRoK3R9fSxmdW5jdGlvbih0LGUscil7ZnVuY3Rpb24gbih0KXt0aGlzLnBhdGg9dC5wYXRoLHRoaXMuaG9zdG5hbWU9dC5ob3N0bmFtZSx0aGlzLnBvcnQ9dC5wb3J0LHRoaXMuc2VjdXJlPXQuc2VjdXJlLHRoaXMucXVlcnk9dC5xdWVyeSx0aGlzLnRpbWVzdGFtcFBhcmFtPXQudGltZXN0YW1wUGFyYW0sdGhpcy50aW1lc3RhbXBSZXF1ZXN0cz10LnRpbWVzdGFtcFJlcXVlc3RzLHRoaXMucmVhZHlTdGF0ZT1cIlwiLHRoaXMuYWdlbnQ9dC5hZ2VudHx8ITEsdGhpcy5zb2NrZXQ9dC5zb2NrZXQsdGhpcy5lbmFibGVzWERSPXQuZW5hYmxlc1hEUix0aGlzLnBmeD10LnBmeCx0aGlzLmtleT10LmtleSx0aGlzLnBhc3NwaHJhc2U9dC5wYXNzcGhyYXNlLHRoaXMuY2VydD10LmNlcnQsdGhpcy5jYT10LmNhLHRoaXMuY2lwaGVycz10LmNpcGhlcnMsdGhpcy5yZWplY3RVbmF1dGhvcml6ZWQ9dC5yZWplY3RVbmF1dGhvcml6ZWQsdGhpcy5mb3JjZU5vZGU9dC5mb3JjZU5vZGUsdGhpcy5leHRyYUhlYWRlcnM9dC5leHRyYUhlYWRlcnMsdGhpcy5sb2NhbEFkZHJlc3M9dC5sb2NhbEFkZHJlc3N9dmFyIG89cigyNyksaT1yKDM1KTt0LmV4cG9ydHM9bixpKG4ucHJvdG90eXBlKSxuLnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKHQsZSl7dmFyIHI9bmV3IEVycm9yKHQpO3JldHVybiByLnR5cGU9XCJUcmFuc3BvcnRFcnJvclwiLHIuZGVzY3JpcHRpb249ZSx0aGlzLmVtaXQoXCJlcnJvclwiLHIpLHRoaXN9LG4ucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oKXtyZXR1cm5cImNsb3NlZFwiIT09dGhpcy5yZWFkeVN0YXRlJiZcIlwiIT09dGhpcy5yZWFkeVN0YXRlfHwodGhpcy5yZWFkeVN0YXRlPVwib3BlbmluZ1wiLHRoaXMuZG9PcGVuKCkpLHRoaXN9LG4ucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7cmV0dXJuXCJvcGVuaW5nXCIhPT10aGlzLnJlYWR5U3RhdGUmJlwib3BlblwiIT09dGhpcy5yZWFkeVN0YXRlfHwodGhpcy5kb0Nsb3NlKCksdGhpcy5vbkNsb3NlKCkpLHRoaXN9LG4ucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24odCl7aWYoXCJvcGVuXCIhPT10aGlzLnJlYWR5U3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNwb3J0IG5vdCBvcGVuXCIpO3RoaXMud3JpdGUodCl9LG4ucHJvdG90eXBlLm9uT3Blbj1mdW5jdGlvbigpe3RoaXMucmVhZHlTdGF0ZT1cIm9wZW5cIix0aGlzLndyaXRhYmxlPSEwLHRoaXMuZW1pdChcIm9wZW5cIil9LG4ucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbih0KXt2YXIgZT1vLmRlY29kZVBhY2tldCh0LHRoaXMuc29ja2V0LmJpbmFyeVR5cGUpO3RoaXMub25QYWNrZXQoZSl9LG4ucHJvdG90eXBlLm9uUGFja2V0PWZ1bmN0aW9uKHQpe3RoaXMuZW1pdChcInBhY2tldFwiLHQpfSxuLnByb3RvdHlwZS5vbkNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5yZWFkeVN0YXRlPVwiY2xvc2VkXCIsdGhpcy5lbWl0KFwiY2xvc2VcIil9fSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4odCxyKXt2YXIgbj1cImJcIitlLnBhY2tldHNbdC50eXBlXSt0LmRhdGEuZGF0YTtyZXR1cm4gcihuKX1mdW5jdGlvbiBvKHQscixuKXtpZighcilyZXR1cm4gZS5lbmNvZGVCYXNlNjRQYWNrZXQodCxuKTt2YXIgbz10LmRhdGEsaT1uZXcgVWludDhBcnJheShvKSxzPW5ldyBVaW50OEFycmF5KDErby5ieXRlTGVuZ3RoKTtzWzBdPXZbdC50eXBlXTtmb3IodmFyIGE9MDthPGkubGVuZ3RoO2ErKylzW2ErMV09aVthXTtyZXR1cm4gbihzLmJ1ZmZlcil9ZnVuY3Rpb24gaSh0LHIsbil7aWYoIXIpcmV0dXJuIGUuZW5jb2RlQmFzZTY0UGFja2V0KHQsbik7dmFyIG89bmV3IEZpbGVSZWFkZXI7cmV0dXJuIG8ub25sb2FkPWZ1bmN0aW9uKCl7dC5kYXRhPW8ucmVzdWx0LGUuZW5jb2RlUGFja2V0KHQsciwhMCxuKX0sby5yZWFkQXNBcnJheUJ1ZmZlcih0LmRhdGEpfWZ1bmN0aW9uIHModCxyLG4pe2lmKCFyKXJldHVybiBlLmVuY29kZUJhc2U2NFBhY2tldCh0LG4pO2lmKG0pcmV0dXJuIGkodCxyLG4pO3ZhciBvPW5ldyBVaW50OEFycmF5KDEpO29bMF09dlt0LnR5cGVdO3ZhciBzPW5ldyBrKFtvLmJ1ZmZlcix0LmRhdGFdKTtyZXR1cm4gbihzKX1mdW5jdGlvbiBhKHQpe3RyeXt0PWQuZGVjb2RlKHQpfWNhdGNoKHQpe3JldHVybiExfXJldHVybiB0fWZ1bmN0aW9uIGModCxlLHIpe2Zvcih2YXIgbj1uZXcgQXJyYXkodC5sZW5ndGgpLG89bCh0Lmxlbmd0aCxyKSxpPWZ1bmN0aW9uKHQscixvKXtlKHIsZnVuY3Rpb24oZSxyKXtuW3RdPXIsbyhlLG4pfSl9LHM9MDtzPHQubGVuZ3RoO3MrKylpKHMsdFtzXSxvKX12YXIgdSxoPXIoMjgpLHA9cigyOSksZj1yKDMwKSxsPXIoMzEpLGQ9cigzMik7dCYmdC5BcnJheUJ1ZmZlciYmKHU9cigzMykpO3ZhciB5PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9BbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxnPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9QaGFudG9tSlMvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLG09eXx8ZztlLnByb3RvY29sPTM7dmFyIHY9ZS5wYWNrZXRzPXtvcGVuOjAsY2xvc2U6MSxwaW5nOjIscG9uZzozLG1lc3NhZ2U6NCx1cGdyYWRlOjUsbm9vcDo2fSxiPWgodiksdz17dHlwZTpcImVycm9yXCIsZGF0YTpcInBhcnNlciBlcnJvclwifSxrPXIoMzQpO2UuZW5jb2RlUGFja2V0PWZ1bmN0aW9uKGUscixpLGEpe1wiZnVuY3Rpb25cIj09dHlwZW9mIHImJihhPXIscj0hMSksXCJmdW5jdGlvblwiPT10eXBlb2YgaSYmKGE9aSxpPW51bGwpO3ZhciBjPXZvaWQgMD09PWUuZGF0YT92b2lkIDA6ZS5kYXRhLmJ1ZmZlcnx8ZS5kYXRhO2lmKHQuQXJyYXlCdWZmZXImJmMgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcilyZXR1cm4gbyhlLHIsYSk7aWYoayYmYyBpbnN0YW5jZW9mIHQuQmxvYilyZXR1cm4gcyhlLHIsYSk7aWYoYyYmYy5iYXNlNjQpcmV0dXJuIG4oZSxhKTt2YXIgdT12W2UudHlwZV07cmV0dXJuIHZvaWQgMCE9PWUuZGF0YSYmKHUrPWk/ZC5lbmNvZGUoU3RyaW5nKGUuZGF0YSkpOlN0cmluZyhlLmRhdGEpKSxhKFwiXCIrdSl9LGUuZW5jb2RlQmFzZTY0UGFja2V0PWZ1bmN0aW9uKHIsbil7dmFyIG89XCJiXCIrZS5wYWNrZXRzW3IudHlwZV07aWYoayYmci5kYXRhIGluc3RhbmNlb2YgdC5CbG9iKXt2YXIgaT1uZXcgRmlsZVJlYWRlcjtyZXR1cm4gaS5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgdD1pLnJlc3VsdC5zcGxpdChcIixcIilbMV07bihvK3QpfSxpLnJlYWRBc0RhdGFVUkwoci5kYXRhKX12YXIgczt0cnl7cz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoci5kYXRhKSl9Y2F0Y2godCl7Zm9yKHZhciBhPW5ldyBVaW50OEFycmF5KHIuZGF0YSksYz1uZXcgQXJyYXkoYS5sZW5ndGgpLHU9MDt1PGEubGVuZ3RoO3UrKyljW3VdPWFbdV07cz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsYyl9cmV0dXJuIG8rPXQuYnRvYShzKSxuKG8pfSxlLmRlY29kZVBhY2tldD1mdW5jdGlvbih0LHIsbil7aWYodm9pZCAwPT09dClyZXR1cm4gdztpZihcInN0cmluZ1wiPT10eXBlb2YgdCl7aWYoXCJiXCI9PXQuY2hhckF0KDApKXJldHVybiBlLmRlY29kZUJhc2U2NFBhY2tldCh0LnN1YnN0cigxKSxyKTtpZihuJiYodD1hKHQpLHQ9PT0hMSkpcmV0dXJuIHc7dmFyIG89dC5jaGFyQXQoMCk7cmV0dXJuIE51bWJlcihvKT09byYmYltvXT90Lmxlbmd0aD4xP3t0eXBlOmJbb10sZGF0YTp0LnN1YnN0cmluZygxKX06e3R5cGU6YltvXX06d312YXIgaT1uZXcgVWludDhBcnJheSh0KSxvPWlbMF0scz1mKHQsMSk7cmV0dXJuIGsmJlwiYmxvYlwiPT09ciYmKHM9bmV3IGsoW3NdKSkse3R5cGU6YltvXSxkYXRhOnN9fSxlLmRlY29kZUJhc2U2NFBhY2tldD1mdW5jdGlvbih0LGUpe3ZhciByPWJbdC5jaGFyQXQoMCldO2lmKCF1KXJldHVybnt0eXBlOnIsZGF0YTp7YmFzZTY0OiEwLGRhdGE6dC5zdWJzdHIoMSl9fTt2YXIgbj11LmRlY29kZSh0LnN1YnN0cigxKSk7cmV0dXJuXCJibG9iXCI9PT1lJiZrJiYobj1uZXcgayhbbl0pKSx7dHlwZTpyLGRhdGE6bn19LGUuZW5jb2RlUGF5bG9hZD1mdW5jdGlvbih0LHIsbil7ZnVuY3Rpb24gbyh0KXtyZXR1cm4gdC5sZW5ndGgrXCI6XCIrdH1mdW5jdGlvbiBpKHQsbil7ZS5lbmNvZGVQYWNrZXQodCwhIXMmJnIsITAsZnVuY3Rpb24odCl7bihudWxsLG8odCkpfSl9XCJmdW5jdGlvblwiPT10eXBlb2YgciYmKG49cixyPW51bGwpO3ZhciBzPXAodCk7cmV0dXJuIHImJnM/ayYmIW0/ZS5lbmNvZGVQYXlsb2FkQXNCbG9iKHQsbik6ZS5lbmNvZGVQYXlsb2FkQXNBcnJheUJ1ZmZlcih0LG4pOnQubGVuZ3RoP3ZvaWQgYyh0LGksZnVuY3Rpb24odCxlKXtyZXR1cm4gbihlLmpvaW4oXCJcIikpfSk6bihcIjA6XCIpfSxlLmRlY29kZVBheWxvYWQ9ZnVuY3Rpb24odCxyLG4pe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0KXJldHVybiBlLmRlY29kZVBheWxvYWRBc0JpbmFyeSh0LHIsbik7XCJmdW5jdGlvblwiPT10eXBlb2YgciYmKG49cixyPW51bGwpO3ZhciBvO2lmKFwiXCI9PXQpcmV0dXJuIG4odywwLDEpO2Zvcih2YXIgaSxzLGE9XCJcIixjPTAsdT10Lmxlbmd0aDtjPHU7YysrKXt2YXIgaD10LmNoYXJBdChjKTtpZihcIjpcIiE9aClhKz1oO2Vsc2V7aWYoXCJcIj09YXx8YSE9KGk9TnVtYmVyKGEpKSlyZXR1cm4gbih3LDAsMSk7aWYocz10LnN1YnN0cihjKzEsaSksYSE9cy5sZW5ndGgpcmV0dXJuIG4odywwLDEpO2lmKHMubGVuZ3RoKXtpZihvPWUuZGVjb2RlUGFja2V0KHMsciwhMCksdy50eXBlPT1vLnR5cGUmJncuZGF0YT09by5kYXRhKXJldHVybiBuKHcsMCwxKTt2YXIgcD1uKG8sYytpLHUpO2lmKCExPT09cClyZXR1cm59Yys9aSxhPVwiXCJ9fXJldHVyblwiXCIhPWE/bih3LDAsMSk6dm9pZCAwfSxlLmVuY29kZVBheWxvYWRBc0FycmF5QnVmZmVyPWZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gbih0LHIpe2UuZW5jb2RlUGFja2V0KHQsITAsITAsZnVuY3Rpb24odCl7cmV0dXJuIHIobnVsbCx0KX0pfXJldHVybiB0Lmxlbmd0aD92b2lkIGModCxuLGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5yZWR1Y2UoZnVuY3Rpb24odCxlKXt2YXIgcjtyZXR1cm4gcj1cInN0cmluZ1wiPT10eXBlb2YgZT9lLmxlbmd0aDplLmJ5dGVMZW5ndGgsdCtyLnRvU3RyaW5nKCkubGVuZ3RoK3IrMn0sMCksbz1uZXcgVWludDhBcnJheShuKSxpPTA7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1cInN0cmluZ1wiPT10eXBlb2YgdCxyPXQ7aWYoZSl7Zm9yKHZhciBuPW5ldyBVaW50OEFycmF5KHQubGVuZ3RoKSxzPTA7czx0Lmxlbmd0aDtzKyspbltzXT10LmNoYXJDb2RlQXQocyk7cj1uLmJ1ZmZlcn1lP29baSsrXT0wOm9baSsrXT0xO2Zvcih2YXIgYT1yLmJ5dGVMZW5ndGgudG9TdHJpbmcoKSxzPTA7czxhLmxlbmd0aDtzKyspb1tpKytdPXBhcnNlSW50KGFbc10pO29baSsrXT0yNTU7Zm9yKHZhciBuPW5ldyBVaW50OEFycmF5KHIpLHM9MDtzPG4ubGVuZ3RoO3MrKylvW2krK109bltzXX0pLHIoby5idWZmZXIpfSk6cihuZXcgQXJyYXlCdWZmZXIoMCkpfSxlLmVuY29kZVBheWxvYWRBc0Jsb2I9ZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKHQscil7ZS5lbmNvZGVQYWNrZXQodCwhMCwhMCxmdW5jdGlvbih0KXt2YXIgZT1uZXcgVWludDhBcnJheSgxKTtpZihlWzBdPTEsXCJzdHJpbmdcIj09dHlwZW9mIHQpe2Zvcih2YXIgbj1uZXcgVWludDhBcnJheSh0Lmxlbmd0aCksbz0wO288dC5sZW5ndGg7bysrKW5bb109dC5jaGFyQ29kZUF0KG8pO3Q9bi5idWZmZXIsZVswXT0wfWZvcih2YXIgaT10IGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/dC5ieXRlTGVuZ3RoOnQuc2l6ZSxzPWkudG9TdHJpbmcoKSxhPW5ldyBVaW50OEFycmF5KHMubGVuZ3RoKzEpLG89MDtvPHMubGVuZ3RoO28rKylhW29dPXBhcnNlSW50KHNbb10pO2lmKGFbcy5sZW5ndGhdPTI1NSxrKXt2YXIgYz1uZXcgayhbZS5idWZmZXIsYS5idWZmZXIsdF0pO3IobnVsbCxjKX19KX1jKHQsbixmdW5jdGlvbih0LGUpe3JldHVybiByKG5ldyBrKGUpKX0pfSxlLmRlY29kZVBheWxvYWRBc0JpbmFyeT1mdW5jdGlvbih0LHIsbil7XCJmdW5jdGlvblwiPT10eXBlb2YgciYmKG49cixyPW51bGwpO2Zvcih2YXIgbz10LGk9W10scz0hMTtvLmJ5dGVMZW5ndGg+MDspe2Zvcih2YXIgYT1uZXcgVWludDhBcnJheShvKSxjPTA9PT1hWzBdLHU9XCJcIixoPTE7MjU1IT1hW2hdO2grKyl7aWYodS5sZW5ndGg+MzEwKXtzPSEwO2JyZWFrfXUrPWFbaF19aWYocylyZXR1cm4gbih3LDAsMSk7bz1mKG8sMit1Lmxlbmd0aCksdT1wYXJzZUludCh1KTt2YXIgcD1mKG8sMCx1KTtpZihjKXRyeXtwPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheShwKSl9Y2F0Y2godCl7dmFyIGw9bmV3IFVpbnQ4QXJyYXkocCk7cD1cIlwiO2Zvcih2YXIgaD0wO2g8bC5sZW5ndGg7aCsrKXArPVN0cmluZy5mcm9tQ2hhckNvZGUobFtoXSl9aS5wdXNoKHApLG89ZihvLHUpfXZhciBkPWkubGVuZ3RoO2kuZm9yRWFjaChmdW5jdGlvbih0LG8pe24oZS5kZWNvZGVQYWNrZXQodCxyLCEwKSxvLGQpfSl9fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7dmFyIGU9W10scj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O2Zvcih2YXIgbiBpbiB0KXIuY2FsbCh0LG4pJiZlLnB1c2gobik7cmV0dXJuIGV9fSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4odCl7ZnVuY3Rpb24gcih0KXtpZighdClyZXR1cm4hMTtpZihlLkJ1ZmZlciYmZS5CdWZmZXIuaXNCdWZmZXImJmUuQnVmZmVyLmlzQnVmZmVyKHQpfHxlLkFycmF5QnVmZmVyJiZ0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ8fGUuQmxvYiYmdCBpbnN0YW5jZW9mIEJsb2J8fGUuRmlsZSYmdCBpbnN0YW5jZW9mIEZpbGUpcmV0dXJuITA7aWYobyh0KSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYocih0W25dKSlyZXR1cm4hMH1lbHNlIGlmKHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0KXt0LnRvSlNPTiYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC50b0pTT04mJih0PXQudG9KU09OKCkpO2Zvcih2YXIgaSBpbiB0KWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGkpJiZyKHRbaV0pKXJldHVybiEwfXJldHVybiExfXJldHVybiByKHQpfXZhciBvPXIoMTUpO3QuZXhwb3J0cz1ufSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUscil7dmFyIG49dC5ieXRlTGVuZ3RoO2lmKGU9ZXx8MCxyPXJ8fG4sdC5zbGljZSlyZXR1cm4gdC5zbGljZShlLHIpO2lmKGU8MCYmKGUrPW4pLHI8MCYmKHIrPW4pLHI+biYmKHI9biksZT49bnx8ZT49cnx8MD09PW4pcmV0dXJuIG5ldyBBcnJheUJ1ZmZlcigwKTtmb3IodmFyIG89bmV3IFVpbnQ4QXJyYXkodCksaT1uZXcgVWludDhBcnJheShyLWUpLHM9ZSxhPTA7czxyO3MrKyxhKyspaVthXT1vW3NdO3JldHVybiBpLmJ1ZmZlcn19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcih0LGUscil7ZnVuY3Rpb24gbyh0LG4pe2lmKG8uY291bnQ8PTApdGhyb3cgbmV3IEVycm9yKFwiYWZ0ZXIgY2FsbGVkIHRvbyBtYW55IHRpbWVzXCIpOy0tby5jb3VudCx0PyhpPSEwLGUodCksZT1yKTowIT09by5jb3VudHx8aXx8ZShudWxsLG4pfXZhciBpPSExO3JldHVybiByPXJ8fG4sby5jb3VudD10LDA9PT10P2UoKTpvfWZ1bmN0aW9uIG4oKXt9dC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbjsoZnVuY3Rpb24odCxvKXshZnVuY3Rpb24oaSl7ZnVuY3Rpb24gcyh0KXtmb3IodmFyIGUscixuPVtdLG89MCxpPXQubGVuZ3RoO288aTspZT10LmNoYXJDb2RlQXQobysrKSxlPj01NTI5NiYmZTw9NTYzMTkmJm88aT8ocj10LmNoYXJDb2RlQXQobysrKSw1NjMyMD09KDY0NTEyJnIpP24ucHVzaCgoKDEwMjMmZSk8PDEwKSsoMTAyMyZyKSs2NTUzNik6KG4ucHVzaChlKSxvLS0pKTpuLnB1c2goZSk7cmV0dXJuIG59ZnVuY3Rpb24gYSh0KXtmb3IodmFyIGUscj10Lmxlbmd0aCxuPS0xLG89XCJcIjsrK248cjspZT10W25dLGU+NjU1MzUmJihlLT02NTUzNixvKz1iKGU+Pj4xMCYxMDIzfDU1Mjk2KSxlPTU2MzIwfDEwMjMmZSksbys9YihlKTtyZXR1cm4gb31mdW5jdGlvbiBjKHQsZSl7cmV0dXJuIGIodD4+ZSY2M3wxMjgpfWZ1bmN0aW9uIHUodCl7aWYoMD09KDQyOTQ5NjcxNjgmdCkpcmV0dXJuIGIodCk7dmFyIGU9XCJcIjtyZXR1cm4gMD09KDQyOTQ5NjUyNDgmdCk/ZT1iKHQ+PjYmMzF8MTkyKTowPT0oNDI5NDkwMTc2MCZ0KT8oZT1iKHQ+PjEyJjE1fDIyNCksZSs9Yyh0LDYpKTowPT0oNDI5Mjg3MDE0NCZ0KSYmKGU9Yih0Pj4xOCY3fDI0MCksZSs9Yyh0LDEyKSxlKz1jKHQsNikpLGUrPWIoNjMmdHwxMjgpfWZ1bmN0aW9uIGgodCl7Zm9yKHZhciBlLHI9cyh0KSxuPXIubGVuZ3RoLG89LTEsaT1cIlwiOysrbzxuOyllPXJbb10saSs9dShlKTtyZXR1cm4gaX1mdW5jdGlvbiBwKCl7aWYodj49bSl0aHJvdyBFcnJvcihcIkludmFsaWQgYnl0ZSBpbmRleFwiKTt2YXIgdD0yNTUmZ1t2XTtpZih2KyssMTI4PT0oMTkyJnQpKXJldHVybiA2MyZ0O3Rocm93IEVycm9yKFwiSW52YWxpZCBjb250aW51YXRpb24gYnl0ZVwiKX1mdW5jdGlvbiBmKCl7dmFyIHQsZSxyLG4sbztpZih2Pm0pdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGJ5dGUgaW5kZXhcIik7aWYodj09bSlyZXR1cm4hMTtpZih0PTI1NSZnW3ZdLHYrKywwPT0oMTI4JnQpKXJldHVybiB0O2lmKDE5Mj09KDIyNCZ0KSl7dmFyIGU9cCgpO2lmKG89KDMxJnQpPDw2fGUsbz49MTI4KXJldHVybiBvO3Rocm93IEVycm9yKFwiSW52YWxpZCBjb250aW51YXRpb24gYnl0ZVwiKX1pZigyMjQ9PSgyNDAmdCkpe2lmKGU9cCgpLHI9cCgpLG89KDE1JnQpPDwxMnxlPDw2fHIsbz49MjA0OClyZXR1cm4gbzt0aHJvdyBFcnJvcihcIkludmFsaWQgY29udGludWF0aW9uIGJ5dGVcIil9aWYoMjQwPT0oMjQ4JnQpJiYoZT1wKCkscj1wKCksbj1wKCksbz0oMTUmdCk8PDE4fGU8PDEyfHI8PDZ8bixvPj02NTUzNiYmbzw9MTExNDExMSkpcmV0dXJuIG87dGhyb3cgRXJyb3IoXCJJbnZhbGlkIFdURi04IGRldGVjdGVkXCIpfWZ1bmN0aW9uIGwodCl7Zz1zKHQpLG09Zy5sZW5ndGgsdj0wO2Zvcih2YXIgZSxyPVtdOyhlPWYoKSkhPT0hMTspci5wdXNoKGUpO3JldHVybiBhKHIpfXZhciBkPVwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLHk9KFwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0JiZ0LmV4cG9ydHM9PWQmJnQsXCJvYmplY3RcIj09dHlwZW9mIG8mJm8pO3kuZ2xvYmFsIT09eSYmeS53aW5kb3chPT15fHwoaT15KTt2YXIgZyxtLHYsYj1TdHJpbmcuZnJvbUNoYXJDb2RlLHc9e3ZlcnNpb246XCIxLjAuMFwiLGVuY29kZTpoLGRlY29kZTpsfTtuPWZ1bmN0aW9uKCl7cmV0dXJuIHd9LmNhbGwoZSxyLGUsdCksISh2b2lkIDAhPT1uJiYodC5leHBvcnRzPW4pKX0odGhpcyl9KS5jYWxsKGUscigxMikodCksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7IWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7Zm9yKHZhciB0PVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiLHI9bmV3IFVpbnQ4QXJyYXkoMjU2KSxuPTA7bjx0Lmxlbmd0aDtuKyspclt0LmNoYXJDb2RlQXQobildPW47ZS5lbmNvZGU9ZnVuY3Rpb24oZSl7dmFyIHIsbj1uZXcgVWludDhBcnJheShlKSxvPW4ubGVuZ3RoLGk9XCJcIjtmb3Iocj0wO3I8bztyKz0zKWkrPXRbbltyXT4+Ml0saSs9dFsoMyZuW3JdKTw8NHxuW3IrMV0+PjRdLGkrPXRbKDE1Jm5bcisxXSk8PDJ8bltyKzJdPj42XSxpKz10WzYzJm5bcisyXV07cmV0dXJuIG8lMz09PTI/aT1pLnN1YnN0cmluZygwLGkubGVuZ3RoLTEpK1wiPVwiOm8lMz09PTEmJihpPWkuc3Vic3RyaW5nKDAsaS5sZW5ndGgtMikrXCI9PVwiKSxpfSxlLmRlY29kZT1mdW5jdGlvbih0KXt2YXIgZSxuLG8saSxzLGE9Ljc1KnQubGVuZ3RoLGM9dC5sZW5ndGgsdT0wO1wiPVwiPT09dFt0Lmxlbmd0aC0xXSYmKGEtLSxcIj1cIj09PXRbdC5sZW5ndGgtMl0mJmEtLSk7dmFyIGg9bmV3IEFycmF5QnVmZmVyKGEpLHA9bmV3IFVpbnQ4QXJyYXkoaCk7Zm9yKGU9MDtlPGM7ZSs9NCluPXJbdC5jaGFyQ29kZUF0KGUpXSxvPXJbdC5jaGFyQ29kZUF0KGUrMSldLGk9clt0LmNoYXJDb2RlQXQoZSsyKV0scz1yW3QuY2hhckNvZGVBdChlKzMpXSxwW3UrK109bjw8MnxvPj40LHBbdSsrXT0oMTUmbyk8PDR8aT4+MixwW3UrK109KDMmaSk8PDZ8NjMmcztyZXR1cm4gaH19KCl9LGZ1bmN0aW9uKHQsZSl7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIodCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspe3ZhciByPXRbZV07aWYoci5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil7dmFyIG49ci5idWZmZXI7aWYoci5ieXRlTGVuZ3RoIT09bi5ieXRlTGVuZ3RoKXt2YXIgbz1uZXcgVWludDhBcnJheShyLmJ5dGVMZW5ndGgpO28uc2V0KG5ldyBVaW50OEFycmF5KG4sci5ieXRlT2Zmc2V0LHIuYnl0ZUxlbmd0aCkpLG49by5idWZmZXJ9dFtlXT1ufX19ZnVuY3Rpb24gbih0LGUpe2U9ZXx8e307dmFyIG49bmV3IGk7cih0KTtmb3IodmFyIG89MDtvPHQubGVuZ3RoO28rKyluLmFwcGVuZCh0W29dKTtyZXR1cm4gZS50eXBlP24uZ2V0QmxvYihlLnR5cGUpOm4uZ2V0QmxvYigpfWZ1bmN0aW9uIG8odCxlKXtyZXR1cm4gcih0KSxuZXcgQmxvYih0LGV8fHt9KX12YXIgaT1lLkJsb2JCdWlsZGVyfHxlLldlYktpdEJsb2JCdWlsZGVyfHxlLk1TQmxvYkJ1aWxkZXJ8fGUuTW96QmxvYkJ1aWxkZXIscz1mdW5jdGlvbigpe3RyeXt2YXIgdD1uZXcgQmxvYihbXCJoaVwiXSk7cmV0dXJuIDI9PT10LnNpemV9Y2F0Y2godCl7cmV0dXJuITF9fSgpLGE9cyYmZnVuY3Rpb24oKXt0cnl7dmFyIHQ9bmV3IEJsb2IoW25ldyBVaW50OEFycmF5KFsxLDJdKV0pO3JldHVybiAyPT09dC5zaXplfWNhdGNoKHQpe3JldHVybiExfX0oKSxjPWkmJmkucHJvdG90eXBlLmFwcGVuZCYmaS5wcm90b3R5cGUuZ2V0QmxvYjt0LmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm4gcz9hP2UuQmxvYjpvOmM/bjp2b2lkIDB9KCl9KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKHQpe2lmKHQpcmV0dXJuIG8odCl9ZnVuY3Rpb24gbyh0KXtmb3IodmFyIGUgaW4gbi5wcm90b3R5cGUpdFtlXT1uLnByb3RvdHlwZVtlXTtyZXR1cm4gdH10LmV4cG9ydHM9bixuLnByb3RvdHlwZS5vbj1uLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LCh0aGlzLl9jYWxsYmFja3NbXCIkXCIrdF09dGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdfHxbXSkucHVzaChlKSx0aGlzfSxuLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcigpe3RoaXMub2ZmKHQsciksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHIuZm49ZSx0aGlzLm9uKHQsciksdGhpc30sbi5wcm90b3R5cGUub2ZmPW4ucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPW4ucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1uLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sMD09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXt9LHRoaXM7dmFyIHI9dGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdO2lmKCFyKXJldHVybiB0aGlzO2lmKDE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbXCIkXCIrdF0sdGhpcztmb3IodmFyIG4sbz0wO288ci5sZW5ndGg7bysrKWlmKG49cltvXSxuPT09ZXx8bi5mbj09PWUpe3Iuc3BsaWNlKG8sMSk7YnJlYWt9cmV0dXJuIHRoaXN9LG4ucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCl7dGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e307dmFyIGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSkscj10aGlzLl9jYWxsYmFja3NbXCIkXCIrdF07aWYocil7cj1yLnNsaWNlKDApO2Zvcih2YXIgbj0wLG89ci5sZW5ndGg7bjxvOysrbilyW25dLmFwcGx5KHRoaXMsZSl9cmV0dXJuIHRoaXN9LG4ucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sdGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdfHxbXX0sbi5wcm90b3R5cGUuaGFzTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5saXN0ZW5lcnModCkubGVuZ3RofX0sZnVuY3Rpb24odCxlKXtlLmVuY29kZT1mdW5jdGlvbih0KXt2YXIgZT1cIlwiO2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlLmxlbmd0aCYmKGUrPVwiJlwiKSxlKz1lbmNvZGVVUklDb21wb25lbnQocikrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRbcl0pKTtyZXR1cm4gZX0sZS5kZWNvZGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LHI9dC5zcGxpdChcIiZcIiksbj0wLG89ci5sZW5ndGg7bjxvO24rKyl7dmFyIGk9cltuXS5zcGxpdChcIj1cIik7ZVtkZWNvZGVVUklDb21wb25lbnQoaVswXSldPWRlY29kZVVSSUNvbXBvbmVudChpWzFdKX1yZXR1cm4gZX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIHI9ZnVuY3Rpb24oKXt9O3IucHJvdG90eXBlPWUucHJvdG90eXBlLHQucHJvdG90eXBlPW5ldyByLHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXR9fSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCl7dmFyIGU9XCJcIjtkbyBlPXNbdCVhXStlLHQ9TWF0aC5mbG9vcih0L2EpO3doaWxlKHQ+MCk7cmV0dXJuIGV9ZnVuY3Rpb24gbih0KXt2YXIgZT0wO2ZvcihoPTA7aDx0Lmxlbmd0aDtoKyspZT1lKmErY1t0LmNoYXJBdChoKV07cmV0dXJuIGV9ZnVuY3Rpb24gbygpe3ZhciB0PXIoK25ldyBEYXRlKTtyZXR1cm4gdCE9PWk/KHU9MCxpPXQpOnQrXCIuXCIrcih1KyspfWZvcih2YXIgaSxzPVwiMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXotX1wiLnNwbGl0KFwiXCIpLGE9NjQsYz17fSx1PTAsaD0wO2g8YTtoKyspY1tzW2hdXT1oO28uZW5jb2RlPXIsby5kZWNvZGU9bix0LmV4cG9ydHM9b30sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbihlKXtmdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIG8odCl7aS5jYWxsKHRoaXMsdCksdGhpcy5xdWVyeT10aGlzLnF1ZXJ5fHx7fSxhfHwoZS5fX19laW98fChlLl9fX2Vpbz1bXSksYT1lLl9fX2VpbyksdGhpcy5pbmRleD1hLmxlbmd0aDt2YXIgcj10aGlzO2EucHVzaChmdW5jdGlvbih0KXtyLm9uRGF0YSh0KX0pLHRoaXMucXVlcnkuaj10aGlzLmluZGV4LGUuZG9jdW1lbnQmJmUuYWRkRXZlbnRMaXN0ZW5lciYmZS5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsZnVuY3Rpb24oKXtyLnNjcmlwdCYmKHIuc2NyaXB0Lm9uZXJyb3I9bil9LCExKX12YXIgaT1yKDI1KSxzPXIoMzcpO3QuZXhwb3J0cz1vO3ZhciBhLGM9L1xcbi9nLHU9L1xcXFxuL2c7cyhvLGkpLG8ucHJvdG90eXBlLnN1cHBvcnRzQmluYXJ5PSExLG8ucHJvdG90eXBlLmRvQ2xvc2U9ZnVuY3Rpb24oKXt0aGlzLnNjcmlwdCYmKHRoaXMuc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zY3JpcHQpLHRoaXMuc2NyaXB0PW51bGwpLHRoaXMuZm9ybSYmKHRoaXMuZm9ybS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZm9ybSksdGhpcy5mb3JtPW51bGwsdGhpcy5pZnJhbWU9bnVsbCksaS5wcm90b3R5cGUuZG9DbG9zZS5jYWxsKHRoaXMpfSxvLnByb3RvdHlwZS5kb1BvbGw9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTt0aGlzLnNjcmlwdCYmKHRoaXMuc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zY3JpcHQpLHRoaXMuc2NyaXB0PW51bGwpLGUuYXN5bmM9ITAsZS5zcmM9dGhpcy51cmkoKSxlLm9uZXJyb3I9ZnVuY3Rpb24oZSl7dC5vbkVycm9yKFwianNvbnAgcG9sbCBlcnJvclwiLGUpfTt2YXIgcj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKVswXTtyP3IucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSxyKTooZG9jdW1lbnQuaGVhZHx8ZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoZSksdGhpcy5zY3JpcHQ9ZTt2YXIgbj1cInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiYvZ2Vja28vaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO24mJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0KX0sMTAwKX0sby5wcm90b3R5cGUuZG9Xcml0ZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIoKXtuKCksZSgpfWZ1bmN0aW9uIG4oKXtpZihvLmlmcmFtZSl0cnl7by5mb3JtLnJlbW92ZUNoaWxkKG8uaWZyYW1lKX1jYXRjaCh0KXtvLm9uRXJyb3IoXCJqc29ucCBwb2xsaW5nIGlmcmFtZSByZW1vdmFsIGVycm9yXCIsdCl9dHJ5e3ZhciB0PSc8aWZyYW1lIHNyYz1cImphdmFzY3JpcHQ6MFwiIG5hbWU9XCInK28uaWZyYW1lSWQrJ1wiPic7aT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpfWNhdGNoKHQpe2k9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKSxpLm5hbWU9by5pZnJhbWVJZCxpLnNyYz1cImphdmFzY3JpcHQ6MFwifWkuaWQ9by5pZnJhbWVJZCxvLmZvcm0uYXBwZW5kQ2hpbGQoaSksby5pZnJhbWU9aX12YXIgbz10aGlzO2lmKCF0aGlzLmZvcm0pe3ZhciBpLHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIiksYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIiksaD10aGlzLmlmcmFtZUlkPVwiZWlvX2lmcmFtZV9cIit0aGlzLmluZGV4O3MuY2xhc3NOYW1lPVwic29ja2V0aW9cIixzLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixzLnN0eWxlLnRvcD1cIi0xMDAwcHhcIixzLnN0eWxlLmxlZnQ9XCItMTAwMHB4XCIscy50YXJnZXQ9aCxzLm1ldGhvZD1cIlBPU1RcIixzLnNldEF0dHJpYnV0ZShcImFjY2VwdC1jaGFyc2V0XCIsXCJ1dGYtOFwiKSxhLm5hbWU9XCJkXCIscy5hcHBlbmRDaGlsZChhKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHMpLHRoaXMuZm9ybT1zLHRoaXMuYXJlYT1hfXRoaXMuZm9ybS5hY3Rpb249dGhpcy51cmkoKSxuKCksdD10LnJlcGxhY2UodSxcIlxcXFxcXG5cIiksdGhpcy5hcmVhLnZhbHVlPXQucmVwbGFjZShjLFwiXFxcXG5cIik7dHJ5e3RoaXMuZm9ybS5zdWJtaXQoKX1jYXRjaCh0KXt9dGhpcy5pZnJhbWUuYXR0YWNoRXZlbnQ/dGhpcy5pZnJhbWUub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7XCJjb21wbGV0ZVwiPT09by5pZnJhbWUucmVhZHlTdGF0ZSYmcigpO1xufTp0aGlzLmlmcmFtZS5vbmxvYWQ9cn19KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxyKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbih0KXt2YXIgZT10JiZ0LmZvcmNlQmFzZTY0O2UmJih0aGlzLnN1cHBvcnRzQmluYXJ5PSExKSx0aGlzLnBlck1lc3NhZ2VEZWZsYXRlPXQucGVyTWVzc2FnZURlZmxhdGUsdGhpcy51c2luZ0Jyb3dzZXJXZWJTb2NrZXQ9cCYmIXQuZm9yY2VOb2RlLHRoaXMudXNpbmdCcm93c2VyV2ViU29ja2V0fHwoZj1vKSxpLmNhbGwodGhpcyx0KX12YXIgbyxpPXIoMjYpLHM9cigyNyksYT1yKDM2KSxjPXIoMzcpLHU9cigzOCksaD1yKDMpKFwiZW5naW5lLmlvLWNsaWVudDp3ZWJzb2NrZXRcIikscD1lLldlYlNvY2tldHx8ZS5Nb3pXZWJTb2NrZXQ7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdyl0cnl7bz1yKDQxKX1jYXRjaCh0KXt9dmFyIGY9cDtmfHxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93fHwoZj1vKSx0LmV4cG9ydHM9bixjKG4saSksbi5wcm90b3R5cGUubmFtZT1cIndlYnNvY2tldFwiLG4ucHJvdG90eXBlLnN1cHBvcnRzQmluYXJ5PSEwLG4ucHJvdG90eXBlLmRvT3Blbj1mdW5jdGlvbigpe2lmKHRoaXMuY2hlY2soKSl7dmFyIHQ9dGhpcy51cmkoKSxlPXZvaWQgMCxyPXthZ2VudDp0aGlzLmFnZW50LHBlck1lc3NhZ2VEZWZsYXRlOnRoaXMucGVyTWVzc2FnZURlZmxhdGV9O3IucGZ4PXRoaXMucGZ4LHIua2V5PXRoaXMua2V5LHIucGFzc3BocmFzZT10aGlzLnBhc3NwaHJhc2Usci5jZXJ0PXRoaXMuY2VydCxyLmNhPXRoaXMuY2Esci5jaXBoZXJzPXRoaXMuY2lwaGVycyxyLnJlamVjdFVuYXV0aG9yaXplZD10aGlzLnJlamVjdFVuYXV0aG9yaXplZCx0aGlzLmV4dHJhSGVhZGVycyYmKHIuaGVhZGVycz10aGlzLmV4dHJhSGVhZGVycyksdGhpcy5sb2NhbEFkZHJlc3MmJihyLmxvY2FsQWRkcmVzcz10aGlzLmxvY2FsQWRkcmVzcyk7dHJ5e3RoaXMud3M9dGhpcy51c2luZ0Jyb3dzZXJXZWJTb2NrZXQ/bmV3IGYodCk6bmV3IGYodCxlLHIpfWNhdGNoKHQpe3JldHVybiB0aGlzLmVtaXQoXCJlcnJvclwiLHQpfXZvaWQgMD09PXRoaXMud3MuYmluYXJ5VHlwZSYmKHRoaXMuc3VwcG9ydHNCaW5hcnk9ITEpLHRoaXMud3Muc3VwcG9ydHMmJnRoaXMud3Muc3VwcG9ydHMuYmluYXJ5Pyh0aGlzLnN1cHBvcnRzQmluYXJ5PSEwLHRoaXMud3MuYmluYXJ5VHlwZT1cIm5vZGVidWZmZXJcIik6dGhpcy53cy5iaW5hcnlUeXBlPVwiYXJyYXlidWZmZXJcIix0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCl9fSxuLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVycz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy53cy5vbm9wZW49ZnVuY3Rpb24oKXt0Lm9uT3BlbigpfSx0aGlzLndzLm9uY2xvc2U9ZnVuY3Rpb24oKXt0Lm9uQ2xvc2UoKX0sdGhpcy53cy5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7dC5vbkRhdGEoZS5kYXRhKX0sdGhpcy53cy5vbmVycm9yPWZ1bmN0aW9uKGUpe3Qub25FcnJvcihcIndlYnNvY2tldCBlcnJvclwiLGUpfX0sbi5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcigpe24uZW1pdChcImZsdXNoXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLndyaXRhYmxlPSEwLG4uZW1pdChcImRyYWluXCIpfSwwKX12YXIgbj10aGlzO3RoaXMud3JpdGFibGU9ITE7Zm9yKHZhciBvPXQubGVuZ3RoLGk9MCxhPW87aTxhO2krKykhZnVuY3Rpb24odCl7cy5lbmNvZGVQYWNrZXQodCxuLnN1cHBvcnRzQmluYXJ5LGZ1bmN0aW9uKGkpe2lmKCFuLnVzaW5nQnJvd3NlcldlYlNvY2tldCl7dmFyIHM9e307aWYodC5vcHRpb25zJiYocy5jb21wcmVzcz10Lm9wdGlvbnMuY29tcHJlc3MpLG4ucGVyTWVzc2FnZURlZmxhdGUpe3ZhciBhPVwic3RyaW5nXCI9PXR5cGVvZiBpP2UuQnVmZmVyLmJ5dGVMZW5ndGgoaSk6aS5sZW5ndGg7YTxuLnBlck1lc3NhZ2VEZWZsYXRlLnRocmVzaG9sZCYmKHMuY29tcHJlc3M9ITEpfX10cnl7bi51c2luZ0Jyb3dzZXJXZWJTb2NrZXQ/bi53cy5zZW5kKGkpOm4ud3Muc2VuZChpLHMpfWNhdGNoKHQpe2goXCJ3ZWJzb2NrZXQgY2xvc2VkIGJlZm9yZSBvbmNsb3NlIGV2ZW50XCIpfS0tb3x8cigpfSl9KHRbaV0pfSxuLnByb3RvdHlwZS5vbkNsb3NlPWZ1bmN0aW9uKCl7aS5wcm90b3R5cGUub25DbG9zZS5jYWxsKHRoaXMpfSxuLnByb3RvdHlwZS5kb0Nsb3NlPWZ1bmN0aW9uKCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRoaXMud3MmJnRoaXMud3MuY2xvc2UoKX0sbi5wcm90b3R5cGUudXJpPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5xdWVyeXx8e30sZT10aGlzLnNlY3VyZT9cIndzc1wiOlwid3NcIixyPVwiXCI7dGhpcy5wb3J0JiYoXCJ3c3NcIj09PWUmJjQ0MyE9PU51bWJlcih0aGlzLnBvcnQpfHxcIndzXCI9PT1lJiY4MCE9PU51bWJlcih0aGlzLnBvcnQpKSYmKHI9XCI6XCIrdGhpcy5wb3J0KSx0aGlzLnRpbWVzdGFtcFJlcXVlc3RzJiYodFt0aGlzLnRpbWVzdGFtcFBhcmFtXT11KCkpLHRoaXMuc3VwcG9ydHNCaW5hcnl8fCh0LmI2ND0xKSx0PWEuZW5jb2RlKHQpLHQubGVuZ3RoJiYodD1cIj9cIit0KTt2YXIgbj10aGlzLmhvc3RuYW1lLmluZGV4T2YoXCI6XCIpIT09LTE7cmV0dXJuIGUrXCI6Ly9cIisobj9cIltcIit0aGlzLmhvc3RuYW1lK1wiXVwiOnRoaXMuaG9zdG5hbWUpK3IrdGhpcy5wYXRoK3R9LG4ucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7cmV0dXJuISghZnx8XCJfX2luaXRpYWxpemVcImluIGYmJnRoaXMubmFtZT09PW4ucHJvdG90eXBlLm5hbWUpfX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXt9LGZ1bmN0aW9uKHQsZSl7dmFyIHI9W10uaW5kZXhPZjt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZihyKXJldHVybiB0LmluZGV4T2YoZSk7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDsrK24paWYodFtuXT09PWUpcmV0dXJuIG47cmV0dXJuLTF9fSxmdW5jdGlvbih0LGUpeyhmdW5jdGlvbihlKXt2YXIgcj0vXltcXF0sOnt9XFxzXSokLyxuPS9cXFxcKD86W1wiXFxcXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2csbz0vXCJbXlwiXFxcXFxcblxccl0qXCJ8dHJ1ZXxmYWxzZXxudWxsfC0/XFxkKyg/OlxcLlxcZCopPyg/OltlRV1bK1xcLV0/XFxkKyk/L2csaT0vKD86Xnw6fCwpKD86XFxzKlxcWykrL2cscz0vXlxccysvLGE9L1xccyskLzt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJnQ/KHQ9dC5yZXBsYWNlKHMsXCJcIikucmVwbGFjZShhLFwiXCIpLGUuSlNPTiYmSlNPTi5wYXJzZT9KU09OLnBhcnNlKHQpOnIudGVzdCh0LnJlcGxhY2UobixcIkBcIikucmVwbGFjZShvLFwiXVwiKS5yZXBsYWNlKGksXCJcIikpP25ldyBGdW5jdGlvbihcInJldHVybiBcIit0KSgpOnZvaWQgMCk6bnVsbH19KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSxyKXt0aGlzLmlvPXQsdGhpcy5uc3A9ZSx0aGlzLmpzb249dGhpcyx0aGlzLmlkcz0wLHRoaXMuYWNrcz17fSx0aGlzLnJlY2VpdmVCdWZmZXI9W10sdGhpcy5zZW5kQnVmZmVyPVtdLHRoaXMuY29ubmVjdGVkPSExLHRoaXMuZGlzY29ubmVjdGVkPSEwLHImJnIucXVlcnkmJih0aGlzLnF1ZXJ5PXIucXVlcnkpLHRoaXMuaW8uYXV0b0Nvbm5lY3QmJnRoaXMub3BlbigpfXZhciBvPXIoNyksaT1yKDM1KSxzPXIoNDUpLGE9cig0NiksYz1yKDQ3KSx1PXIoMykoXCJzb2NrZXQuaW8tY2xpZW50OnNvY2tldFwiKSxoPXIoMjkpO3QuZXhwb3J0cz1lPW47dmFyIHA9e2Nvbm5lY3Q6MSxjb25uZWN0X2Vycm9yOjEsY29ubmVjdF90aW1lb3V0OjEsY29ubmVjdGluZzoxLGRpc2Nvbm5lY3Q6MSxlcnJvcjoxLHJlY29ubmVjdDoxLHJlY29ubmVjdF9hdHRlbXB0OjEscmVjb25uZWN0X2ZhaWxlZDoxLHJlY29ubmVjdF9lcnJvcjoxLHJlY29ubmVjdGluZzoxLHBpbmc6MSxwb25nOjF9LGY9aS5wcm90b3R5cGUuZW1pdDtpKG4ucHJvdG90eXBlKSxuLnByb3RvdHlwZS5zdWJFdmVudHM9ZnVuY3Rpb24oKXtpZighdGhpcy5zdWJzKXt2YXIgdD10aGlzLmlvO3RoaXMuc3Vicz1bYSh0LFwib3BlblwiLGModGhpcyxcIm9ub3BlblwiKSksYSh0LFwicGFja2V0XCIsYyh0aGlzLFwib25wYWNrZXRcIikpLGEodCxcImNsb3NlXCIsYyh0aGlzLFwib25jbG9zZVwiKSldfX0sbi5wcm90b3R5cGUub3Blbj1uLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29ubmVjdGVkP3RoaXM6KHRoaXMuc3ViRXZlbnRzKCksdGhpcy5pby5vcGVuKCksXCJvcGVuXCI9PT10aGlzLmlvLnJlYWR5U3RhdGUmJnRoaXMub25vcGVuKCksdGhpcy5lbWl0KFwiY29ubmVjdGluZ1wiKSx0aGlzKX0sbi5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe3ZhciB0PXMoYXJndW1lbnRzKTtyZXR1cm4gdC51bnNoaWZ0KFwibWVzc2FnZVwiKSx0aGlzLmVtaXQuYXBwbHkodGhpcyx0KSx0aGlzfSxuLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQpe2lmKHAuaGFzT3duUHJvcGVydHkodCkpcmV0dXJuIGYuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXM7dmFyIGU9cyhhcmd1bWVudHMpLHI9by5FVkVOVDtoKGUpJiYocj1vLkJJTkFSWV9FVkVOVCk7dmFyIG49e3R5cGU6cixkYXRhOmV9O3JldHVybiBuLm9wdGlvbnM9e30sbi5vcHRpb25zLmNvbXByZXNzPSF0aGlzLmZsYWdzfHwhMSE9PXRoaXMuZmxhZ3MuY29tcHJlc3MsXCJmdW5jdGlvblwiPT10eXBlb2YgZVtlLmxlbmd0aC0xXSYmKHUoXCJlbWl0dGluZyBwYWNrZXQgd2l0aCBhY2sgaWQgJWRcIix0aGlzLmlkcyksdGhpcy5hY2tzW3RoaXMuaWRzXT1lLnBvcCgpLG4uaWQ9dGhpcy5pZHMrKyksdGhpcy5jb25uZWN0ZWQ/dGhpcy5wYWNrZXQobik6dGhpcy5zZW5kQnVmZmVyLnB1c2gobiksZGVsZXRlIHRoaXMuZmxhZ3MsdGhpc30sbi5wcm90b3R5cGUucGFja2V0PWZ1bmN0aW9uKHQpe3QubnNwPXRoaXMubnNwLHRoaXMuaW8ucGFja2V0KHQpfSxuLnByb3RvdHlwZS5vbm9wZW49ZnVuY3Rpb24oKXt1KFwidHJhbnNwb3J0IGlzIG9wZW4gLSBjb25uZWN0aW5nXCIpLFwiL1wiIT09dGhpcy5uc3AmJih0aGlzLnF1ZXJ5P3RoaXMucGFja2V0KHt0eXBlOm8uQ09OTkVDVCxxdWVyeTp0aGlzLnF1ZXJ5fSk6dGhpcy5wYWNrZXQoe3R5cGU6by5DT05ORUNUfSkpfSxuLnByb3RvdHlwZS5vbmNsb3NlPWZ1bmN0aW9uKHQpe3UoXCJjbG9zZSAoJXMpXCIsdCksdGhpcy5jb25uZWN0ZWQ9ITEsdGhpcy5kaXNjb25uZWN0ZWQ9ITAsZGVsZXRlIHRoaXMuaWQsdGhpcy5lbWl0KFwiZGlzY29ubmVjdFwiLHQpfSxuLnByb3RvdHlwZS5vbnBhY2tldD1mdW5jdGlvbih0KXtpZih0Lm5zcD09PXRoaXMubnNwKXN3aXRjaCh0LnR5cGUpe2Nhc2Ugby5DT05ORUNUOnRoaXMub25jb25uZWN0KCk7YnJlYWs7Y2FzZSBvLkVWRU5UOnRoaXMub25ldmVudCh0KTticmVhaztjYXNlIG8uQklOQVJZX0VWRU5UOnRoaXMub25ldmVudCh0KTticmVhaztjYXNlIG8uQUNLOnRoaXMub25hY2sodCk7YnJlYWs7Y2FzZSBvLkJJTkFSWV9BQ0s6dGhpcy5vbmFjayh0KTticmVhaztjYXNlIG8uRElTQ09OTkVDVDp0aGlzLm9uZGlzY29ubmVjdCgpO2JyZWFrO2Nhc2Ugby5FUlJPUjp0aGlzLmVtaXQoXCJlcnJvclwiLHQuZGF0YSl9fSxuLnByb3RvdHlwZS5vbmV2ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YXx8W107dShcImVtaXR0aW5nIGV2ZW50ICVqXCIsZSksbnVsbCE9dC5pZCYmKHUoXCJhdHRhY2hpbmcgYWNrIGNhbGxiYWNrIHRvIGV2ZW50XCIpLGUucHVzaCh0aGlzLmFjayh0LmlkKSkpLHRoaXMuY29ubmVjdGVkP2YuYXBwbHkodGhpcyxlKTp0aGlzLnJlY2VpdmVCdWZmZXIucHVzaChlKX0sbi5wcm90b3R5cGUuYWNrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMscj0hMTtyZXR1cm4gZnVuY3Rpb24oKXtpZighcil7cj0hMDt2YXIgbj1zKGFyZ3VtZW50cyk7dShcInNlbmRpbmcgYWNrICVqXCIsbik7dmFyIGk9aChuKT9vLkJJTkFSWV9BQ0s6by5BQ0s7ZS5wYWNrZXQoe3R5cGU6aSxpZDp0LGRhdGE6bn0pfX19LG4ucHJvdG90eXBlLm9uYWNrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYWNrc1t0LmlkXTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlPyh1KFwiY2FsbGluZyBhY2sgJXMgd2l0aCAlalwiLHQuaWQsdC5kYXRhKSxlLmFwcGx5KHRoaXMsdC5kYXRhKSxkZWxldGUgdGhpcy5hY2tzW3QuaWRdKTp1KFwiYmFkIGFjayAlc1wiLHQuaWQpfSxuLnByb3RvdHlwZS5vbmNvbm5lY3Q9ZnVuY3Rpb24oKXt0aGlzLmNvbm5lY3RlZD0hMCx0aGlzLmRpc2Nvbm5lY3RlZD0hMSx0aGlzLmVtaXQoXCJjb25uZWN0XCIpLHRoaXMuZW1pdEJ1ZmZlcmVkKCl9LG4ucHJvdG90eXBlLmVtaXRCdWZmZXJlZD1mdW5jdGlvbigpe3ZhciB0O2Zvcih0PTA7dDx0aGlzLnJlY2VpdmVCdWZmZXIubGVuZ3RoO3QrKylmLmFwcGx5KHRoaXMsdGhpcy5yZWNlaXZlQnVmZmVyW3RdKTtmb3IodGhpcy5yZWNlaXZlQnVmZmVyPVtdLHQ9MDt0PHRoaXMuc2VuZEJ1ZmZlci5sZW5ndGg7dCsrKXRoaXMucGFja2V0KHRoaXMuc2VuZEJ1ZmZlclt0XSk7dGhpcy5zZW5kQnVmZmVyPVtdfSxuLnByb3RvdHlwZS5vbmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXt1KFwic2VydmVyIGRpc2Nvbm5lY3QgKCVzKVwiLHRoaXMubnNwKSx0aGlzLmRlc3Ryb3koKSx0aGlzLm9uY2xvc2UoXCJpbyBzZXJ2ZXIgZGlzY29ubmVjdFwiKX0sbi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKHRoaXMuc3Vicyl7Zm9yKHZhciB0PTA7dDx0aGlzLnN1YnMubGVuZ3RoO3QrKyl0aGlzLnN1YnNbdF0uZGVzdHJveSgpO3RoaXMuc3Vicz1udWxsfXRoaXMuaW8uZGVzdHJveSh0aGlzKX0sbi5wcm90b3R5cGUuY2xvc2U9bi5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbm5lY3RlZCYmKHUoXCJwZXJmb3JtaW5nIGRpc2Nvbm5lY3QgKCVzKVwiLHRoaXMubnNwKSx0aGlzLnBhY2tldCh7dHlwZTpvLkRJU0NPTk5FQ1R9KSksdGhpcy5kZXN0cm95KCksdGhpcy5jb25uZWN0ZWQmJnRoaXMub25jbG9zZShcImlvIGNsaWVudCBkaXNjb25uZWN0XCIpLHRoaXN9LG4ucHJvdG90eXBlLmNvbXByZXNzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmZsYWdzPXRoaXMuZmxhZ3N8fHt9LHRoaXMuZmxhZ3MuY29tcHJlc3M9dCx0aGlzfX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiByKHQsZSl7dmFyIHI9W107ZT1lfHwwO2Zvcih2YXIgbj1lfHwwO248dC5sZW5ndGg7bisrKXJbbi1lXT10W25dO3JldHVybiByfXQuZXhwb3J0cz1yfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlLHIpe3JldHVybiB0Lm9uKGUscikse2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0LnJlbW92ZUxpc3RlbmVyKGUscil9fX10LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlKXt2YXIgcj1bXS5zbGljZTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9dFtlXSksXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoXCJiaW5kKCkgcmVxdWlyZXMgYSBmdW5jdGlvblwiKTt2YXIgbj1yLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsbi5jb25jYXQoci5jYWxsKGFyZ3VtZW50cykpKX19fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIodCl7dD10fHx7fSx0aGlzLm1zPXQubWlufHwxMDAsdGhpcy5tYXg9dC5tYXh8fDFlNCx0aGlzLmZhY3Rvcj10LmZhY3Rvcnx8Mix0aGlzLmppdHRlcj10LmppdHRlcj4wJiZ0LmppdHRlcjw9MT90LmppdHRlcjowLHRoaXMuYXR0ZW1wdHM9MH10LmV4cG9ydHM9cixyLnByb3RvdHlwZS5kdXJhdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMubXMqTWF0aC5wb3codGhpcy5mYWN0b3IsdGhpcy5hdHRlbXB0cysrKTtpZih0aGlzLmppdHRlcil7dmFyIGU9TWF0aC5yYW5kb20oKSxyPU1hdGguZmxvb3IoZSp0aGlzLmppdHRlcip0KTt0PTA9PSgxJk1hdGguZmxvb3IoMTAqZSkpP3Qtcjp0K3J9cmV0dXJuIDB8TWF0aC5taW4odCx0aGlzLm1heCl9LHIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5hdHRlbXB0cz0wfSxyLnByb3RvdHlwZS5zZXRNaW49ZnVuY3Rpb24odCl7dGhpcy5tcz10fSxyLnByb3RvdHlwZS5zZXRNYXg9ZnVuY3Rpb24odCl7dGhpcy5tYXg9dH0sci5wcm90b3R5cGUuc2V0Sml0dGVyPWZ1bmN0aW9uKHQpe3RoaXMuaml0dGVyPXR9fV0pfSk7IiwiLyohIEhhbW1lci5KUyAtIHYyLjAuOCAtIDIwMTYtMDQtMjNcbiAqIGh0dHA6Ly9oYW1tZXJqcy5naXRodWIuaW8vXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IEpvcmlrIFRhbmdlbGRlcjtcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSAqL1xuIWZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoYSxiLGMpe3JldHVybiBzZXRUaW1lb3V0KGooYSxjKSxiKX1mdW5jdGlvbiBmKGEsYixjKXtyZXR1cm4gQXJyYXkuaXNBcnJheShhKT8oZyhhLGNbYl0sYyksITApOiExfWZ1bmN0aW9uIGcoYSxiLGMpe3ZhciBlO2lmKGEpaWYoYS5mb3JFYWNoKWEuZm9yRWFjaChiLGMpO2Vsc2UgaWYoYS5sZW5ndGghPT1kKWZvcihlPTA7ZTxhLmxlbmd0aDspYi5jYWxsKGMsYVtlXSxlLGEpLGUrKztlbHNlIGZvcihlIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShlKSYmYi5jYWxsKGMsYVtlXSxlLGEpfWZ1bmN0aW9uIGgoYixjLGQpe3ZhciBlPVwiREVQUkVDQVRFRCBNRVRIT0Q6IFwiK2MrXCJcXG5cIitkK1wiIEFUIFxcblwiO3JldHVybiBmdW5jdGlvbigpe3ZhciBjPW5ldyBFcnJvcihcImdldC1zdGFjay10cmFjZVwiKSxkPWMmJmMuc3RhY2s/Yy5zdGFjay5yZXBsYWNlKC9eW15cXChdKz9bXFxuJF0vZ20sXCJcIikucmVwbGFjZSgvXlxccythdFxccysvZ20sXCJcIikucmVwbGFjZSgvXk9iamVjdC48YW5vbnltb3VzPlxccypcXCgvZ20sXCJ7YW5vbnltb3VzfSgpQFwiKTpcIlVua25vd24gU3RhY2sgVHJhY2VcIixmPWEuY29uc29sZSYmKGEuY29uc29sZS53YXJufHxhLmNvbnNvbGUubG9nKTtyZXR1cm4gZiYmZi5jYWxsKGEuY29uc29sZSxlLGQpLGIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1mdW5jdGlvbiBpKGEsYixjKXt2YXIgZCxlPWIucHJvdG90eXBlO2Q9YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlKSxkLmNvbnN0cnVjdG9yPWEsZC5fc3VwZXI9ZSxjJiZsYShkLGMpfWZ1bmN0aW9uIGooYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGsoYSxiKXtyZXR1cm4gdHlwZW9mIGE9PW9hP2EuYXBwbHkoYj9iWzBdfHxkOmQsYik6YX1mdW5jdGlvbiBsKGEsYil7cmV0dXJuIGE9PT1kP2I6YX1mdW5jdGlvbiBtKGEsYixjKXtnKHEoYiksZnVuY3Rpb24oYil7YS5hZGRFdmVudExpc3RlbmVyKGIsYywhMSl9KX1mdW5jdGlvbiBuKGEsYixjKXtnKHEoYiksZnVuY3Rpb24oYil7YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9KX1mdW5jdGlvbiBvKGEsYil7Zm9yKDthOyl7aWYoYT09YilyZXR1cm4hMDthPWEucGFyZW50Tm9kZX1yZXR1cm4hMX1mdW5jdGlvbiBwKGEsYil7cmV0dXJuIGEuaW5kZXhPZihiKT4tMX1mdW5jdGlvbiBxKGEpe3JldHVybiBhLnRyaW0oKS5zcGxpdCgvXFxzKy9nKX1mdW5jdGlvbiByKGEsYixjKXtpZihhLmluZGV4T2YmJiFjKXJldHVybiBhLmluZGV4T2YoYik7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDspe2lmKGMmJmFbZF1bY109PWJ8fCFjJiZhW2RdPT09YilyZXR1cm4gZDtkKyt9cmV0dXJuLTF9ZnVuY3Rpb24gcyhhKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSwwKX1mdW5jdGlvbiB0KGEsYixjKXtmb3IodmFyIGQ9W10sZT1bXSxmPTA7ZjxhLmxlbmd0aDspe3ZhciBnPWI/YVtmXVtiXTphW2ZdO3IoZSxnKTwwJiZkLnB1c2goYVtmXSksZVtmXT1nLGYrK31yZXR1cm4gYyYmKGQ9Yj9kLnNvcnQoZnVuY3Rpb24oYSxjKXtyZXR1cm4gYVtiXT5jW2JdfSk6ZC5zb3J0KCkpLGR9ZnVuY3Rpb24gdShhLGIpe2Zvcih2YXIgYyxlLGY9YlswXS50b1VwcGVyQ2FzZSgpK2Iuc2xpY2UoMSksZz0wO2c8bWEubGVuZ3RoOyl7aWYoYz1tYVtnXSxlPWM/YytmOmIsZSBpbiBhKXJldHVybiBlO2crK31yZXR1cm4gZH1mdW5jdGlvbiB2KCl7cmV0dXJuIHVhKyt9ZnVuY3Rpb24gdyhiKXt2YXIgYz1iLm93bmVyRG9jdW1lbnR8fGI7cmV0dXJuIGMuZGVmYXVsdFZpZXd8fGMucGFyZW50V2luZG93fHxhfWZ1bmN0aW9uIHgoYSxiKXt2YXIgYz10aGlzO3RoaXMubWFuYWdlcj1hLHRoaXMuY2FsbGJhY2s9Yix0aGlzLmVsZW1lbnQ9YS5lbGVtZW50LHRoaXMudGFyZ2V0PWEub3B0aW9ucy5pbnB1dFRhcmdldCx0aGlzLmRvbUhhbmRsZXI9ZnVuY3Rpb24oYil7ayhhLm9wdGlvbnMuZW5hYmxlLFthXSkmJmMuaGFuZGxlcihiKX0sdGhpcy5pbml0KCl9ZnVuY3Rpb24geShhKXt2YXIgYixjPWEub3B0aW9ucy5pbnB1dENsYXNzO3JldHVybiBuZXcoYj1jP2M6eGE/TTp5YT9QOndhP1I6TCkoYSx6KX1mdW5jdGlvbiB6KGEsYixjKXt2YXIgZD1jLnBvaW50ZXJzLmxlbmd0aCxlPWMuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aCxmPWImRWEmJmQtZT09PTAsZz1iJihHYXxIYSkmJmQtZT09PTA7Yy5pc0ZpcnN0PSEhZixjLmlzRmluYWw9ISFnLGYmJihhLnNlc3Npb249e30pLGMuZXZlbnRUeXBlPWIsQShhLGMpLGEuZW1pdChcImhhbW1lci5pbnB1dFwiLGMpLGEucmVjb2duaXplKGMpLGEuc2Vzc2lvbi5wcmV2SW5wdXQ9Y31mdW5jdGlvbiBBKGEsYil7dmFyIGM9YS5zZXNzaW9uLGQ9Yi5wb2ludGVycyxlPWQubGVuZ3RoO2MuZmlyc3RJbnB1dHx8KGMuZmlyc3RJbnB1dD1EKGIpKSxlPjEmJiFjLmZpcnN0TXVsdGlwbGU/Yy5maXJzdE11bHRpcGxlPUQoYik6MT09PWUmJihjLmZpcnN0TXVsdGlwbGU9ITEpO3ZhciBmPWMuZmlyc3RJbnB1dCxnPWMuZmlyc3RNdWx0aXBsZSxoPWc/Zy5jZW50ZXI6Zi5jZW50ZXIsaT1iLmNlbnRlcj1FKGQpO2IudGltZVN0YW1wPXJhKCksYi5kZWx0YVRpbWU9Yi50aW1lU3RhbXAtZi50aW1lU3RhbXAsYi5hbmdsZT1JKGgsaSksYi5kaXN0YW5jZT1IKGgsaSksQihjLGIpLGIub2Zmc2V0RGlyZWN0aW9uPUcoYi5kZWx0YVgsYi5kZWx0YVkpO3ZhciBqPUYoYi5kZWx0YVRpbWUsYi5kZWx0YVgsYi5kZWx0YVkpO2Iub3ZlcmFsbFZlbG9jaXR5WD1qLngsYi5vdmVyYWxsVmVsb2NpdHlZPWoueSxiLm92ZXJhbGxWZWxvY2l0eT1xYShqLngpPnFhKGoueSk/ai54OmoueSxiLnNjYWxlPWc/SyhnLnBvaW50ZXJzLGQpOjEsYi5yb3RhdGlvbj1nP0ooZy5wb2ludGVycyxkKTowLGIubWF4UG9pbnRlcnM9Yy5wcmV2SW5wdXQ/Yi5wb2ludGVycy5sZW5ndGg+Yy5wcmV2SW5wdXQubWF4UG9pbnRlcnM/Yi5wb2ludGVycy5sZW5ndGg6Yy5wcmV2SW5wdXQubWF4UG9pbnRlcnM6Yi5wb2ludGVycy5sZW5ndGgsQyhjLGIpO3ZhciBrPWEuZWxlbWVudDtvKGIuc3JjRXZlbnQudGFyZ2V0LGspJiYoaz1iLnNyY0V2ZW50LnRhcmdldCksYi50YXJnZXQ9a31mdW5jdGlvbiBCKGEsYil7dmFyIGM9Yi5jZW50ZXIsZD1hLm9mZnNldERlbHRhfHx7fSxlPWEucHJldkRlbHRhfHx7fSxmPWEucHJldklucHV0fHx7fTtiLmV2ZW50VHlwZSE9PUVhJiZmLmV2ZW50VHlwZSE9PUdhfHwoZT1hLnByZXZEZWx0YT17eDpmLmRlbHRhWHx8MCx5OmYuZGVsdGFZfHwwfSxkPWEub2Zmc2V0RGVsdGE9e3g6Yy54LHk6Yy55fSksYi5kZWx0YVg9ZS54KyhjLngtZC54KSxiLmRlbHRhWT1lLnkrKGMueS1kLnkpfWZ1bmN0aW9uIEMoYSxiKXt2YXIgYyxlLGYsZyxoPWEubGFzdEludGVydmFsfHxiLGk9Yi50aW1lU3RhbXAtaC50aW1lU3RhbXA7aWYoYi5ldmVudFR5cGUhPUhhJiYoaT5EYXx8aC52ZWxvY2l0eT09PWQpKXt2YXIgaj1iLmRlbHRhWC1oLmRlbHRhWCxrPWIuZGVsdGFZLWguZGVsdGFZLGw9RihpLGosayk7ZT1sLngsZj1sLnksYz1xYShsLngpPnFhKGwueSk/bC54OmwueSxnPUcoaixrKSxhLmxhc3RJbnRlcnZhbD1ifWVsc2UgYz1oLnZlbG9jaXR5LGU9aC52ZWxvY2l0eVgsZj1oLnZlbG9jaXR5WSxnPWguZGlyZWN0aW9uO2IudmVsb2NpdHk9YyxiLnZlbG9jaXR5WD1lLGIudmVsb2NpdHlZPWYsYi5kaXJlY3Rpb249Z31mdW5jdGlvbiBEKGEpe2Zvcih2YXIgYj1bXSxjPTA7YzxhLnBvaW50ZXJzLmxlbmd0aDspYltjXT17Y2xpZW50WDpwYShhLnBvaW50ZXJzW2NdLmNsaWVudFgpLGNsaWVudFk6cGEoYS5wb2ludGVyc1tjXS5jbGllbnRZKX0sYysrO3JldHVybnt0aW1lU3RhbXA6cmEoKSxwb2ludGVyczpiLGNlbnRlcjpFKGIpLGRlbHRhWDphLmRlbHRhWCxkZWx0YVk6YS5kZWx0YVl9fWZ1bmN0aW9uIEUoYSl7dmFyIGI9YS5sZW5ndGg7aWYoMT09PWIpcmV0dXJue3g6cGEoYVswXS5jbGllbnRYKSx5OnBhKGFbMF0uY2xpZW50WSl9O2Zvcih2YXIgYz0wLGQ9MCxlPTA7Yj5lOyljKz1hW2VdLmNsaWVudFgsZCs9YVtlXS5jbGllbnRZLGUrKztyZXR1cm57eDpwYShjL2IpLHk6cGEoZC9iKX19ZnVuY3Rpb24gRihhLGIsYyl7cmV0dXJue3g6Yi9hfHwwLHk6Yy9hfHwwfX1mdW5jdGlvbiBHKGEsYil7cmV0dXJuIGE9PT1iP0lhOnFhKGEpPj1xYShiKT8wPmE/SmE6S2E6MD5iP0xhOk1hfWZ1bmN0aW9uIEgoYSxiLGMpe2N8fChjPVFhKTt2YXIgZD1iW2NbMF1dLWFbY1swXV0sZT1iW2NbMV1dLWFbY1sxXV07cmV0dXJuIE1hdGguc3FydChkKmQrZSplKX1mdW5jdGlvbiBJKGEsYixjKXtjfHwoYz1RYSk7dmFyIGQ9YltjWzBdXS1hW2NbMF1dLGU9YltjWzFdXS1hW2NbMV1dO3JldHVybiAxODAqTWF0aC5hdGFuMihlLGQpL01hdGguUEl9ZnVuY3Rpb24gSihhLGIpe3JldHVybiBJKGJbMV0sYlswXSxSYSkrSShhWzFdLGFbMF0sUmEpfWZ1bmN0aW9uIEsoYSxiKXtyZXR1cm4gSChiWzBdLGJbMV0sUmEpL0goYVswXSxhWzFdLFJhKX1mdW5jdGlvbiBMKCl7dGhpcy5ldkVsPVRhLHRoaXMuZXZXaW49VWEsdGhpcy5wcmVzc2VkPSExLHguYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIE0oKXt0aGlzLmV2RWw9WGEsdGhpcy5ldldpbj1ZYSx4LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLnN0b3JlPXRoaXMubWFuYWdlci5zZXNzaW9uLnBvaW50ZXJFdmVudHM9W119ZnVuY3Rpb24gTigpe3RoaXMuZXZUYXJnZXQ9JGEsdGhpcy5ldldpbj1fYSx0aGlzLnN0YXJ0ZWQ9ITEseC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gTyhhLGIpe3ZhciBjPXMoYS50b3VjaGVzKSxkPXMoYS5jaGFuZ2VkVG91Y2hlcyk7cmV0dXJuIGImKEdhfEhhKSYmKGM9dChjLmNvbmNhdChkKSxcImlkZW50aWZpZXJcIiwhMCkpLFtjLGRdfWZ1bmN0aW9uIFAoKXt0aGlzLmV2VGFyZ2V0PWJiLHRoaXMudGFyZ2V0SWRzPXt9LHguYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIFEoYSxiKXt2YXIgYz1zKGEudG91Y2hlcyksZD10aGlzLnRhcmdldElkcztpZihiJihFYXxGYSkmJjE9PT1jLmxlbmd0aClyZXR1cm4gZFtjWzBdLmlkZW50aWZpZXJdPSEwLFtjLGNdO3ZhciBlLGYsZz1zKGEuY2hhbmdlZFRvdWNoZXMpLGg9W10saT10aGlzLnRhcmdldDtpZihmPWMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBvKGEudGFyZ2V0LGkpfSksYj09PUVhKWZvcihlPTA7ZTxmLmxlbmd0aDspZFtmW2VdLmlkZW50aWZpZXJdPSEwLGUrKztmb3IoZT0wO2U8Zy5sZW5ndGg7KWRbZ1tlXS5pZGVudGlmaWVyXSYmaC5wdXNoKGdbZV0pLGImKEdhfEhhKSYmZGVsZXRlIGRbZ1tlXS5pZGVudGlmaWVyXSxlKys7cmV0dXJuIGgubGVuZ3RoP1t0KGYuY29uY2F0KGgpLFwiaWRlbnRpZmllclwiLCEwKSxoXTp2b2lkIDB9ZnVuY3Rpb24gUigpe3guYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBhPWoodGhpcy5oYW5kbGVyLHRoaXMpO3RoaXMudG91Y2g9bmV3IFAodGhpcy5tYW5hZ2VyLGEpLHRoaXMubW91c2U9bmV3IEwodGhpcy5tYW5hZ2VyLGEpLHRoaXMucHJpbWFyeVRvdWNoPW51bGwsdGhpcy5sYXN0VG91Y2hlcz1bXX1mdW5jdGlvbiBTKGEsYil7YSZFYT8odGhpcy5wcmltYXJ5VG91Y2g9Yi5jaGFuZ2VkUG9pbnRlcnNbMF0uaWRlbnRpZmllcixULmNhbGwodGhpcyxiKSk6YSYoR2F8SGEpJiZULmNhbGwodGhpcyxiKX1mdW5jdGlvbiBUKGEpe3ZhciBiPWEuY2hhbmdlZFBvaW50ZXJzWzBdO2lmKGIuaWRlbnRpZmllcj09PXRoaXMucHJpbWFyeVRvdWNoKXt2YXIgYz17eDpiLmNsaWVudFgseTpiLmNsaWVudFl9O3RoaXMubGFzdFRvdWNoZXMucHVzaChjKTt2YXIgZD10aGlzLmxhc3RUb3VjaGVzLGU9ZnVuY3Rpb24oKXt2YXIgYT1kLmluZGV4T2YoYyk7YT4tMSYmZC5zcGxpY2UoYSwxKX07c2V0VGltZW91dChlLGNiKX19ZnVuY3Rpb24gVShhKXtmb3IodmFyIGI9YS5zcmNFdmVudC5jbGllbnRYLGM9YS5zcmNFdmVudC5jbGllbnRZLGQ9MDtkPHRoaXMubGFzdFRvdWNoZXMubGVuZ3RoO2QrKyl7dmFyIGU9dGhpcy5sYXN0VG91Y2hlc1tkXSxmPU1hdGguYWJzKGItZS54KSxnPU1hdGguYWJzKGMtZS55KTtpZihkYj49ZiYmZGI+PWcpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gVihhLGIpe3RoaXMubWFuYWdlcj1hLHRoaXMuc2V0KGIpfWZ1bmN0aW9uIFcoYSl7aWYocChhLGpiKSlyZXR1cm4gamI7dmFyIGI9cChhLGtiKSxjPXAoYSxsYik7cmV0dXJuIGImJmM/amI6Ynx8Yz9iP2tiOmxiOnAoYSxpYik/aWI6aGJ9ZnVuY3Rpb24gWCgpe2lmKCFmYilyZXR1cm4hMTt2YXIgYj17fSxjPWEuQ1NTJiZhLkNTUy5zdXBwb3J0cztyZXR1cm5bXCJhdXRvXCIsXCJtYW5pcHVsYXRpb25cIixcInBhbi15XCIsXCJwYW4teFwiLFwicGFuLXggcGFuLXlcIixcIm5vbmVcIl0uZm9yRWFjaChmdW5jdGlvbihkKXtiW2RdPWM/YS5DU1Muc3VwcG9ydHMoXCJ0b3VjaC1hY3Rpb25cIixkKTohMH0pLGJ9ZnVuY3Rpb24gWShhKXt0aGlzLm9wdGlvbnM9bGEoe30sdGhpcy5kZWZhdWx0cyxhfHx7fSksdGhpcy5pZD12KCksdGhpcy5tYW5hZ2VyPW51bGwsdGhpcy5vcHRpb25zLmVuYWJsZT1sKHRoaXMub3B0aW9ucy5lbmFibGUsITApLHRoaXMuc3RhdGU9bmIsdGhpcy5zaW11bHRhbmVvdXM9e30sdGhpcy5yZXF1aXJlRmFpbD1bXX1mdW5jdGlvbiBaKGEpe3JldHVybiBhJnNiP1wiY2FuY2VsXCI6YSZxYj9cImVuZFwiOmEmcGI/XCJtb3ZlXCI6YSZvYj9cInN0YXJ0XCI6XCJcIn1mdW5jdGlvbiAkKGEpe3JldHVybiBhPT1NYT9cImRvd25cIjphPT1MYT9cInVwXCI6YT09SmE/XCJsZWZ0XCI6YT09S2E/XCJyaWdodFwiOlwiXCJ9ZnVuY3Rpb24gXyhhLGIpe3ZhciBjPWIubWFuYWdlcjtyZXR1cm4gYz9jLmdldChhKTphfWZ1bmN0aW9uIGFhKCl7WS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gYmEoKXthYS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5wWD1udWxsLHRoaXMucFk9bnVsbH1mdW5jdGlvbiBjYSgpe2FhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBkYSgpe1kuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX3RpbWVyPW51bGwsdGhpcy5faW5wdXQ9bnVsbH1mdW5jdGlvbiBlYSgpe2FhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBmYSgpe2FhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBnYSgpe1kuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucFRpbWU9ITEsdGhpcy5wQ2VudGVyPSExLHRoaXMuX3RpbWVyPW51bGwsdGhpcy5faW5wdXQ9bnVsbCx0aGlzLmNvdW50PTB9ZnVuY3Rpb24gaGEoYSxiKXtyZXR1cm4gYj1ifHx7fSxiLnJlY29nbml6ZXJzPWwoYi5yZWNvZ25pemVycyxoYS5kZWZhdWx0cy5wcmVzZXQpLG5ldyBpYShhLGIpfWZ1bmN0aW9uIGlhKGEsYil7dGhpcy5vcHRpb25zPWxhKHt9LGhhLmRlZmF1bHRzLGJ8fHt9KSx0aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXQ9dGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0fHxhLHRoaXMuaGFuZGxlcnM9e30sdGhpcy5zZXNzaW9uPXt9LHRoaXMucmVjb2duaXplcnM9W10sdGhpcy5vbGRDc3NQcm9wcz17fSx0aGlzLmVsZW1lbnQ9YSx0aGlzLmlucHV0PXkodGhpcyksdGhpcy50b3VjaEFjdGlvbj1uZXcgVih0aGlzLHRoaXMub3B0aW9ucy50b3VjaEFjdGlvbiksamEodGhpcywhMCksZyh0aGlzLm9wdGlvbnMucmVjb2duaXplcnMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hZGQobmV3IGFbMF0oYVsxXSkpO2FbMl0mJmIucmVjb2duaXplV2l0aChhWzJdKSxhWzNdJiZiLnJlcXVpcmVGYWlsdXJlKGFbM10pfSx0aGlzKX1mdW5jdGlvbiBqYShhLGIpe3ZhciBjPWEuZWxlbWVudDtpZihjLnN0eWxlKXt2YXIgZDtnKGEub3B0aW9ucy5jc3NQcm9wcyxmdW5jdGlvbihlLGYpe2Q9dShjLnN0eWxlLGYpLGI/KGEub2xkQ3NzUHJvcHNbZF09Yy5zdHlsZVtkXSxjLnN0eWxlW2RdPWUpOmMuc3R5bGVbZF09YS5vbGRDc3NQcm9wc1tkXXx8XCJcIn0pLGJ8fChhLm9sZENzc1Byb3BzPXt9KX19ZnVuY3Rpb24ga2EoYSxjKXt2YXIgZD1iLmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7ZC5pbml0RXZlbnQoYSwhMCwhMCksZC5nZXN0dXJlPWMsYy50YXJnZXQuZGlzcGF0Y2hFdmVudChkKX12YXIgbGEsbWE9W1wiXCIsXCJ3ZWJraXRcIixcIk1velwiLFwiTVNcIixcIm1zXCIsXCJvXCJdLG5hPWIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxvYT1cImZ1bmN0aW9uXCIscGE9TWF0aC5yb3VuZCxxYT1NYXRoLmFicyxyYT1EYXRlLm5vdztsYT1cImZ1bmN0aW9uXCIhPXR5cGVvZiBPYmplY3QuYXNzaWduP2Z1bmN0aW9uKGEpe2lmKGE9PT1kfHxudWxsPT09YSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO2Zvcih2YXIgYj1PYmplY3QoYSksYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspe3ZhciBlPWFyZ3VtZW50c1tjXTtpZihlIT09ZCYmbnVsbCE9PWUpZm9yKHZhciBmIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShmKSYmKGJbZl09ZVtmXSl9cmV0dXJuIGJ9Ok9iamVjdC5hc3NpZ247dmFyIHNhPWgoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZT1PYmplY3Qua2V5cyhiKSxmPTA7ZjxlLmxlbmd0aDspKCFjfHxjJiZhW2VbZl1dPT09ZCkmJihhW2VbZl1dPWJbZVtmXV0pLGYrKztyZXR1cm4gYX0sXCJleHRlbmRcIixcIlVzZSBgYXNzaWduYC5cIiksdGE9aChmdW5jdGlvbihhLGIpe3JldHVybiBzYShhLGIsITApfSxcIm1lcmdlXCIsXCJVc2UgYGFzc2lnbmAuXCIpLHVhPTEsdmE9L21vYmlsZXx0YWJsZXR8aXAoYWR8aG9uZXxvZCl8YW5kcm9pZC9pLHdhPVwib250b3VjaHN0YXJ0XCJpbiBhLHhhPXUoYSxcIlBvaW50ZXJFdmVudFwiKSE9PWQseWE9d2EmJnZhLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksemE9XCJ0b3VjaFwiLEFhPVwicGVuXCIsQmE9XCJtb3VzZVwiLENhPVwia2luZWN0XCIsRGE9MjUsRWE9MSxGYT0yLEdhPTQsSGE9OCxJYT0xLEphPTIsS2E9NCxMYT04LE1hPTE2LE5hPUphfEthLE9hPUxhfE1hLFBhPU5hfE9hLFFhPVtcInhcIixcInlcIl0sUmE9W1wiY2xpZW50WFwiLFwiY2xpZW50WVwiXTt4LnByb3RvdHlwZT17aGFuZGxlcjpmdW5jdGlvbigpe30saW5pdDpmdW5jdGlvbigpe3RoaXMuZXZFbCYmbSh0aGlzLmVsZW1lbnQsdGhpcy5ldkVsLHRoaXMuZG9tSGFuZGxlciksdGhpcy5ldlRhcmdldCYmbSh0aGlzLnRhcmdldCx0aGlzLmV2VGFyZ2V0LHRoaXMuZG9tSGFuZGxlciksdGhpcy5ldldpbiYmbSh3KHRoaXMuZWxlbWVudCksdGhpcy5ldldpbix0aGlzLmRvbUhhbmRsZXIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5ldkVsJiZuKHRoaXMuZWxlbWVudCx0aGlzLmV2RWwsdGhpcy5kb21IYW5kbGVyKSx0aGlzLmV2VGFyZ2V0JiZuKHRoaXMudGFyZ2V0LHRoaXMuZXZUYXJnZXQsdGhpcy5kb21IYW5kbGVyKSx0aGlzLmV2V2luJiZuKHcodGhpcy5lbGVtZW50KSx0aGlzLmV2V2luLHRoaXMuZG9tSGFuZGxlcil9fTt2YXIgU2E9e21vdXNlZG93bjpFYSxtb3VzZW1vdmU6RmEsbW91c2V1cDpHYX0sVGE9XCJtb3VzZWRvd25cIixVYT1cIm1vdXNlbW92ZSBtb3VzZXVwXCI7aShMLHgse2hhbmRsZXI6ZnVuY3Rpb24oYSl7dmFyIGI9U2FbYS50eXBlXTtiJkVhJiYwPT09YS5idXR0b24mJih0aGlzLnByZXNzZWQ9ITApLGImRmEmJjEhPT1hLndoaWNoJiYoYj1HYSksdGhpcy5wcmVzc2VkJiYoYiZHYSYmKHRoaXMucHJlc3NlZD0hMSksdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsYix7cG9pbnRlcnM6W2FdLGNoYW5nZWRQb2ludGVyczpbYV0scG9pbnRlclR5cGU6QmEsc3JjRXZlbnQ6YX0pKX19KTt2YXIgVmE9e3BvaW50ZXJkb3duOkVhLHBvaW50ZXJtb3ZlOkZhLHBvaW50ZXJ1cDpHYSxwb2ludGVyY2FuY2VsOkhhLHBvaW50ZXJvdXQ6SGF9LFdhPXsyOnphLDM6QWEsNDpCYSw1OkNhfSxYYT1cInBvaW50ZXJkb3duXCIsWWE9XCJwb2ludGVybW92ZSBwb2ludGVydXAgcG9pbnRlcmNhbmNlbFwiO2EuTVNQb2ludGVyRXZlbnQmJiFhLlBvaW50ZXJFdmVudCYmKFhhPVwiTVNQb2ludGVyRG93blwiLFlhPVwiTVNQb2ludGVyTW92ZSBNU1BvaW50ZXJVcCBNU1BvaW50ZXJDYW5jZWxcIiksaShNLHgse2hhbmRsZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zdG9yZSxjPSExLGQ9YS50eXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZShcIm1zXCIsXCJcIiksZT1WYVtkXSxmPVdhW2EucG9pbnRlclR5cGVdfHxhLnBvaW50ZXJUeXBlLGc9Zj09emEsaD1yKGIsYS5wb2ludGVySWQsXCJwb2ludGVySWRcIik7ZSZFYSYmKDA9PT1hLmJ1dHRvbnx8Zyk/MD5oJiYoYi5wdXNoKGEpLGg9Yi5sZW5ndGgtMSk6ZSYoR2F8SGEpJiYoYz0hMCksMD5ofHwoYltoXT1hLHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLGUse3BvaW50ZXJzOmIsY2hhbmdlZFBvaW50ZXJzOlthXSxwb2ludGVyVHlwZTpmLHNyY0V2ZW50OmF9KSxjJiZiLnNwbGljZShoLDEpKX19KTt2YXIgWmE9e3RvdWNoc3RhcnQ6RWEsdG91Y2htb3ZlOkZhLHRvdWNoZW5kOkdhLHRvdWNoY2FuY2VsOkhhfSwkYT1cInRvdWNoc3RhcnRcIixfYT1cInRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsXCI7aShOLHgse2hhbmRsZXI6ZnVuY3Rpb24oYSl7dmFyIGI9WmFbYS50eXBlXTtpZihiPT09RWEmJih0aGlzLnN0YXJ0ZWQ9ITApLHRoaXMuc3RhcnRlZCl7dmFyIGM9Ty5jYWxsKHRoaXMsYSxiKTtiJihHYXxIYSkmJmNbMF0ubGVuZ3RoLWNbMV0ubGVuZ3RoPT09MCYmKHRoaXMuc3RhcnRlZD0hMSksdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsYix7cG9pbnRlcnM6Y1swXSxjaGFuZ2VkUG9pbnRlcnM6Y1sxXSxwb2ludGVyVHlwZTp6YSxzcmNFdmVudDphfSl9fX0pO3ZhciBhYj17dG91Y2hzdGFydDpFYSx0b3VjaG1vdmU6RmEsdG91Y2hlbmQ6R2EsdG91Y2hjYW5jZWw6SGF9LGJiPVwidG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWxcIjtpKFAseCx7aGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYj1hYlthLnR5cGVdLGM9US5jYWxsKHRoaXMsYSxiKTtjJiZ0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlcixiLHtwb2ludGVyczpjWzBdLGNoYW5nZWRQb2ludGVyczpjWzFdLHBvaW50ZXJUeXBlOnphLHNyY0V2ZW50OmF9KX19KTt2YXIgY2I9MjUwMCxkYj0yNTtpKFIseCx7aGFuZGxlcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yy5wb2ludGVyVHlwZT09emEsZT1jLnBvaW50ZXJUeXBlPT1CYTtpZighKGUmJmMuc291cmNlQ2FwYWJpbGl0aWVzJiZjLnNvdXJjZUNhcGFiaWxpdGllcy5maXJlc1RvdWNoRXZlbnRzKSl7aWYoZClTLmNhbGwodGhpcyxiLGMpO2Vsc2UgaWYoZSYmVS5jYWxsKHRoaXMsYykpcmV0dXJuO3RoaXMuY2FsbGJhY2soYSxiLGMpfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMudG91Y2guZGVzdHJveSgpLHRoaXMubW91c2UuZGVzdHJveSgpfX0pO3ZhciBlYj11KG5hLnN0eWxlLFwidG91Y2hBY3Rpb25cIiksZmI9ZWIhPT1kLGdiPVwiY29tcHV0ZVwiLGhiPVwiYXV0b1wiLGliPVwibWFuaXB1bGF0aW9uXCIsamI9XCJub25lXCIsa2I9XCJwYW4teFwiLGxiPVwicGFuLXlcIixtYj1YKCk7Vi5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhKXthPT1nYiYmKGE9dGhpcy5jb21wdXRlKCkpLGZiJiZ0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZSYmbWJbYV0mJih0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZVtlYl09YSksdGhpcy5hY3Rpb25zPWEudG9Mb3dlckNhc2UoKS50cmltKCl9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuc2V0KHRoaXMubWFuYWdlci5vcHRpb25zLnRvdWNoQWN0aW9uKX0sY29tcHV0ZTpmdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiBnKHRoaXMubWFuYWdlci5yZWNvZ25pemVycyxmdW5jdGlvbihiKXtrKGIub3B0aW9ucy5lbmFibGUsW2JdKSYmKGE9YS5jb25jYXQoYi5nZXRUb3VjaEFjdGlvbigpKSl9KSxXKGEuam9pbihcIiBcIikpfSxwcmV2ZW50RGVmYXVsdHM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zcmNFdmVudCxjPWEub2Zmc2V0RGlyZWN0aW9uO2lmKHRoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZClyZXR1cm4gdm9pZCBiLnByZXZlbnREZWZhdWx0KCk7dmFyIGQ9dGhpcy5hY3Rpb25zLGU9cChkLGpiKSYmIW1iW2piXSxmPXAoZCxsYikmJiFtYltsYl0sZz1wKGQsa2IpJiYhbWJba2JdO2lmKGUpe3ZhciBoPTE9PT1hLnBvaW50ZXJzLmxlbmd0aCxpPWEuZGlzdGFuY2U8MixqPWEuZGVsdGFUaW1lPDI1MDtpZihoJiZpJiZqKXJldHVybn1yZXR1cm4gZyYmZj92b2lkIDA6ZXx8ZiYmYyZOYXx8ZyYmYyZPYT90aGlzLnByZXZlbnRTcmMoYik6dm9pZCAwfSxwcmV2ZW50U3JjOmZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZD0hMCxhLnByZXZlbnREZWZhdWx0KCl9fTt2YXIgbmI9MSxvYj0yLHBiPTQscWI9OCxyYj1xYixzYj0xNix0Yj0zMjtZLnByb3RvdHlwZT17ZGVmYXVsdHM6e30sc2V0OmZ1bmN0aW9uKGEpe3JldHVybiBsYSh0aGlzLm9wdGlvbnMsYSksdGhpcy5tYW5hZ2VyJiZ0aGlzLm1hbmFnZXIudG91Y2hBY3Rpb24udXBkYXRlKCksdGhpc30scmVjb2duaXplV2l0aDpmdW5jdGlvbihhKXtpZihmKGEsXCJyZWNvZ25pemVXaXRoXCIsdGhpcykpcmV0dXJuIHRoaXM7dmFyIGI9dGhpcy5zaW11bHRhbmVvdXM7cmV0dXJuIGE9XyhhLHRoaXMpLGJbYS5pZF18fChiW2EuaWRdPWEsYS5yZWNvZ25pemVXaXRoKHRoaXMpKSx0aGlzfSxkcm9wUmVjb2duaXplV2l0aDpmdW5jdGlvbihhKXtyZXR1cm4gZihhLFwiZHJvcFJlY29nbml6ZVdpdGhcIix0aGlzKT90aGlzOihhPV8oYSx0aGlzKSxkZWxldGUgdGhpcy5zaW11bHRhbmVvdXNbYS5pZF0sdGhpcyl9LHJlcXVpcmVGYWlsdXJlOmZ1bmN0aW9uKGEpe2lmKGYoYSxcInJlcXVpcmVGYWlsdXJlXCIsdGhpcykpcmV0dXJuIHRoaXM7dmFyIGI9dGhpcy5yZXF1aXJlRmFpbDtyZXR1cm4gYT1fKGEsdGhpcyksLTE9PT1yKGIsYSkmJihiLnB1c2goYSksYS5yZXF1aXJlRmFpbHVyZSh0aGlzKSksdGhpc30sZHJvcFJlcXVpcmVGYWlsdXJlOmZ1bmN0aW9uKGEpe2lmKGYoYSxcImRyb3BSZXF1aXJlRmFpbHVyZVwiLHRoaXMpKXJldHVybiB0aGlzO2E9XyhhLHRoaXMpO3ZhciBiPXIodGhpcy5yZXF1aXJlRmFpbCxhKTtyZXR1cm4gYj4tMSYmdGhpcy5yZXF1aXJlRmFpbC5zcGxpY2UoYiwxKSx0aGlzfSxoYXNSZXF1aXJlRmFpbHVyZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXF1aXJlRmFpbC5sZW5ndGg+MH0sY2FuUmVjb2duaXplV2l0aDpmdW5jdGlvbihhKXtyZXR1cm4hIXRoaXMuc2ltdWx0YW5lb3VzW2EuaWRdfSxlbWl0OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7Yy5tYW5hZ2VyLmVtaXQoYixhKX12YXIgYz10aGlzLGQ9dGhpcy5zdGF0ZTtxYj5kJiZiKGMub3B0aW9ucy5ldmVudCtaKGQpKSxiKGMub3B0aW9ucy5ldmVudCksYS5hZGRpdGlvbmFsRXZlbnQmJmIoYS5hZGRpdGlvbmFsRXZlbnQpLGQ+PXFiJiZiKGMub3B0aW9ucy5ldmVudCtaKGQpKX0sdHJ5RW1pdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jYW5FbWl0KCk/dGhpcy5lbWl0KGEpOnZvaWQodGhpcy5zdGF0ZT10Yil9LGNhbkVtaXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoOyl7aWYoISh0aGlzLnJlcXVpcmVGYWlsW2FdLnN0YXRlJih0YnxuYikpKXJldHVybiExO2ErK31yZXR1cm4hMH0scmVjb2duaXplOmZ1bmN0aW9uKGEpe3ZhciBiPWxhKHt9LGEpO3JldHVybiBrKHRoaXMub3B0aW9ucy5lbmFibGUsW3RoaXMsYl0pPyh0aGlzLnN0YXRlJihyYnxzYnx0YikmJih0aGlzLnN0YXRlPW5iKSx0aGlzLnN0YXRlPXRoaXMucHJvY2VzcyhiKSx2b2lkKHRoaXMuc3RhdGUmKG9ifHBifHFifHNiKSYmdGhpcy50cnlFbWl0KGIpKSk6KHRoaXMucmVzZXQoKSx2b2lkKHRoaXMuc3RhdGU9dGIpKX0scHJvY2VzczpmdW5jdGlvbihhKXt9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7fSxyZXNldDpmdW5jdGlvbigpe319LGkoYWEsWSx7ZGVmYXVsdHM6e3BvaW50ZXJzOjF9LGF0dHJUZXN0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucy5wb2ludGVycztyZXR1cm4gMD09PWJ8fGEucG9pbnRlcnMubGVuZ3RoPT09Yn0scHJvY2VzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnN0YXRlLGM9YS5ldmVudFR5cGUsZD1iJihvYnxwYiksZT10aGlzLmF0dHJUZXN0KGEpO3JldHVybiBkJiYoYyZIYXx8IWUpP2J8c2I6ZHx8ZT9jJkdhP2J8cWI6YiZvYj9ifHBiOm9iOnRifX0pLGkoYmEsYWEse2RlZmF1bHRzOntldmVudDpcInBhblwiLHRocmVzaG9sZDoxMCxwb2ludGVyczoxLGRpcmVjdGlvbjpQYX0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uLGI9W107cmV0dXJuIGEmTmEmJmIucHVzaChsYiksYSZPYSYmYi5wdXNoKGtiKSxifSxkaXJlY3Rpb25UZXN0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucyxjPSEwLGQ9YS5kaXN0YW5jZSxlPWEuZGlyZWN0aW9uLGY9YS5kZWx0YVgsZz1hLmRlbHRhWTtyZXR1cm4gZSZiLmRpcmVjdGlvbnx8KGIuZGlyZWN0aW9uJk5hPyhlPTA9PT1mP0lhOjA+Zj9KYTpLYSxjPWYhPXRoaXMucFgsZD1NYXRoLmFicyhhLmRlbHRhWCkpOihlPTA9PT1nP0lhOjA+Zz9MYTpNYSxjPWchPXRoaXMucFksZD1NYXRoLmFicyhhLmRlbHRhWSkpKSxhLmRpcmVjdGlvbj1lLGMmJmQ+Yi50aHJlc2hvbGQmJmUmYi5kaXJlY3Rpb259LGF0dHJUZXN0OmZ1bmN0aW9uKGEpe3JldHVybiBhYS5wcm90b3R5cGUuYXR0clRlc3QuY2FsbCh0aGlzLGEpJiYodGhpcy5zdGF0ZSZvYnx8ISh0aGlzLnN0YXRlJm9iKSYmdGhpcy5kaXJlY3Rpb25UZXN0KGEpKX0sZW1pdDpmdW5jdGlvbihhKXt0aGlzLnBYPWEuZGVsdGFYLHRoaXMucFk9YS5kZWx0YVk7dmFyIGI9JChhLmRpcmVjdGlvbik7YiYmKGEuYWRkaXRpb25hbEV2ZW50PXRoaXMub3B0aW9ucy5ldmVudCtiKSx0aGlzLl9zdXBlci5lbWl0LmNhbGwodGhpcyxhKX19KSxpKGNhLGFhLHtkZWZhdWx0czp7ZXZlbnQ6XCJwaW5jaFwiLHRocmVzaG9sZDowLHBvaW50ZXJzOjJ9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuW2piXX0sYXR0clRlc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcyxhKSYmKE1hdGguYWJzKGEuc2NhbGUtMSk+dGhpcy5vcHRpb25zLnRocmVzaG9sZHx8dGhpcy5zdGF0ZSZvYil9LGVtaXQ6ZnVuY3Rpb24oYSl7aWYoMSE9PWEuc2NhbGUpe3ZhciBiPWEuc2NhbGU8MT9cImluXCI6XCJvdXRcIjthLmFkZGl0aW9uYWxFdmVudD10aGlzLm9wdGlvbnMuZXZlbnQrYn10aGlzLl9zdXBlci5lbWl0LmNhbGwodGhpcyxhKX19KSxpKGRhLFkse2RlZmF1bHRzOntldmVudDpcInByZXNzXCIscG9pbnRlcnM6MSx0aW1lOjI1MSx0aHJlc2hvbGQ6OX0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5baGJdfSxwcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucyxjPWEucG9pbnRlcnMubGVuZ3RoPT09Yi5wb2ludGVycyxkPWEuZGlzdGFuY2U8Yi50aHJlc2hvbGQsZj1hLmRlbHRhVGltZT5iLnRpbWU7aWYodGhpcy5faW5wdXQ9YSwhZHx8IWN8fGEuZXZlbnRUeXBlJihHYXxIYSkmJiFmKXRoaXMucmVzZXQoKTtlbHNlIGlmKGEuZXZlbnRUeXBlJkVhKXRoaXMucmVzZXQoKSx0aGlzLl90aW1lcj1lKGZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT1yYix0aGlzLnRyeUVtaXQoKX0sYi50aW1lLHRoaXMpO2Vsc2UgaWYoYS5ldmVudFR5cGUmR2EpcmV0dXJuIHJiO3JldHVybiB0Yn0scmVzZXQ6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpfSxlbWl0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhdGU9PT1yYiYmKGEmJmEuZXZlbnRUeXBlJkdhP3RoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCtcInVwXCIsYSk6KHRoaXMuX2lucHV0LnRpbWVTdGFtcD1yYSgpLHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCx0aGlzLl9pbnB1dCkpKX19KSxpKGVhLGFhLHtkZWZhdWx0czp7ZXZlbnQ6XCJyb3RhdGVcIix0aHJlc2hvbGQ6MCxwb2ludGVyczoyfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3JldHVybltqYl19LGF0dHJUZXN0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsYSkmJihNYXRoLmFicyhhLnJvdGF0aW9uKT50aGlzLm9wdGlvbnMudGhyZXNob2xkfHx0aGlzLnN0YXRlJm9iKX19KSxpKGZhLGFhLHtkZWZhdWx0czp7ZXZlbnQ6XCJzd2lwZVwiLHRocmVzaG9sZDoxMCx2ZWxvY2l0eTouMyxkaXJlY3Rpb246TmF8T2EscG9pbnRlcnM6MX0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gYmEucHJvdG90eXBlLmdldFRvdWNoQWN0aW9uLmNhbGwodGhpcyl9LGF0dHJUZXN0OmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5vcHRpb25zLmRpcmVjdGlvbjtyZXR1cm4gYyYoTmF8T2EpP2I9YS5vdmVyYWxsVmVsb2NpdHk6YyZOYT9iPWEub3ZlcmFsbFZlbG9jaXR5WDpjJk9hJiYoYj1hLm92ZXJhbGxWZWxvY2l0eVkpLHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcyxhKSYmYyZhLm9mZnNldERpcmVjdGlvbiYmYS5kaXN0YW5jZT50aGlzLm9wdGlvbnMudGhyZXNob2xkJiZhLm1heFBvaW50ZXJzPT10aGlzLm9wdGlvbnMucG9pbnRlcnMmJnFhKGIpPnRoaXMub3B0aW9ucy52ZWxvY2l0eSYmYS5ldmVudFR5cGUmR2F9LGVtaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9JChhLm9mZnNldERpcmVjdGlvbik7YiYmdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50K2IsYSksdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LGEpfX0pLGkoZ2EsWSx7ZGVmYXVsdHM6e2V2ZW50OlwidGFwXCIscG9pbnRlcnM6MSx0YXBzOjEsaW50ZXJ2YWw6MzAwLHRpbWU6MjUwLHRocmVzaG9sZDo5LHBvc1RocmVzaG9sZDoxMH0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5baWJdfSxwcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucyxjPWEucG9pbnRlcnMubGVuZ3RoPT09Yi5wb2ludGVycyxkPWEuZGlzdGFuY2U8Yi50aHJlc2hvbGQsZj1hLmRlbHRhVGltZTxiLnRpbWU7aWYodGhpcy5yZXNldCgpLGEuZXZlbnRUeXBlJkVhJiYwPT09dGhpcy5jb3VudClyZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO2lmKGQmJmYmJmMpe2lmKGEuZXZlbnRUeXBlIT1HYSlyZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO3ZhciBnPXRoaXMucFRpbWU/YS50aW1lU3RhbXAtdGhpcy5wVGltZTxiLmludGVydmFsOiEwLGg9IXRoaXMucENlbnRlcnx8SCh0aGlzLnBDZW50ZXIsYS5jZW50ZXIpPGIucG9zVGhyZXNob2xkO3RoaXMucFRpbWU9YS50aW1lU3RhbXAsdGhpcy5wQ2VudGVyPWEuY2VudGVyLGgmJmc/dGhpcy5jb3VudCs9MTp0aGlzLmNvdW50PTEsdGhpcy5faW5wdXQ9YTt2YXIgaT10aGlzLmNvdW50JWIudGFwcztpZigwPT09aSlyZXR1cm4gdGhpcy5oYXNSZXF1aXJlRmFpbHVyZXMoKT8odGhpcy5fdGltZXI9ZShmdW5jdGlvbigpe3RoaXMuc3RhdGU9cmIsdGhpcy50cnlFbWl0KCl9LGIuaW50ZXJ2YWwsdGhpcyksb2IpOnJifXJldHVybiB0Yn0sZmFpbFRpbWVvdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZXI9ZShmdW5jdGlvbigpe3RoaXMuc3RhdGU9dGJ9LHRoaXMub3B0aW9ucy5pbnRlcnZhbCx0aGlzKSx0Yn0scmVzZXQ6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpfSxlbWl0OmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT09cmImJih0aGlzLl9pbnB1dC50YXBDb3VudD10aGlzLmNvdW50LHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCx0aGlzLl9pbnB1dCkpfX0pLGhhLlZFUlNJT049XCIyLjAuOFwiLGhhLmRlZmF1bHRzPXtkb21FdmVudHM6ITEsdG91Y2hBY3Rpb246Z2IsZW5hYmxlOiEwLGlucHV0VGFyZ2V0Om51bGwsaW5wdXRDbGFzczpudWxsLHByZXNldDpbW2VhLHtlbmFibGU6ITF9XSxbY2Ese2VuYWJsZTohMX0sW1wicm90YXRlXCJdXSxbZmEse2RpcmVjdGlvbjpOYX1dLFtiYSx7ZGlyZWN0aW9uOk5hfSxbXCJzd2lwZVwiXV0sW2dhXSxbZ2Ese2V2ZW50OlwiZG91YmxldGFwXCIsdGFwczoyfSxbXCJ0YXBcIl1dLFtkYV1dLGNzc1Byb3BzOnt1c2VyU2VsZWN0Olwibm9uZVwiLHRvdWNoU2VsZWN0Olwibm9uZVwiLHRvdWNoQ2FsbG91dDpcIm5vbmVcIixjb250ZW50Wm9vbWluZzpcIm5vbmVcIix1c2VyRHJhZzpcIm5vbmVcIix0YXBIaWdobGlnaHRDb2xvcjpcInJnYmEoMCwwLDAsMClcIn19O3ZhciB1Yj0xLHZiPTI7aWEucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGxhKHRoaXMub3B0aW9ucyxhKSxhLnRvdWNoQWN0aW9uJiZ0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLGEuaW5wdXRUYXJnZXQmJih0aGlzLmlucHV0LmRlc3Ryb3koKSx0aGlzLmlucHV0LnRhcmdldD1hLmlucHV0VGFyZ2V0LHRoaXMuaW5wdXQuaW5pdCgpKSx0aGlzfSxzdG9wOmZ1bmN0aW9uKGEpe3RoaXMuc2Vzc2lvbi5zdG9wcGVkPWE/dmI6dWJ9LHJlY29nbml6ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlc3Npb247aWYoIWIuc3RvcHBlZCl7dGhpcy50b3VjaEFjdGlvbi5wcmV2ZW50RGVmYXVsdHMoYSk7dmFyIGMsZD10aGlzLnJlY29nbml6ZXJzLGU9Yi5jdXJSZWNvZ25pemVyOyghZXx8ZSYmZS5zdGF0ZSZyYikmJihlPWIuY3VyUmVjb2duaXplcj1udWxsKTtmb3IodmFyIGY9MDtmPGQubGVuZ3RoOyljPWRbZl0sYi5zdG9wcGVkPT09dmJ8fGUmJmMhPWUmJiFjLmNhblJlY29nbml6ZVdpdGgoZSk/Yy5yZXNldCgpOmMucmVjb2duaXplKGEpLCFlJiZjLnN0YXRlJihvYnxwYnxxYikmJihlPWIuY3VyUmVjb2duaXplcj1jKSxmKyt9fSxnZXQ6ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIFkpcmV0dXJuIGE7Zm9yKHZhciBiPXRoaXMucmVjb2duaXplcnMsYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGJbY10ub3B0aW9ucy5ldmVudD09YSlyZXR1cm4gYltjXTtyZXR1cm4gbnVsbH0sYWRkOmZ1bmN0aW9uKGEpe2lmKGYoYSxcImFkZFwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMuZ2V0KGEub3B0aW9ucy5ldmVudCk7cmV0dXJuIGImJnRoaXMucmVtb3ZlKGIpLHRoaXMucmVjb2duaXplcnMucHVzaChhKSxhLm1hbmFnZXI9dGhpcyx0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLGF9LHJlbW92ZTpmdW5jdGlvbihhKXtpZihmKGEsXCJyZW1vdmVcIix0aGlzKSlyZXR1cm4gdGhpcztpZihhPXRoaXMuZ2V0KGEpKXt2YXIgYj10aGlzLnJlY29nbml6ZXJzLGM9cihiLGEpOy0xIT09YyYmKGIuc3BsaWNlKGMsMSksdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKSl9cmV0dXJuIHRoaXN9LG9uOmZ1bmN0aW9uKGEsYil7aWYoYSE9PWQmJmIhPT1kKXt2YXIgYz10aGlzLmhhbmRsZXJzO3JldHVybiBnKHEoYSksZnVuY3Rpb24oYSl7Y1thXT1jW2FdfHxbXSxjW2FdLnB1c2goYil9KSx0aGlzfX0sb2ZmOmZ1bmN0aW9uKGEsYil7aWYoYSE9PWQpe3ZhciBjPXRoaXMuaGFuZGxlcnM7cmV0dXJuIGcocShhKSxmdW5jdGlvbihhKXtiP2NbYV0mJmNbYV0uc3BsaWNlKHIoY1thXSxiKSwxKTpkZWxldGUgY1thXX0pLHRoaXN9fSxlbWl0OmZ1bmN0aW9uKGEsYil7dGhpcy5vcHRpb25zLmRvbUV2ZW50cyYma2EoYSxiKTt2YXIgYz10aGlzLmhhbmRsZXJzW2FdJiZ0aGlzLmhhbmRsZXJzW2FdLnNsaWNlKCk7aWYoYyYmYy5sZW5ndGgpe2IudHlwZT1hLGIucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtiLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCl9O2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7KWNbZF0oYiksZCsrfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudCYmamEodGhpcywhMSksdGhpcy5oYW5kbGVycz17fSx0aGlzLnNlc3Npb249e30sdGhpcy5pbnB1dC5kZXN0cm95KCksdGhpcy5lbGVtZW50PW51bGx9fSxsYShoYSx7SU5QVVRfU1RBUlQ6RWEsSU5QVVRfTU9WRTpGYSxJTlBVVF9FTkQ6R2EsSU5QVVRfQ0FOQ0VMOkhhLFNUQVRFX1BPU1NJQkxFOm5iLFNUQVRFX0JFR0FOOm9iLFNUQVRFX0NIQU5HRUQ6cGIsU1RBVEVfRU5ERUQ6cWIsU1RBVEVfUkVDT0dOSVpFRDpyYixTVEFURV9DQU5DRUxMRUQ6c2IsU1RBVEVfRkFJTEVEOnRiLERJUkVDVElPTl9OT05FOklhLERJUkVDVElPTl9MRUZUOkphLERJUkVDVElPTl9SSUdIVDpLYSxESVJFQ1RJT05fVVA6TGEsRElSRUNUSU9OX0RPV046TWEsRElSRUNUSU9OX0hPUklaT05UQUw6TmEsRElSRUNUSU9OX1ZFUlRJQ0FMOk9hLERJUkVDVElPTl9BTEw6UGEsTWFuYWdlcjppYSxJbnB1dDp4LFRvdWNoQWN0aW9uOlYsVG91Y2hJbnB1dDpQLE1vdXNlSW5wdXQ6TCxQb2ludGVyRXZlbnRJbnB1dDpNLFRvdWNoTW91c2VJbnB1dDpSLFNpbmdsZVRvdWNoSW5wdXQ6TixSZWNvZ25pemVyOlksQXR0clJlY29nbml6ZXI6YWEsVGFwOmdhLFBhbjpiYSxTd2lwZTpmYSxQaW5jaDpjYSxSb3RhdGU6ZWEsUHJlc3M6ZGEsb246bSxvZmY6bixlYWNoOmcsbWVyZ2U6dGEsZXh0ZW5kOnNhLGFzc2lnbjpsYSxpbmhlcml0OmksYmluZEZuOmoscHJlZml4ZWQ6dX0pO3ZhciB3Yj1cInVuZGVmaW5lZFwiIT10eXBlb2YgYT9hOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6e307d2IuSGFtbWVyPWhhLFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gaGF9KTpcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1oYTphW2NdPWhhfSh3aW5kb3csZG9jdW1lbnQsXCJIYW1tZXJcIik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYW1tZXIubWluLmpzLm1hcCIsIiFmdW5jdGlvbihlLHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9dCgpOmUuU3RhcnRBdWRpb0NvbnRleHQ9dCgpfSh0aGlzLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD1lLmNyZWF0ZUJ1ZmZlcigxLDEsZS5zYW1wbGVSYXRlKSxuPWUuY3JlYXRlQnVmZmVyU291cmNlKCk7bi5idWZmZXI9dCxuLmNvbm5lY3QoZS5kZXN0aW5hdGlvbiksbi5zdGFydCgwKSxlLnJlc3VtZSYmZS5yZXN1bWUoKX1mdW5jdGlvbiB0KGUpe3JldHVyblwicnVubmluZ1wiPT09ZS5zdGF0ZX1mdW5jdGlvbiBuKGUsbil7ZnVuY3Rpb24gaSgpe3QoZSk/bigpOihyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaSksZS5yZXN1bWUmJmUucmVzdW1lKCkpfXQoZSk/bigpOmkoKX1mdW5jdGlvbiBpKGUsdCxuKXtpZihBcnJheS5pc0FycmF5KGUpfHxOb2RlTGlzdCYmZSBpbnN0YW5jZW9mIE5vZGVMaXN0KWZvcih2YXIgbz0wO288ZS5sZW5ndGg7bysrKWkoZVtvXSx0LG4pO2Vsc2UgaWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpaShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGUpLHQsbik7ZWxzZSBpZihlLmpxdWVyeSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS50b0FycmF5KWkoZS50b0FycmF5KCksdCxuKTtlbHNlIGlmKEVsZW1lbnQmJmUgaW5zdGFuY2VvZiBFbGVtZW50KXt2YXIgcz1uZXcgZChlLG4pO3QucHVzaChzKX19ZnVuY3Rpb24gbyhlLHQsbyl7dmFyIGQ9bmV3IFByb21pc2UoZnVuY3Rpb24odCl7bihlLHQpfSkscz1bXTtyZXR1cm4gdHx8KHQ9ZG9jdW1lbnQuYm9keSksaSh0LHMsZSksZC50aGVuKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTxzLmxlbmd0aDtlKyspc1tlXS5kaXNwb3NlKCk7cz1udWxsLG8mJm8oKX0pLGR9Y29uc29sZS5sb2coXCJzdGFydFwiKTt2YXIgZD1mdW5jdGlvbihlLHQpe3RoaXMuX2RyYWdnZWQ9ITEsdGhpcy5fZWxlbWVudD1lLHRoaXMuX2JpbmRlZE1vdmU9dGhpcy5fbW92ZWQuYmluZCh0aGlzKSx0aGlzLl9iaW5kZWRFbmQ9dGhpcy5fZW5kZWQuYmluZCh0aGlzLHQpLGUuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIix0aGlzLl9iaW5kZWRFbmQpLGUuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMuX2JpbmRlZE1vdmUpLGUuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5fYmluZGVkRW5kKSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5fYmluZGVkRW5kKX07cmV0dXJuIGQucHJvdG90eXBlLl9tb3ZlZD1mdW5jdGlvbihlKXt0aGlzLl9kcmFnZ2VkPSEwfSxkLnByb3RvdHlwZS5fZW5kZWQ9ZnVuY3Rpb24odCl7dGhpcy5fZHJhZ2dlZHx8ZSh0KSx0aGlzLl9kcmFnZ2VkPSExfSxkLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHRoaXMuX2JpbmRlZEVuZCksdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5fYmluZGVkTW92ZSksdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLl9iaW5kZWRFbmQpLHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLl9iaW5kZWRFbmQpLHRoaXMuX2JpbmRlZE1vdmU9bnVsbCx0aGlzLl9iaW5kZWRFbmQ9bnVsbCx0aGlzLl9lbGVtZW50PW51bGx9LG99KTsiLCIhZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIGUoKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOnQuVG9uZT1lKCl9KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KHQpe3QoZSl9dmFyIGU7cmV0dXJuIGZ1bmN0aW9uKHQpe2U9dCgpfShmdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKHQsZSl7dGhpcy5pc1VuZGVmKHQpfHwxPT09dD90aGlzLmlucHV0PXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk6dD4xJiYodGhpcy5pbnB1dD1uZXcgQXJyYXkodCkpLHRoaXMuaXNVbmRlZihlKXx8MT09PWU/dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKTplPjEmJih0aGlzLm91dHB1dD1uZXcgQXJyYXkodCkpfTt0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSxpLG4pe2lmKHRoaXMuaXNPYmplY3QoZSkpbj1pO2Vsc2UgaWYodGhpcy5pc1N0cmluZyhlKSl7dmFyIHM9e307c1tlXT1pLGU9c310OmZvcih2YXIgbyBpbiBlKXtpPWVbb107dmFyIHI9dGhpcztpZigtMSE9PW8uaW5kZXhPZihcIi5cIikpe2Zvcih2YXIgYT1vLnNwbGl0KFwiLlwiKSxoPTA7aDxhLmxlbmd0aC0xO2grKylpZigocj1yW2FbaF1dKWluc3RhbmNlb2YgdCl7YS5zcGxpY2UoMCxoKzEpO3ZhciBsPWEuam9pbihcIi5cIik7ci5zZXQobCxpKTtjb250aW51ZSB0fW89YVthLmxlbmd0aC0xXX12YXIgdT1yW29dO3RoaXMuaXNVbmRlZih1KXx8KHQuU2lnbmFsJiZ1IGluc3RhbmNlb2YgdC5TaWduYWx8fHQuUGFyYW0mJnUgaW5zdGFuY2VvZiB0LlBhcmFtP3UudmFsdWUhPT1pJiYodGhpcy5pc1VuZGVmKG4pP3UudmFsdWU9aTp1LnJhbXBUbyhpLG4pKTp1IGluc3RhbmNlb2YgQXVkaW9QYXJhbT91LnZhbHVlIT09aSYmKHUudmFsdWU9aSk6dSBpbnN0YW5jZW9mIHQ/dS5zZXQoaSk6dSE9PWkmJihyW29dPWkpKX1yZXR1cm4gdGhpc30sdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3RoaXMuaXNVbmRlZihlKT9lPXRoaXMuX2NvbGxlY3REZWZhdWx0cyh0aGlzLmNvbnN0cnVjdG9yKTp0aGlzLmlzU3RyaW5nKGUpJiYoZT1bZV0pO2Zvcih2YXIgaT17fSxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBzPWVbbl0sbz10aGlzLHI9aTtpZigtMSE9PXMuaW5kZXhPZihcIi5cIikpe2Zvcih2YXIgYT1zLnNwbGl0KFwiLlwiKSxoPTA7aDxhLmxlbmd0aC0xO2grKyl7dmFyIGw9YVtoXTtyW2xdPXJbbF18fHt9LHI9cltsXSxvPW9bbF19cz1hW2EubGVuZ3RoLTFdfXZhciB1PW9bc107dGhpcy5pc09iamVjdChlW3NdKT9yW3NdPXUuZ2V0KCk6dC5TaWduYWwmJnUgaW5zdGFuY2VvZiB0LlNpZ25hbD9yW3NdPXUudmFsdWU6dC5QYXJhbSYmdSBpbnN0YW5jZW9mIHQuUGFyYW0/cltzXT11LnZhbHVlOnUgaW5zdGFuY2VvZiBBdWRpb1BhcmFtP3Jbc109dS52YWx1ZTp1IGluc3RhbmNlb2YgdD9yW3NdPXUuZ2V0KCk6dGhpcy5pc0Z1bmN0aW9uKHUpfHx0aGlzLmlzVW5kZWYodSl8fChyW3NdPXUpfXJldHVybiBpfSx0LnByb3RvdHlwZS5fY29sbGVjdERlZmF1bHRzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2lmKHRoaXMuaXNVbmRlZih0LmRlZmF1bHRzKXx8KGU9T2JqZWN0LmtleXModC5kZWZhdWx0cykpLCF0aGlzLmlzVW5kZWYodC5fc3VwZXIpKWZvcih2YXIgaT10aGlzLl9jb2xsZWN0RGVmYXVsdHModC5fc3VwZXIpLG49MDtuPGkubGVuZ3RoO24rKyktMT09PWUuaW5kZXhPZihpW25dKSYmZS5wdXNoKGlbbl0pO3JldHVybiBlfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgZSBpbiB0KXt2YXIgaT1lWzBdLm1hdGNoKC9eW0EtWl0kLyksbj10W2VdPT09dGhpcy5jb25zdHJ1Y3RvcjtpZih0aGlzLmlzRnVuY3Rpb24odFtlXSkmJmkmJm4pcmV0dXJuIGV9cmV0dXJuXCJUb25lXCJ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcIm51bWJlck9mSW5wdXRzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlucHV0P3RoaXMuaXNBcnJheSh0aGlzLmlucHV0KT90aGlzLmlucHV0Lmxlbmd0aDoxOjB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwibnVtYmVyT2ZPdXRwdXRzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm91dHB1dD90aGlzLmlzQXJyYXkodGhpcy5vdXRwdXQpP3RoaXMub3V0cHV0Lmxlbmd0aDoxOjB9fSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVW5kZWYodGhpcy5pbnB1dCl8fCh0aGlzLmlucHV0IGluc3RhbmNlb2YgQXVkaW9Ob2RlJiZ0aGlzLmlucHV0LmRpc2Nvbm5lY3QoKSx0aGlzLmlucHV0PW51bGwpLHRoaXMuaXNVbmRlZih0aGlzLm91dHB1dCl8fCh0aGlzLm91dHB1dCBpbnN0YW5jZW9mIEF1ZGlvTm9kZSYmdGhpcy5vdXRwdXQuZGlzY29ubmVjdCgpLHRoaXMub3V0cHV0PW51bGwpLHRoaXN9LHQucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBBcnJheS5pc0FycmF5KHRoaXMub3V0cHV0KT8oZT10aGlzLmRlZmF1bHRBcmcoZSwwKSx0aGlzLm91dHB1dFtlXS5jb25uZWN0KHQsMCxpKSk6dGhpcy5vdXRwdXQuY29ubmVjdCh0LGUsaSksdGhpc30sdC5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbih0LGUsaSl7dGhpcy5pc0FycmF5KHRoaXMub3V0cHV0KT90aGlzLmlzTnVtYmVyKHQpP3RoaXMub3V0cHV0W3RdLmRpc2Nvbm5lY3QoKTooZT10aGlzLmRlZmF1bHRBcmcoZSwwKSx0aGlzLm91dHB1dFtlXS5kaXNjb25uZWN0KHQsMCxpKSk6dGhpcy5vdXRwdXQuZGlzY29ubmVjdC5hcHBseSh0aGlzLm91dHB1dCxhcmd1bWVudHMpfSx0LnByb3RvdHlwZS5jb25uZWN0U2VyaWVzPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih2YXIgdD1hcmd1bWVudHNbMF0sZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBpPWFyZ3VtZW50c1tlXTt0LmNvbm5lY3QoaSksdD1pfXJldHVybiB0aGlzfSx0LnByb3RvdHlwZS5jaGFpbj1mdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MClmb3IodmFyIHQ9dGhpcyxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIGk9YXJndW1lbnRzW2VdO3QuY29ubmVjdChpKSx0PWl9cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLmZhbj1mdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MClmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXRoaXMuY29ubmVjdChhcmd1bWVudHNbdF0pO3JldHVybiB0aGlzfSxBdWRpb05vZGUucHJvdG90eXBlLmNoYWluPXQucHJvdG90eXBlLmNoYWluLEF1ZGlvTm9kZS5wcm90b3R5cGUuZmFuPXQucHJvdG90eXBlLmZhbix0LnByb3RvdHlwZS5kZWZhdWx0QXJnPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5pc09iamVjdCh0KSYmdGhpcy5pc09iamVjdChlKSl7dmFyIGk9e307Zm9yKHZhciBuIGluIHQpaVtuXT10aGlzLmRlZmF1bHRBcmcoZVtuXSx0W25dKTtmb3IodmFyIHMgaW4gZSlpW3NdPXRoaXMuZGVmYXVsdEFyZyh0W3NdLGVbc10pO3JldHVybiBpfXJldHVybiB0aGlzLmlzVW5kZWYodCk/ZTp0fSx0LnByb3RvdHlwZS5vcHRpb25zT2JqZWN0PWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj17fTtpZigxPT09dC5sZW5ndGgmJnRoaXMuaXNPYmplY3QodFswXSkpbj10WzBdO2Vsc2UgZm9yKHZhciBzPTA7czxlLmxlbmd0aDtzKyspbltlW3NdXT10W3NdO3JldHVybiB0aGlzLmlzVW5kZWYoaSk/bjp0aGlzLmRlZmF1bHRBcmcobixpKX0sdC5wcm90b3R5cGUuaXNVbmRlZj1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dH0sdC5wcm90b3R5cGUuaXNGdW5jdGlvbj1mdW5jdGlvbih0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fSx0LnByb3RvdHlwZS5pc051bWJlcj1mdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdH0sdC5wcm90b3R5cGUuaXNPYmplY3Q9ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSYmdC5jb25zdHJ1Y3Rvcj09PU9iamVjdH0sdC5wcm90b3R5cGUuaXNCb29sZWFuPWZ1bmN0aW9uKHQpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgdH0sdC5wcm90b3R5cGUuaXNBcnJheT1mdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KX0sdC5wcm90b3R5cGUuaXNTdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHR9LHQubm9PcD1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUuX3JlYWRPbmx5PWZ1bmN0aW9uKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpZm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdGhpcy5fcmVhZE9ubHkodFtlXSk7ZWxzZSBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyx0LHt3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwfSl9LHQucHJvdG90eXBlLl93cml0YWJsZT1mdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRoaXMuX3dyaXRhYmxlKHRbZV0pO2Vsc2UgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsdCx7d3JpdGFibGU6ITB9KX0sdC5TdGF0ZT17U3RhcnRlZDpcInN0YXJ0ZWRcIixTdG9wcGVkOlwic3RvcHBlZFwiLFBhdXNlZDpcInBhdXNlZFwifSx0LnByb3RvdHlwZS5lcXVhbFBvd2VyU2NhbGU9ZnVuY3Rpb24odCl7dmFyIGU9LjUqTWF0aC5QSTtyZXR1cm4gTWF0aC5zaW4odCplKX0sdC5wcm90b3R5cGUuZGJUb0dhaW49ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KDIsdC82KX0sdC5wcm90b3R5cGUuZ2FpblRvRGI9ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubG9nKHQpL01hdGguTE4xMCoyMH0sdC5wcm90b3R5cGUuaW50ZXJ2YWxUb0ZyZXF1ZW5jeVJhdGlvPWZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnBvdygyLHQvMTIpfSx0LnByb3RvdHlwZS5ub3c9ZnVuY3Rpb24oKXtyZXR1cm4gdC5jb250ZXh0Lm5vdygpfSx0Lm5vdz1mdW5jdGlvbigpe3JldHVybiB0LmNvbnRleHQubm93KCl9LHQuZXh0ZW5kPWZ1bmN0aW9uKGUsaSl7ZnVuY3Rpb24gbigpe310LnByb3RvdHlwZS5pc1VuZGVmKGkpJiYoaT10KSxuLnByb3RvdHlwZT1pLnByb3RvdHlwZSxlLnByb3RvdHlwZT1uZXcgbixlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuX3N1cGVyPWl9O3ZhciBlO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImNvbnRleHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9LHNldDpmdW5jdGlvbihpKXtlPXQuQ29udGV4dCYmaSBpbnN0YW5jZW9mIHQuQ29udGV4dD9pOm5ldyB0LkNvbnRleHQoaSksdC5Db250ZXh0JiZ0LkNvbnRleHQuZW1pdChcImluaXRcIixlKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJjb250ZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LmNvbnRleHR9fSksdC5zZXRDb250ZXh0PWZ1bmN0aW9uKGUpe3QuY29udGV4dD1lfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJibG9ja1RpbWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDEyOC90aGlzLmNvbnRleHQuc2FtcGxlUmF0ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJzYW1wbGVUaW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiAxL3RoaXMuY29udGV4dC5zYW1wbGVSYXRlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwic3VwcG9ydGVkXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIkF1ZGlvQ29udGV4dFwiKXx8d2luZG93Lmhhc093blByb3BlcnR5KFwid2Via2l0QXVkaW9Db250ZXh0XCIpLGU9d2luZG93Lmhhc093blByb3BlcnR5KFwiUHJvbWlzZVwiKSxpPXdpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIldvcmtlclwiKTtyZXR1cm4gdCYmZSYmaX19KSx0LnZlcnNpb249XCJyMTBcIix3aW5kb3cuVE9ORV9TSUxFTkNFX1ZFUlNJT05fTE9HR0lOR3x8Y29uc29sZS5sb2coXCIlYyAqIFRvbmUuanMgXCIrdC52ZXJzaW9uK1wiICogXCIsXCJiYWNrZ3JvdW5kOiAjMDAwOyBjb2xvcjogI2ZmZlwiKSx0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5TaWduYWxCYXNlPWZ1bmN0aW9uKCl7fSx0LmV4dGVuZCh0LlNpZ25hbEJhc2UpLHQuU2lnbmFsQmFzZS5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlLGksbil7cmV0dXJuIHQuU2lnbmFsJiZ0LlNpZ25hbD09PWUuY29uc3RydWN0b3J8fHQuUGFyYW0mJnQuUGFyYW09PT1lLmNvbnN0cnVjdG9yfHx0LlRpbWVsaW5lU2lnbmFsJiZ0LlRpbWVsaW5lU2lnbmFsPT09ZS5jb25zdHJ1Y3Rvcj8oZS5fcGFyYW0uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKDApLGUuX3BhcmFtLnZhbHVlPTAsZS5vdmVycmlkZGVuPSEwKTplIGluc3RhbmNlb2YgQXVkaW9QYXJhbSYmKGUuY2FuY2VsU2NoZWR1bGVkVmFsdWVzKDApLGUudmFsdWU9MCksdC5wcm90b3R5cGUuY29ubmVjdC5jYWxsKHRoaXMsZSxpLG4pLHRoaXN9LHQuU2lnbmFsQmFzZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuV2F2ZVNoYXBlcj1mdW5jdGlvbih0LGUpe3RoaXMuX3NoYXBlcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVXYXZlU2hhcGVyKCksdGhpcy5fY3VydmU9bnVsbCxBcnJheS5pc0FycmF5KHQpP3RoaXMuY3VydmU9dDppc0Zpbml0ZSh0KXx8dGhpcy5pc1VuZGVmKHQpP3RoaXMuX2N1cnZlPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5kZWZhdWx0QXJnKHQsMTAyNCkpOnRoaXMuaXNGdW5jdGlvbih0KSYmKHRoaXMuX2N1cnZlPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5kZWZhdWx0QXJnKGUsMTAyNCkpLHRoaXMuc2V0TWFwKHQpKX0sdC5leHRlbmQodC5XYXZlU2hhcGVyLHQuU2lnbmFsQmFzZSksdC5XYXZlU2hhcGVyLnByb3RvdHlwZS5zZXRNYXA9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsaT10aGlzLl9jdXJ2ZS5sZW5ndGg7ZTxpO2UrKyl7dmFyIG49ZS8oaS0xKSoyLTE7dGhpcy5fY3VydmVbZV09dChuLGUpfXJldHVybiB0aGlzLl9zaGFwZXIuY3VydmU9dGhpcy5fY3VydmUsdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuV2F2ZVNoYXBlci5wcm90b3R5cGUsXCJjdXJ2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhcGVyLmN1cnZlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY3VydmU9bmV3IEZsb2F0MzJBcnJheSh0KSx0aGlzLl9zaGFwZXIuY3VydmU9dGhpcy5fY3VydmV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuV2F2ZVNoYXBlci5wcm90b3R5cGUsXCJvdmVyc2FtcGxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFwZXIub3ZlcnNhbXBsZX0sc2V0OmZ1bmN0aW9uKHQpe2lmKC0xPT09W1wibm9uZVwiLFwiMnhcIixcIjR4XCJdLmluZGV4T2YodCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUb25lLldhdmVTaGFwZXI6IG92ZXJzYW1wbGluZyBtdXN0IGJlIGVpdGhlciAnbm9uZScsICcyeCcsIG9yICc0eCdcIik7dGhpcy5fc2hhcGVyLm92ZXJzYW1wbGU9dH19KSx0LldhdmVTaGFwZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NoYXBlci5kaXNjb25uZWN0KCksdGhpcy5fc2hhcGVyPW51bGwsdGhpcy5fY3VydmU9bnVsbCx0aGlzfSx0LldhdmVTaGFwZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlRpbWVCYXNlPWZ1bmN0aW9uKGUsaSl7aWYoISh0aGlzIGluc3RhbmNlb2YgdC5UaW1lQmFzZSkpcmV0dXJuIG5ldyB0LlRpbWVCYXNlKGUsaSk7aWYodGhpcy5fZXhwcj10aGlzLl9ub09wLGUgaW5zdGFuY2VvZiB0LlRpbWVCYXNlKXRoaXMuY29weShlKTtlbHNlIGlmKCF0aGlzLmlzVW5kZWYoaSl8fHRoaXMuaXNOdW1iZXIoZSkpe2k9dGhpcy5kZWZhdWx0QXJnKGksdGhpcy5fZGVmYXVsdFVuaXRzKTt2YXIgbj10aGlzLl9wcmltYXJ5RXhwcmVzc2lvbnNbaV0ubWV0aG9kO3RoaXMuX2V4cHI9bi5iaW5kKHRoaXMsZSl9ZWxzZSB0aGlzLmlzU3RyaW5nKGUpP3RoaXMuc2V0KGUpOnRoaXMuaXNVbmRlZihlKSYmKHRoaXMuX2V4cHI9dGhpcy5fZGVmYXVsdEV4cHIoKSl9LHQuZXh0ZW5kKHQuVGltZUJhc2UpLHQuVGltZUJhc2UucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZXhwcj10aGlzLl9wYXJzZUV4cHJTdHJpbmcodCksdGhpc30sdC5UaW1lQmFzZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgdGhpcy5jb25zdHJ1Y3RvcjtyZXR1cm4gdC5jb3B5KHRoaXMpLHR9LHQuVGltZUJhc2UucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7dmFyIGU9dC5fZXhwcigpO3JldHVybiB0aGlzLnNldChlKX0sdC5UaW1lQmFzZS5wcm90b3R5cGUuX3ByaW1hcnlFeHByZXNzaW9ucz17bjp7cmVnZXhwOi9eKFxcZCspbi9pLG1ldGhvZDpmdW5jdGlvbih0KXtyZXR1cm4gdD1wYXJzZUludCh0KSwxPT09dD90aGlzLl9iZWF0c1RvVW5pdHModGhpcy5fdGltZVNpZ25hdHVyZSgpKTp0aGlzLl9iZWF0c1RvVW5pdHMoNC90KX19LHQ6e3JlZ2V4cDovXihcXGQrKXQvaSxtZXRob2Q6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9cGFyc2VJbnQodCksdGhpcy5fYmVhdHNUb1VuaXRzKDgvKDMqcGFyc2VJbnQodCkpKX19LG06e3JlZ2V4cDovXihcXGQrKW0vaSxtZXRob2Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JlYXRzVG9Vbml0cyhwYXJzZUludCh0KSp0aGlzLl90aW1lU2lnbmF0dXJlKCkpfX0saTp7cmVnZXhwOi9eKFxcZCspaS9pLG1ldGhvZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdGlja3NUb1VuaXRzKHBhcnNlSW50KHQpKX19LGh6OntyZWdleHA6L14oXFxkKyg/OlxcLlxcZCspPyloei9pLG1ldGhvZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZnJlcXVlbmN5VG9Vbml0cyhwYXJzZUZsb2F0KHQpKX19LHRyOntyZWdleHA6L14oXFxkKyg/OlxcLlxcZCspPyk6KFxcZCsoPzpcXC5cXGQrKT8pOj8oXFxkKyg/OlxcLlxcZCspPyk/LyxtZXRob2Q6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPTA7cmV0dXJuIHQmJlwiMFwiIT09dCYmKG4rPXRoaXMuX2JlYXRzVG9Vbml0cyh0aGlzLl90aW1lU2lnbmF0dXJlKCkqcGFyc2VGbG9hdCh0KSkpLGUmJlwiMFwiIT09ZSYmKG4rPXRoaXMuX2JlYXRzVG9Vbml0cyhwYXJzZUZsb2F0KGUpKSksaSYmXCIwXCIhPT1pJiYobis9dGhpcy5fYmVhdHNUb1VuaXRzKHBhcnNlRmxvYXQoaSkvNCkpLG59fSxzOntyZWdleHA6L14oXFxkKyg/OlxcLlxcZCspP3MpLyxtZXRob2Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NlY29uZHNUb1VuaXRzKHBhcnNlRmxvYXQodCkpfX0sc2FtcGxlczp7cmVnZXhwOi9eKFxcZCspc2FtcGxlcy8sbWV0aG9kOmZ1bmN0aW9uKHQpe3JldHVybiBwYXJzZUludCh0KS90aGlzLmNvbnRleHQuc2FtcGxlUmF0ZX19LGRlZmF1bHQ6e3JlZ2V4cDovXihcXGQrKD86XFwuXFxkKyk/KS8sbWV0aG9kOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wcmltYXJ5RXhwcmVzc2lvbnNbdGhpcy5fZGVmYXVsdFVuaXRzXS5tZXRob2QuY2FsbCh0aGlzLHQpfX19LHQuVGltZUJhc2UucHJvdG90eXBlLl9iaW5hcnlFeHByZXNzaW9ucz17XCIrXCI6e3JlZ2V4cDovXlxcKy8scHJlY2VkZW5jZToyLG1ldGhvZDpmdW5jdGlvbih0LGUpe3JldHVybiB0KCkrZSgpfX0sXCItXCI6e3JlZ2V4cDovXlxcLS8scHJlY2VkZW5jZToyLG1ldGhvZDpmdW5jdGlvbih0LGUpe3JldHVybiB0KCktZSgpfX0sXCIqXCI6e3JlZ2V4cDovXlxcKi8scHJlY2VkZW5jZToxLG1ldGhvZDpmdW5jdGlvbih0LGUpe3JldHVybiB0KCkqZSgpfX0sXCIvXCI6e3JlZ2V4cDovXlxcLy8scHJlY2VkZW5jZToxLG1ldGhvZDpmdW5jdGlvbih0LGUpe3JldHVybiB0KCkvZSgpfX19LHQuVGltZUJhc2UucHJvdG90eXBlLl91bmFyeUV4cHJlc3Npb25zPXtuZWc6e3JlZ2V4cDovXlxcLS8sbWV0aG9kOmZ1bmN0aW9uKHQpe3JldHVybi10KCl9fX0sdC5UaW1lQmFzZS5wcm90b3R5cGUuX3N5bnRheEdsdWU9e1wiKFwiOntyZWdleHA6L15cXCgvfSxcIilcIjp7cmVnZXhwOi9eXFwpL319LHQuVGltZUJhc2UucHJvdG90eXBlLl90b2tlbml6ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9LTEsaT1bXTt0Lmxlbmd0aD4wOyl7dmFyIG49ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9W1wiX2JpbmFyeUV4cHJlc3Npb25zXCIsXCJfdW5hcnlFeHByZXNzaW9uc1wiLFwiX3ByaW1hcnlFeHByZXNzaW9uc1wiLFwiX3N5bnRheEdsdWVcIl0sbj0wO248aS5sZW5ndGg7bisrKXt2YXIgcz1lW2lbbl1dO2Zvcih2YXIgbyBpbiBzKXt2YXIgcj1zW29dLGE9ci5yZWdleHAsaD10Lm1hdGNoKGEpO2lmKG51bGwhPT1oKXJldHVybnttZXRob2Q6ci5tZXRob2QscHJlY2VkZW5jZTpyLnByZWNlZGVuY2UscmVnZXhwOnIucmVnZXhwLHZhbHVlOmhbMF19fX10aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJUb25lLlRpbWVCYXNlOiBVbmV4cGVjdGVkIHRva2VuIFwiK3QpfSh0PXQudHJpbSgpLHRoaXMpO2kucHVzaChuKSx0PXQuc3Vic3RyKG4udmFsdWUubGVuZ3RoKX1yZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBpWysrZV19LHBlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gaVtlKzFdfX19LHQuVGltZUJhc2UucHJvdG90eXBlLl9tYXRjaEdyb3VwPWZ1bmN0aW9uKHQsZSxpKXtpZighdGhpcy5pc1VuZGVmKHQpKWZvcih2YXIgbiBpbiBlKXt2YXIgcz1lW25dO2lmKHMucmVnZXhwLnRlc3QodC52YWx1ZSkpe2lmKHRoaXMuaXNVbmRlZihpKSlyZXR1cm4gcztpZihzLnByZWNlZGVuY2U9PT1pKXJldHVybiBzfX1yZXR1cm4hMX0sdC5UaW1lQmFzZS5wcm90b3R5cGUuX3BhcnNlQmluYXJ5PWZ1bmN0aW9uKHQsZSl7dGhpcy5pc1VuZGVmKGUpJiYoZT0yKTt2YXIgaTtpPWU8MD90aGlzLl9wYXJzZVVuYXJ5KHQpOnRoaXMuX3BhcnNlQmluYXJ5KHQsZS0xKTtmb3IodmFyIG49dC5wZWVrKCk7biYmdGhpcy5fbWF0Y2hHcm91cChuLHRoaXMuX2JpbmFyeUV4cHJlc3Npb25zLGUpOylpPShuPXQubmV4dCgpKS5tZXRob2QuYmluZCh0aGlzLGksdGhpcy5fcGFyc2VCaW5hcnkodCxlLTEpKSxuPXQucGVlaygpO3JldHVybiBpfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fcGFyc2VVbmFyeT1mdW5jdGlvbih0KXt2YXIgZSxpO2U9dC5wZWVrKCk7dmFyIG49dGhpcy5fbWF0Y2hHcm91cChlLHRoaXMuX3VuYXJ5RXhwcmVzc2lvbnMpO3JldHVybiBuPyhlPXQubmV4dCgpLGk9dGhpcy5fcGFyc2VVbmFyeSh0KSxuLm1ldGhvZC5iaW5kKHRoaXMsaSkpOnRoaXMuX3BhcnNlUHJpbWFyeSh0KX0sdC5UaW1lQmFzZS5wcm90b3R5cGUuX3BhcnNlUHJpbWFyeT1mdW5jdGlvbih0KXt2YXIgZSxpO2lmKGU9dC5wZWVrKCksdGhpcy5pc1VuZGVmKGUpKXRocm93IG5ldyBTeW50YXhFcnJvcihcIlRvbmUuVGltZUJhc2U6IFVuZXhwZWN0ZWQgZW5kIG9mIGV4cHJlc3Npb25cIik7aWYodGhpcy5fbWF0Y2hHcm91cChlLHRoaXMuX3ByaW1hcnlFeHByZXNzaW9ucykpe3ZhciBuPShlPXQubmV4dCgpKS52YWx1ZS5tYXRjaChlLnJlZ2V4cCk7cmV0dXJuIGUubWV0aG9kLmJpbmQodGhpcyxuWzFdLG5bMl0sblszXSl9aWYoZSYmXCIoXCI9PT1lLnZhbHVlKXtpZih0Lm5leHQoKSxpPXRoaXMuX3BhcnNlQmluYXJ5KHQpLCEoZT10Lm5leHQoKSl8fFwiKVwiIT09ZS52YWx1ZSl0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJFeHBlY3RlZCApXCIpO3JldHVybiBpfXRocm93IG5ldyBTeW50YXhFcnJvcihcIlRvbmUuVGltZUJhc2U6IENhbm5vdCBwcm9jZXNzIHRva2VuIFwiK2UudmFsdWUpfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fcGFyc2VFeHByU3RyaW5nPWZ1bmN0aW9uKHQpe3RoaXMuaXNTdHJpbmcodCl8fCh0PXQudG9TdHJpbmcoKSk7dmFyIGU9dGhpcy5fdG9rZW5pemUodCk7cmV0dXJuIHRoaXMuX3BhcnNlQmluYXJ5KGUpfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fbm9PcD1mdW5jdGlvbigpe3JldHVybiAwfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fZGVmYXVsdEV4cHI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9PcH0sdC5UaW1lQmFzZS5wcm90b3R5cGUuX2RlZmF1bHRVbml0cz1cInNcIix0LlRpbWVCYXNlLnByb3RvdHlwZS5fZnJlcXVlbmN5VG9Vbml0cz1mdW5jdGlvbih0KXtyZXR1cm4gMS90fSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fYmVhdHNUb1VuaXRzPWZ1bmN0aW9uKGUpe3JldHVybiA2MC90LlRyYW5zcG9ydC5icG0udmFsdWUqZX0sdC5UaW1lQmFzZS5wcm90b3R5cGUuX3NlY29uZHNUb1VuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiB0fSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fdGlja3NUb1VuaXRzPWZ1bmN0aW9uKGUpe3JldHVybiBlKih0aGlzLl9iZWF0c1RvVW5pdHMoMSkvdC5UcmFuc3BvcnQuUFBRKX0sdC5UaW1lQmFzZS5wcm90b3R5cGUuX3RpbWVTaWduYXR1cmU9ZnVuY3Rpb24oKXtyZXR1cm4gdC5UcmFuc3BvcnQudGltZVNpZ25hdHVyZX0sdC5UaW1lQmFzZS5wcm90b3R5cGUuX3B1c2hFeHByPWZ1bmN0aW9uKGUsaSxuKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHQuVGltZUJhc2V8fChlPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGUsbikpLHRoaXMuX2V4cHI9dGhpcy5fYmluYXJ5RXhwcmVzc2lvbnNbaV0ubWV0aG9kLmJpbmQodGhpcyx0aGlzLl9leHByLGUuX2V4cHIpLHRoaXN9LHQuVGltZUJhc2UucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9wdXNoRXhwcih0LFwiK1wiLGUpfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5zdWI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fcHVzaEV4cHIodCxcIi1cIixlKX0sdC5UaW1lQmFzZS5wcm90b3R5cGUubXVsdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9wdXNoRXhwcih0LFwiKlwiLGUpfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5kaXY9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fcHVzaEV4cHIodCxcIi9cIixlKX0sdC5UaW1lQmFzZS5wcm90b3R5cGUudmFsdWVPZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9leHByKCl9LHQuVGltZUJhc2UucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9leHByPW51bGx9LHQuVGltZUJhc2V9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlRpbWU9ZnVuY3Rpb24oZSxpKXtpZighKHRoaXMgaW5zdGFuY2VvZiB0LlRpbWUpKXJldHVybiBuZXcgdC5UaW1lKGUsaSk7dGhpcy5fcGx1c05vdz0hMSx0LlRpbWVCYXNlLmNhbGwodGhpcyxlLGkpfSx0LmV4dGVuZCh0LlRpbWUsdC5UaW1lQmFzZSksdC5UaW1lLnByb3RvdHlwZS5fdW5hcnlFeHByZXNzaW9ucz1PYmplY3QuY3JlYXRlKHQuVGltZUJhc2UucHJvdG90eXBlLl91bmFyeUV4cHJlc3Npb25zKSx0LlRpbWUucHJvdG90eXBlLl91bmFyeUV4cHJlc3Npb25zLnF1YW50aXplPXtyZWdleHA6L15ALyxtZXRob2Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHQuVHJhbnNwb3J0Lm5leHRTdWJkaXZpc2lvbihlKCkpfX0sdC5UaW1lLnByb3RvdHlwZS5fdW5hcnlFeHByZXNzaW9ucy5ub3c9e3JlZ2V4cDovXlxcKy8sbWV0aG9kOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wbHVzTm93PSEwLHQoKX19LHQuVGltZS5wcm90b3R5cGUucXVhbnRpemU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT10aGlzLmRlZmF1bHRBcmcoZSwxKSx0aGlzLl9leHByPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdD10KCksZT1lLnRvU2Vjb25kcygpLHQrKE1hdGgucm91bmQodC9lKSplLXQpKml9LmJpbmQodGhpcyx0aGlzLl9leHByLG5ldyB0aGlzLmNvbnN0cnVjdG9yKHQpLGUpLHRoaXN9LHQuVGltZS5wcm90b3R5cGUuYWRkTm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsdXNOb3c9ITAsdGhpc30sdC5UaW1lLnByb3RvdHlwZS5fZGVmYXVsdEV4cHI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGx1c05vdz0hMCx0aGlzLl9ub09wfSx0LlRpbWUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuVGltZUJhc2UucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUpLHRoaXMuX3BsdXNOb3c9ZS5fcGx1c05vdyx0aGlzfSx0LlRpbWUucHJvdG90eXBlLnRvTm90YXRpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRvU2Vjb25kcygpLGU9W1wiMW1cIixcIjJuXCIsXCI0blwiLFwiOG5cIixcIjE2blwiLFwiMzJuXCIsXCI2NG5cIixcIjEyOG5cIl0saT10aGlzLl90b05vdGF0aW9uSGVscGVyKHQsZSksbj1bXCIxbVwiLFwiMm5cIixcIjJ0XCIsXCI0blwiLFwiNHRcIixcIjhuXCIsXCI4dFwiLFwiMTZuXCIsXCIxNnRcIixcIjMyblwiLFwiMzJ0XCIsXCI2NG5cIixcIjY0dFwiLFwiMTI4blwiXSxzPXRoaXMuX3RvTm90YXRpb25IZWxwZXIodCxuKTtyZXR1cm4gcy5zcGxpdChcIitcIikubGVuZ3RoPGkuc3BsaXQoXCIrXCIpLmxlbmd0aD9zOml9LHQuVGltZS5wcm90b3R5cGUuX3RvTm90YXRpb25IZWxwZXI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dGhpcy5fbm90YXRpb25Ub1VuaXRzKGVbZS5sZW5ndGgtMV0pLG49XCJcIixzPTA7czxlLmxlbmd0aDtzKyspe3ZhciBvPXRoaXMuX25vdGF0aW9uVG9Vbml0cyhlW3NdKSxyPXQvbztpZigxLXIlMTwxZS02JiYocis9MWUtNiksKHI9TWF0aC5mbG9vcihyKSk+MCl7aWYobis9MT09PXI/ZVtzXTpyLnRvU3RyaW5nKCkrXCIqXCIrZVtzXSwodC09cipvKTxpKWJyZWFrO24rPVwiICsgXCJ9fXJldHVyblwiXCI9PT1uJiYobj1cIjBcIiksbn0sdC5UaW1lLnByb3RvdHlwZS5fbm90YXRpb25Ub1VuaXRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLl9wcmltYXJ5RXhwcmVzc2lvbnMsaT1bZS5uLGUudCxlLm1dLG49MDtuPGkubGVuZ3RoO24rKyl7dmFyIHM9aVtuXSxvPXQubWF0Y2gocy5yZWdleHApO2lmKG8pcmV0dXJuIHMubWV0aG9kLmNhbGwodGhpcyxvWzFdKX19LHQuVGltZS5wcm90b3R5cGUudG9CYXJzQmVhdHNTaXh0ZWVudGhzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fYmVhdHNUb1VuaXRzKDEpLGU9dGhpcy50b1NlY29uZHMoKS90LGk9TWF0aC5mbG9vcihlL3RoaXMuX3RpbWVTaWduYXR1cmUoKSksbj1lJTEqNDtyZXR1cm4gZT1NYXRoLmZsb29yKGUpJXRoaXMuX3RpbWVTaWduYXR1cmUoKSwobj1uLnRvU3RyaW5nKCkpLmxlbmd0aD4zJiYobj1wYXJzZUZsb2F0KG4pLnRvRml4ZWQoMykpLFtpLGUsbl0uam9pbihcIjpcIil9LHQuVGltZS5wcm90b3R5cGUudG9UaWNrcz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2JlYXRzVG9Vbml0cygxKSxpPXRoaXMudmFsdWVPZigpL2U7cmV0dXJuIE1hdGguZmxvb3IoaSp0LlRyYW5zcG9ydC5QUFEpfSx0LlRpbWUucHJvdG90eXBlLnRvU2FtcGxlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRvU2Vjb25kcygpKnRoaXMuY29udGV4dC5zYW1wbGVSYXRlfSx0LlRpbWUucHJvdG90eXBlLnRvRnJlcXVlbmN5PWZ1bmN0aW9uKCl7cmV0dXJuIDEvdGhpcy50b1NlY29uZHMoKX0sdC5UaW1lLnByb3RvdHlwZS50b1NlY29uZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZU9mKCl9LHQuVGltZS5wcm90b3R5cGUudG9NaWxsaXNlY29uZHM9ZnVuY3Rpb24oKXtyZXR1cm4gMWUzKnRoaXMudG9TZWNvbmRzKCl9LHQuVGltZS5wcm90b3R5cGUudmFsdWVPZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9leHByKCkrKHRoaXMuX3BsdXNOb3c/dGhpcy5ub3coKTowKX0sdC5UaW1lfSksdChmdW5jdGlvbih0KXt0LkZyZXF1ZW5jeT1mdW5jdGlvbihlLGkpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHQuRnJlcXVlbmN5KSlyZXR1cm4gbmV3IHQuRnJlcXVlbmN5KGUsaSk7dC5UaW1lQmFzZS5jYWxsKHRoaXMsZSxpKX0sdC5leHRlbmQodC5GcmVxdWVuY3ksdC5UaW1lQmFzZSksdC5GcmVxdWVuY3kucHJvdG90eXBlLl9wcmltYXJ5RXhwcmVzc2lvbnM9T2JqZWN0LmNyZWF0ZSh0LlRpbWVCYXNlLnByb3RvdHlwZS5fcHJpbWFyeUV4cHJlc3Npb25zKSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuX3ByaW1hcnlFeHByZXNzaW9ucy5taWRpPXtyZWdleHA6L14oXFxkKyg/OlxcLlxcZCspP21pZGkpLyxtZXRob2Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWlkaVRvRnJlcXVlbmN5KHQpfX0sdC5GcmVxdWVuY3kucHJvdG90eXBlLl9wcmltYXJ5RXhwcmVzc2lvbnMubm90ZT17cmVnZXhwOi9eKFthLWddezF9KD86YnwjfHh8YmIpPykoLT9bMC05XSspL2ksbWV0aG9kOmZ1bmN0aW9uKHQsaSl7dmFyIG49ZVt0LnRvTG93ZXJDYXNlKCldKzEyKihwYXJzZUludChpKSsxKTtyZXR1cm4gdGhpcy5taWRpVG9GcmVxdWVuY3kobil9fSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuX3ByaW1hcnlFeHByZXNzaW9ucy50cj17cmVnZXhwOi9eKFxcZCsoPzpcXC5cXGQrKT8pOihcXGQrKD86XFwuXFxkKyk/KTo/KFxcZCsoPzpcXC5cXGQrKT8pPy8sbWV0aG9kOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj0xO3JldHVybiB0JiZcIjBcIiE9PXQmJihuKj10aGlzLl9iZWF0c1RvVW5pdHModGhpcy5fdGltZVNpZ25hdHVyZSgpKnBhcnNlRmxvYXQodCkpKSxlJiZcIjBcIiE9PWUmJihuKj10aGlzLl9iZWF0c1RvVW5pdHMocGFyc2VGbG9hdChlKSkpLGkmJlwiMFwiIT09aSYmKG4qPXRoaXMuX2JlYXRzVG9Vbml0cyhwYXJzZUZsb2F0KGkpLzQpKSxufX0sdC5GcmVxdWVuY3kucHJvdG90eXBlLnRyYW5zcG9zZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZXhwcj1mdW5jdGlvbih0LGUpe3JldHVybiB0KCkqdGhpcy5pbnRlcnZhbFRvRnJlcXVlbmN5UmF0aW8oZSl9LmJpbmQodGhpcyx0aGlzLl9leHByLHQpLHRoaXN9LHQuRnJlcXVlbmN5LnByb3RvdHlwZS5oYXJtb25pemU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V4cHI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dCgpLG49W10scz0wO3M8ZS5sZW5ndGg7cysrKW5bc109aSp0aGlzLmludGVydmFsVG9GcmVxdWVuY3lSYXRpbyhlW3NdKTtyZXR1cm4gbn0uYmluZCh0aGlzLHRoaXMuX2V4cHIsdCksdGhpc30sdC5GcmVxdWVuY3kucHJvdG90eXBlLnRvTWlkaT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZyZXF1ZW5jeVRvTWlkaSh0aGlzLnZhbHVlT2YoKSl9LHQuRnJlcXVlbmN5LnByb3RvdHlwZS50b05vdGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZhbHVlT2YoKSxuPU1hdGgubG9nKGUvdC5GcmVxdWVuY3kuQTQpL01hdGguTE4yLHM9TWF0aC5yb3VuZCgxMipuKSs1NyxvPU1hdGguZmxvb3Iocy8xMik7cmV0dXJuIG88MCYmKHMrPS0xMipvKSxpW3MlMTJdK28udG9TdHJpbmcoKX0sdC5GcmVxdWVuY3kucHJvdG90eXBlLnRvU2Vjb25kcz1mdW5jdGlvbigpe3JldHVybiAxL3RoaXMudmFsdWVPZigpfSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUudG9GcmVxdWVuY3k9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZU9mKCl9LHQuRnJlcXVlbmN5LnByb3RvdHlwZS50b1RpY2tzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fYmVhdHNUb1VuaXRzKDEpLGk9dGhpcy52YWx1ZU9mKCkvZTtyZXR1cm4gTWF0aC5mbG9vcihpKnQuVHJhbnNwb3J0LlBQUSl9LHQuRnJlcXVlbmN5LnByb3RvdHlwZS5fZnJlcXVlbmN5VG9Vbml0cz1mdW5jdGlvbih0KXtyZXR1cm4gdH0sdC5GcmVxdWVuY3kucHJvdG90eXBlLl90aWNrc1RvVW5pdHM9ZnVuY3Rpb24oZSl7cmV0dXJuIDEvKDYwKmUvKHQuVHJhbnNwb3J0LmJwbS52YWx1ZSp0LlRyYW5zcG9ydC5QUFEpKX0sdC5GcmVxdWVuY3kucHJvdG90eXBlLl9iZWF0c1RvVW5pdHM9ZnVuY3Rpb24oZSl7cmV0dXJuIDEvdC5UaW1lQmFzZS5wcm90b3R5cGUuX2JlYXRzVG9Vbml0cy5jYWxsKHRoaXMsZSl9LHQuRnJlcXVlbmN5LnByb3RvdHlwZS5fc2Vjb25kc1RvVW5pdHM9ZnVuY3Rpb24odCl7cmV0dXJuIDEvdH0sdC5GcmVxdWVuY3kucHJvdG90eXBlLl9kZWZhdWx0VW5pdHM9XCJoelwiO3ZhciBlPXtjYmI6LTIsY2I6LTEsYzowLFwiYyNcIjoxLGN4OjIsZGJiOjAsZGI6MSxkOjIsXCJkI1wiOjMsZHg6NCxlYmI6MixlYjozLGU6NCxcImUjXCI6NSxleDo2LGZiYjozLGZiOjQsZjo1LFwiZiNcIjo2LGZ4OjcsZ2JiOjUsZ2I6NixnOjcsXCJnI1wiOjgsZ3g6OSxhYmI6NyxhYjo4LGE6OSxcImEjXCI6MTAsYXg6MTEsYmJiOjksYmI6MTAsYjoxMSxcImIjXCI6MTIsYng6MTN9LGk9W1wiQ1wiLFwiQyNcIixcIkRcIixcIkQjXCIsXCJFXCIsXCJGXCIsXCJGI1wiLFwiR1wiLFwiRyNcIixcIkFcIixcIkEjXCIsXCJCXCJdO3JldHVybiB0LkZyZXF1ZW5jeS5BND00NDAsdC5GcmVxdWVuY3kucHJvdG90eXBlLm1pZGlUb0ZyZXF1ZW5jeT1mdW5jdGlvbihlKXtyZXR1cm4gdC5GcmVxdWVuY3kuQTQqTWF0aC5wb3coMiwoZS02OSkvMTIpfSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuZnJlcXVlbmN5VG9NaWRpPWZ1bmN0aW9uKGUpe3JldHVybiA2OSsxMipNYXRoLmxvZyhlL3QuRnJlcXVlbmN5LkE0KS9NYXRoLkxOMn0sdC5GcmVxdWVuY3l9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlRyYW5zcG9ydFRpbWU9ZnVuY3Rpb24oZSxpKXtpZighKHRoaXMgaW5zdGFuY2VvZiB0LlRyYW5zcG9ydFRpbWUpKXJldHVybiBuZXcgdC5UcmFuc3BvcnRUaW1lKGUsaSk7dC5UaW1lLmNhbGwodGhpcyxlLGkpfSx0LmV4dGVuZCh0LlRyYW5zcG9ydFRpbWUsdC5UaW1lKSx0LlRyYW5zcG9ydFRpbWUucHJvdG90eXBlLl91bmFyeUV4cHJlc3Npb25zPU9iamVjdC5jcmVhdGUodC5UaW1lLnByb3RvdHlwZS5fdW5hcnlFeHByZXNzaW9ucyksdC5UcmFuc3BvcnRUaW1lLnByb3RvdHlwZS5fdW5hcnlFeHByZXNzaW9ucy5xdWFudGl6ZT17cmVnZXhwOi9eQC8sbWV0aG9kOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuX3NlY29uZHNUb1RpY2tzKGUoKSksbj1NYXRoLmNlaWwodC5UcmFuc3BvcnQudGlja3MvaSk7cmV0dXJuIHRoaXMuX3RpY2tzVG9Vbml0cyhuKmkpfX0sdC5UcmFuc3BvcnRUaW1lLnByb3RvdHlwZS5fc2Vjb25kc1RvVGlja3M9ZnVuY3Rpb24oZSl7dmFyIGk9ZS90aGlzLl9iZWF0c1RvVW5pdHMoMSk7cmV0dXJuIE1hdGgucm91bmQoaSp0LlRyYW5zcG9ydC5QUFEpfSx0LlRyYW5zcG9ydFRpbWUucHJvdG90eXBlLnZhbHVlT2Y9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Vjb25kc1RvVGlja3ModGhpcy5fZXhwcigpKSsodGhpcy5fcGx1c05vdz90LlRyYW5zcG9ydC50aWNrczowKX0sdC5UcmFuc3BvcnRUaW1lLnByb3RvdHlwZS50b1RpY2tzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVPZigpfSx0LlRyYW5zcG9ydFRpbWUucHJvdG90eXBlLnRvU2Vjb25kcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9leHByKCkrKHRoaXMuX3BsdXNOb3c/dC5UcmFuc3BvcnQuc2Vjb25kczowKX0sdC5UcmFuc3BvcnRUaW1lLnByb3RvdHlwZS50b0ZyZXF1ZW5jeT1mdW5jdGlvbigpe3JldHVybiAxL3RoaXMudG9TZWNvbmRzKCl9LHQuVHJhbnNwb3J0VGltZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRW1pdHRlcj1mdW5jdGlvbigpe3RoaXMuX2V2ZW50cz17fX0sdC5leHRlbmQodC5FbWl0dGVyKSx0LkVtaXR0ZXIucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXQuc3BsaXQoL1xcVysvKSxuPTA7bjxpLmxlbmd0aDtuKyspe3ZhciBzPWlbbl07dGhpcy5fZXZlbnRzLmhhc093blByb3BlcnR5KHMpfHwodGhpcy5fZXZlbnRzW3NdPVtdKSx0aGlzLl9ldmVudHNbc10ucHVzaChlKX1yZXR1cm4gdGhpc30sdC5FbWl0dGVyLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oZSxpKXtmb3IodmFyIG49ZS5zcGxpdCgvXFxXKy8pLHM9MDtzPG4ubGVuZ3RoO3MrKylpZihlPW5bc10sdGhpcy5fZXZlbnRzLmhhc093blByb3BlcnR5KGUpKWlmKHQucHJvdG90eXBlLmlzVW5kZWYoaSkpdGhpcy5fZXZlbnRzW2VdPVtdO2Vsc2UgZm9yKHZhciBvPXRoaXMuX2V2ZW50c1tlXSxyPTA7cjxvLmxlbmd0aDtyKyspb1tyXT09PWkmJm8uc3BsaWNlKHIsMSk7cmV0dXJuIHRoaXN9LHQuRW1pdHRlci5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0KXtpZih0aGlzLl9ldmVudHMpe3ZhciBlPUFycmF5LmFwcGx5KG51bGwsYXJndW1lbnRzKS5zbGljZSgxKTtpZih0aGlzLl9ldmVudHMuaGFzT3duUHJvcGVydHkodCkpZm9yKHZhciBpPXRoaXMuX2V2ZW50c1t0XSxuPTAscz1pLmxlbmd0aDtuPHM7bisrKWlbbl0uYXBwbHkodGhpcyxlKX1yZXR1cm4gdGhpc30sdC5FbWl0dGVyLm1peGluPWZ1bmN0aW9uKGUpe3ZhciBpPVtcIm9uXCIsXCJvZmZcIixcImVtaXRcIl07ZS5fZXZlbnRzPXt9O2Zvcih2YXIgbj0wO248aS5sZW5ndGg7bisrKXt2YXIgcz1pW25dLG89dC5FbWl0dGVyLnByb3RvdHlwZVtzXTtlW3NdPW99fSx0LkVtaXR0ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2V2ZW50cz1udWxsLHRoaXN9LHQuRW1pdHRlcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIXdpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIkF1ZGlvQ29udGV4dFwiKSYmd2luZG93Lmhhc093blByb3BlcnR5KFwid2Via2l0QXVkaW9Db250ZXh0XCIpJiYod2luZG93LkF1ZGlvQ29udGV4dD13aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSx0LkNvbnRleHQ9ZnVuY3Rpb24oZSl7dC5FbWl0dGVyLmNhbGwodGhpcyksZXx8KGU9bmV3IHdpbmRvdy5BdWRpb0NvbnRleHQpLHRoaXMuX2NvbnRleHQ9ZTtmb3IodmFyIGkgaW4gdGhpcy5fY29udGV4dCl0aGlzLl9kZWZpbmVQcm9wZXJ0eSh0aGlzLl9jb250ZXh0LGkpO3RoaXMuX2xhdGVuY3lIaW50PVwiaW50ZXJhY3RpdmVcIix0aGlzLl9sb29rQWhlYWQ9LjEsdGhpcy5fdXBkYXRlSW50ZXJ2YWw9dGhpcy5fbG9va0FoZWFkLzMsdGhpcy5fY29tcHV0ZWRVcGRhdGVJbnRlcnZhbD0wLHRoaXMuX3dvcmtlcj10aGlzLl9jcmVhdGVXb3JrZXIoKSx0aGlzLl9jb25zdGFudHM9e319LHQuZXh0ZW5kKHQuQ29udGV4dCx0LkVtaXR0ZXIpLHQuRW1pdHRlci5taXhpbih0LkNvbnRleHQpLHQuQ29udGV4dC5wcm90b3R5cGUuX2RlZmluZVByb3BlcnR5PWZ1bmN0aW9uKHQsZSl7dGhpcy5pc1VuZGVmKHRoaXNbZV0pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxlLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0W2VdP3RbZV0uYmluZCh0KTp0W2VdfSxzZXQ6ZnVuY3Rpb24oaSl7dFtlXT1pfX0pfSx0LkNvbnRleHQucHJvdG90eXBlLm5vdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZXh0LmN1cnJlbnRUaW1lfSx0LkNvbnRleHQucHJvdG90eXBlLl9jcmVhdGVXb3JrZXI9ZnVuY3Rpb24oKXt3aW5kb3cuVVJMPXdpbmRvdy5VUkx8fHdpbmRvdy53ZWJraXRVUkw7dmFyIHQ9bmV3IEJsb2IoW1widmFyIHRpbWVvdXRUaW1lID0gXCIrKDFlMyp0aGlzLl91cGRhdGVJbnRlcnZhbCkudG9GaXhlZCgxKStcIjtzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKG1zZyl7XFx0dGltZW91dFRpbWUgPSBwYXJzZUludChtc2cuZGF0YSk7fTtmdW5jdGlvbiB0aWNrKCl7XFx0c2V0VGltZW91dCh0aWNrLCB0aW1lb3V0VGltZSk7XFx0c2VsZi5wb3N0TWVzc2FnZSgndGljaycpO310aWNrKCk7XCJdKSxlPVVSTC5jcmVhdGVPYmplY3RVUkwodCksaT1uZXcgV29ya2VyKGUpO3JldHVybiBpLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZnVuY3Rpb24oKXt0aGlzLmVtaXQoXCJ0aWNrXCIpfS5iaW5kKHRoaXMpKSxpLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZnVuY3Rpb24oKXt2YXIgdD10aGlzLm5vdygpO2lmKHRoaXMuaXNOdW1iZXIodGhpcy5fbGFzdFVwZGF0ZSkpe3ZhciBlPXQtdGhpcy5fbGFzdFVwZGF0ZTt0aGlzLl9jb21wdXRlZFVwZGF0ZUludGVydmFsPU1hdGgubWF4KGUsLjk3KnRoaXMuX2NvbXB1dGVkVXBkYXRlSW50ZXJ2YWwpfXRoaXMuX2xhc3RVcGRhdGU9dH0uYmluZCh0aGlzKSksaX0sdC5Db250ZXh0LnByb3RvdHlwZS5nZXRDb25zdGFudD1mdW5jdGlvbih0KXtpZih0aGlzLl9jb25zdGFudHNbdF0pcmV0dXJuIHRoaXMuX2NvbnN0YW50c1t0XTtmb3IodmFyIGU9dGhpcy5fY29udGV4dC5jcmVhdGVCdWZmZXIoMSwxMjgsdGhpcy5fY29udGV4dC5zYW1wbGVSYXRlKSxpPWUuZ2V0Q2hhbm5lbERhdGEoMCksbj0wO248aS5sZW5ndGg7bisrKWlbbl09dDt2YXIgcz10aGlzLl9jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO3JldHVybiBzLmNoYW5uZWxDb3VudD0xLHMuY2hhbm5lbENvdW50TW9kZT1cImV4cGxpY2l0XCIscy5idWZmZXI9ZSxzLmxvb3A9ITAscy5zdGFydCgwKSx0aGlzLl9jb25zdGFudHNbdF09cyxzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Db250ZXh0LnByb3RvdHlwZSxcImxhZ1wiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jb21wdXRlZFVwZGF0ZUludGVydmFsLXRoaXMuX3VwZGF0ZUludGVydmFsO3JldHVybiB0PU1hdGgubWF4KHQsMCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQ29udGV4dC5wcm90b3R5cGUsXCJsb29rQWhlYWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvb2tBaGVhZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb2tBaGVhZD10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNvbnRleHQucHJvdG90eXBlLFwidXBkYXRlSW50ZXJ2YWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VwZGF0ZUludGVydmFsfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fdXBkYXRlSW50ZXJ2YWw9TWF0aC5tYXgoZSx0LnByb3RvdHlwZS5ibG9ja1RpbWUpLHRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZShNYXRoLm1heCgxZTMqZSwxKSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQ29udGV4dC5wcm90b3R5cGUsXCJsYXRlbmN5SGludFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGF0ZW5jeUhpbnR9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10O2lmKHRoaXMuX2xhdGVuY3lIaW50PXQsdGhpcy5pc1N0cmluZyh0KSlzd2l0Y2godCl7Y2FzZVwiaW50ZXJhY3RpdmVcIjplPS4xLHRoaXMuX2NvbnRleHQubGF0ZW5jeUhpbnQ9dDticmVhaztjYXNlXCJwbGF5YmFja1wiOmU9LjgsdGhpcy5fY29udGV4dC5sYXRlbmN5SGludD10O2JyZWFrO2Nhc2VcImJhbGFuY2VkXCI6ZT0uMjUsdGhpcy5fY29udGV4dC5sYXRlbmN5SGludD10O2JyZWFrO2Nhc2VcImZhc3Rlc3RcIjplPS4wMX10aGlzLmxvb2tBaGVhZD1lLHRoaXMudXBkYXRlSW50ZXJ2YWw9ZS8zfX0pLHQuc3VwcG9ydGVkPyghZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsaSxzKXtpZihlLmlucHV0KUFycmF5LmlzQXJyYXkoZS5pbnB1dCk/KHQucHJvdG90eXBlLmlzVW5kZWYocykmJihzPTApLHRoaXMuY29ubmVjdChlLmlucHV0W3NdKSk6dGhpcy5jb25uZWN0KGUuaW5wdXQsaSxzKTtlbHNlIHRyeXtlIGluc3RhbmNlb2YgQXVkaW9Ob2RlP24uY2FsbCh0aGlzLGUsaSxzKTpuLmNhbGwodGhpcyxlLGkpfWNhdGNoKHQpe3Rocm93IG5ldyBFcnJvcihcImVycm9yIGNvbm5lY3RpbmcgdG8gbm9kZTogXCIrZStcIlxcblwiK3QpfX1mdW5jdGlvbiBpKGUsaSxuKXtpZihlJiZlLmlucHV0JiZBcnJheS5pc0FycmF5KGUuaW5wdXQpKXQucHJvdG90eXBlLmlzVW5kZWYobikmJihuPTApLHRoaXMuZGlzY29ubmVjdChlLmlucHV0W25dLGksbik7ZWxzZSBpZihlJiZlLmlucHV0KXRoaXMuZGlzY29ubmVjdChlLmlucHV0LGksbik7ZWxzZSB0cnl7cy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9Y2F0Y2godCl7dGhyb3cgbmV3IEVycm9yKFwiZXJyb3IgZGlzY29ubmVjdGluZyBub2RlOiBcIitlK1wiXFxuXCIrdCl9fXZhciBuPUF1ZGlvTm9kZS5wcm90b3R5cGUuY29ubmVjdCxzPUF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzY29ubmVjdDtBdWRpb05vZGUucHJvdG90eXBlLmNvbm5lY3QhPT1lJiYoQXVkaW9Ob2RlLnByb3RvdHlwZS5jb25uZWN0PWUsQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNjb25uZWN0PWkpfSgpLHQuY29udGV4dD1uZXcgdC5Db250ZXh0KTpjb25zb2xlLndhcm4oXCJUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBUb25lLmpzXCIpLHQuQ29udGV4dH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuVHlwZT17RGVmYXVsdDpcIm51bWJlclwiLFRpbWU6XCJ0aW1lXCIsRnJlcXVlbmN5OlwiZnJlcXVlbmN5XCIsVHJhbnNwb3J0VGltZTpcInRyYW5zcG9ydFRpbWVcIixUaWNrczpcInRpY2tzXCIsTm9ybWFsUmFuZ2U6XCJub3JtYWxSYW5nZVwiLEF1ZGlvUmFuZ2U6XCJhdWRpb1JhbmdlXCIsRGVjaWJlbHM6XCJkYlwiLEludGVydmFsOlwiaW50ZXJ2YWxcIixCUE06XCJicG1cIixQb3NpdGl2ZTpcInBvc2l0aXZlXCIsQ2VudHM6XCJjZW50c1wiLERlZ3JlZXM6XCJkZWdyZWVzXCIsTUlESTpcIm1pZGlcIixCYXJzQmVhdHNTaXh0ZWVudGhzOlwiYmFyc0JlYXRzU2l4dGVlbnRoc1wiLFNhbXBsZXM6XCJzYW1wbGVzXCIsSGVydHo6XCJoZXJ0elwiLE5vdGU6XCJub3RlXCIsTWlsbGlzZWNvbmRzOlwibWlsbGlzZWNvbmRzXCIsU2Vjb25kczpcInNlY29uZHNcIixOb3RhdGlvbjpcIm5vdGF0aW9uXCJ9LHQucHJvdG90eXBlLnRvU2Vjb25kcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pc051bWJlcihlKT9lOnRoaXMuaXNVbmRlZihlKT90aGlzLm5vdygpOnRoaXMuaXNTdHJpbmcoZSk/bmV3IHQuVGltZShlKS50b1NlY29uZHMoKTplIGluc3RhbmNlb2YgdC5UaW1lQmFzZT9lLnRvU2Vjb25kcygpOnZvaWQgMH0sdC5wcm90b3R5cGUudG9GcmVxdWVuY3k9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNOdW1iZXIoZSk/ZTp0aGlzLmlzU3RyaW5nKGUpfHx0aGlzLmlzVW5kZWYoZSk/bmV3IHQuRnJlcXVlbmN5KGUpLnZhbHVlT2YoKTplIGluc3RhbmNlb2YgdC5UaW1lQmFzZT9lLnRvRnJlcXVlbmN5KCk6dm9pZCAwfSx0LnByb3RvdHlwZS50b1RpY2tzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlzTnVtYmVyKGUpfHx0aGlzLmlzU3RyaW5nKGUpP25ldyB0LlRyYW5zcG9ydFRpbWUoZSkudG9UaWNrcygpOnRoaXMuaXNVbmRlZihlKT90LlRyYW5zcG9ydC50aWNrczplIGluc3RhbmNlb2YgdC5UaW1lQmFzZT9lLnRvVGlja3MoKTp2b2lkIDB9LHR9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlBhcmFtPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJwYXJhbVwiLFwidW5pdHNcIixcImNvbnZlcnRcIl0sdC5QYXJhbS5kZWZhdWx0cyk7dGhpcy5fcGFyYW09dGhpcy5pbnB1dD1lLnBhcmFtLHRoaXMudW5pdHM9ZS51bml0cyx0aGlzLmNvbnZlcnQ9ZS5jb252ZXJ0LHRoaXMub3ZlcnJpZGRlbj0hMSx0aGlzLl9sZm89bnVsbCx0aGlzLmlzT2JqZWN0KGUubGZvKT90aGlzLnZhbHVlPWUubGZvOnRoaXMuaXNVbmRlZihlLnZhbHVlKXx8KHRoaXMudmFsdWU9ZS52YWx1ZSl9LHQuZXh0ZW5kKHQuUGFyYW0pLHQuUGFyYW0uZGVmYXVsdHM9e3VuaXRzOnQuVHlwZS5EZWZhdWx0LGNvbnZlcnQ6ITAscGFyYW06dm9pZCAwfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYXJhbS5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9Vbml0cyh0aGlzLl9wYXJhbS52YWx1ZSl9LHNldDpmdW5jdGlvbihlKXtpZih0aGlzLmlzT2JqZWN0KGUpKXtpZih0aGlzLmlzVW5kZWYodC5MRk8pKXRocm93IG5ldyBFcnJvcihcIkluY2x1ZGUgJ1RvbmUuTEZPJyB0byB1c2UgYW4gTEZPIGFzIGEgUGFyYW0gdmFsdWUuXCIpO3RoaXMuX2xmbyYmdGhpcy5fbGZvLmRpc3Bvc2UoKSx0aGlzLl9sZm89bmV3IHQuTEZPKGUpLnN0YXJ0KCksdGhpcy5fbGZvLmNvbm5lY3QodGhpcy5pbnB1dCl9ZWxzZXt2YXIgaT10aGlzLl9mcm9tVW5pdHMoZSk7dGhpcy5fcGFyYW0uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKDApLHRoaXMuX3BhcmFtLnZhbHVlPWl9fX0pLHQuUGFyYW0ucHJvdG90eXBlLl9mcm9tVW5pdHM9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuY29udmVydCYmIXRoaXMuaXNVbmRlZih0aGlzLmNvbnZlcnQpKXJldHVybiBlO3N3aXRjaCh0aGlzLnVuaXRzKXtjYXNlIHQuVHlwZS5UaW1lOnJldHVybiB0aGlzLnRvU2Vjb25kcyhlKTtjYXNlIHQuVHlwZS5GcmVxdWVuY3k6cmV0dXJuIHRoaXMudG9GcmVxdWVuY3koZSk7Y2FzZSB0LlR5cGUuRGVjaWJlbHM6cmV0dXJuIHRoaXMuZGJUb0dhaW4oZSk7Y2FzZSB0LlR5cGUuTm9ybWFsUmFuZ2U6cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGUsMCksMSk7Y2FzZSB0LlR5cGUuQXVkaW9SYW5nZTpyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoZSwtMSksMSk7Y2FzZSB0LlR5cGUuUG9zaXRpdmU6cmV0dXJuIE1hdGgubWF4KGUsMCk7ZGVmYXVsdDpyZXR1cm4gZX19LHQuUGFyYW0ucHJvdG90eXBlLl90b1VuaXRzPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmNvbnZlcnQmJiF0aGlzLmlzVW5kZWYodGhpcy5jb252ZXJ0KSlyZXR1cm4gZTtzd2l0Y2godGhpcy51bml0cyl7Y2FzZSB0LlR5cGUuRGVjaWJlbHM6cmV0dXJuIHRoaXMuZ2FpblRvRGIoZSk7ZGVmYXVsdDpyZXR1cm4gZX19LHQuUGFyYW0ucHJvdG90eXBlLl9taW5PdXRwdXQ9MWUtNSx0LlBhcmFtLnByb3RvdHlwZS5zZXRWYWx1ZUF0VGltZT1mdW5jdGlvbih0LGUpe3JldHVybiB0PXRoaXMuX2Zyb21Vbml0cyh0KSxlPXRoaXMudG9TZWNvbmRzKGUpLGU8PXRoaXMubm93KCkrdGhpcy5ibG9ja1RpbWU/dGhpcy5fcGFyYW0udmFsdWU9dDp0aGlzLl9wYXJhbS5zZXRWYWx1ZUF0VGltZSh0LGUpLHRoaXN9LHQuUGFyYW0ucHJvdG90eXBlLnNldFJhbXBQb2ludD1mdW5jdGlvbih0KXt0PXRoaXMuZGVmYXVsdEFyZyh0LHRoaXMubm93KCkpO3ZhciBlPXRoaXMuX3BhcmFtLnZhbHVlO3JldHVybiAwPT09ZSYmKGU9dGhpcy5fbWluT3V0cHV0KSx0aGlzLl9wYXJhbS5zZXRWYWx1ZUF0VGltZShlLHQpLHRoaXN9LHQuUGFyYW0ucHJvdG90eXBlLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9dGhpcy5fZnJvbVVuaXRzKHQpLHRoaXMuX3BhcmFtLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHQsdGhpcy50b1NlY29uZHMoZSkpLHRoaXN9LHQuUGFyYW0ucHJvdG90eXBlLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLl9mcm9tVW5pdHModCksdD1NYXRoLm1heCh0aGlzLl9taW5PdXRwdXQsdCksdGhpcy5fcGFyYW0uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSh0LHRoaXMudG9TZWNvbmRzKGUpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gaT10aGlzLnRvU2Vjb25kcyhpKSx0aGlzLnNldFJhbXBQb2ludChpKSx0aGlzLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUodCxpK3RoaXMudG9TZWNvbmRzKGUpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5saW5lYXJSYW1wVG9WYWx1ZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGk9dGhpcy50b1NlY29uZHMoaSksdGhpcy5zZXRSYW1wUG9pbnQoaSksdGhpcy5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0LGkrdGhpcy50b1NlY29uZHMoZSkpLHRoaXN9LHQuUGFyYW0ucHJvdG90eXBlLnNldFRhcmdldEF0VGltZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHQ9dGhpcy5fZnJvbVVuaXRzKHQpLHQ9TWF0aC5tYXgodGhpcy5fbWluT3V0cHV0LHQpLGk9TWF0aC5tYXgodGhpcy5fbWluT3V0cHV0LGkpLHRoaXMuX3BhcmFtLnNldFRhcmdldEF0VGltZSh0LHRoaXMudG9TZWNvbmRzKGUpLGkpLHRoaXN9LHQuUGFyYW0ucHJvdG90eXBlLnNldFZhbHVlQ3VydmVBdFRpbWU9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXRbbl09dGhpcy5fZnJvbVVuaXRzKHRbbl0pO3JldHVybiB0aGlzLl9wYXJhbS5zZXRWYWx1ZUN1cnZlQXRUaW1lKHQsdGhpcy50b1NlY29uZHMoZSksdGhpcy50b1NlY29uZHMoaSkpLHRoaXN9LHQuUGFyYW0ucHJvdG90eXBlLmNhbmNlbFNjaGVkdWxlZFZhbHVlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcGFyYW0uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKHRoaXMudG9TZWNvbmRzKHQpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5yYW1wVG89ZnVuY3Rpb24oZSxpLG4pe3JldHVybiBpPXRoaXMuZGVmYXVsdEFyZyhpLDApLHRoaXMudW5pdHM9PT10LlR5cGUuRnJlcXVlbmN5fHx0aGlzLnVuaXRzPT09dC5UeXBlLkJQTXx8dGhpcy51bml0cz09PXQuVHlwZS5EZWNpYmVscz90aGlzLmV4cG9uZW50aWFsUmFtcFRvVmFsdWUoZSxpLG4pOnRoaXMubGluZWFyUmFtcFRvVmFsdWUoZSxpLG4pLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhcmFtLnByb3RvdHlwZSxcImxmb1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvfX0pLHQuUGFyYW0ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3BhcmFtPW51bGwsdGhpcy5fbGZvJiYodGhpcy5fbGZvLmRpc3Bvc2UoKSx0aGlzLl9sZm89bnVsbCksdGhpc30sdC5QYXJhbX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHdpbmRvdy5HYWluTm9kZSYmIUF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlR2FpbiYmKEF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlR2Fpbj1BdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZUdhaW5Ob2RlKSx0LkdhaW49ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImdhaW5cIixcInVuaXRzXCJdLHQuR2Fpbi5kZWZhdWx0cyk7dGhpcy5pbnB1dD10aGlzLm91dHB1dD10aGlzLl9nYWluTm9kZT10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuZ2Fpbj1uZXcgdC5QYXJhbSh7cGFyYW06dGhpcy5fZ2Fpbk5vZGUuZ2Fpbix1bml0czplLnVuaXRzLHZhbHVlOmUuZ2Fpbixjb252ZXJ0OmUuY29udmVydH0pLHRoaXMuX3JlYWRPbmx5KFwiZ2FpblwiKX0sdC5leHRlbmQodC5HYWluKSx0LkdhaW4uZGVmYXVsdHM9e2dhaW46MSxjb252ZXJ0OiEwfSx0LkdhaW4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LlBhcmFtLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZ2Fpbk5vZGUuZGlzY29ubmVjdCgpLHRoaXMuX2dhaW5Ob2RlPW51bGwsdGhpcy5fd3JpdGFibGUoXCJnYWluXCIpLHRoaXMuZ2Fpbi5kaXNwb3NlKCksdGhpcy5nYWluPW51bGx9LHQucHJvdG90eXBlLmNyZWF0ZUluc091dHM9ZnVuY3Rpb24oZSxpKXsxPT09ZT90aGlzLmlucHV0PW5ldyB0LkdhaW46ZT4xJiYodGhpcy5pbnB1dD1uZXcgQXJyYXkoZSkpLDE9PT1pP3RoaXMub3V0cHV0PW5ldyB0LkdhaW46aT4xJiYodGhpcy5vdXRwdXQ9bmV3IEFycmF5KGUpKX0sdC5HYWlufSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5TaWduYWw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInZhbHVlXCIsXCJ1bml0c1wiXSx0LlNpZ25hbC5kZWZhdWx0cyk7dGhpcy5vdXRwdXQ9dGhpcy5fZ2Fpbj10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLGUucGFyYW09dGhpcy5fZ2Fpbi5nYWluLHQuUGFyYW0uY2FsbCh0aGlzLGUpLHRoaXMuaW5wdXQ9dGhpcy5fcGFyYW09dGhpcy5fZ2Fpbi5nYWluLHRoaXMuY29udGV4dC5nZXRDb25zdGFudCgxKS5jaGFpbih0aGlzLl9nYWluKX0sdC5leHRlbmQodC5TaWduYWwsdC5QYXJhbSksdC5TaWduYWwuZGVmYXVsdHM9e3ZhbHVlOjAsdW5pdHM6dC5UeXBlLkRlZmF1bHQsY29udmVydDohMH0sdC5TaWduYWwucHJvdG90eXBlLmNvbm5lY3Q9dC5TaWduYWxCYXNlLnByb3RvdHlwZS5jb25uZWN0LHQuU2lnbmFsLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuUGFyYW0ucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9wYXJhbT1udWxsLHRoaXMuX2dhaW4uZGlzY29ubmVjdCgpLHRoaXMuX2dhaW49bnVsbCx0aGlzfSx0LlNpZ25hbH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuVGltZWxpbmU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcIm1lbW9yeVwiXSx0LlRpbWVsaW5lLmRlZmF1bHRzKTt0aGlzLl90aW1lbGluZT1bXSx0aGlzLl90b1JlbW92ZT1bXSx0aGlzLl9pdGVyYXRpbmc9ITEsdGhpcy5tZW1vcnk9ZS5tZW1vcnl9LHQuZXh0ZW5kKHQuVGltZWxpbmUpLHQuVGltZWxpbmUuZGVmYXVsdHM9e21lbW9yeToxLzB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRpbWVsaW5lLnByb3RvdHlwZSxcImxlbmd0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZWxpbmUubGVuZ3RofX0pLHQuVGltZWxpbmUucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtpZih0aGlzLmlzVW5kZWYodC50aW1lKSl0aHJvdyBuZXcgRXJyb3IoXCJUb25lLlRpbWVsaW5lOiBldmVudHMgbXVzdCBoYXZlIGEgdGltZSBhdHRyaWJ1dGVcIik7aWYodGhpcy5fdGltZWxpbmUubGVuZ3RoKXt2YXIgZT10aGlzLl9zZWFyY2godC50aW1lKTt0aGlzLl90aW1lbGluZS5zcGxpY2UoZSsxLDAsdCl9ZWxzZSB0aGlzLl90aW1lbGluZS5wdXNoKHQpO2lmKHRoaXMubGVuZ3RoPnRoaXMubWVtb3J5KXt2YXIgaT10aGlzLmxlbmd0aC10aGlzLm1lbW9yeTt0aGlzLl90aW1lbGluZS5zcGxpY2UoMCxpKX1yZXR1cm4gdGhpc30sdC5UaW1lbGluZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2l0ZXJhdGluZyl0aGlzLl90b1JlbW92ZS5wdXNoKHQpO2Vsc2V7dmFyIGU9dGhpcy5fdGltZWxpbmUuaW5kZXhPZih0KTstMSE9PWUmJnRoaXMuX3RpbWVsaW5lLnNwbGljZShlLDEpfXJldHVybiB0aGlzfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fc2VhcmNoKHQpO3JldHVybi0xIT09ZT90aGlzLl90aW1lbGluZVtlXTpudWxsfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5wZWVrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpbWVsaW5lWzBdfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5zaGlmdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lbGluZS5zaGlmdCgpfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5nZXRBZnRlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9zZWFyY2godCk7cmV0dXJuIGUrMTx0aGlzLl90aW1lbGluZS5sZW5ndGg/dGhpcy5fdGltZWxpbmVbZSsxXTpudWxsfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5nZXRCZWZvcmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fdGltZWxpbmUubGVuZ3RoO2lmKGU+MCYmdGhpcy5fdGltZWxpbmVbZS0xXS50aW1lPHQpcmV0dXJuIHRoaXMuX3RpbWVsaW5lW2UtMV07dmFyIGk9dGhpcy5fc2VhcmNoKHQpO3JldHVybiBpLTE+PTA/dGhpcy5fdGltZWxpbmVbaS0xXTpudWxsfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7aWYodGhpcy5fdGltZWxpbmUubGVuZ3RoPjEpe3ZhciBlPXRoaXMuX3NlYXJjaCh0KTtpZihlPj0wKWlmKHRoaXMuX3RpbWVsaW5lW2VdLnRpbWU9PT10KXtmb3IodmFyIGk9ZTtpPj0wJiZ0aGlzLl90aW1lbGluZVtpXS50aW1lPT09dDtpLS0pZT1pO3RoaXMuX3RpbWVsaW5lPXRoaXMuX3RpbWVsaW5lLnNsaWNlKDAsZSl9ZWxzZSB0aGlzLl90aW1lbGluZT10aGlzLl90aW1lbGluZS5zbGljZSgwLGUrMSk7ZWxzZSB0aGlzLl90aW1lbGluZT1bXX1lbHNlIDE9PT10aGlzLl90aW1lbGluZS5sZW5ndGgmJnRoaXMuX3RpbWVsaW5lWzBdLnRpbWU+PXQmJih0aGlzLl90aW1lbGluZT1bXSk7cmV0dXJuIHRoaXN9LHQuVGltZWxpbmUucHJvdG90eXBlLmNhbmNlbEJlZm9yZT1mdW5jdGlvbih0KXtpZih0aGlzLl90aW1lbGluZS5sZW5ndGgpe3ZhciBlPXRoaXMuX3NlYXJjaCh0KTtlPj0wJiYodGhpcy5fdGltZWxpbmU9dGhpcy5fdGltZWxpbmUuc2xpY2UoZSsxKSl9cmV0dXJuIHRoaXN9LHQuVGltZWxpbmUucHJvdG90eXBlLl9zZWFyY2g9ZnVuY3Rpb24odCl7dmFyIGU9MCxpPXRoaXMuX3RpbWVsaW5lLmxlbmd0aCxuPWk7aWYoaT4wJiZ0aGlzLl90aW1lbGluZVtpLTFdLnRpbWU8PXQpcmV0dXJuIGktMTtmb3IoO2U8bjspe3ZhciBzPU1hdGguZmxvb3IoZSsobi1lKS8yKSxvPXRoaXMuX3RpbWVsaW5lW3NdLHI9dGhpcy5fdGltZWxpbmVbcysxXTtpZihvLnRpbWU9PT10KXtmb3IodmFyIGE9czthPHRoaXMuX3RpbWVsaW5lLmxlbmd0aDthKyspdGhpcy5fdGltZWxpbmVbYV0udGltZT09PXQmJihzPWEpO3JldHVybiBzfWlmKG8udGltZTx0JiZyLnRpbWU+dClyZXR1cm4gcztvLnRpbWU+dD9uPXM6by50aW1lPHQmJihlPXMrMSl9cmV0dXJuLTF9LHQuVGltZWxpbmUucHJvdG90eXBlLl9pdGVyYXRlPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLl9pdGVyYXRpbmc9ITAsZT10aGlzLmRlZmF1bHRBcmcoZSwwKSxpPXRoaXMuZGVmYXVsdEFyZyhpLHRoaXMuX3RpbWVsaW5lLmxlbmd0aC0xKTtmb3IodmFyIG49ZTtuPD1pO24rKyl0KHRoaXMuX3RpbWVsaW5lW25dKTtpZih0aGlzLl9pdGVyYXRpbmc9ITEsdGhpcy5fdG9SZW1vdmUubGVuZ3RoPjApe2Zvcih2YXIgcz0wO3M8dGhpcy5fdG9SZW1vdmUubGVuZ3RoO3MrKyl7dmFyIG89dGhpcy5fdGltZWxpbmUuaW5kZXhPZih0aGlzLl90b1JlbW92ZVtzXSk7LTEhPT1vJiZ0aGlzLl90aW1lbGluZS5zcGxpY2UobywxKX10aGlzLl90b1JlbW92ZT1bXX19LHQuVGltZWxpbmUucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2l0ZXJhdGUodCksdGhpc30sdC5UaW1lbGluZS5wcm90b3R5cGUuZm9yRWFjaEJlZm9yZT1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX3NlYXJjaCh0KTtyZXR1cm4tMSE9PWkmJnRoaXMuX2l0ZXJhdGUoZSwwLGkpLHRoaXN9LHQuVGltZWxpbmUucHJvdG90eXBlLmZvckVhY2hBZnRlcj1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX3NlYXJjaCh0KTtyZXR1cm4gdGhpcy5faXRlcmF0ZShlLGkrMSksdGhpc30sdC5UaW1lbGluZS5wcm90b3R5cGUuZm9yRWFjaEZyb209ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dGhpcy5fc2VhcmNoKHQpO2k+PTAmJnRoaXMuX3RpbWVsaW5lW2ldLnRpbWU+PXQ7KWktLTtyZXR1cm4gdGhpcy5faXRlcmF0ZShlLGkrMSksdGhpc30sdC5UaW1lbGluZS5wcm90b3R5cGUuZm9yRWFjaEF0VGltZT1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX3NlYXJjaCh0KTtyZXR1cm4tMSE9PWkmJnRoaXMuX2l0ZXJhdGUoZnVuY3Rpb24oaSl7aS50aW1lPT09dCYmZShpKX0sMCxpKSx0aGlzfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3RpbWVsaW5lPW51bGwsdGhpcy5fdG9SZW1vdmU9bnVsbH0sdC5UaW1lbGluZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuVGltZWxpbmVTaWduYWw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInZhbHVlXCIsXCJ1bml0c1wiXSx0LlNpZ25hbC5kZWZhdWx0cyk7dGhpcy5fZXZlbnRzPW5ldyB0LlRpbWVsaW5lKDEwKSx0LlNpZ25hbC5hcHBseSh0aGlzLGUpLGUucGFyYW09dGhpcy5fcGFyYW0sdC5QYXJhbS5jYWxsKHRoaXMsZSksdGhpcy5faW5pdGlhbD10aGlzLl9mcm9tVW5pdHModGhpcy5fcGFyYW0udmFsdWUpfSx0LmV4dGVuZCh0LlRpbWVsaW5lU2lnbmFsLHQuUGFyYW0pLHQuVGltZWxpbmVTaWduYWwuVHlwZT17TGluZWFyOlwibGluZWFyXCIsRXhwb25lbnRpYWw6XCJleHBvbmVudGlhbFwiLFRhcmdldDpcInRhcmdldFwiLEN1cnZlOlwiY3VydmVcIixTZXQ6XCJzZXRcIn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5ub3coKSxlPXRoaXMuZ2V0VmFsdWVBdFRpbWUodCk7cmV0dXJuIHRoaXMuX3RvVW5pdHMoZSl9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9mcm9tVW5pdHModCk7dGhpcy5faW5pdGlhbD1lLHRoaXMuY2FuY2VsU2NoZWR1bGVkVmFsdWVzKCksdGhpcy5fcGFyYW0udmFsdWU9ZX19KSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5zZXRWYWx1ZUF0VGltZT1mdW5jdGlvbihlLGkpe3JldHVybiBlPXRoaXMuX2Zyb21Vbml0cyhlKSxpPXRoaXMudG9TZWNvbmRzKGkpLHRoaXMuX2V2ZW50cy5hZGQoe3R5cGU6dC5UaW1lbGluZVNpZ25hbC5UeXBlLlNldCx2YWx1ZTplLHRpbWU6aX0pLHRoaXMuX3BhcmFtLnNldFZhbHVlQXRUaW1lKGUsaSksdGhpc30sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUubGluZWFyUmFtcFRvVmFsdWVBdFRpbWU9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gZT10aGlzLl9mcm9tVW5pdHMoZSksaT10aGlzLnRvU2Vjb25kcyhpKSx0aGlzLl9ldmVudHMuYWRkKHt0eXBlOnQuVGltZWxpbmVTaWduYWwuVHlwZS5MaW5lYXIsdmFsdWU6ZSx0aW1lOml9KSx0aGlzLl9wYXJhbS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShlLGkpLHRoaXN9LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWU9ZnVuY3Rpb24oZSxpKXtpPXRoaXMudG9TZWNvbmRzKGkpO3ZhciBuPXRoaXMuX3NlYXJjaEJlZm9yZShpKTtuJiYwPT09bi52YWx1ZSYmdGhpcy5zZXRWYWx1ZUF0VGltZSh0aGlzLl9taW5PdXRwdXQsbi50aW1lKSxlPXRoaXMuX2Zyb21Vbml0cyhlKTt2YXIgcz1NYXRoLm1heChlLHRoaXMuX21pbk91dHB1dCk7cmV0dXJuIHRoaXMuX2V2ZW50cy5hZGQoe3R5cGU6dC5UaW1lbGluZVNpZ25hbC5UeXBlLkV4cG9uZW50aWFsLHZhbHVlOnMsdGltZTppfSksZTx0aGlzLl9taW5PdXRwdXQ/KHRoaXMuX3BhcmFtLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUodGhpcy5fbWluT3V0cHV0LGktdGhpcy5zYW1wbGVUaW1lKSx0aGlzLnNldFZhbHVlQXRUaW1lKDAsaSkpOnRoaXMuX3BhcmFtLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoZSxpKSx0aGlzfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5zZXRUYXJnZXRBdFRpbWU9ZnVuY3Rpb24oZSxpLG4pe3JldHVybiBlPXRoaXMuX2Zyb21Vbml0cyhlKSxlPU1hdGgubWF4KHRoaXMuX21pbk91dHB1dCxlKSxuPU1hdGgubWF4KHRoaXMuX21pbk91dHB1dCxuKSxpPXRoaXMudG9TZWNvbmRzKGkpLHRoaXMuX2V2ZW50cy5hZGQoe3R5cGU6dC5UaW1lbGluZVNpZ25hbC5UeXBlLlRhcmdldCx2YWx1ZTplLHRpbWU6aSxjb25zdGFudDpufSksdGhpcy5fcGFyYW0uc2V0VGFyZ2V0QXRUaW1lKGUsaSxuKSx0aGlzfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5zZXRWYWx1ZUN1cnZlQXRUaW1lPWZ1bmN0aW9uKGUsaSxuLHMpe3M9dGhpcy5kZWZhdWx0QXJnKHMsMSk7Zm9yKHZhciBvPW5ldyBBcnJheShlLmxlbmd0aCkscj0wO3I8by5sZW5ndGg7cisrKW9bcl09dGhpcy5fZnJvbVVuaXRzKGVbcl0pKnM7aT10aGlzLnRvU2Vjb25kcyhpKSxuPXRoaXMudG9TZWNvbmRzKG4pLHRoaXMuX2V2ZW50cy5hZGQoe3R5cGU6dC5UaW1lbGluZVNpZ25hbC5UeXBlLkN1cnZlLHZhbHVlOm8sdGltZTppLGR1cmF0aW9uOm59KSx0aGlzLl9wYXJhbS5zZXRWYWx1ZUF0VGltZShvWzBdLGkpO2Zvcih2YXIgYT0xO2E8by5sZW5ndGg7YSsrKXt2YXIgaD1pK2EvKG8ubGVuZ3RoLTEpKm47dGhpcy5fcGFyYW0ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUob1thXSxoKX1yZXR1cm4gdGhpc30sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuY2FuY2VsU2NoZWR1bGVkVmFsdWVzPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX2V2ZW50cy5jYW5jZWwodCksdGhpcy5fcGFyYW0uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKHQpLHRoaXN9LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLnNldFJhbXBQb2ludD1mdW5jdGlvbihlKXtlPXRoaXMudG9TZWNvbmRzKGUpO3ZhciBpPXRoaXMuX3RvVW5pdHModGhpcy5nZXRWYWx1ZUF0VGltZShlKSksbj10aGlzLl9zZWFyY2hCZWZvcmUoZSk7aWYobiYmbi50aW1lPT09ZSl0aGlzLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhlK3RoaXMuc2FtcGxlVGltZSk7ZWxzZSBpZihuJiZuLnR5cGU9PT10LlRpbWVsaW5lU2lnbmFsLlR5cGUuQ3VydmUmJm4udGltZStuLmR1cmF0aW9uPmUpdGhpcy5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoZSksdGhpcy5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShpLGUpO2Vsc2V7dmFyIHM9dGhpcy5fc2VhcmNoQWZ0ZXIoZSk7cyYmKHRoaXMuY2FuY2VsU2NoZWR1bGVkVmFsdWVzKGUpLHMudHlwZT09PXQuVGltZWxpbmVTaWduYWwuVHlwZS5MaW5lYXI/dGhpcy5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShpLGUpOnMudHlwZT09PXQuVGltZWxpbmVTaWduYWwuVHlwZS5FeHBvbmVudGlhbCYmdGhpcy5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKGksZSkpLHRoaXMuc2V0VmFsdWVBdFRpbWUoaSxlKX1yZXR1cm4gdGhpc30sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUubGluZWFyUmFtcFRvVmFsdWVCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5zZXRSYW1wUG9pbnQoZSksdGhpcy5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0LGkpLHRoaXN9LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5zZXRSYW1wUG9pbnQoZSksdGhpcy5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKHQsaSksdGhpc30sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuX3NlYXJjaEJlZm9yZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZXZlbnRzLmdldCh0KX0sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuX3NlYXJjaEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ldmVudHMuZ2V0QWZ0ZXIodCl9LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLmdldFZhbHVlQXRUaW1lPWZ1bmN0aW9uKGUpe2U9dGhpcy50b1NlY29uZHMoZSk7dmFyIGk9dGhpcy5fc2VhcmNoQWZ0ZXIoZSksbj10aGlzLl9zZWFyY2hCZWZvcmUoZSkscz10aGlzLl9pbml0aWFsO2lmKG51bGw9PT1uKXM9dGhpcy5faW5pdGlhbDtlbHNlIGlmKG4udHlwZT09PXQuVGltZWxpbmVTaWduYWwuVHlwZS5UYXJnZXQpe3ZhciBvLHI9dGhpcy5fZXZlbnRzLmdldEJlZm9yZShuLnRpbWUpO289bnVsbD09PXI/dGhpcy5faW5pdGlhbDpyLnZhbHVlLHM9dGhpcy5fZXhwb25lbnRpYWxBcHByb2FjaChuLnRpbWUsbyxuLnZhbHVlLG4uY29uc3RhbnQsZSl9ZWxzZSBzPW4udHlwZT09PXQuVGltZWxpbmVTaWduYWwuVHlwZS5DdXJ2ZT90aGlzLl9jdXJ2ZUludGVycG9sYXRlKG4udGltZSxuLnZhbHVlLG4uZHVyYXRpb24sZSk6bnVsbD09PWk/bi52YWx1ZTppLnR5cGU9PT10LlRpbWVsaW5lU2lnbmFsLlR5cGUuTGluZWFyP3RoaXMuX2xpbmVhckludGVycG9sYXRlKG4udGltZSxuLnZhbHVlLGkudGltZSxpLnZhbHVlLGUpOmkudHlwZT09PXQuVGltZWxpbmVTaWduYWwuVHlwZS5FeHBvbmVudGlhbD90aGlzLl9leHBvbmVudGlhbEludGVycG9sYXRlKG4udGltZSxuLnZhbHVlLGkudGltZSxpLnZhbHVlLGUpOm4udmFsdWU7cmV0dXJuIHN9LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLmNvbm5lY3Q9dC5TaWduYWxCYXNlLnByb3RvdHlwZS5jb25uZWN0LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLl9leHBvbmVudGlhbEFwcHJvYWNoPWZ1bmN0aW9uKHQsZSxpLG4scyl7cmV0dXJuIGkrKGUtaSkqTWF0aC5leHAoLShzLXQpL24pfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5fbGluZWFySW50ZXJwb2xhdGU9ZnVuY3Rpb24odCxlLGksbixzKXtyZXR1cm4gZSsocy10KS8oaS10KSoobi1lKX0sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuX2V4cG9uZW50aWFsSW50ZXJwb2xhdGU9ZnVuY3Rpb24odCxlLGksbixzKXtyZXR1cm4oZT1NYXRoLm1heCh0aGlzLl9taW5PdXRwdXQsZSkpKk1hdGgucG93KG4vZSwocy10KS8oaS10KSl9LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLl9jdXJ2ZUludGVycG9sYXRlPWZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBzPWUubGVuZ3RoO2lmKG4+PXQraSlyZXR1cm4gZVtzLTFdO2lmKG48PXQpcmV0dXJuIGVbMF07dmFyIG89KG4tdCkvaSxyPU1hdGguZmxvb3IoKHMtMSkqbyksYT1NYXRoLmNlaWwoKHMtMSkqbyksaD1lW3JdLGw9ZVthXTtyZXR1cm4gYT09PXI/aDp0aGlzLl9saW5lYXJJbnRlcnBvbGF0ZShyLGgsYSxsLG8qKHMtMSkpfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5TaWduYWwucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0LlBhcmFtLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZXZlbnRzLmRpc3Bvc2UoKSx0aGlzLl9ldmVudHM9bnVsbH0sdC5UaW1lbGluZVNpZ25hbH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuUG93PWZ1bmN0aW9uKGUpe3RoaXMuX2V4cD10aGlzLmRlZmF1bHRBcmcoZSwxKSx0aGlzLl9leHBTY2FsZXI9dGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgdC5XYXZlU2hhcGVyKHRoaXMuX2V4cEZ1bmModGhpcy5fZXhwKSw4MTkyKX0sdC5leHRlbmQodC5Qb3csdC5TaWduYWxCYXNlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Qb3cucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V4cD10LHRoaXMuX2V4cFNjYWxlci5zZXRNYXAodGhpcy5fZXhwRnVuYyh0aGlzLl9leHApKX19KSx0LlBvdy5wcm90b3R5cGUuX2V4cEZ1bmM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLnBvdyhNYXRoLmFicyhlKSx0KX19LHQuUG93LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9leHBTY2FsZXIuZGlzcG9zZSgpLHRoaXMuX2V4cFNjYWxlcj1udWxsLHRoaXN9LHQuUG93fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5FbnZlbG9wZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiYXR0YWNrXCIsXCJkZWNheVwiLFwic3VzdGFpblwiLFwicmVsZWFzZVwiXSx0LkVudmVsb3BlLmRlZmF1bHRzKTt0aGlzLmF0dGFjaz1lLmF0dGFjayx0aGlzLmRlY2F5PWUuZGVjYXksdGhpcy5zdXN0YWluPWUuc3VzdGFpbix0aGlzLnJlbGVhc2U9ZS5yZWxlYXNlLHRoaXMuX2F0dGFja0N1cnZlPVwibGluZWFyXCIsdGhpcy5fcmVsZWFzZUN1cnZlPVwiZXhwb25lbnRpYWxcIix0aGlzLl9zaWc9dGhpcy5vdXRwdXQ9bmV3IHQuVGltZWxpbmVTaWduYWwsdGhpcy5fc2lnLnNldFZhbHVlQXRUaW1lKDAsMCksdGhpcy5hdHRhY2tDdXJ2ZT1lLmF0dGFja0N1cnZlLHRoaXMucmVsZWFzZUN1cnZlPWUucmVsZWFzZUN1cnZlfSx0LmV4dGVuZCh0LkVudmVsb3BlKSx0LkVudmVsb3BlLmRlZmF1bHRzPXthdHRhY2s6LjAxLGRlY2F5Oi4xLHN1c3RhaW46LjUscmVsZWFzZToxLGF0dGFja0N1cnZlOlwibGluZWFyXCIscmVsZWFzZUN1cnZlOlwiZXhwb25lbnRpYWxcIn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRW52ZWxvcGUucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VmFsdWVBdFRpbWUodGhpcy5ub3coKSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRW52ZWxvcGUucHJvdG90eXBlLFwiYXR0YWNrQ3VydmVcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5pc1N0cmluZyh0aGlzLl9hdHRhY2tDdXJ2ZSkpcmV0dXJuIHRoaXMuX2F0dGFja0N1cnZlO2lmKHRoaXMuaXNBcnJheSh0aGlzLl9hdHRhY2tDdXJ2ZSkpe2Zvcih2YXIgZSBpbiB0LkVudmVsb3BlLlR5cGUpaWYodC5FbnZlbG9wZS5UeXBlW2VdLkluPT09dGhpcy5fYXR0YWNrQ3VydmUpcmV0dXJuIGU7cmV0dXJuIHRoaXMuX2F0dGFja0N1cnZlfX0sc2V0OmZ1bmN0aW9uKGUpe2lmKHQuRW52ZWxvcGUuVHlwZS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIGk9dC5FbnZlbG9wZS5UeXBlW2VdO3RoaXMuaXNPYmplY3QoaSk/dGhpcy5fYXR0YWNrQ3VydmU9aS5Jbjp0aGlzLl9hdHRhY2tDdXJ2ZT1pfWVsc2V7aWYoIXRoaXMuaXNBcnJheShlKSl0aHJvdyBuZXcgRXJyb3IoXCJUb25lLkVudmVsb3BlOiBpbnZhbGlkIGN1cnZlOiBcIitlKTt0aGlzLl9hdHRhY2tDdXJ2ZT1lfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5FbnZlbG9wZS5wcm90b3R5cGUsXCJyZWxlYXNlQ3VydmVcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5pc1N0cmluZyh0aGlzLl9yZWxlYXNlQ3VydmUpKXJldHVybiB0aGlzLl9yZWxlYXNlQ3VydmU7aWYodGhpcy5pc0FycmF5KHRoaXMuX3JlbGVhc2VDdXJ2ZSkpe2Zvcih2YXIgZSBpbiB0LkVudmVsb3BlLlR5cGUpaWYodC5FbnZlbG9wZS5UeXBlW2VdLk91dD09PXRoaXMuX3JlbGVhc2VDdXJ2ZSlyZXR1cm4gZTtyZXR1cm4gdGhpcy5fcmVsZWFzZUN1cnZlfX0sc2V0OmZ1bmN0aW9uKGUpe2lmKHQuRW52ZWxvcGUuVHlwZS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIGk9dC5FbnZlbG9wZS5UeXBlW2VdO3RoaXMuaXNPYmplY3QoaSk/dGhpcy5fcmVsZWFzZUN1cnZlPWkuT3V0OnRoaXMuX3JlbGVhc2VDdXJ2ZT1pfWVsc2V7aWYoIXRoaXMuaXNBcnJheShlKSl0aHJvdyBuZXcgRXJyb3IoXCJUb25lLkVudmVsb3BlOiBpbnZhbGlkIGN1cnZlOiBcIitlKTt0aGlzLl9yZWxlYXNlQ3VydmU9ZX19fSksdC5FbnZlbG9wZS5wcm90b3R5cGUudHJpZ2dlckF0dGFjaz1mdW5jdGlvbih0LGUpe3Q9dGhpcy50b1NlY29uZHModCk7dmFyIGk9dGhpcy50b1NlY29uZHModGhpcy5hdHRhY2spLG49aSxzPXRoaXMudG9TZWNvbmRzKHRoaXMuZGVjYXkpO2U9dGhpcy5kZWZhdWx0QXJnKGUsMSk7dmFyIG89dGhpcy5nZXRWYWx1ZUF0VGltZSh0KTtpZihvPjAmJihuPSgxLW8pLygxL24pKSxcImxpbmVhclwiPT09dGhpcy5fYXR0YWNrQ3VydmUpdGhpcy5fc2lnLmxpbmVhclJhbXBUb1ZhbHVlKGUsbix0KTtlbHNlIGlmKFwiZXhwb25lbnRpYWxcIj09PXRoaXMuX2F0dGFja0N1cnZlKXRoaXMuX3NpZy5leHBvbmVudGlhbFJhbXBUb1ZhbHVlKGUsbix0KTtlbHNlIGlmKG4+MCl7dGhpcy5fc2lnLnNldFJhbXBQb2ludCh0KTt2YXIgcj10aGlzLl9hdHRhY2tDdXJ2ZTtpZihuPGkpe3ZhciBhPTEtbi9pLGg9TWF0aC5mbG9vcihhKnRoaXMuX2F0dGFja0N1cnZlLmxlbmd0aCk7KHI9dGhpcy5fYXR0YWNrQ3VydmUuc2xpY2UoaCkpWzBdPW99dGhpcy5fc2lnLnNldFZhbHVlQ3VydmVBdFRpbWUocix0LG4sZSl9cmV0dXJuIHRoaXMuX3NpZy5leHBvbmVudGlhbFJhbXBUb1ZhbHVlKGUqdGhpcy5zdXN0YWluLHMsbit0KSx0aGlzfSx0LkVudmVsb3BlLnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpO3ZhciBlPXRoaXMuZ2V0VmFsdWVBdFRpbWUodCk7aWYoZT4wKXt2YXIgaT10aGlzLnRvU2Vjb25kcyh0aGlzLnJlbGVhc2UpO2lmKFwibGluZWFyXCI9PT10aGlzLl9yZWxlYXNlQ3VydmUpdGhpcy5fc2lnLmxpbmVhclJhbXBUb1ZhbHVlKDAsaSx0KTtlbHNlIGlmKFwiZXhwb25lbnRpYWxcIj09PXRoaXMuX3JlbGVhc2VDdXJ2ZSl0aGlzLl9zaWcuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZSgwLGksdCk7ZWxzZXt2YXIgbj10aGlzLl9yZWxlYXNlQ3VydmU7dGhpcy5pc0FycmF5KG4pJiYodGhpcy5fc2lnLnNldFJhbXBQb2ludCh0KSx0aGlzLl9zaWcuc2V0VmFsdWVDdXJ2ZUF0VGltZShuLHQsaSxlKSl9fXJldHVybiB0aGlzfSx0LkVudmVsb3BlLnByb3RvdHlwZS5nZXRWYWx1ZUF0VGltZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc2lnLmdldFZhbHVlQXRUaW1lKHQpfSx0LkVudmVsb3BlLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrUmVsZWFzZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy50cmlnZ2VyQXR0YWNrKGUsaSksdGhpcy50cmlnZ2VyUmVsZWFzZShlK3RoaXMudG9TZWNvbmRzKHQpKSx0aGlzfSx0LkVudmVsb3BlLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NpZy5jYW5jZWxTY2hlZHVsZWRWYWx1ZXModCksdGhpc30sdC5FbnZlbG9wZS5wcm90b3R5cGUuY29ubmVjdD10LlNpZ25hbC5wcm90b3R5cGUuY29ubmVjdCxmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0Lmxlbmd0aCksaT0wO2k8dC5sZW5ndGg7aSsrKWVbaV09MS10W2ldO3JldHVybiBlfXZhciBpLG4scz1bXTtmb3IoaT0wO2k8MTI4O2krKylzW2ldPU1hdGguc2luKGkvMTI3KihNYXRoLlBJLzIpKTt2YXIgbz1bXTtmb3IoaT0wO2k8MTI3O2krKyl7bj1pLzEyNzt2YXIgcj1NYXRoLnNpbihuKigyKk1hdGguUEkpKjYuNC1NYXRoLlBJLzIpKzE7b1tpXT1yLzEwKy44MypufW9bMTI3XT0xO3ZhciBhPVtdO2ZvcihpPTA7aTwxMjg7aSsrKWFbaV09TWF0aC5jZWlsKGkvMTI3KjUpLzU7dmFyIGg9W107Zm9yKGk9MDtpPDEyODtpKyspbj1pLzEyNyxoW2ldPS41KigxLU1hdGguY29zKE1hdGguUEkqbikpO3ZhciBsPVtdO2ZvcihpPTA7aTwxMjg7aSsrKXtuPWkvMTI3O3ZhciB1PTQqTWF0aC5wb3cobiwzKSsuMixwPU1hdGguY29zKHUqTWF0aC5QSSoyKm4pO2xbaV09TWF0aC5hYnMocCooMS1uKSl9dC5FbnZlbG9wZS5UeXBlPXtsaW5lYXI6XCJsaW5lYXJcIixleHBvbmVudGlhbDpcImV4cG9uZW50aWFsXCIsYm91bmNlOntJbjplKGwpLE91dDpsfSxjb3NpbmU6e0luOnMsT3V0OmZ1bmN0aW9uKHQpe3JldHVybiB0LnNsaWNlKDApLnJldmVyc2UoKX0ocyl9LHN0ZXA6e0luOmEsT3V0OmUoYSl9LHJpcHBsZTp7SW46byxPdXQ6ZShvKX0sc2luZTp7SW46aCxPdXQ6ZShoKX19fSgpLHQuRW52ZWxvcGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NpZy5kaXNwb3NlKCksdGhpcy5fc2lnPW51bGwsdGhpcy5fYXR0YWNrQ3VydmU9bnVsbCx0aGlzLl9yZWxlYXNlQ3VydmU9bnVsbCx0aGlzfSx0LkVudmVsb3BlfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5BbXBsaXR1ZGVFbnZlbG9wZT1mdW5jdGlvbigpe3QuRW52ZWxvcGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9bmV3IHQuR2Fpbix0aGlzLl9zaWcuY29ubmVjdCh0aGlzLm91dHB1dC5nYWluKX0sdC5leHRlbmQodC5BbXBsaXR1ZGVFbnZlbG9wZSx0LkVudmVsb3BlKSx0LkFtcGxpdHVkZUVudmVsb3BlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5wdXQuZGlzcG9zZSgpLHRoaXMuaW5wdXQ9bnVsbCx0LkVudmVsb3BlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpc30sdC5BbXBsaXR1ZGVFbnZlbG9wZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHdpbmRvdy5BbmFseXNlck5vZGUmJiFBbmFseXNlck5vZGUucHJvdG90eXBlLmdldEZsb2F0VGltZURvbWFpbkRhdGEmJihBbmFseXNlck5vZGUucHJvdG90eXBlLmdldEZsb2F0VGltZURvbWFpbkRhdGE9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpO3RoaXMuZ2V0Qnl0ZVRpbWVEb21haW5EYXRhKGUpO2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXRbaV09KGVbaV0tMTI4KS8xMjh9KSx0LkFuYWx5c2VyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ0eXBlXCIsXCJzaXplXCJdLHQuQW5hbHlzZXIuZGVmYXVsdHMpO3RoaXMuX2FuYWx5c2VyPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZUFuYWx5c2VyKCksdGhpcy5fdHlwZT1lLnR5cGUsdGhpcy5fcmV0dXJuVHlwZT1lLnJldHVyblR5cGUsdGhpcy5fYnVmZmVyPW51bGwsdGhpcy5zaXplPWUuc2l6ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMucmV0dXJuVHlwZT1lLnJldHVyblR5cGUsdGhpcy5taW5EZWNpYmVscz1lLm1pbkRlY2liZWxzLHRoaXMubWF4RGVjaWJlbHM9ZS5tYXhEZWNpYmVsc30sdC5leHRlbmQodC5BbmFseXNlciksdC5BbmFseXNlci5kZWZhdWx0cz17c2l6ZToxMDI0LHJldHVyblR5cGU6XCJieXRlXCIsdHlwZTpcImZmdFwiLHNtb290aGluZzouOCxtYXhEZWNpYmVsczotMzAsbWluRGVjaWJlbHM6LTEwMH0sdC5BbmFseXNlci5UeXBlPXtXYXZlZm9ybTpcIndhdmVmb3JtXCIsRkZUOlwiZmZ0XCJ9LHQuQW5hbHlzZXIuUmV0dXJuVHlwZT17Qnl0ZTpcImJ5dGVcIixGbG9hdDpcImZsb2F0XCJ9LHQuQW5hbHlzZXIucHJvdG90eXBlLmFuYWx5c2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZT09PXQuQW5hbHlzZXIuVHlwZS5GRlQ/dGhpcy5fcmV0dXJuVHlwZT09PXQuQW5hbHlzZXIuUmV0dXJuVHlwZS5CeXRlP3RoaXMuX2FuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKHRoaXMuX2J1ZmZlcik6dGhpcy5fYW5hbHlzZXIuZ2V0RmxvYXRGcmVxdWVuY3lEYXRhKHRoaXMuX2J1ZmZlcik6dGhpcy5fdHlwZT09PXQuQW5hbHlzZXIuVHlwZS5XYXZlZm9ybSYmKHRoaXMuX3JldHVyblR5cGU9PT10LkFuYWx5c2VyLlJldHVyblR5cGUuQnl0ZT90aGlzLl9hbmFseXNlci5nZXRCeXRlVGltZURvbWFpbkRhdGEodGhpcy5fYnVmZmVyKTp0aGlzLl9hbmFseXNlci5nZXRGbG9hdFRpbWVEb21haW5EYXRhKHRoaXMuX2J1ZmZlcikpLHRoaXMuX2J1ZmZlcn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQW5hbHlzZXIucHJvdG90eXBlLFwic2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9hbmFseXNlci5mZnRTaXplPTIqdCx0aGlzLnR5cGU9dGhpcy5fdHlwZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BbmFseXNlci5wcm90b3R5cGUsXCJyZXR1cm5UeXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXR1cm5UeXBlfSxzZXQ6ZnVuY3Rpb24oZSl7aWYoZT09PXQuQW5hbHlzZXIuUmV0dXJuVHlwZS5CeXRlKXRoaXMuX2J1ZmZlcj1uZXcgVWludDhBcnJheSh0aGlzLl9hbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudCk7ZWxzZXtpZihlIT09dC5BbmFseXNlci5SZXR1cm5UeXBlLkZsb2F0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJUb25lLkFuYWxheXNlcjogaW52YWxpZCByZXR1cm4gdHlwZTogXCIrZSk7dGhpcy5fYnVmZmVyPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5fYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQpfXRoaXMuX3JldHVyblR5cGU9ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BbmFseXNlci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlfSxzZXQ6ZnVuY3Rpb24oZSl7aWYoZSE9PXQuQW5hbHlzZXIuVHlwZS5XYXZlZm9ybSYmZSE9PXQuQW5hbHlzZXIuVHlwZS5GRlQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRvbmUuQW5hbHlzZXI6IGludmFsaWQgdHlwZTogXCIrZSk7dGhpcy5fdHlwZT1lfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkFuYWx5c2VyLnByb3RvdHlwZSxcInNtb290aGluZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYW5hbHlzZXIuc21vb3RoaW5nVGltZUNvbnN0YW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYW5hbHlzZXIuc21vb3RoaW5nVGltZUNvbnN0YW50PXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQW5hbHlzZXIucHJvdG90eXBlLFwibWluRGVjaWJlbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuYWx5c2VyLm1pbkRlY2liZWxzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYW5hbHlzZXIubWluRGVjaWJlbHM9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BbmFseXNlci5wcm90b3R5cGUsXCJtYXhEZWNpYmVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYW5hbHlzZXIubWF4RGVjaWJlbHN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9hbmFseXNlci5tYXhEZWNpYmVscz10fX0pLHQuQW5hbHlzZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fYW5hbHlzZXIuZGlzY29ubmVjdCgpLHRoaXMuX2FuYWx5c2VyPW51bGwsdGhpcy5fYnVmZmVyPW51bGx9LHQuQW5hbHlzZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkNvbXByZXNzb3I9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInRocmVzaG9sZFwiLFwicmF0aW9cIl0sdC5Db21wcmVzc29yLmRlZmF1bHRzKTt0aGlzLl9jb21wcmVzc29yPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZUR5bmFtaWNzQ29tcHJlc3NvcigpLHRoaXMudGhyZXNob2xkPW5ldyB0LlBhcmFtKHtwYXJhbTp0aGlzLl9jb21wcmVzc29yLnRocmVzaG9sZCx1bml0czp0LlR5cGUuRGVjaWJlbHMsY29udmVydDohMX0pLHRoaXMuYXR0YWNrPW5ldyB0LlBhcmFtKHRoaXMuX2NvbXByZXNzb3IuYXR0YWNrLHQuVHlwZS5UaW1lKSx0aGlzLnJlbGVhc2U9bmV3IHQuUGFyYW0odGhpcy5fY29tcHJlc3Nvci5yZWxlYXNlLHQuVHlwZS5UaW1lKSx0aGlzLmtuZWU9bmV3IHQuUGFyYW0oe3BhcmFtOnRoaXMuX2NvbXByZXNzb3Iua25lZSx1bml0czp0LlR5cGUuRGVjaWJlbHMsY29udmVydDohMX0pLHRoaXMucmF0aW89bmV3IHQuUGFyYW0oe3BhcmFtOnRoaXMuX2NvbXByZXNzb3IucmF0aW8sY29udmVydDohMX0pLHRoaXMuX3JlYWRPbmx5KFtcImtuZWVcIixcInJlbGVhc2VcIixcImF0dGFja1wiLFwicmF0aW9cIixcInRocmVzaG9sZFwiXSksdGhpcy5zZXQoZSl9LHQuZXh0ZW5kKHQuQ29tcHJlc3NvciksdC5Db21wcmVzc29yLmRlZmF1bHRzPXtyYXRpbzoxMix0aHJlc2hvbGQ6LTI0LHJlbGVhc2U6LjI1LGF0dGFjazouMDAzLGtuZWU6MzB9LHQuQ29tcHJlc3Nvci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wia25lZVwiLFwicmVsZWFzZVwiLFwiYXR0YWNrXCIsXCJyYXRpb1wiLFwidGhyZXNob2xkXCJdKSx0aGlzLl9jb21wcmVzc29yLmRpc2Nvbm5lY3QoKSx0aGlzLl9jb21wcmVzc29yPW51bGwsdGhpcy5hdHRhY2suZGlzcG9zZSgpLHRoaXMuYXR0YWNrPW51bGwsdGhpcy5yZWxlYXNlLmRpc3Bvc2UoKSx0aGlzLnJlbGVhc2U9bnVsbCx0aGlzLnRocmVzaG9sZC5kaXNwb3NlKCksdGhpcy50aHJlc2hvbGQ9bnVsbCx0aGlzLnJhdGlvLmRpc3Bvc2UoKSx0aGlzLnJhdGlvPW51bGwsdGhpcy5rbmVlLmRpc3Bvc2UoKSx0aGlzLmtuZWU9bnVsbCx0aGlzfSx0LkNvbXByZXNzb3J9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkFkZD1mdW5jdGlvbihlKXt0aGlzLmNyZWF0ZUluc091dHMoMiwwKSx0aGlzLl9zdW09dGhpcy5pbnB1dFswXT10aGlzLmlucHV0WzFdPXRoaXMub3V0cHV0PW5ldyB0LkdhaW4sdGhpcy5fcGFyYW09dGhpcy5pbnB1dFsxXT1uZXcgdC5TaWduYWwoZSksdGhpcy5fcGFyYW0uY29ubmVjdCh0aGlzLl9zdW0pfSx0LmV4dGVuZCh0LkFkZCx0LlNpZ25hbCksdC5BZGQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3N1bS5kaXNwb3NlKCksdGhpcy5fc3VtPW51bGwsdGhpcy5fcGFyYW0uZGlzcG9zZSgpLHRoaXMuX3BhcmFtPW51bGwsdGhpc30sdC5BZGR9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lk11bHRpcGx5PWZ1bmN0aW9uKGUpe3RoaXMuY3JlYXRlSW5zT3V0cygyLDApLHRoaXMuX211bHQ9dGhpcy5pbnB1dFswXT10aGlzLm91dHB1dD1uZXcgdC5HYWluLHRoaXMuX3BhcmFtPXRoaXMuaW5wdXRbMV09dGhpcy5vdXRwdXQuZ2Fpbix0aGlzLl9wYXJhbS52YWx1ZT10aGlzLmRlZmF1bHRBcmcoZSwwKX0sdC5leHRlbmQodC5NdWx0aXBseSx0LlNpZ25hbCksdC5NdWx0aXBseS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbXVsdC5kaXNwb3NlKCksdGhpcy5fbXVsdD1udWxsLHRoaXMuX3BhcmFtPW51bGwsdGhpc30sdC5NdWx0aXBseX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTmVnYXRlPWZ1bmN0aW9uKCl7dGhpcy5fbXVsdGlwbHk9dGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgdC5NdWx0aXBseSgtMSl9LHQuZXh0ZW5kKHQuTmVnYXRlLHQuU2lnbmFsQmFzZSksdC5OZWdhdGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX211bHRpcGx5LmRpc3Bvc2UoKSx0aGlzLl9tdWx0aXBseT1udWxsLHRoaXN9LHQuTmVnYXRlfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5TdWJ0cmFjdD1mdW5jdGlvbihlKXt0aGlzLmNyZWF0ZUluc091dHMoMiwwKSx0aGlzLl9zdW09dGhpcy5pbnB1dFswXT10aGlzLm91dHB1dD1uZXcgdC5HYWluLHRoaXMuX25lZz1uZXcgdC5OZWdhdGUsdGhpcy5fcGFyYW09dGhpcy5pbnB1dFsxXT1uZXcgdC5TaWduYWwoZSksdGhpcy5fcGFyYW0uY2hhaW4odGhpcy5fbmVnLHRoaXMuX3N1bSl9LHQuZXh0ZW5kKHQuU3VidHJhY3QsdC5TaWduYWwpLHQuU3VidHJhY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX25lZy5kaXNwb3NlKCksdGhpcy5fbmVnPW51bGwsdGhpcy5fc3VtLmRpc2Nvbm5lY3QoKSx0aGlzLl9zdW09bnVsbCx0aGlzLl9wYXJhbS5kaXNwb3NlKCksdGhpcy5fcGFyYW09bnVsbCx0aGlzfSx0LlN1YnRyYWN0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5HcmVhdGVyVGhhblplcm89ZnVuY3Rpb24oKXt0aGlzLl90aHJlc2g9dGhpcy5vdXRwdXQ9bmV3IHQuV2F2ZVNoYXBlcihmdW5jdGlvbih0KXtyZXR1cm4gdDw9MD8wOjF9LDEyNyksdGhpcy5fc2NhbGU9dGhpcy5pbnB1dD1uZXcgdC5NdWx0aXBseSgxZTQpLHRoaXMuX3NjYWxlLmNvbm5lY3QodGhpcy5fdGhyZXNoKX0sdC5leHRlbmQodC5HcmVhdGVyVGhhblplcm8sdC5TaWduYWxCYXNlKSx0LkdyZWF0ZXJUaGFuWmVyby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc2NhbGUuZGlzcG9zZSgpLHRoaXMuX3NjYWxlPW51bGwsdGhpcy5fdGhyZXNoLmRpc3Bvc2UoKSx0aGlzLl90aHJlc2g9bnVsbCx0aGlzfSx0LkdyZWF0ZXJUaGFuWmVyb30pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuR3JlYXRlclRoYW49ZnVuY3Rpb24oZSl7dGhpcy5jcmVhdGVJbnNPdXRzKDIsMCksdGhpcy5fcGFyYW09dGhpcy5pbnB1dFswXT1uZXcgdC5TdWJ0cmFjdChlKSx0aGlzLmlucHV0WzFdPXRoaXMuX3BhcmFtLmlucHV0WzFdLHRoaXMuX2d0ej10aGlzLm91dHB1dD1uZXcgdC5HcmVhdGVyVGhhblplcm8sdGhpcy5fcGFyYW0uY29ubmVjdCh0aGlzLl9ndHopfSx0LmV4dGVuZCh0LkdyZWF0ZXJUaGFuLHQuU2lnbmFsKSx0LkdyZWF0ZXJUaGFuLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9wYXJhbS5kaXNwb3NlKCksdGhpcy5fcGFyYW09bnVsbCx0aGlzLl9ndHouZGlzcG9zZSgpLHRoaXMuX2d0ej1udWxsLHRoaXN9LHQuR3JlYXRlclRoYW59KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkFicz1mdW5jdGlvbigpe3RoaXMuX2Ficz10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LldhdmVTaGFwZXIoZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10PzA6TWF0aC5hYnModCl9LDEyNyl9LHQuZXh0ZW5kKHQuQWJzLHQuU2lnbmFsQmFzZSksdC5BYnMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2Ficy5kaXNwb3NlKCksdGhpcy5fYWJzPW51bGwsdGhpc30sdC5BYnN9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lk1vZHVsbz1mdW5jdGlvbihlKXt0aGlzLmNyZWF0ZUluc091dHMoMSwwKSx0aGlzLl9zaGFwZXI9bmV3IHQuV2F2ZVNoYXBlcihNYXRoLnBvdygyLDE2KSksdGhpcy5fbXVsdGlwbHk9bmV3IHQuTXVsdGlwbHksdGhpcy5fc3VidHJhY3Q9dGhpcy5vdXRwdXQ9bmV3IHQuU3VidHJhY3QsdGhpcy5fbW9kU2lnbmFsPW5ldyB0LlNpZ25hbChlKSx0aGlzLmlucHV0LmZhbih0aGlzLl9zaGFwZXIsdGhpcy5fc3VidHJhY3QpLHRoaXMuX21vZFNpZ25hbC5jb25uZWN0KHRoaXMuX211bHRpcGx5LDAsMCksdGhpcy5fc2hhcGVyLmNvbm5lY3QodGhpcy5fbXVsdGlwbHksMCwxKSx0aGlzLl9tdWx0aXBseS5jb25uZWN0KHRoaXMuX3N1YnRyYWN0LDAsMSksdGhpcy5fc2V0V2F2ZVNoYXBlcihlKX0sdC5leHRlbmQodC5Nb2R1bG8sdC5TaWduYWxCYXNlKSx0Lk1vZHVsby5wcm90b3R5cGUuX3NldFdhdmVTaGFwZXI9ZnVuY3Rpb24odCl7dGhpcy5fc2hhcGVyLnNldE1hcChmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5mbG9vcigoZSsxZS00KS90KX0pfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Nb2R1bG8ucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZFNpZ25hbC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX21vZFNpZ25hbC52YWx1ZT10LHRoaXMuX3NldFdhdmVTaGFwZXIodCl9fSksdC5Nb2R1bG8ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NoYXBlci5kaXNwb3NlKCksdGhpcy5fc2hhcGVyPW51bGwsdGhpcy5fbXVsdGlwbHkuZGlzcG9zZSgpLHRoaXMuX211bHRpcGx5PW51bGwsdGhpcy5fc3VidHJhY3QuZGlzcG9zZSgpLHRoaXMuX3N1YnRyYWN0PW51bGwsdGhpcy5fbW9kU2lnbmFsLmRpc3Bvc2UoKSx0aGlzLl9tb2RTaWduYWw9bnVsbCx0aGlzfSx0Lk1vZHVsb30pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQXVkaW9Ub0dhaW49ZnVuY3Rpb24oKXt0aGlzLl9ub3JtPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9bmV3IHQuV2F2ZVNoYXBlcihmdW5jdGlvbih0KXtyZXR1cm4odCsxKS8yfSl9LHQuZXh0ZW5kKHQuQXVkaW9Ub0dhaW4sdC5TaWduYWxCYXNlKSx0LkF1ZGlvVG9HYWluLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9ub3JtLmRpc3Bvc2UoKSx0aGlzLl9ub3JtPW51bGwsdGhpc30sdC5BdWRpb1RvR2Fpbn0pLHQoZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGUsaSl7dmFyIG49bmV3IHQ7cmV0dXJuIGkuX2V2YWwoZVswXSkuY29ubmVjdChuLDAsMCksaS5fZXZhbChlWzFdKS5jb25uZWN0KG4sMCwxKSxufWZ1bmN0aW9uIGkodCxlLGkpe3ZhciBuPW5ldyB0O3JldHVybiBpLl9ldmFsKGVbMF0pLmNvbm5lY3QobiwwLDApLG59ZnVuY3Rpb24gbih0KXtyZXR1cm4gdD9wYXJzZUZsb2F0KHQpOnZvaWQgMH1mdW5jdGlvbiBzKHQpe3JldHVybiB0JiZ0LmFyZ3M/cGFyc2VGbG9hdCh0LmFyZ3MpOnZvaWQgMH1yZXR1cm4gdC5FeHByPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcmVwbGFjZW1lbnRzKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpLGU9dGhpcy5fcGFyc2VJbnB1dHModCk7dGhpcy5fbm9kZXM9W10sdGhpcy5pbnB1dD1uZXcgQXJyYXkoZSk7Zm9yKHZhciBpPTA7aTxlO2krKyl0aGlzLmlucHV0W2ldPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk7dmFyIG4scz10aGlzLl9wYXJzZVRyZWUodCk7dHJ5e249dGhpcy5fZXZhbChzKX1jYXRjaChlKXt0aHJvdyB0aGlzLl9kaXNwb3NlTm9kZXMoKSxuZXcgRXJyb3IoXCJUb25lLkV4cHI6IENvdWxkIGV2YWx1YXRlIGV4cHJlc3Npb246IFwiK3QpfXRoaXMub3V0cHV0PW59LHQuZXh0ZW5kKHQuRXhwcix0LlNpZ25hbEJhc2UpLHQuRXhwci5fRXhwcmVzc2lvbnM9e3ZhbHVlOntzaWduYWw6e3JlZ2V4cDovXlxcZCtcXC5cXGQrfF5cXGQrLyxtZXRob2Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0LlNpZ25hbChuKGUpKX19LGlucHV0OntyZWdleHA6L15cXCRcXGQvLG1ldGhvZDpmdW5jdGlvbih0LGUpe3JldHVybiBlLmlucHV0W24odC5zdWJzdHIoMSkpXX19fSxnbHVlOntcIihcIjp7cmVnZXhwOi9eXFwoL30sXCIpXCI6e3JlZ2V4cDovXlxcKS99LFwiLFwiOntyZWdleHA6L14sL319LGZ1bmM6e2Ficzp7cmVnZXhwOi9eYWJzLyxtZXRob2Q6aS5iaW5kKHRoaXMsdC5BYnMpfSxtb2Q6e3JlZ2V4cDovXm1vZC8sbWV0aG9kOmZ1bmN0aW9uKGUsaSl7dmFyIG49cyhlWzFdKSxvPW5ldyB0Lk1vZHVsbyhuKTtyZXR1cm4gaS5fZXZhbChlWzBdKS5jb25uZWN0KG8pLG99fSxwb3c6e3JlZ2V4cDovXnBvdy8sbWV0aG9kOmZ1bmN0aW9uKGUsaSl7dmFyIG49cyhlWzFdKSxvPW5ldyB0LlBvdyhuKTtyZXR1cm4gaS5fZXZhbChlWzBdKS5jb25uZWN0KG8pLG99fSxhMmc6e3JlZ2V4cDovXmEyZy8sbWV0aG9kOmZ1bmN0aW9uKGUsaSl7dmFyIG49bmV3IHQuQXVkaW9Ub0dhaW47cmV0dXJuIGkuX2V2YWwoZVswXSkuY29ubmVjdChuKSxufX19LGJpbmFyeTp7XCIrXCI6e3JlZ2V4cDovXlxcKy8scHJlY2VkZW5jZToxLG1ldGhvZDplLmJpbmQodGhpcyx0LkFkZCl9LFwiLVwiOntyZWdleHA6L15cXC0vLHByZWNlZGVuY2U6MSxtZXRob2Q6ZnVuY3Rpb24obixzKXtyZXR1cm4gMT09PW4ubGVuZ3RoP2kodC5OZWdhdGUsbixzKTplKHQuU3VidHJhY3QsbixzKX19LFwiKlwiOntyZWdleHA6L15cXCovLHByZWNlZGVuY2U6MCxtZXRob2Q6ZS5iaW5kKHRoaXMsdC5NdWx0aXBseSl9fSx1bmFyeTp7XCItXCI6e3JlZ2V4cDovXlxcLS8sbWV0aG9kOmkuYmluZCh0aGlzLHQuTmVnYXRlKX0sXCIhXCI6e3JlZ2V4cDovXlxcIS8sbWV0aG9kOmkuYmluZCh0aGlzLHQuTk9UKX19fSx0LkV4cHIucHJvdG90eXBlLl9wYXJzZUlucHV0cz1mdW5jdGlvbih0KXt2YXIgZT10Lm1hdGNoKC9cXCRcXGQvZyksaT0wO2lmKG51bGwhPT1lKWZvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcz1wYXJzZUludChlW25dLnN1YnN0cigxKSkrMTtpPU1hdGgubWF4KGkscyl9cmV0dXJuIGl9LHQuRXhwci5wcm90b3R5cGUuX3JlcGxhY2VtZW50cz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5zaGlmdCgpLGk9MDtpPHQubGVuZ3RoO2krKyllPWUucmVwbGFjZSgvXFwlL2ksdFtpXSk7cmV0dXJuIGV9LHQuRXhwci5wcm90b3R5cGUuX3Rva2VuaXplPWZ1bmN0aW9uKGUpe2Zvcih2YXIgaT0tMSxuPVtdO2UubGVuZ3RoPjA7KXt2YXIgcz1mdW5jdGlvbihlKXtmb3IodmFyIGkgaW4gdC5FeHByLl9FeHByZXNzaW9ucyl7dmFyIG49dC5FeHByLl9FeHByZXNzaW9uc1tpXTtmb3IodmFyIHMgaW4gbil7dmFyIG89bltzXSxyPW8ucmVnZXhwLGE9ZS5tYXRjaChyKTtpZihudWxsIT09YSlyZXR1cm57dHlwZTppLHZhbHVlOmFbMF0sbWV0aG9kOm8ubWV0aG9kfX19dGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVG9uZS5FeHByOiBVbmV4cGVjdGVkIHRva2VuIFwiK2UpfShlPWUudHJpbSgpKTtuLnB1c2gocyksZT1lLnN1YnN0cihzLnZhbHVlLmxlbmd0aCl9cmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gblsrK2ldfSxwZWVrOmZ1bmN0aW9uKCl7cmV0dXJuIG5baSsxXX19fSx0LkV4cHIucHJvdG90eXBlLl9wYXJzZVRyZWU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSh0LGUpe3JldHVybiF1KHQpJiZcImdsdWVcIj09PXQudHlwZSYmdC52YWx1ZT09PWV9ZnVuY3Rpb24gbihlLGksbil7dmFyIHM9dC5FeHByLl9FeHByZXNzaW9uc1tpXTtpZighdShlKSlmb3IodmFyIG8gaW4gcyl7dmFyIHI9c1tvXTtpZihyLnJlZ2V4cC50ZXN0KGUudmFsdWUpKXtpZih1KG4pKXJldHVybiEwO2lmKHIucHJlY2VkZW5jZT09PW4pcmV0dXJuITB9fXJldHVybiExfWZ1bmN0aW9uIHModCl7dSh0KSYmKHQ9NSk7dmFyIGU7ZT10PDA/bygpOnModC0xKTtmb3IodmFyIGk9bC5wZWVrKCk7bihpLFwiYmluYXJ5XCIsdCk7KWU9e29wZXJhdG9yOihpPWwubmV4dCgpKS52YWx1ZSxtZXRob2Q6aS5tZXRob2QsYXJnczpbZSxzKHQtMSldfSxpPWwucGVlaygpO3JldHVybiBlfWZ1bmN0aW9uIG8oKXt2YXIgdCxlO3JldHVybiB0PWwucGVlaygpLG4odCxcInVuYXJ5XCIpPyh0PWwubmV4dCgpLGU9bygpLHtvcGVyYXRvcjp0LnZhbHVlLG1ldGhvZDp0Lm1ldGhvZCxhcmdzOltlXX0pOnIoKX1mdW5jdGlvbiByKCl7dmFyIHQsZTtpZih0PWwucGVlaygpLHUodCkpdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVG9uZS5FeHByOiBVbmV4cGVjdGVkIHRlcm1pbmF0aW9uIG9mIGV4cHJlc3Npb25cIik7aWYoXCJmdW5jXCI9PT10LnR5cGUpcmV0dXJuIHQ9bC5uZXh0KCksYSh0KTtpZihcInZhbHVlXCI9PT10LnR5cGUpcmV0dXJuIHQ9bC5uZXh0KCkse21ldGhvZDp0Lm1ldGhvZCxhcmdzOnQudmFsdWV9O2lmKGkodCxcIihcIikpe2lmKGwubmV4dCgpLGU9cygpLHQ9bC5uZXh0KCksIWkodCxcIilcIikpdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiRXhwZWN0ZWQgKVwiKTtyZXR1cm4gZX10aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJUb25lLkV4cHI6IFBhcnNlIGVycm9yLCBjYW5ub3QgcHJvY2VzcyB0b2tlbiBcIit0LnZhbHVlKX1mdW5jdGlvbiBhKHQpe3ZhciBlLG49W107aWYoZT1sLm5leHQoKSwhaShlLFwiKFwiKSl0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ1RvbmUuRXhwcjogRXhwZWN0ZWQgKCBpbiBhIGZ1bmN0aW9uIGNhbGwgXCInK3QudmFsdWUrJ1wiJyk7aWYoZT1sLnBlZWsoKSxpKGUsXCIpXCIpfHwobj1oKCkpLGU9bC5uZXh0KCksIWkoZSxcIilcIikpdGhyb3cgbmV3IFN5bnRheEVycm9yKCdUb25lLkV4cHI6IEV4cGVjdGVkICkgaW4gYSBmdW5jdGlvbiBjYWxsIFwiJyt0LnZhbHVlKydcIicpO3JldHVybnttZXRob2Q6dC5tZXRob2QsYXJnczpuLG5hbWU6bmFtZX19ZnVuY3Rpb24gaCgpe2Zvcih2YXIgdCxlLG49W107Oyl7aWYoZT1zKCksdShlKSlicmVhaztpZihuLnB1c2goZSksdD1sLnBlZWsoKSwhaSh0LFwiLFwiKSlicmVhaztsLm5leHQoKX1yZXR1cm4gbn12YXIgbD10aGlzLl90b2tlbml6ZShlKSx1PXRoaXMuaXNVbmRlZi5iaW5kKHRoaXMpO3JldHVybiBzKCl9LHQuRXhwci5wcm90b3R5cGUuX2V2YWw9ZnVuY3Rpb24odCl7aWYoIXRoaXMuaXNVbmRlZih0KSl7dmFyIGU9dC5tZXRob2QodC5hcmdzLHRoaXMpO3JldHVybiB0aGlzLl9ub2Rlcy5wdXNoKGUpLGV9fSx0LkV4cHIucHJvdG90eXBlLl9kaXNwb3NlTm9kZXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX25vZGVzLmxlbmd0aDt0Kyspe3ZhciBlPXRoaXMuX25vZGVzW3RdO3RoaXMuaXNGdW5jdGlvbihlLmRpc3Bvc2UpP2UuZGlzcG9zZSgpOnRoaXMuaXNGdW5jdGlvbihlLmRpc2Nvbm5lY3QpJiZlLmRpc2Nvbm5lY3QoKSxlPW51bGwsdGhpcy5fbm9kZXNbdF09bnVsbH10aGlzLl9ub2Rlcz1udWxsfSx0LkV4cHIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZGlzcG9zZU5vZGVzKCl9LHQuRXhwcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRXF1YWxQb3dlckdhaW49ZnVuY3Rpb24oKXt0aGlzLl9lcVBvd2VyPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9bmV3IHQuV2F2ZVNoYXBlcihmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5hYnModCk8LjAwMT8wOnRoaXMuZXF1YWxQb3dlclNjYWxlKHQpfS5iaW5kKHRoaXMpLDQwOTYpfSx0LmV4dGVuZCh0LkVxdWFsUG93ZXJHYWluLHQuU2lnbmFsQmFzZSksdC5FcXVhbFBvd2VyR2Fpbi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZXFQb3dlci5kaXNwb3NlKCksdGhpcy5fZXFQb3dlcj1udWxsLHRoaXN9LHQuRXF1YWxQb3dlckdhaW59KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkNyb3NzRmFkZT1mdW5jdGlvbihlKXt0aGlzLmNyZWF0ZUluc091dHMoMiwxKSx0aGlzLmE9dGhpcy5pbnB1dFswXT1uZXcgdC5HYWluLHRoaXMuYj10aGlzLmlucHV0WzFdPW5ldyB0LkdhaW4sdGhpcy5mYWRlPW5ldyB0LlNpZ25hbCh0aGlzLmRlZmF1bHRBcmcoZSwuNSksdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl9lcXVhbFBvd2VyQT1uZXcgdC5FcXVhbFBvd2VyR2Fpbix0aGlzLl9lcXVhbFBvd2VyQj1uZXcgdC5FcXVhbFBvd2VyR2Fpbix0aGlzLl9pbnZlcnQ9bmV3IHQuRXhwcihcIjEgLSAkMFwiKSx0aGlzLmEuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5iLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuZmFkZS5jaGFpbih0aGlzLl9lcXVhbFBvd2VyQix0aGlzLmIuZ2FpbiksdGhpcy5mYWRlLmNoYWluKHRoaXMuX2ludmVydCx0aGlzLl9lcXVhbFBvd2VyQSx0aGlzLmEuZ2FpbiksdGhpcy5fcmVhZE9ubHkoXCJmYWRlXCIpfSx0LmV4dGVuZCh0LkNyb3NzRmFkZSksdC5Dcm9zc0ZhZGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFwiZmFkZVwiKSx0aGlzLl9lcXVhbFBvd2VyQS5kaXNwb3NlKCksdGhpcy5fZXF1YWxQb3dlckE9bnVsbCx0aGlzLl9lcXVhbFBvd2VyQi5kaXNwb3NlKCksdGhpcy5fZXF1YWxQb3dlckI9bnVsbCx0aGlzLmZhZGUuZGlzcG9zZSgpLHRoaXMuZmFkZT1udWxsLHRoaXMuX2ludmVydC5kaXNwb3NlKCksdGhpcy5faW52ZXJ0PW51bGwsdGhpcy5hLmRpc3Bvc2UoKSx0aGlzLmE9bnVsbCx0aGlzLmIuZGlzcG9zZSgpLHRoaXMuYj1udWxsLHRoaXN9LHQuQ3Jvc3NGYWRlfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5GaWx0ZXI9ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZUluc091dHMoMSwxKTt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiLFwidHlwZVwiLFwicm9sbG9mZlwiXSx0LkZpbHRlci5kZWZhdWx0cyk7dGhpcy5fZmlsdGVycz1bXSx0aGlzLmZyZXF1ZW5jeT1uZXcgdC5TaWduYWwoZS5mcmVxdWVuY3ksdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5kZXR1bmU9bmV3IHQuU2lnbmFsKDAsdC5UeXBlLkNlbnRzKSx0aGlzLmdhaW49bmV3IHQuU2lnbmFsKHt2YWx1ZTplLmdhaW4sY29udmVydDohMX0pLHRoaXMuUT1uZXcgdC5TaWduYWwoZS5RKSx0aGlzLl90eXBlPWUudHlwZSx0aGlzLl9yb2xsb2ZmPWUucm9sbG9mZix0aGlzLnJvbGxvZmY9ZS5yb2xsb2ZmLHRoaXMuX3JlYWRPbmx5KFtcImRldHVuZVwiLFwiZnJlcXVlbmN5XCIsXCJnYWluXCIsXCJRXCJdKX0sdC5leHRlbmQodC5GaWx0ZXIpLHQuRmlsdGVyLmRlZmF1bHRzPXt0eXBlOlwibG93cGFzc1wiLGZyZXF1ZW5jeTozNTAscm9sbG9mZjotMTIsUToxLGdhaW46MH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRmlsdGVyLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbih0KXtpZigtMT09PVtcImxvd3Bhc3NcIixcImhpZ2hwYXNzXCIsXCJiYW5kcGFzc1wiLFwibG93c2hlbGZcIixcImhpZ2hzaGVsZlwiLFwibm90Y2hcIixcImFsbHBhc3NcIixcInBlYWtpbmdcIl0uaW5kZXhPZih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVG9uZS5GaWx0ZXI6IGludmFsaWQgdHlwZSBcIit0KTt0aGlzLl90eXBlPXQ7Zm9yKHZhciBlPTA7ZTx0aGlzLl9maWx0ZXJzLmxlbmd0aDtlKyspdGhpcy5fZmlsdGVyc1tlXS50eXBlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRmlsdGVyLnByb3RvdHlwZSxcInJvbGxvZmZcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JvbGxvZmZ9LHNldDpmdW5jdGlvbih0KXt0PXBhcnNlSW50KHQsMTApO3ZhciBlPVstMTIsLTI0LC00OCwtOTZdLmluZGV4T2YodCk7aWYoLTE9PT1lKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVG9uZS5GaWx0ZXI6IHJvbGxvZmYgY2FuIG9ubHkgYmUgLTEyLCAtMjQsIC00OCBvciAtOTZcIik7ZSs9MSx0aGlzLl9yb2xsb2ZmPXQsdGhpcy5pbnB1dC5kaXNjb25uZWN0KCk7Zm9yKHZhciBpPTA7aTx0aGlzLl9maWx0ZXJzLmxlbmd0aDtpKyspdGhpcy5fZmlsdGVyc1tpXS5kaXNjb25uZWN0KCksdGhpcy5fZmlsdGVyc1tpXT1udWxsO3RoaXMuX2ZpbHRlcnM9bmV3IEFycmF5KGUpO2Zvcih2YXIgbj0wO248ZTtuKyspe3ZhciBzPXRoaXMuY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKTtzLnR5cGU9dGhpcy5fdHlwZSx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHMuZnJlcXVlbmN5KSx0aGlzLmRldHVuZS5jb25uZWN0KHMuZGV0dW5lKSx0aGlzLlEuY29ubmVjdChzLlEpLHRoaXMuZ2Fpbi5jb25uZWN0KHMuZ2FpbiksdGhpcy5fZmlsdGVyc1tuXT1zfXZhciBvPVt0aGlzLmlucHV0XS5jb25jYXQodGhpcy5fZmlsdGVycykuY29uY2F0KFt0aGlzLm91dHB1dF0pO3RoaXMuY29ubmVjdFNlcmllcy5hcHBseSh0aGlzLG8pfX0pLHQuRmlsdGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO2Zvcih2YXIgZT0wO2U8dGhpcy5fZmlsdGVycy5sZW5ndGg7ZSsrKXRoaXMuX2ZpbHRlcnNbZV0uZGlzY29ubmVjdCgpLHRoaXMuX2ZpbHRlcnNbZV09bnVsbDtyZXR1cm4gdGhpcy5fZmlsdGVycz1udWxsLHRoaXMuX3dyaXRhYmxlKFtcImRldHVuZVwiLFwiZnJlcXVlbmN5XCIsXCJnYWluXCIsXCJRXCJdKSx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5RLmRpc3Bvc2UoKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuUT1udWxsLHRoaXMuZGV0dW5lLmRpc3Bvc2UoKSx0aGlzLmRldHVuZT1udWxsLHRoaXMuZ2Fpbi5kaXNwb3NlKCksdGhpcy5nYWluPW51bGwsdGhpc30sdC5GaWx0ZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lk11bHRpYmFuZFNwbGl0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJsb3dGcmVxdWVuY3lcIixcImhpZ2hGcmVxdWVuY3lcIl0sdC5NdWx0aWJhbmRTcGxpdC5kZWZhdWx0cyk7dGhpcy5pbnB1dD1uZXcgdC5HYWluLHRoaXMub3V0cHV0PW5ldyBBcnJheSgzKSx0aGlzLmxvdz10aGlzLm91dHB1dFswXT1uZXcgdC5GaWx0ZXIoMCxcImxvd3Bhc3NcIiksdGhpcy5fbG93TWlkRmlsdGVyPW5ldyB0LkZpbHRlcigwLFwiaGlnaHBhc3NcIiksdGhpcy5taWQ9dGhpcy5vdXRwdXRbMV09bmV3IHQuRmlsdGVyKDAsXCJsb3dwYXNzXCIpLHRoaXMuaGlnaD10aGlzLm91dHB1dFsyXT1uZXcgdC5GaWx0ZXIoMCxcImhpZ2hwYXNzXCIpLHRoaXMubG93RnJlcXVlbmN5PW5ldyB0LlNpZ25hbChlLmxvd0ZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmhpZ2hGcmVxdWVuY3k9bmV3IHQuU2lnbmFsKGUuaGlnaEZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLlE9bmV3IHQuU2lnbmFsKGUuUSksdGhpcy5pbnB1dC5mYW4odGhpcy5sb3csdGhpcy5oaWdoKSx0aGlzLmlucHV0LmNoYWluKHRoaXMuX2xvd01pZEZpbHRlcix0aGlzLm1pZCksdGhpcy5sb3dGcmVxdWVuY3kuY29ubmVjdCh0aGlzLmxvdy5mcmVxdWVuY3kpLHRoaXMubG93RnJlcXVlbmN5LmNvbm5lY3QodGhpcy5fbG93TWlkRmlsdGVyLmZyZXF1ZW5jeSksdGhpcy5oaWdoRnJlcXVlbmN5LmNvbm5lY3QodGhpcy5taWQuZnJlcXVlbmN5KSx0aGlzLmhpZ2hGcmVxdWVuY3kuY29ubmVjdCh0aGlzLmhpZ2guZnJlcXVlbmN5KSx0aGlzLlEuY29ubmVjdCh0aGlzLmxvdy5RKSx0aGlzLlEuY29ubmVjdCh0aGlzLl9sb3dNaWRGaWx0ZXIuUSksdGhpcy5RLmNvbm5lY3QodGhpcy5taWQuUSksdGhpcy5RLmNvbm5lY3QodGhpcy5oaWdoLlEpLHRoaXMuX3JlYWRPbmx5KFtcImhpZ2hcIixcIm1pZFwiLFwibG93XCIsXCJoaWdoRnJlcXVlbmN5XCIsXCJsb3dGcmVxdWVuY3lcIl0pfSx0LmV4dGVuZCh0Lk11bHRpYmFuZFNwbGl0KSx0Lk11bHRpYmFuZFNwbGl0LmRlZmF1bHRzPXtsb3dGcmVxdWVuY3k6NDAwLGhpZ2hGcmVxdWVuY3k6MjUwMCxROjF9LHQuTXVsdGliYW5kU3BsaXQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImhpZ2hcIixcIm1pZFwiLFwibG93XCIsXCJoaWdoRnJlcXVlbmN5XCIsXCJsb3dGcmVxdWVuY3lcIl0pLHRoaXMubG93LmRpc3Bvc2UoKSx0aGlzLmxvdz1udWxsLHRoaXMuX2xvd01pZEZpbHRlci5kaXNwb3NlKCksdGhpcy5fbG93TWlkRmlsdGVyPW51bGwsdGhpcy5taWQuZGlzcG9zZSgpLHRoaXMubWlkPW51bGwsdGhpcy5oaWdoLmRpc3Bvc2UoKSx0aGlzLmhpZ2g9bnVsbCx0aGlzLmxvd0ZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5sb3dGcmVxdWVuY3k9bnVsbCx0aGlzLmhpZ2hGcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuaGlnaEZyZXF1ZW5jeT1udWxsLHRoaXMuUS5kaXNwb3NlKCksdGhpcy5RPW51bGwsdGhpc30sdC5NdWx0aWJhbmRTcGxpdH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRVEzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJsb3dcIixcIm1pZFwiLFwiaGlnaFwiXSx0LkVRMy5kZWZhdWx0cyk7dGhpcy5vdXRwdXQ9bmV3IHQuR2Fpbix0aGlzLl9tdWx0aWJhbmRTcGxpdD10aGlzLmlucHV0PW5ldyB0Lk11bHRpYmFuZFNwbGl0KHtsb3dGcmVxdWVuY3k6ZS5sb3dGcmVxdWVuY3ksaGlnaEZyZXF1ZW5jeTplLmhpZ2hGcmVxdWVuY3l9KSx0aGlzLl9sb3dHYWluPW5ldyB0LkdhaW4oZS5sb3csdC5UeXBlLkRlY2liZWxzKSx0aGlzLl9taWRHYWluPW5ldyB0LkdhaW4oZS5taWQsdC5UeXBlLkRlY2liZWxzKSx0aGlzLl9oaWdoR2Fpbj1uZXcgdC5HYWluKGUuaGlnaCx0LlR5cGUuRGVjaWJlbHMpLHRoaXMubG93PXRoaXMuX2xvd0dhaW4uZ2Fpbix0aGlzLm1pZD10aGlzLl9taWRHYWluLmdhaW4sdGhpcy5oaWdoPXRoaXMuX2hpZ2hHYWluLmdhaW4sdGhpcy5RPXRoaXMuX211bHRpYmFuZFNwbGl0LlEsdGhpcy5sb3dGcmVxdWVuY3k9dGhpcy5fbXVsdGliYW5kU3BsaXQubG93RnJlcXVlbmN5LHRoaXMuaGlnaEZyZXF1ZW5jeT10aGlzLl9tdWx0aWJhbmRTcGxpdC5oaWdoRnJlcXVlbmN5LHRoaXMuX211bHRpYmFuZFNwbGl0Lmxvdy5jaGFpbih0aGlzLl9sb3dHYWluLHRoaXMub3V0cHV0KSx0aGlzLl9tdWx0aWJhbmRTcGxpdC5taWQuY2hhaW4odGhpcy5fbWlkR2Fpbix0aGlzLm91dHB1dCksdGhpcy5fbXVsdGliYW5kU3BsaXQuaGlnaC5jaGFpbih0aGlzLl9oaWdoR2Fpbix0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wibG93XCIsXCJtaWRcIixcImhpZ2hcIixcImxvd0ZyZXF1ZW5jeVwiLFwiaGlnaEZyZXF1ZW5jeVwiXSl9LHQuZXh0ZW5kKHQuRVEzKSx0LkVRMy5kZWZhdWx0cz17bG93OjAsbWlkOjAsaGlnaDowLGxvd0ZyZXF1ZW5jeTo0MDAsaGlnaEZyZXF1ZW5jeToyNTAwfSx0LkVRMy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wibG93XCIsXCJtaWRcIixcImhpZ2hcIixcImxvd0ZyZXF1ZW5jeVwiLFwiaGlnaEZyZXF1ZW5jeVwiXSksdGhpcy5fbXVsdGliYW5kU3BsaXQuZGlzcG9zZSgpLHRoaXMuX211bHRpYmFuZFNwbGl0PW51bGwsdGhpcy5sb3dGcmVxdWVuY3k9bnVsbCx0aGlzLmhpZ2hGcmVxdWVuY3k9bnVsbCx0aGlzLl9sb3dHYWluLmRpc3Bvc2UoKSx0aGlzLl9sb3dHYWluPW51bGwsdGhpcy5fbWlkR2Fpbi5kaXNwb3NlKCksdGhpcy5fbWlkR2Fpbj1udWxsLHRoaXMuX2hpZ2hHYWluLmRpc3Bvc2UoKSx0aGlzLl9oaWdoR2Fpbj1udWxsLHRoaXMubG93PW51bGwsdGhpcy5taWQ9bnVsbCx0aGlzLmhpZ2g9bnVsbCx0aGlzLlE9bnVsbCx0aGlzfSx0LkVRM30pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU2NhbGU9ZnVuY3Rpb24oZSxpKXt0aGlzLl9vdXRwdXRNaW49dGhpcy5kZWZhdWx0QXJnKGUsMCksdGhpcy5fb3V0cHV0TWF4PXRoaXMuZGVmYXVsdEFyZyhpLDEpLHRoaXMuX3NjYWxlPXRoaXMuaW5wdXQ9bmV3IHQuTXVsdGlwbHkoMSksdGhpcy5fYWRkPXRoaXMub3V0cHV0PW5ldyB0LkFkZCgwKSx0aGlzLl9zY2FsZS5jb25uZWN0KHRoaXMuX2FkZCksdGhpcy5fc2V0UmFuZ2UoKX0sdC5leHRlbmQodC5TY2FsZSx0LlNpZ25hbEJhc2UpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlNjYWxlLnByb3RvdHlwZSxcIm1pblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3V0cHV0TWlufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3V0cHV0TWluPXQsdGhpcy5fc2V0UmFuZ2UoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5TY2FsZS5wcm90b3R5cGUsXCJtYXhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX291dHB1dE1heH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX291dHB1dE1heD10LHRoaXMuX3NldFJhbmdlKCl9fSksdC5TY2FsZS5wcm90b3R5cGUuX3NldFJhbmdlPWZ1bmN0aW9uKCl7dGhpcy5fYWRkLnZhbHVlPXRoaXMuX291dHB1dE1pbix0aGlzLl9zY2FsZS52YWx1ZT10aGlzLl9vdXRwdXRNYXgtdGhpcy5fb3V0cHV0TWlufSx0LlNjYWxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9hZGQuZGlzcG9zZSgpLHRoaXMuX2FkZD1udWxsLHRoaXMuX3NjYWxlLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZT1udWxsLHRoaXN9LHQuU2NhbGV9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlNjYWxlRXhwPWZ1bmN0aW9uKGUsaSxuKXt0aGlzLl9zY2FsZT10aGlzLm91dHB1dD1uZXcgdC5TY2FsZShlLGkpLHRoaXMuX2V4cD10aGlzLmlucHV0PW5ldyB0LlBvdyh0aGlzLmRlZmF1bHRBcmcobiwyKSksdGhpcy5fZXhwLmNvbm5lY3QodGhpcy5fc2NhbGUpfSx0LmV4dGVuZCh0LlNjYWxlRXhwLHQuU2lnbmFsQmFzZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2NhbGVFeHAucHJvdG90eXBlLFwiZXhwb25lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V4cC52YWx1ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlNjYWxlRXhwLnByb3RvdHlwZSxcIm1pblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NhbGUubWlufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2NhbGUubWluPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2NhbGVFeHAucHJvdG90eXBlLFwibWF4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2FsZS5tYXh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zY2FsZS5tYXg9dH19KSx0LlNjYWxlRXhwLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zY2FsZS5kaXNwb3NlKCksdGhpcy5fc2NhbGU9bnVsbCx0aGlzLl9leHAuZGlzcG9zZSgpLHRoaXMuX2V4cD1udWxsLHRoaXN9LHQuU2NhbGVFeHB9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB3aW5kb3cuRGVsYXlOb2RlJiYhQXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVEZWxheSYmKEF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlRGVsYXk9QXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVEZWxheU5vZGUpLHQuRGVsYXk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImRlbGF5VGltZVwiLFwibWF4RGVsYXlcIl0sdC5EZWxheS5kZWZhdWx0cyk7dGhpcy5fZGVsYXlOb2RlPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZURlbGF5KHRoaXMudG9TZWNvbmRzKGUubWF4RGVsYXkpKSx0aGlzLmRlbGF5VGltZT1uZXcgdC5QYXJhbSh7cGFyYW06dGhpcy5fZGVsYXlOb2RlLmRlbGF5VGltZSx1bml0czp0LlR5cGUuVGltZSx2YWx1ZTplLmRlbGF5VGltZX0pLHRoaXMuX3JlYWRPbmx5KFwiZGVsYXlUaW1lXCIpfSx0LmV4dGVuZCh0LkRlbGF5KSx0LkRlbGF5LmRlZmF1bHRzPXttYXhEZWxheToxLGRlbGF5VGltZTowfSx0LkRlbGF5LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuUGFyYW0ucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9kZWxheU5vZGUuZGlzY29ubmVjdCgpLHRoaXMuX2RlbGF5Tm9kZT1udWxsLHRoaXMuX3dyaXRhYmxlKFwiZGVsYXlUaW1lXCIpLHRoaXMuZGVsYXlUaW1lPW51bGwsdGhpc30sdC5EZWxheX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRmVlZGJhY2tDb21iRmlsdGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJkZWxheVRpbWVcIixcInJlc29uYW5jZVwiXSx0LkZlZWRiYWNrQ29tYkZpbHRlci5kZWZhdWx0cyk7dGhpcy5fZGVsYXk9dGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgdC5EZWxheShlLmRlbGF5VGltZSksdGhpcy5kZWxheVRpbWU9dGhpcy5fZGVsYXkuZGVsYXlUaW1lLHRoaXMuX2ZlZWRiYWNrPW5ldyB0LkdhaW4oZS5yZXNvbmFuY2UsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLnJlc29uYW5jZT10aGlzLl9mZWVkYmFjay5nYWluLHRoaXMuX2RlbGF5LmNoYWluKHRoaXMuX2ZlZWRiYWNrLHRoaXMuX2RlbGF5KSx0aGlzLl9yZWFkT25seShbXCJyZXNvbmFuY2VcIixcImRlbGF5VGltZVwiXSl9LHQuZXh0ZW5kKHQuRmVlZGJhY2tDb21iRmlsdGVyKSx0LkZlZWRiYWNrQ29tYkZpbHRlci5kZWZhdWx0cz17ZGVsYXlUaW1lOi4xLHJlc29uYW5jZTouNX0sdC5GZWVkYmFja0NvbWJGaWx0ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcInJlc29uYW5jZVwiLFwiZGVsYXlUaW1lXCJdKSx0aGlzLl9kZWxheS5kaXNwb3NlKCksdGhpcy5fZGVsYXk9bnVsbCx0aGlzLmRlbGF5VGltZT1udWxsLHRoaXMuX2ZlZWRiYWNrLmRpc3Bvc2UoKSx0aGlzLl9mZWVkYmFjaz1udWxsLHRoaXMucmVzb25hbmNlPW51bGwsdGhpc30sdC5GZWVkYmFja0NvbWJGaWx0ZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkZvbGxvd2VyPWZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVJbnNPdXRzKDEsMSk7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJhdHRhY2tcIixcInJlbGVhc2VcIl0sdC5Gb2xsb3dlci5kZWZhdWx0cyk7dGhpcy5fYWJzPW5ldyB0LkFicyx0aGlzLl9maWx0ZXI9dGhpcy5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpLHRoaXMuX2ZpbHRlci50eXBlPVwibG93cGFzc1wiLHRoaXMuX2ZpbHRlci5mcmVxdWVuY3kudmFsdWU9MCx0aGlzLl9maWx0ZXIuUS52YWx1ZT0tMTAwLHRoaXMuX2ZyZXF1ZW5jeVZhbHVlcz1uZXcgdC5XYXZlU2hhcGVyLHRoaXMuX3N1Yj1uZXcgdC5TdWJ0cmFjdCx0aGlzLl9kZWxheT1uZXcgdC5EZWxheSh0aGlzLmJsb2NrVGltZSksdGhpcy5fbXVsdD1uZXcgdC5NdWx0aXBseSgxZTQpLHRoaXMuX2F0dGFjaz1lLmF0dGFjayx0aGlzLl9yZWxlYXNlPWUucmVsZWFzZSx0aGlzLmlucHV0LmNoYWluKHRoaXMuX2Ficyx0aGlzLl9maWx0ZXIsdGhpcy5vdXRwdXQpLHRoaXMuX2Ficy5jb25uZWN0KHRoaXMuX3N1YiwwLDEpLHRoaXMuX2ZpbHRlci5jaGFpbih0aGlzLl9kZWxheSx0aGlzLl9zdWIpLHRoaXMuX3N1Yi5jaGFpbih0aGlzLl9tdWx0LHRoaXMuX2ZyZXF1ZW5jeVZhbHVlcyx0aGlzLl9maWx0ZXIuZnJlcXVlbmN5KSx0aGlzLl9zZXRBdHRhY2tSZWxlYXNlKHRoaXMuX2F0dGFjayx0aGlzLl9yZWxlYXNlKX0sdC5leHRlbmQodC5Gb2xsb3dlciksdC5Gb2xsb3dlci5kZWZhdWx0cz17YXR0YWNrOi4wNSxyZWxlYXNlOi41fSx0LkZvbGxvd2VyLnByb3RvdHlwZS5fc2V0QXR0YWNrUmVsZWFzZT1mdW5jdGlvbihlLGkpe3ZhciBuPXRoaXMuYmxvY2tUaW1lO2U9dC5UaW1lKGUpLnRvRnJlcXVlbmN5KCksaT10LlRpbWUoaSkudG9GcmVxdWVuY3koKSxlPU1hdGgubWF4KGUsbiksaT1NYXRoLm1heChpLG4pLHRoaXMuX2ZyZXF1ZW5jeVZhbHVlcy5zZXRNYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQ8PTA/ZTppfSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZvbGxvd2VyLnByb3RvdHlwZSxcImF0dGFja1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXR0YWNrfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYXR0YWNrPXQsdGhpcy5fc2V0QXR0YWNrUmVsZWFzZSh0aGlzLl9hdHRhY2ssdGhpcy5fcmVsZWFzZSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRm9sbG93ZXIucHJvdG90eXBlLFwicmVsZWFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVsZWFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3JlbGVhc2U9dCx0aGlzLl9zZXRBdHRhY2tSZWxlYXNlKHRoaXMuX2F0dGFjayx0aGlzLl9yZWxlYXNlKX19KSx0LkZvbGxvd2VyLnByb3RvdHlwZS5jb25uZWN0PXQuU2lnbmFsLnByb3RvdHlwZS5jb25uZWN0LHQuRm9sbG93ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2ZpbHRlci5kaXNjb25uZWN0KCksdGhpcy5fZmlsdGVyPW51bGwsdGhpcy5fZnJlcXVlbmN5VmFsdWVzLmRpc2Nvbm5lY3QoKSx0aGlzLl9mcmVxdWVuY3lWYWx1ZXM9bnVsbCx0aGlzLl9kZWxheS5kaXNwb3NlKCksdGhpcy5fZGVsYXk9bnVsbCx0aGlzLl9zdWIuZGlzY29ubmVjdCgpLHRoaXMuX3N1Yj1udWxsLHRoaXMuX2Ficy5kaXNwb3NlKCksdGhpcy5fYWJzPW51bGwsdGhpcy5fbXVsdC5kaXNwb3NlKCksdGhpcy5fbXVsdD1udWxsLHRoaXMuX2N1cnZlPW51bGwsdGhpc30sdC5Gb2xsb3dlcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU2NhbGVkRW52ZWxvcGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImF0dGFja1wiLFwiZGVjYXlcIixcInN1c3RhaW5cIixcInJlbGVhc2VcIl0sdC5FbnZlbG9wZS5kZWZhdWx0cyk7dC5FbnZlbG9wZS5jYWxsKHRoaXMsZSksZT10aGlzLmRlZmF1bHRBcmcoZSx0LlNjYWxlZEVudmVsb3BlLmRlZmF1bHRzKSx0aGlzLl9leHA9dGhpcy5vdXRwdXQ9bmV3IHQuUG93KGUuZXhwb25lbnQpLHRoaXMuX3NjYWxlPXRoaXMub3V0cHV0PW5ldyB0LlNjYWxlKGUubWluLGUubWF4KSx0aGlzLl9zaWcuY2hhaW4odGhpcy5fZXhwLHRoaXMuX3NjYWxlKX0sdC5leHRlbmQodC5TY2FsZWRFbnZlbG9wZSx0LkVudmVsb3BlKSx0LlNjYWxlZEVudmVsb3BlLmRlZmF1bHRzPXttaW46MCxtYXg6MSxleHBvbmVudDoxfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5TY2FsZWRFbnZlbG9wZS5wcm90b3R5cGUsXCJtaW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjYWxlLm1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NjYWxlLm1pbj10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlNjYWxlZEVudmVsb3BlLnByb3RvdHlwZSxcIm1heFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NhbGUubWF4fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2NhbGUubWF4PXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2NhbGVkRW52ZWxvcGUucHJvdG90eXBlLFwiZXhwb25lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V4cC52YWx1ZT10fX0pLHQuU2NhbGVkRW52ZWxvcGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FbnZlbG9wZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NjYWxlLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZT1udWxsLHRoaXMuX2V4cC5kaXNwb3NlKCksdGhpcy5fZXhwPW51bGwsdGhpc30sdC5TY2FsZWRFbnZlbG9wZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRnJlcXVlbmN5RW52ZWxvcGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImF0dGFja1wiLFwiZGVjYXlcIixcInN1c3RhaW5cIixcInJlbGVhc2VcIl0sdC5FbnZlbG9wZS5kZWZhdWx0cyk7dC5TY2FsZWRFbnZlbG9wZS5jYWxsKHRoaXMsZSksZT10aGlzLmRlZmF1bHRBcmcoZSx0LkZyZXF1ZW5jeUVudmVsb3BlLmRlZmF1bHRzKSx0aGlzLl9vY3RhdmVzPWUub2N0YXZlcyx0aGlzLmJhc2VGcmVxdWVuY3k9ZS5iYXNlRnJlcXVlbmN5LHRoaXMub2N0YXZlcz1lLm9jdGF2ZXN9LHQuZXh0ZW5kKHQuRnJlcXVlbmN5RW52ZWxvcGUsdC5FbnZlbG9wZSksdC5GcmVxdWVuY3lFbnZlbG9wZS5kZWZhdWx0cz17YmFzZUZyZXF1ZW5jeToyMDAsb2N0YXZlczo0LGV4cG9uZW50OjJ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZyZXF1ZW5jeUVudmVsb3BlLnByb3RvdHlwZSxcImJhc2VGcmVxdWVuY3lcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjYWxlLm1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NjYWxlLm1pbj10aGlzLnRvRnJlcXVlbmN5KHQpLHRoaXMub2N0YXZlcz10aGlzLl9vY3RhdmVzfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZyZXF1ZW5jeUVudmVsb3BlLnByb3RvdHlwZSxcIm9jdGF2ZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29jdGF2ZXN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vY3RhdmVzPXQsdGhpcy5fc2NhbGUubWF4PXRoaXMuYmFzZUZyZXF1ZW5jeSpNYXRoLnBvdygyLHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZyZXF1ZW5jeUVudmVsb3BlLnByb3RvdHlwZSxcImV4cG9uZW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9leHAudmFsdWV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9leHAudmFsdWU9dH19KSx0LkZyZXF1ZW5jeUVudmVsb3BlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU2NhbGVkRW52ZWxvcGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzfSx0LkZyZXF1ZW5jeUVudmVsb3BlfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5HYXRlPWZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVJbnNPdXRzKDEsMSk7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ0aHJlc2hvbGRcIixcImF0dGFja1wiLFwicmVsZWFzZVwiXSx0LkdhdGUuZGVmYXVsdHMpO3RoaXMuX2ZvbGxvd2VyPW5ldyB0LkZvbGxvd2VyKGUuYXR0YWNrLGUucmVsZWFzZSksdGhpcy5fZ3Q9bmV3IHQuR3JlYXRlclRoYW4odGhpcy5kYlRvR2FpbihlLnRocmVzaG9sZCkpLHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5pbnB1dC5jaGFpbih0aGlzLl9ndCx0aGlzLl9mb2xsb3dlcix0aGlzLm91dHB1dC5nYWluKX0sdC5leHRlbmQodC5HYXRlKSx0LkdhdGUuZGVmYXVsdHM9e2F0dGFjazouMSxyZWxlYXNlOi4xLHRocmVzaG9sZDotNDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkdhdGUucHJvdG90eXBlLFwidGhyZXNob2xkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhaW5Ub0RiKHRoaXMuX2d0LnZhbHVlKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2d0LnZhbHVlPXRoaXMuZGJUb0dhaW4odCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuR2F0ZS5wcm90b3R5cGUsXCJhdHRhY2tcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvbGxvd2VyLmF0dGFja30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbGxvd2VyLmF0dGFjaz10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkdhdGUucHJvdG90eXBlLFwicmVsZWFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9sbG93ZXIucmVsZWFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbGxvd2VyLnJlbGVhc2U9dH19KSx0LkdhdGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2ZvbGxvd2VyLmRpc3Bvc2UoKSx0aGlzLl9ndC5kaXNwb3NlKCksdGhpcy5fZm9sbG93ZXI9bnVsbCx0aGlzLl9ndD1udWxsLHRoaXN9LHQuR2F0ZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuVGltZWxpbmVTdGF0ZT1mdW5jdGlvbihlKXt0LlRpbWVsaW5lLmNhbGwodGhpcyksdGhpcy5faW5pdGlhbD1lfSx0LmV4dGVuZCh0LlRpbWVsaW5lU3RhdGUsdC5UaW1lbGluZSksdC5UaW1lbGluZVN0YXRlLnByb3RvdHlwZS5nZXRWYWx1ZUF0VGltZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldCh0KTtyZXR1cm4gbnVsbCE9PWU/ZS5zdGF0ZTp0aGlzLl9pbml0aWFsfSx0LlRpbWVsaW5lU3RhdGUucHJvdG90eXBlLnNldFN0YXRlQXRUaW1lPWZ1bmN0aW9uKHQsZSl7dGhpcy5hZGQoe3N0YXRlOnQsdGltZTplfSl9LHQuVGltZWxpbmVTdGF0ZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ2xvY2s9ZnVuY3Rpb24oKXt0LkVtaXR0ZXIuY2FsbCh0aGlzKTt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImNhbGxiYWNrXCIsXCJmcmVxdWVuY3lcIl0sdC5DbG9jay5kZWZhdWx0cyk7dGhpcy5jYWxsYmFjaz1lLmNhbGxiYWNrLHRoaXMuX25leHRUaWNrPTAsdGhpcy5fbGFzdFN0YXRlPXQuU3RhdGUuU3RvcHBlZCx0aGlzLmZyZXF1ZW5jeT1uZXcgdC5UaW1lbGluZVNpZ25hbChlLmZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLl9yZWFkT25seShcImZyZXF1ZW5jeVwiKSx0aGlzLnRpY2tzPTAsdGhpcy5fc3RhdGU9bmV3IHQuVGltZWxpbmVTdGF0ZSh0LlN0YXRlLlN0b3BwZWQpLHRoaXMuX2JvdW5kTG9vcD10aGlzLl9sb29wLmJpbmQodGhpcyksdGhpcy5jb250ZXh0Lm9uKFwidGlja1wiLHRoaXMuX2JvdW5kTG9vcCl9LHQuZXh0ZW5kKHQuQ2xvY2ssdC5FbWl0dGVyKSx0LkNsb2NrLmRlZmF1bHRzPXtjYWxsYmFjazp0Lm5vT3AsZnJlcXVlbmN5OjEsbG9va0FoZWFkOlwiYXV0b1wifSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DbG9jay5wcm90b3R5cGUsXCJzdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUodGhpcy5ub3coKSl9fSksdC5DbG9jay5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSx0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZShlKSE9PXQuU3RhdGUuU3RhcnRlZCYmdGhpcy5fc3RhdGUuYWRkKHtzdGF0ZTp0LlN0YXRlLlN0YXJ0ZWQsdGltZTplLG9mZnNldDppfSksdGhpc30sdC5DbG9jay5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbihlKXtyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSx0aGlzLl9zdGF0ZS5jYW5jZWwoZSksdGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUodC5TdGF0ZS5TdG9wcGVkLGUpLHRoaXN9LHQuQ2xvY2sucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKGUpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKGUpPT09dC5TdGF0ZS5TdGFydGVkJiZ0aGlzLl9zdGF0ZS5zZXRTdGF0ZUF0VGltZSh0LlN0YXRlLlBhdXNlZCxlKSx0aGlzfSx0LkNsb2NrLnByb3RvdHlwZS5fbG9vcD1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLm5vdygpK3RoaXMuY29udGV4dC5sb29rQWhlYWQrdGhpcy5jb250ZXh0LnVwZGF0ZUludGVydmFsKzIqdGhpcy5jb250ZXh0LmxhZztlPnRoaXMuX25leHRUaWNrJiZ0aGlzLl9zdGF0ZTspe3ZhciBpPXRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKHRoaXMuX25leHRUaWNrKTtpZihpIT09dGhpcy5fbGFzdFN0YXRlKXt0aGlzLl9sYXN0U3RhdGU9aTt2YXIgbj10aGlzLl9zdGF0ZS5nZXQodGhpcy5fbmV4dFRpY2spO2k9PT10LlN0YXRlLlN0YXJ0ZWQ/KHRoaXMuX25leHRUaWNrPW4udGltZSx0aGlzLmlzVW5kZWYobi5vZmZzZXQpfHwodGhpcy50aWNrcz1uLm9mZnNldCksdGhpcy5lbWl0KFwic3RhcnRcIixuLnRpbWUsdGhpcy50aWNrcykpOmk9PT10LlN0YXRlLlN0b3BwZWQ/KHRoaXMudGlja3M9MCx0aGlzLmVtaXQoXCJzdG9wXCIsbi50aW1lKSk6aT09PXQuU3RhdGUuUGF1c2VkJiZ0aGlzLmVtaXQoXCJwYXVzZVwiLG4udGltZSl9dmFyIHM9dGhpcy5fbmV4dFRpY2s7dGhpcy5mcmVxdWVuY3kmJih0aGlzLl9uZXh0VGljays9MS90aGlzLmZyZXF1ZW5jeS5nZXRWYWx1ZUF0VGltZSh0aGlzLl9uZXh0VGljayksaT09PXQuU3RhdGUuU3RhcnRlZCYmKHRoaXMuY2FsbGJhY2socyksdGhpcy50aWNrcysrKSl9fSx0LkNsb2NrLnByb3RvdHlwZS5nZXRTdGF0ZUF0VGltZT1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZSh0KX0sdC5DbG9jay5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QuRW1pdHRlci5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuY29udGV4dC5vZmYoXCJ0aWNrXCIsdGhpcy5fYm91bmRMb29wKSx0aGlzLl93cml0YWJsZShcImZyZXF1ZW5jeVwiKSx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLl9ib3VuZExvb3A9bnVsbCx0aGlzLl9uZXh0VGljaz0xLzAsdGhpcy5jYWxsYmFjaz1udWxsLHRoaXMuX3N0YXRlLmRpc3Bvc2UoKSx0aGlzLl9zdGF0ZT1udWxsfSx0LkNsb2NrfSksdChmdW5jdGlvbih0KXt0LkludGVydmFsVGltZWxpbmU9ZnVuY3Rpb24oKXt0aGlzLl9yb290PW51bGwsdGhpcy5fbGVuZ3RoPTB9LHQuZXh0ZW5kKHQuSW50ZXJ2YWxUaW1lbGluZSksdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7aWYodGhpcy5pc1VuZGVmKHQudGltZSl8fHRoaXMuaXNVbmRlZih0LmR1cmF0aW9uKSl0aHJvdyBuZXcgRXJyb3IoXCJUb25lLkludGVydmFsVGltZWxpbmU6IGV2ZW50cyBtdXN0IGhhdmUgdGltZSBhbmQgZHVyYXRpb24gcGFyYW1ldGVyc1wiKTt2YXIgaT1uZXcgZSh0LnRpbWUsdC50aW1lK3QuZHVyYXRpb24sdCk7Zm9yKG51bGw9PT10aGlzLl9yb290P3RoaXMuX3Jvb3Q9aTp0aGlzLl9yb290Lmluc2VydChpKSx0aGlzLl9sZW5ndGgrKztudWxsIT09aTspaS51cGRhdGVIZWlnaHQoKSxpLnVwZGF0ZU1heCgpLHRoaXMuX3JlYmFsYW5jZShpKSxpPWkucGFyZW50O3JldHVybiB0aGlzfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtpZihudWxsIT09dGhpcy5fcm9vdCl7dmFyIGU9W107dGhpcy5fcm9vdC5zZWFyY2godC50aW1lLGUpO2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgbj1lW2ldO2lmKG4uZXZlbnQ9PT10KXt0aGlzLl9yZW1vdmVOb2RlKG4pLHRoaXMuX2xlbmd0aC0tO2JyZWFrfX19cmV0dXJuIHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLFwibGVuZ3RoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZW5ndGh9fSksdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZm9yRWFjaEFmdGVyKHQsZnVuY3Rpb24odCl7dGhpcy5yZW1vdmUodCl9LmJpbmQodGhpcykpLHRoaXN9LHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUuX3NldFJvb3Q9ZnVuY3Rpb24odCl7dGhpcy5fcm9vdD10LG51bGwhPT10aGlzLl9yb290JiYodGhpcy5fcm9vdC5wYXJlbnQ9bnVsbCl9LHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUuX3JlcGxhY2VOb2RlSW5QYXJlbnQ9ZnVuY3Rpb24odCxlKXtudWxsIT09dC5wYXJlbnQ/KHQuaXNMZWZ0Q2hpbGQoKT90LnBhcmVudC5sZWZ0PWU6dC5wYXJlbnQucmlnaHQ9ZSx0aGlzLl9yZWJhbGFuY2UodC5wYXJlbnQpKTp0aGlzLl9zZXRSb290KGUpfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLl9yZW1vdmVOb2RlPWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10LmxlZnQmJm51bGw9PT10LnJpZ2h0KXRoaXMuX3JlcGxhY2VOb2RlSW5QYXJlbnQodCxudWxsKTtlbHNlIGlmKG51bGw9PT10LnJpZ2h0KXRoaXMuX3JlcGxhY2VOb2RlSW5QYXJlbnQodCx0LmxlZnQpO2Vsc2UgaWYobnVsbD09PXQubGVmdCl0aGlzLl9yZXBsYWNlTm9kZUluUGFyZW50KHQsdC5yaWdodCk7ZWxzZXt2YXIgZSxpO2lmKHQuZ2V0QmFsYW5jZSgpPjApaWYobnVsbD09PXQubGVmdC5yaWdodCkoZT10LmxlZnQpLnJpZ2h0PXQucmlnaHQsaT1lO2Vsc2V7Zm9yKGU9dC5sZWZ0LnJpZ2h0O251bGwhPT1lLnJpZ2h0OyllPWUucmlnaHQ7ZS5wYXJlbnQucmlnaHQ9ZS5sZWZ0LGk9ZS5wYXJlbnQsZS5sZWZ0PXQubGVmdCxlLnJpZ2h0PXQucmlnaHR9ZWxzZSBpZihudWxsPT09dC5yaWdodC5sZWZ0KShlPXQucmlnaHQpLmxlZnQ9dC5sZWZ0LGk9ZTtlbHNle2ZvcihlPXQucmlnaHQubGVmdDtudWxsIT09ZS5sZWZ0OyllPWUubGVmdDtlLnBhcmVudD1lLnBhcmVudCxlLnBhcmVudC5sZWZ0PWUucmlnaHQsaT1lLnBhcmVudCxlLmxlZnQ9dC5sZWZ0LGUucmlnaHQ9dC5yaWdodH1udWxsIT09dC5wYXJlbnQ/dC5pc0xlZnRDaGlsZCgpP3QucGFyZW50LmxlZnQ9ZTp0LnBhcmVudC5yaWdodD1lOnRoaXMuX3NldFJvb3QoZSksdGhpcy5fcmViYWxhbmNlKGkpfXQuZGlzcG9zZSgpfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLl9yb3RhdGVMZWZ0PWZ1bmN0aW9uKHQpe3ZhciBlPXQucGFyZW50LGk9dC5pc0xlZnRDaGlsZCgpLG49dC5yaWdodDt0LnJpZ2h0PW4ubGVmdCxuLmxlZnQ9dCxudWxsIT09ZT9pP2UubGVmdD1uOmUucmlnaHQ9bjp0aGlzLl9zZXRSb290KG4pfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLl9yb3RhdGVSaWdodD1mdW5jdGlvbih0KXt2YXIgZT10LnBhcmVudCxpPXQuaXNMZWZ0Q2hpbGQoKSxuPXQubGVmdDt0LmxlZnQ9bi5yaWdodCxuLnJpZ2h0PXQsbnVsbCE9PWU/aT9lLmxlZnQ9bjplLnJpZ2h0PW46dGhpcy5fc2V0Um9vdChuKX0sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5fcmViYWxhbmNlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0QmFsYW5jZSgpO2U+MT90LmxlZnQuZ2V0QmFsYW5jZSgpPDA/dGhpcy5fcm90YXRlTGVmdCh0LmxlZnQpOnRoaXMuX3JvdGF0ZVJpZ2h0KHQpOmU8LTEmJih0LnJpZ2h0LmdldEJhbGFuY2UoKT4wP3RoaXMuX3JvdGF0ZVJpZ2h0KHQucmlnaHQpOnRoaXMuX3JvdGF0ZUxlZnQodCkpfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtpZihudWxsIT09dGhpcy5fcm9vdCl7dmFyIGU9W107aWYodGhpcy5fcm9vdC5zZWFyY2godCxlKSxlLmxlbmd0aD4wKXtmb3IodmFyIGk9ZVswXSxuPTE7bjxlLmxlbmd0aDtuKyspZVtuXS5sb3c+aS5sb3cmJihpPWVbbl0pO3JldHVybiBpLmV2ZW50fX1yZXR1cm4gbnVsbH0sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2lmKG51bGwhPT10aGlzLl9yb290KXt2YXIgZT1bXTtudWxsIT09dGhpcy5fcm9vdCYmdGhpcy5fcm9vdC50cmF2ZXJzZShmdW5jdGlvbih0KXtlLnB1c2godCl9KTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG49ZVtpXS5ldmVudDtuJiZ0KG4pfX1yZXR1cm4gdGhpc30sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoQXRUaW1lPWZ1bmN0aW9uKHQsZSl7aWYobnVsbCE9PXRoaXMuX3Jvb3Qpe3ZhciBpPVtdO3RoaXMuX3Jvb3Quc2VhcmNoKHQsaSk7Zm9yKHZhciBuPWkubGVuZ3RoLTE7bj49MDtuLS0pe3ZhciBzPWlbbl0uZXZlbnQ7cyYmZShzKX19cmV0dXJuIHRoaXN9LHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUuZm9yRWFjaEFmdGVyPWZ1bmN0aW9uKHQsZSl7aWYobnVsbCE9PXRoaXMuX3Jvb3Qpe3ZhciBpPVtdO3RoaXMuX3Jvb3Quc2VhcmNoQWZ0ZXIodCxpKTtmb3IodmFyIG49aS5sZW5ndGgtMTtuPj0wO24tLSl7dmFyIHM9aVtuXS5ldmVudDtzJiZlKHMpfX1yZXR1cm4gdGhpc30sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIHQ9W107bnVsbCE9PXRoaXMuX3Jvb3QmJnRoaXMuX3Jvb3QudHJhdmVyc2UoZnVuY3Rpb24oZSl7dC5wdXNoKGUpfSk7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdFtlXS5kaXNwb3NlKCk7cmV0dXJuIHQ9bnVsbCx0aGlzLl9yb290PW51bGwsdGhpc307dmFyIGU9ZnVuY3Rpb24odCxlLGkpe3RoaXMuZXZlbnQ9aSx0aGlzLmxvdz10LHRoaXMuaGlnaD1lLHRoaXMubWF4PXRoaXMuaGlnaCx0aGlzLl9sZWZ0PW51bGwsdGhpcy5fcmlnaHQ9bnVsbCx0aGlzLnBhcmVudD1udWxsLHRoaXMuaGVpZ2h0PTB9O3JldHVybiBlLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCl7dC5sb3c8PXRoaXMubG93P251bGw9PT10aGlzLmxlZnQ/dGhpcy5sZWZ0PXQ6dGhpcy5sZWZ0Lmluc2VydCh0KTpudWxsPT09dGhpcy5yaWdodD90aGlzLnJpZ2h0PXQ6dGhpcy5yaWdodC5pbnNlcnQodCl9LGUucHJvdG90eXBlLnNlYXJjaD1mdW5jdGlvbih0LGUpe3Q+dGhpcy5tYXh8fChudWxsIT09dGhpcy5sZWZ0JiZ0aGlzLmxlZnQuc2VhcmNoKHQsZSksdGhpcy5sb3c8PXQmJnRoaXMuaGlnaD50JiZlLnB1c2godGhpcyksdGhpcy5sb3c+dHx8bnVsbCE9PXRoaXMucmlnaHQmJnRoaXMucmlnaHQuc2VhcmNoKHQsZSkpfSxlLnByb3RvdHlwZS5zZWFyY2hBZnRlcj1mdW5jdGlvbih0LGUpe3RoaXMubG93Pj10JiYoZS5wdXNoKHRoaXMpLG51bGwhPT10aGlzLmxlZnQmJnRoaXMubGVmdC5zZWFyY2hBZnRlcih0LGUpKSxudWxsIT09dGhpcy5yaWdodCYmdGhpcy5yaWdodC5zZWFyY2hBZnRlcih0LGUpfSxlLnByb3RvdHlwZS50cmF2ZXJzZT1mdW5jdGlvbih0KXt0KHRoaXMpLG51bGwhPT10aGlzLmxlZnQmJnRoaXMubGVmdC50cmF2ZXJzZSh0KSxudWxsIT09dGhpcy5yaWdodCYmdGhpcy5yaWdodC50cmF2ZXJzZSh0KX0sZS5wcm90b3R5cGUudXBkYXRlSGVpZ2h0PWZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMubGVmdCYmbnVsbCE9PXRoaXMucmlnaHQ/dGhpcy5oZWlnaHQ9TWF0aC5tYXgodGhpcy5sZWZ0LmhlaWdodCx0aGlzLnJpZ2h0LmhlaWdodCkrMTpudWxsIT09dGhpcy5yaWdodD90aGlzLmhlaWdodD10aGlzLnJpZ2h0LmhlaWdodCsxOm51bGwhPT10aGlzLmxlZnQ/dGhpcy5oZWlnaHQ9dGhpcy5sZWZ0LmhlaWdodCsxOnRoaXMuaGVpZ2h0PTB9LGUucHJvdG90eXBlLnVwZGF0ZU1heD1mdW5jdGlvbigpe3RoaXMubWF4PXRoaXMuaGlnaCxudWxsIT09dGhpcy5sZWZ0JiYodGhpcy5tYXg9TWF0aC5tYXgodGhpcy5tYXgsdGhpcy5sZWZ0Lm1heCkpLG51bGwhPT10aGlzLnJpZ2h0JiYodGhpcy5tYXg9TWF0aC5tYXgodGhpcy5tYXgsdGhpcy5yaWdodC5tYXgpKX0sZS5wcm90b3R5cGUuZ2V0QmFsYW5jZT1mdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIG51bGwhPT10aGlzLmxlZnQmJm51bGwhPT10aGlzLnJpZ2h0P3Q9dGhpcy5sZWZ0LmhlaWdodC10aGlzLnJpZ2h0LmhlaWdodDpudWxsIT09dGhpcy5sZWZ0P3Q9dGhpcy5sZWZ0LmhlaWdodCsxOm51bGwhPT10aGlzLnJpZ2h0JiYodD0tKHRoaXMucmlnaHQuaGVpZ2h0KzEpKSx0fSxlLnByb3RvdHlwZS5pc0xlZnRDaGlsZD1mdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LmxlZnQ9PT10aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsZWZ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZWZ0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGVmdD10LG51bGwhPT10JiYodC5wYXJlbnQ9dGhpcyksdGhpcy51cGRhdGVIZWlnaHQoKSx0aGlzLnVwZGF0ZU1heCgpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3JpZ2h0PXQsbnVsbCE9PXQmJih0LnBhcmVudD10aGlzKSx0aGlzLnVwZGF0ZUhlaWdodCgpLHRoaXMudXBkYXRlTWF4KCl9fSksZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMucGFyZW50PW51bGwsdGhpcy5fbGVmdD1udWxsLHRoaXMuX3JpZ2h0PW51bGwsdGhpcy5ldmVudD1udWxsfSx0LkludGVydmFsVGltZWxpbmV9KSx0KGZ1bmN0aW9uKHQpe3QuVHJhbnNwb3J0PWZ1bmN0aW9uKCl7dC5FbWl0dGVyLmNhbGwodGhpcyksdGhpcy5sb29wPSExLHRoaXMuX2xvb3BTdGFydD0wLHRoaXMuX2xvb3BFbmQ9MCx0aGlzLl9wcHE9ZS5kZWZhdWx0cy5QUFEsdGhpcy5fY2xvY2s9bmV3IHQuQ2xvY2soe2NhbGxiYWNrOnRoaXMuX3Byb2Nlc3NUaWNrLmJpbmQodGhpcyksZnJlcXVlbmN5OjB9KSx0aGlzLl9iaW5kQ2xvY2tFdmVudHMoKSx0aGlzLmJwbT10aGlzLl9jbG9jay5mcmVxdWVuY3ksdGhpcy5icG0uX3RvVW5pdHM9dGhpcy5fdG9Vbml0cy5iaW5kKHRoaXMpLHRoaXMuYnBtLl9mcm9tVW5pdHM9dGhpcy5fZnJvbVVuaXRzLmJpbmQodGhpcyksdGhpcy5icG0udW5pdHM9dC5UeXBlLkJQTSx0aGlzLmJwbS52YWx1ZT1lLmRlZmF1bHRzLmJwbSx0aGlzLl9yZWFkT25seShcImJwbVwiKSx0aGlzLl90aW1lU2lnbmF0dXJlPWUuZGVmYXVsdHMudGltZVNpZ25hdHVyZSx0aGlzLl9zY2hlZHVsZWRFdmVudHM9e30sdGhpcy5fZXZlbnRJRD0wLHRoaXMuX3RpbWVsaW5lPW5ldyB0LlRpbWVsaW5lLHRoaXMuX3JlcGVhdGVkRXZlbnRzPW5ldyB0LkludGVydmFsVGltZWxpbmUsdGhpcy5fb25jZUV2ZW50cz1uZXcgdC5UaW1lbGluZSx0aGlzLl9zeW5jZWRTaWduYWxzPVtdLHRoaXMuX3N3aW5nVGlja3M9ZS5kZWZhdWx0cy5QUFEvMix0aGlzLl9zd2luZ0Ftb3VudD0wfSx0LmV4dGVuZCh0LlRyYW5zcG9ydCx0LkVtaXR0ZXIpLHQuVHJhbnNwb3J0LmRlZmF1bHRzPXticG06MTIwLHN3aW5nOjAsc3dpbmdTdWJkaXZpc2lvbjpcIjhuXCIsdGltZVNpZ25hdHVyZTo0LGxvb3BTdGFydDowLGxvb3BFbmQ6XCI0bVwiLFBQUToxOTJ9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5fcHJvY2Vzc1RpY2s9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5fY2xvY2sudGlja3M7aWYodGhpcy5fc3dpbmdBbW91bnQ+MCYmaSV0aGlzLl9wcHEhPTAmJmklKDIqdGhpcy5fc3dpbmdUaWNrcykhPTApe3ZhciBuPWklKDIqdGhpcy5fc3dpbmdUaWNrcykvKDIqdGhpcy5fc3dpbmdUaWNrcykscz1NYXRoLnNpbihuKk1hdGguUEkpKnRoaXMuX3N3aW5nQW1vdW50O2UrPXQuVGltZSgyKnRoaXMuX3N3aW5nVGlja3MvMyxcImlcIikqc310aGlzLmxvb3AmJmk9PT10aGlzLl9sb29wRW5kJiYodGhpcy5lbWl0KFwibG9vcEVuZFwiLGUpLHRoaXMuX2Nsb2NrLnRpY2tzPXRoaXMuX2xvb3BTdGFydCxpPXRoaXMuX2xvb3BTdGFydCx0aGlzLmVtaXQoXCJsb29wU3RhcnRcIixlLHRoaXMuc2Vjb25kcyksdGhpcy5lbWl0KFwibG9vcFwiLGUpKSx0aGlzLl9vbmNlRXZlbnRzLmZvckVhY2hCZWZvcmUoaSxmdW5jdGlvbih0KXt0LmNhbGxiYWNrKGUpLGRlbGV0ZSB0aGlzLl9zY2hlZHVsZWRFdmVudHNbdC5pZC50b1N0cmluZygpXX0uYmluZCh0aGlzKSksdGhpcy5fb25jZUV2ZW50cy5jYW5jZWxCZWZvcmUoaSksdGhpcy5fdGltZWxpbmUuZm9yRWFjaEF0VGltZShpLGZ1bmN0aW9uKHQpe3QuY2FsbGJhY2soZSl9KSx0aGlzLl9yZXBlYXRlZEV2ZW50cy5mb3JFYWNoQXRUaW1lKGksZnVuY3Rpb24odCl7KGktdC50aW1lKSV0LmludGVydmFsPT0wJiZ0LmNhbGxiYWNrKGUpfSl9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5zY2hlZHVsZT1mdW5jdGlvbih0LGUpe3ZhciBpPXt0aW1lOnRoaXMudG9UaWNrcyhlKSxjYWxsYmFjazp0fSxuPXRoaXMuX2V2ZW50SUQrKztyZXR1cm4gdGhpcy5fc2NoZWR1bGVkRXZlbnRzW24udG9TdHJpbmcoKV09e2V2ZW50OmksdGltZWxpbmU6dGhpcy5fdGltZWxpbmV9LHRoaXMuX3RpbWVsaW5lLmFkZChpKSxufSx0LlRyYW5zcG9ydC5wcm90b3R5cGUuc2NoZWR1bGVSZXBlYXQ9ZnVuY3Rpb24odCxlLGksbil7aWYoZTw9MCl0aHJvdyBuZXcgRXJyb3IoXCJUb25lLlRyYW5zcG9ydDogcmVwZWF0IGV2ZW50cyBtdXN0IGhhdmUgYW4gaW50ZXJ2YWwgbGFyZ2VyIHRoYW4gMFwiKTt2YXIgcz17dGltZTp0aGlzLnRvVGlja3MoaSksZHVyYXRpb246dGhpcy50b1RpY2tzKHRoaXMuZGVmYXVsdEFyZyhuLDEvMCkpLGludGVydmFsOnRoaXMudG9UaWNrcyhlKSxjYWxsYmFjazp0fSxvPXRoaXMuX2V2ZW50SUQrKztyZXR1cm4gdGhpcy5fc2NoZWR1bGVkRXZlbnRzW28udG9TdHJpbmcoKV09e2V2ZW50OnMsdGltZWxpbmU6dGhpcy5fcmVwZWF0ZWRFdmVudHN9LHRoaXMuX3JlcGVhdGVkRXZlbnRzLmFkZChzKSxvfSx0LlRyYW5zcG9ydC5wcm90b3R5cGUuc2NoZWR1bGVPbmNlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZXZlbnRJRCsrLG49e3RpbWU6dGhpcy50b1RpY2tzKGUpLGNhbGxiYWNrOnQsaWQ6aX07cmV0dXJuIHRoaXMuX3NjaGVkdWxlZEV2ZW50c1tpLnRvU3RyaW5nKCldPXtldmVudDpuLHRpbWVsaW5lOnRoaXMuX29uY2VFdmVudHN9LHRoaXMuX29uY2VFdmVudHMuYWRkKG4pLGl9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbih0KXtpZih0aGlzLl9zY2hlZHVsZWRFdmVudHMuaGFzT3duUHJvcGVydHkodCkpe3ZhciBlPXRoaXMuX3NjaGVkdWxlZEV2ZW50c1t0LnRvU3RyaW5nKCldO2UudGltZWxpbmUucmVtb3ZlKGUuZXZlbnQpLGRlbGV0ZSB0aGlzLl9zY2hlZHVsZWRFdmVudHNbdC50b1N0cmluZygpXX1yZXR1cm4gdGhpc30sdC5UcmFuc3BvcnQucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLmRlZmF1bHRBcmcodCwwKSx0PXRoaXMudG9UaWNrcyh0KSx0aGlzLl90aW1lbGluZS5jYW5jZWwodCksdGhpcy5fb25jZUV2ZW50cy5jYW5jZWwodCksdGhpcy5fcmVwZWF0ZWRFdmVudHMuY2FuY2VsKHQpLHRoaXN9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5fYmluZENsb2NrRXZlbnRzPWZ1bmN0aW9uKCl7dGhpcy5fY2xvY2sub24oXCJzdGFydFwiLGZ1bmN0aW9uKGUsaSl7aT10LlRpbWUodGhpcy5fY2xvY2sudGlja3MsXCJpXCIpLnRvU2Vjb25kcygpLHRoaXMuZW1pdChcInN0YXJ0XCIsZSxpKX0uYmluZCh0aGlzKSksdGhpcy5fY2xvY2sub24oXCJzdG9wXCIsZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwic3RvcFwiLHQpfS5iaW5kKHRoaXMpKSx0aGlzLl9jbG9jay5vbihcInBhdXNlXCIsZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwicGF1c2VcIix0KX0uYmluZCh0aGlzKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJzdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvY2suZ2V0U3RhdGVBdFRpbWUodGhpcy5ub3coKSl9fSksdC5UcmFuc3BvcnQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuaXNVbmRlZihlKXx8KGU9dGhpcy50b1RpY2tzKGUpKSx0aGlzLl9jbG9jay5zdGFydCh0LGUpLHRoaXN9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jbG9jay5zdG9wKHQpLHRoaXN9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2xvY2sucGF1c2UodCksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcInRpbWVTaWduYXR1cmVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpbWVTaWduYXR1cmV9LHNldDpmdW5jdGlvbih0KXt0aGlzLmlzQXJyYXkodCkmJih0PXRbMF0vdFsxXSo0KSx0aGlzLl90aW1lU2lnbmF0dXJlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcImxvb3BTdGFydFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5UcmFuc3BvcnRUaW1lKHRoaXMuX2xvb3BTdGFydCxcImlcIikudG9TZWNvbmRzKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1RpY2tzKHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJsb29wRW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LlRyYW5zcG9ydFRpbWUodGhpcy5fbG9vcEVuZCxcImlcIikudG9TZWNvbmRzKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wRW5kPXRoaXMudG9UaWNrcyh0KX19KSx0LlRyYW5zcG9ydC5wcm90b3R5cGUuc2V0TG9vcFBvaW50cz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmxvb3BTdGFydD10LHRoaXMubG9vcEVuZD1lLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJzd2luZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3dpbmdBbW91bnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zd2luZ0Ftb3VudD10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJzd2luZ1N1YmRpdmlzaW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LlRpbWUodGhpcy5fc3dpbmdUaWNrcyxcImlcIikudG9Ob3RhdGlvbigpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc3dpbmdUaWNrcz10aGlzLnRvVGlja3ModCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcInBvc2l0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LlRyYW5zcG9ydFRpbWUodGhpcy50aWNrcyxcImlcIikudG9CYXJzQmVhdHNTaXh0ZWVudGhzKCl9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnRvVGlja3ModCk7dGhpcy50aWNrcz1lfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJzZWNvbmRzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LlRyYW5zcG9ydFRpbWUodGhpcy50aWNrcyxcImlcIikudG9TZWNvbmRzKCl9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnRvVGlja3ModCk7dGhpcy50aWNrcz1lfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJwcm9ncmVzc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb29wPyh0aGlzLnRpY2tzLXRoaXMuX2xvb3BTdGFydCkvKHRoaXMuX2xvb3BFbmQtdGhpcy5fbG9vcFN0YXJ0KTowfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJ0aWNrc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvY2sudGlja3N9LHNldDpmdW5jdGlvbihlKXtpZih0aGlzLl9jbG9jay50aWNrcyE9PWUpe3ZhciBpPXRoaXMubm93KCk7dGhpcy5zdGF0ZT09PXQuU3RhdGUuU3RhcnRlZD8odGhpcy5lbWl0KFwic3RvcFwiLGkpLHRoaXMuX2Nsb2NrLnRpY2tzPWUsdGhpcy5lbWl0KFwic3RhcnRcIixpLHRoaXMuc2Vjb25kcykpOnRoaXMuX2Nsb2NrLnRpY2tzPWV9fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJQUFFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BwcX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYnBtLnZhbHVlO3RoaXMuX3BwcT10LHRoaXMuYnBtLnZhbHVlPWV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcImxhdGVuY3lIaW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LkNsb2NrLmxhdGVuY3lIaW50fSxzZXQ6ZnVuY3Rpb24oZSl7dC5DbG9jay5sYXRlbmN5SGludD1lfX0pLHQuVHJhbnNwb3J0LnByb3RvdHlwZS5fZnJvbVVuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiAxLyg2MC90L3RoaXMuUFBRKX0sdC5UcmFuc3BvcnQucHJvdG90eXBlLl90b1VuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiB0L3RoaXMuUFBRKjYwfSx0LlRyYW5zcG9ydC5wcm90b3R5cGUubmV4dFN1YmRpdmlzaW9uPWZ1bmN0aW9uKGUpe2U9dGhpcy50b1NlY29uZHMoZSk7dmFyIGk7aWYodGhpcy5zdGF0ZSE9PXQuU3RhdGUuU3RhcnRlZClyZXR1cm4gMDtpPXRoaXMuX2Nsb2NrLl9uZXh0VGljazt2YXIgbj1lLXQuVGltZSh0aGlzLnRpY2tzLFwiaVwiKSVlO3JldHVybiAwPT09biYmKG49ZSksaStufSx0LlRyYW5zcG9ydC5wcm90b3R5cGUuc3luY1NpZ25hbD1mdW5jdGlvbihlLGkpe2l8fChpPTAhPT1lLl9wYXJhbS52YWx1ZT9lLl9wYXJhbS52YWx1ZS90aGlzLmJwbS5fcGFyYW0udmFsdWU6MCk7dmFyIG49bmV3IHQuR2FpbihpKTtyZXR1cm4gdGhpcy5icG0uY2hhaW4obixlLl9wYXJhbSksdGhpcy5fc3luY2VkU2lnbmFscy5wdXNoKHtyYXRpbzpuLHNpZ25hbDplLGluaXRpYWw6ZS5fcGFyYW0udmFsdWV9KSxlLl9wYXJhbS52YWx1ZT0wLHRoaXN9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS51bnN5bmNTaWduYWw9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuX3N5bmNlZFNpZ25hbHMubGVuZ3RoLTE7ZT49MDtlLS0pe3ZhciBpPXRoaXMuX3N5bmNlZFNpZ25hbHNbZV07aS5zaWduYWw9PT10JiYoaS5yYXRpby5kaXNwb3NlKCksaS5zaWduYWwuX3BhcmFtLnZhbHVlPWkuaW5pdGlhbCx0aGlzLl9zeW5jZWRTaWduYWxzLnNwbGljZShlLDEpKX1yZXR1cm4gdGhpc30sdC5UcmFuc3BvcnQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FbWl0dGVyLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fY2xvY2suZGlzcG9zZSgpLHRoaXMuX2Nsb2NrPW51bGwsdGhpcy5fd3JpdGFibGUoXCJicG1cIiksdGhpcy5icG09bnVsbCx0aGlzLl90aW1lbGluZS5kaXNwb3NlKCksdGhpcy5fdGltZWxpbmU9bnVsbCx0aGlzLl9vbmNlRXZlbnRzLmRpc3Bvc2UoKSx0aGlzLl9vbmNlRXZlbnRzPW51bGwsdGhpcy5fcmVwZWF0ZWRFdmVudHMuZGlzcG9zZSgpLHRoaXMuX3JlcGVhdGVkRXZlbnRzPW51bGwsdGhpc307dmFyIGU9dC5UcmFuc3BvcnQ7cmV0dXJuIHQuVHJhbnNwb3J0PW5ldyBlLHQuQ29udGV4dC5vbihcImluaXRcIixmdW5jdGlvbihpKXtpLlRyYW5zcG9ydCBpbnN0YW5jZW9mIGU/dC5UcmFuc3BvcnQ9aS5UcmFuc3BvcnQ6KHQuVHJhbnNwb3J0PW5ldyBlLGkuVHJhbnNwb3J0PXQuVHJhbnNwb3J0KX0pLHQuVHJhbnNwb3J0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Wb2x1bWU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInZvbHVtZVwiXSx0LlZvbHVtZS5kZWZhdWx0cyk7dGhpcy5vdXRwdXQ9dGhpcy5pbnB1dD1uZXcgdC5HYWluKGUudm9sdW1lLHQuVHlwZS5EZWNpYmVscyksdGhpcy5fdW5tdXRlZFZvbHVtZT1lLnZvbHVtZSx0aGlzLnZvbHVtZT10aGlzLm91dHB1dC5nYWluLHRoaXMuX3JlYWRPbmx5KFwidm9sdW1lXCIpLHRoaXMubXV0ZT1lLm11dGV9LHQuZXh0ZW5kKHQuVm9sdW1lKSx0LlZvbHVtZS5kZWZhdWx0cz17dm9sdW1lOjAsbXV0ZTohMX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVm9sdW1lLnByb3RvdHlwZSxcIm11dGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudm9sdW1lLnZhbHVlPT09LTEvMH0sc2V0OmZ1bmN0aW9uKHQpeyF0aGlzLm11dGUmJnQ/KHRoaXMuX3VubXV0ZWRWb2x1bWU9dGhpcy52b2x1bWUudmFsdWUsdGhpcy52b2x1bWUudmFsdWU9LTEvMCk6dGhpcy5tdXRlJiYhdCYmKHRoaXMudm9sdW1lLnZhbHVlPXRoaXMuX3VubXV0ZWRWb2x1bWUpfX0pLHQuVm9sdW1lLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5wdXQuZGlzcG9zZSgpLHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShcInZvbHVtZVwiKSx0aGlzLnZvbHVtZS5kaXNwb3NlKCksdGhpcy52b2x1bWU9bnVsbCx0aGlzfSx0LlZvbHVtZX0pLHQoZnVuY3Rpb24odCl7dC5NYXN0ZXI9ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZUluc091dHMoMSwxKSx0aGlzLl92b2x1bWU9dGhpcy5vdXRwdXQ9bmV3IHQuVm9sdW1lLHRoaXMudm9sdW1lPXRoaXMuX3ZvbHVtZS52b2x1bWUsdGhpcy5fcmVhZE9ubHkoXCJ2b2x1bWVcIiksdGhpcy5pbnB1dC5jaGFpbih0aGlzLm91dHB1dCx0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pfSx0LmV4dGVuZCh0Lk1hc3RlciksdC5NYXN0ZXIuZGVmYXVsdHM9e3ZvbHVtZTowLG11dGU6ITF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk1hc3Rlci5wcm90b3R5cGUsXCJtdXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92b2x1bWUubXV0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ZvbHVtZS5tdXRlPXR9fSksdC5NYXN0ZXIucHJvdG90eXBlLmNoYWluPWZ1bmN0aW9uKCl7dGhpcy5pbnB1dC5kaXNjb25uZWN0KCksdGhpcy5pbnB1dC5jaGFpbi5hcHBseSh0aGlzLmlucHV0LGFyZ3VtZW50cyksYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV0uY29ubmVjdCh0aGlzLm91dHB1dCl9LHQuTWFzdGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFwidm9sdW1lXCIpLHRoaXMuX3ZvbHVtZS5kaXNwb3NlKCksdGhpcy5fdm9sdW1lPW51bGwsdGhpcy52b2x1bWU9bnVsbH0sdC5wcm90b3R5cGUudG9NYXN0ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25uZWN0KHQuTWFzdGVyKSx0aGlzfSxBdWRpb05vZGUucHJvdG90eXBlLnRvTWFzdGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29ubmVjdCh0Lk1hc3RlciksdGhpc307dmFyIGU9dC5NYXN0ZXI7cmV0dXJuIHQuTWFzdGVyPW5ldyBlLHQuQ29udGV4dC5vbihcImluaXRcIixmdW5jdGlvbihpKXtpLk1hc3RlciBpbnN0YW5jZW9mIGU/dC5NYXN0ZXI9aS5NYXN0ZXI6dC5NYXN0ZXI9bmV3IGUsaS5NYXN0ZXI9dC5NYXN0ZXJ9KSx0Lk1hc3Rlcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU291cmNlPWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5Tb3VyY2UuZGVmYXVsdHMpLHRoaXMuX3ZvbHVtZT10aGlzLm91dHB1dD1uZXcgdC5Wb2x1bWUoZS52b2x1bWUpLHRoaXMudm9sdW1lPXRoaXMuX3ZvbHVtZS52b2x1bWUsdGhpcy5fcmVhZE9ubHkoXCJ2b2x1bWVcIiksdGhpcy5fc3RhdGU9bmV3IHQuVGltZWxpbmVTdGF0ZSh0LlN0YXRlLlN0b3BwZWQpLHRoaXMuX3N0YXRlLm1lbW9yeT0xMCx0aGlzLl9zeW5jZWQ9ITEsdGhpcy5fc2NoZWR1bGVkPVtdLHRoaXMuX3ZvbHVtZS5vdXRwdXQub3V0cHV0LmNoYW5uZWxDb3VudD0yLHRoaXMuX3ZvbHVtZS5vdXRwdXQub3V0cHV0LmNoYW5uZWxDb3VudE1vZGU9XCJleHBsaWNpdFwiLHRoaXMubXV0ZT1lLm11dGV9LHQuZXh0ZW5kKHQuU291cmNlKSx0LlNvdXJjZS5kZWZhdWx0cz17dm9sdW1lOjAsbXV0ZTohMX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU291cmNlLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jZWQ/dC5UcmFuc3BvcnQuc3RhdGU9PT10LlN0YXRlLlN0YXJ0ZWQ/dGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUodC5UcmFuc3BvcnQuc2Vjb25kcyk6dC5TdGF0ZS5TdG9wcGVkOnRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKHRoaXMubm93KCkpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlNvdXJjZS5wcm90b3R5cGUsXCJtdXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92b2x1bWUubXV0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ZvbHVtZS5tdXRlPXR9fSksdC5Tb3VyY2UucHJvdG90eXBlLl9zdGFydD10Lm5vT3AsdC5Tb3VyY2UucHJvdG90eXBlLl9zdG9wPXQubm9PcCx0LlNvdXJjZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSxpLG4pe2lmKGU9dGhpcy5pc1VuZGVmKGUpJiZ0aGlzLl9zeW5jZWQ/dC5UcmFuc3BvcnQuc2Vjb25kczp0aGlzLnRvU2Vjb25kcyhlKSx0aGlzLnJldHJpZ2dlcnx8dGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUoZSkhPT10LlN0YXRlLlN0YXJ0ZWR8fHRoaXMuc3RvcChlKSx0aGlzLl9zdGF0ZS5zZXRTdGF0ZUF0VGltZSh0LlN0YXRlLlN0YXJ0ZWQsZSksdGhpcy5fc3luY2VkKXt2YXIgcz10aGlzLl9zdGF0ZS5nZXQoZSk7cy5vZmZzZXQ9dGhpcy5kZWZhdWx0QXJnKGksMCkscy5kdXJhdGlvbj1uO3ZhciBvPXQuVHJhbnNwb3J0LnNjaGVkdWxlKGZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0KHQsaSxuKX0uYmluZCh0aGlzKSxlKTt0aGlzLl9zY2hlZHVsZWQucHVzaChvKX1lbHNlIHRoaXMuX3N0YXJ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpc30sdC5Tb3VyY2UucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oZSl7aWYoZT10aGlzLmlzVW5kZWYoZSkmJnRoaXMuX3N5bmNlZD90LlRyYW5zcG9ydC5zZWNvbmRzOnRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX3N0YXRlLmNhbmNlbChlKSx0aGlzLl9zdGF0ZS5zZXRTdGF0ZUF0VGltZSh0LlN0YXRlLlN0b3BwZWQsZSksdGhpcy5fc3luY2VkKXt2YXIgaT10LlRyYW5zcG9ydC5zY2hlZHVsZSh0aGlzLl9zdG9wLmJpbmQodGhpcyksZSk7dGhpcy5fc2NoZWR1bGVkLnB1c2goaSl9ZWxzZSB0aGlzLl9zdG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpc30sdC5Tb3VyY2UucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY2VkPSEwLHQuVHJhbnNwb3J0Lm9uKFwic3RhcnQgbG9vcFN0YXJ0XCIsZnVuY3Rpb24oZSxpKXtpZihpPjApe3ZhciBuPXRoaXMuX3N0YXRlLmdldChpKTtpZihuJiZuLnN0YXRlPT09dC5TdGF0ZS5TdGFydGVkJiZuLnRpbWUhPT1pKXt2YXIgcyxvPWktdGhpcy50b1NlY29uZHMobi50aW1lKTtuLmR1cmF0aW9uJiYocz10aGlzLnRvU2Vjb25kcyhuLmR1cmF0aW9uKS1vKSx0aGlzLl9zdGFydChlLHRoaXMudG9TZWNvbmRzKG4ub2Zmc2V0KStvLHMpfX19LmJpbmQodGhpcykpLHQuVHJhbnNwb3J0Lm9uKFwic3RvcCBwYXVzZSBsb29wRW5kXCIsZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUodC5UcmFuc3BvcnQuc2Vjb25kcyk9PT10LlN0YXRlLlN0YXJ0ZWQmJnRoaXMuX3N0b3AoZSl9LmJpbmQodGhpcykpLHRoaXN9LHQuU291cmNlLnByb3RvdHlwZS51bnN5bmM9ZnVuY3Rpb24oKXt0aGlzLl9zeW5jZWQ9ITEsdC5UcmFuc3BvcnQub2ZmKFwic3RhcnQgc3RvcCBwYXVzZSBsb29wRW5kIGxvb3BTdGFydFwiKTtmb3IodmFyIGU9MDtlPHRoaXMuX3NjaGVkdWxlZC5sZW5ndGg7ZSsrKXt2YXIgaT10aGlzLl9zY2hlZHVsZWRbZV07dC5UcmFuc3BvcnQuY2xlYXIoaSl9cmV0dXJuIHRoaXMuX3NjaGVkdWxlZD1bXSx0aGlzLl9zdGF0ZS5jYW5jZWwoMCksdGhpc30sdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy51bnN5bmMoKSx0aGlzLl9zY2hlZHVsZWQ9bnVsbCx0aGlzLl93cml0YWJsZShcInZvbHVtZVwiKSx0aGlzLl92b2x1bWUuZGlzcG9zZSgpLHRoaXMuX3ZvbHVtZT1udWxsLHRoaXMudm9sdW1lPW51bGwsdGhpcy5fc3RhdGUuZGlzcG9zZSgpLHRoaXMuX3N0YXRlPW51bGx9LHQuU291cmNlfSksdChmdW5jdGlvbih0KXtyZXR1cm4gd2luZG93Lk9zY2lsbGF0b3JOb2RlJiYhT3NjaWxsYXRvck5vZGUucHJvdG90eXBlLnN0YXJ0JiYoT3NjaWxsYXRvck5vZGUucHJvdG90eXBlLnN0YXJ0PU9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5ub3RlT24sT3NjaWxsYXRvck5vZGUucHJvdG90eXBlLnN0b3A9T3NjaWxsYXRvck5vZGUucHJvdG90eXBlLm5vdGVPZmYsT3NjaWxsYXRvck5vZGUucHJvdG90eXBlLnNldFBlcmlvZGljV2F2ZXx8KE9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5zZXRQZXJpb2RpY1dhdmU9T3NjaWxsYXRvck5vZGUucHJvdG90eXBlLnNldFdhdmVUYWJsZSksQXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVQZXJpb2RpY1dhdmV8fChBdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZVBlcmlvZGljV2F2ZT1BdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZVdhdmVUYWJsZSkpLHQuT3NjaWxsYXRvcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJ0eXBlXCJdLHQuT3NjaWxsYXRvci5kZWZhdWx0cyk7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMuX29zY2lsbGF0b3I9bnVsbCx0aGlzLmZyZXF1ZW5jeT1uZXcgdC5TaWduYWwoZS5mcmVxdWVuY3ksdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5kZXR1bmU9bmV3IHQuU2lnbmFsKGUuZGV0dW5lLHQuVHlwZS5DZW50cyksdGhpcy5fd2F2ZT1udWxsLHRoaXMuX3BhcnRpYWxzPXRoaXMuZGVmYXVsdEFyZyhlLnBhcnRpYWxzLFsxXSksdGhpcy5fcGhhc2U9ZS5waGFzZSx0aGlzLl90eXBlPW51bGwsdGhpcy50eXBlPWUudHlwZSx0aGlzLnBoYXNlPXRoaXMuX3BoYXNlLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCJdKX0sdC5leHRlbmQodC5Pc2NpbGxhdG9yLHQuU291cmNlKSx0Lk9zY2lsbGF0b3IuZGVmYXVsdHM9e3R5cGU6XCJzaW5lXCIsZnJlcXVlbmN5OjQ0MCxkZXR1bmU6MCxwaGFzZTowLHBhcnRpYWxzOltdfSx0Lk9zY2lsbGF0b3IuVHlwZT17U2luZTpcInNpbmVcIixUcmlhbmdsZTpcInRyaWFuZ2xlXCIsU2F3dG9vdGg6XCJzYXd0b290aFwiLFNxdWFyZTpcInNxdWFyZVwiLEN1c3RvbTpcImN1c3RvbVwifSx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbih0KXt0aGlzLl9vc2NpbGxhdG9yPXRoaXMuY29udGV4dC5jcmVhdGVPc2NpbGxhdG9yKCksdGhpcy5fb3NjaWxsYXRvci5zZXRQZXJpb2RpY1dhdmUodGhpcy5fd2F2ZSksdGhpcy5fb3NjaWxsYXRvci5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuX29zY2lsbGF0b3IuZnJlcXVlbmN5KSx0aGlzLmRldHVuZS5jb25uZWN0KHRoaXMuX29zY2lsbGF0b3IuZGV0dW5lKSx0aGlzLl9vc2NpbGxhdG9yLnN0YXJ0KHRoaXMudG9TZWNvbmRzKHQpKX0sdC5Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvciYmKHRoaXMuX29zY2lsbGF0b3Iuc3RvcCh0aGlzLnRvU2Vjb25kcyh0KSksdGhpcy5fb3NjaWxsYXRvcj1udWxsKSx0aGlzfSx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLnN5bmNGcmVxdWVuY3k9ZnVuY3Rpb24oKXtyZXR1cm4gdC5UcmFuc3BvcnQuc3luY1NpZ25hbCh0aGlzLmZyZXF1ZW5jeSksdGhpc30sdC5Pc2NpbGxhdG9yLnByb3RvdHlwZS51bnN5bmNGcmVxdWVuY3k9ZnVuY3Rpb24oKXtyZXR1cm4gdC5UcmFuc3BvcnQudW5zeW5jU2lnbmFsKHRoaXMuZnJlcXVlbmN5KSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXRSZWFsSW1hZ2luYXJ5KHQsdGhpcy5fcGhhc2UpLGk9dGhpcy5jb250ZXh0LmNyZWF0ZVBlcmlvZGljV2F2ZShlWzBdLGVbMV0pO3RoaXMuX3dhdmU9aSxudWxsIT09dGhpcy5fb3NjaWxsYXRvciYmdGhpcy5fb3NjaWxsYXRvci5zZXRQZXJpb2RpY1dhdmUodGhpcy5fd2F2ZSksdGhpcy5fdHlwZT10fX0pLHQuT3NjaWxsYXRvci5wcm90b3R5cGUuX2dldFJlYWxJbWFnaW5hcnk9ZnVuY3Rpb24oZSxpKXt2YXIgbj0yMDQ4LHM9bmV3IEZsb2F0MzJBcnJheShuKSxvPW5ldyBGbG9hdDMyQXJyYXkobikscj0xO2lmKGU9PT10Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b20pbj1yPXRoaXMuX3BhcnRpYWxzLmxlbmd0aCsxO2Vsc2V7dmFyIGE9L14oc2luZXx0cmlhbmdsZXxzcXVhcmV8c2F3dG9vdGgpKFxcZCspJC8uZXhlYyhlKTthJiYocj1wYXJzZUludChhWzJdKSsxLGU9YVsxXSxuPXI9TWF0aC5tYXgociwyKSl9Zm9yKHZhciBoPTE7aDxuOysraCl7dmFyIGwsdT0yLyhoKk1hdGguUEkpO3N3aXRjaChlKXtjYXNlIHQuT3NjaWxsYXRvci5UeXBlLlNpbmU6bD1oPD1yPzE6MDticmVhaztjYXNlIHQuT3NjaWxsYXRvci5UeXBlLlNxdWFyZTpsPTEmaD8yKnU6MDticmVhaztjYXNlIHQuT3NjaWxsYXRvci5UeXBlLlNhd3Rvb3RoOmw9dSooMSZoPzE6LTEpO2JyZWFrO2Nhc2UgdC5Pc2NpbGxhdG9yLlR5cGUuVHJpYW5nbGU6bD0xJmg/dSp1KjIqKGgtMT4+MSYxPy0xOjEpOjA7YnJlYWs7Y2FzZSB0Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b206bD10aGlzLl9wYXJ0aWFsc1toLTFdO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcihcIlRvbmUuT3NjaWxsYXRvcjogaW52YWxpZCB0eXBlOiBcIitlKX0wIT09bD8oc1toXT0tbCpNYXRoLnNpbihpKmgpLG9baF09bCpNYXRoLmNvcyhpKmgpKTooc1toXT0wLG9baF09MCl9cmV0dXJuW3Msb119LHQuT3NjaWxsYXRvci5wcm90b3R5cGUuX2ludmVyc2VGRlQ9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj0wLHM9dC5sZW5ndGgsbz0wO288cztvKyspbis9dFtvXSpNYXRoLmNvcyhvKmkpK2Vbb10qTWF0aC5zaW4obyppKTtyZXR1cm4gbn0sdC5Pc2NpbGxhdG9yLnByb3RvdHlwZS5fZ2V0SW5pdGlhbFZhbHVlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX2dldFJlYWxJbWFnaW5hcnkodGhpcy5fdHlwZSwwKSxlPXRbMF0saT10WzFdLG49MCxzPTIqTWF0aC5QSSxvPTA7bzw4O28rKyluPU1hdGgubWF4KHRoaXMuX2ludmVyc2VGRlQoZSxpLG8vOCpzKSxuKTtyZXR1cm4tdGhpcy5faW52ZXJzZUZGVChlLGksdGhpcy5fcGhhc2UpL259LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk9zY2lsbGF0b3IucHJvdG90eXBlLFwicGFydGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGUhPT10Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b20/W106dGhpcy5fcGFydGlhbHN9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9wYXJ0aWFscz1lLHRoaXMudHlwZT10Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b219fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGhhc2UqKDE4MC9NYXRoLlBJKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BoYXNlPXQqTWF0aC5QSS8xODAsdGhpcy50eXBlPXRoaXMuX3R5cGV9fSksdC5Pc2NpbGxhdG9yLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksbnVsbCE9PXRoaXMuX29zY2lsbGF0b3ImJih0aGlzLl9vc2NpbGxhdG9yLmRpc2Nvbm5lY3QoKSx0aGlzLl9vc2NpbGxhdG9yPW51bGwpLHRoaXMuX3dhdmU9bnVsbCx0aGlzLl93cml0YWJsZShbXCJmcmVxdWVuY3lcIixcImRldHVuZVwiXSksdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXR1bmUuZGlzcG9zZSgpLHRoaXMuZGV0dW5lPW51bGwsdGhpcy5fcGFydGlhbHM9bnVsbCx0aGlzfSx0Lk9zY2lsbGF0b3J9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Llplcm89ZnVuY3Rpb24oKXt0aGlzLl9nYWluPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9bmV3IHQuR2Fpbix0aGlzLmNvbnRleHQuZ2V0Q29uc3RhbnQoMCkuY29ubmVjdCh0aGlzLl9nYWluKX0sdC5leHRlbmQodC5aZXJvKSx0Llplcm8ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2dhaW4uZGlzcG9zZSgpLHRoaXMuX2dhaW49bnVsbCx0aGlzfSx0Llplcm99KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkxGTz1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJtaW5cIixcIm1heFwiXSx0LkxGTy5kZWZhdWx0cyk7dGhpcy5fb3NjaWxsYXRvcj1uZXcgdC5Pc2NpbGxhdG9yKHtmcmVxdWVuY3k6ZS5mcmVxdWVuY3ksdHlwZTplLnR5cGV9KSx0aGlzLmZyZXF1ZW5jeT10aGlzLl9vc2NpbGxhdG9yLmZyZXF1ZW5jeSx0aGlzLmFtcGxpdHVkZT10aGlzLl9vc2NpbGxhdG9yLnZvbHVtZSx0aGlzLmFtcGxpdHVkZS51bml0cz10LlR5cGUuTm9ybWFsUmFuZ2UsdGhpcy5hbXBsaXR1ZGUudmFsdWU9ZS5hbXBsaXR1ZGUsdGhpcy5fc3RvcHBlZFNpZ25hbD1uZXcgdC5TaWduYWwoMCx0LlR5cGUuQXVkaW9SYW5nZSksdGhpcy5femVyb3M9bmV3IHQuWmVybyx0aGlzLl9zdG9wcGVkVmFsdWU9MCx0aGlzLl9hMmc9bmV3IHQuQXVkaW9Ub0dhaW4sdGhpcy5fc2NhbGVyPXRoaXMub3V0cHV0PW5ldyB0LlNjYWxlKGUubWluLGUubWF4KSx0aGlzLl91bml0cz10LlR5cGUuRGVmYXVsdCx0aGlzLnVuaXRzPWUudW5pdHMsdGhpcy5fb3NjaWxsYXRvci5jaGFpbih0aGlzLl9hMmcsdGhpcy5fc2NhbGVyKSx0aGlzLl96ZXJvcy5jb25uZWN0KHRoaXMuX2EyZyksdGhpcy5fc3RvcHBlZFNpZ25hbC5jb25uZWN0KHRoaXMuX2EyZyksdGhpcy5fcmVhZE9ubHkoW1wiYW1wbGl0dWRlXCIsXCJmcmVxdWVuY3lcIl0pLHRoaXMucGhhc2U9ZS5waGFzZX0sdC5leHRlbmQodC5MRk8sdC5Pc2NpbGxhdG9yKSx0LkxGTy5kZWZhdWx0cz17dHlwZTpcInNpbmVcIixtaW46MCxtYXg6MSxwaGFzZTowLGZyZXF1ZW5jeTpcIjRuXCIsYW1wbGl0dWRlOjEsdW5pdHM6dC5UeXBlLkRlZmF1bHR9LHQuTEZPLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zdG9wcGVkU2lnbmFsLnNldFZhbHVlQXRUaW1lKDAsdCksdGhpcy5fb3NjaWxsYXRvci5zdGFydCh0KSx0aGlzfSx0LkxGTy5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zdG9wcGVkU2lnbmFsLnNldFZhbHVlQXRUaW1lKHRoaXMuX3N0b3BwZWRWYWx1ZSx0KSx0aGlzLl9vc2NpbGxhdG9yLnN0b3AodCksdGhpc30sdC5MRk8ucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5zeW5jKCksdGhpcy5fb3NjaWxsYXRvci5zeW5jRnJlcXVlbmN5KCksdGhpc30sdC5MRk8ucHJvdG90eXBlLnVuc3luYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9yLnVuc3luYygpLHRoaXMuX29zY2lsbGF0b3IudW5zeW5jRnJlcXVlbmN5KCksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTEZPLnByb3RvdHlwZSxcIm1pblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9Vbml0cyh0aGlzLl9zY2FsZXIubWluKX0sc2V0OmZ1bmN0aW9uKHQpe3Q9dGhpcy5fZnJvbVVuaXRzKHQpLHRoaXMuX3NjYWxlci5taW49dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5MRk8ucHJvdG90eXBlLFwibWF4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b1VuaXRzKHRoaXMuX3NjYWxlci5tYXgpfSxzZXQ6ZnVuY3Rpb24odCl7dD10aGlzLl9mcm9tVW5pdHModCksdGhpcy5fc2NhbGVyLm1heD10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkxGTy5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9yLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vc2NpbGxhdG9yLnR5cGU9dCx0aGlzLl9zdG9wcGVkVmFsdWU9dGhpcy5fb3NjaWxsYXRvci5fZ2V0SW5pdGlhbFZhbHVlKCksdGhpcy5fc3RvcHBlZFNpZ25hbC52YWx1ZT10aGlzLl9zdG9wcGVkVmFsdWV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTEZPLnByb3RvdHlwZSxcInBoYXNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9yLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3NjaWxsYXRvci5waGFzZT10LHRoaXMuX3N0b3BwZWRWYWx1ZT10aGlzLl9vc2NpbGxhdG9yLl9nZXRJbml0aWFsVmFsdWUoKSx0aGlzLl9zdG9wcGVkU2lnbmFsLnZhbHVlPXRoaXMuX3N0b3BwZWRWYWx1ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5MRk8ucHJvdG90eXBlLFwidW5pdHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VuaXRzfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5taW4saT10aGlzLm1heDt0aGlzLl91bml0cz10LHRoaXMubWluPWUsdGhpcy5tYXg9aX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5MRk8ucHJvdG90eXBlLFwibXV0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5tdXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3NjaWxsYXRvci5tdXRlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTEZPLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9yLnN0YXRlfX0pLHQuTEZPLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnN0cnVjdG9yIT09dC5TaWduYWwmJmUuY29uc3RydWN0b3IhPT10LlBhcmFtJiZlLmNvbnN0cnVjdG9yIT09dC5UaW1lbGluZVNpZ25hbHx8KHRoaXMuY29udmVydD1lLmNvbnZlcnQsdGhpcy51bml0cz1lLnVuaXRzKSx0LlNpZ25hbC5wcm90b3R5cGUuY29ubmVjdC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpc30sdC5MRk8ucHJvdG90eXBlLl9mcm9tVW5pdHM9dC5QYXJhbS5wcm90b3R5cGUuX2Zyb21Vbml0cyx0LkxGTy5wcm90b3R5cGUuX3RvVW5pdHM9dC5QYXJhbS5wcm90b3R5cGUuX3RvVW5pdHMsdC5MRk8ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImFtcGxpdHVkZVwiLFwiZnJlcXVlbmN5XCJdKSx0aGlzLl9vc2NpbGxhdG9yLmRpc3Bvc2UoKSx0aGlzLl9vc2NpbGxhdG9yPW51bGwsdGhpcy5fc3RvcHBlZFNpZ25hbC5kaXNwb3NlKCksdGhpcy5fc3RvcHBlZFNpZ25hbD1udWxsLHRoaXMuX3plcm9zLmRpc3Bvc2UoKSx0aGlzLl96ZXJvcz1udWxsLHRoaXMuX3NjYWxlci5kaXNwb3NlKCksdGhpcy5fc2NhbGVyPW51bGwsdGhpcy5fYTJnLmRpc3Bvc2UoKSx0aGlzLl9hMmc9bnVsbCx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuYW1wbGl0dWRlPW51bGwsdGhpc30sdC5MRk99KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkxpbWl0ZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInRocmVzaG9sZFwiXSx0LkxpbWl0ZXIuZGVmYXVsdHMpO3RoaXMuX2NvbXByZXNzb3I9dGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgdC5Db21wcmVzc29yKHthdHRhY2s6LjAwMSxkZWNheTouMDAxLHRocmVzaG9sZDplLnRocmVzaG9sZH0pLHRoaXMudGhyZXNob2xkPXRoaXMuX2NvbXByZXNzb3IudGhyZXNob2xkLHRoaXMuX3JlYWRPbmx5KFwidGhyZXNob2xkXCIpfSx0LmV4dGVuZCh0LkxpbWl0ZXIpLHQuTGltaXRlci5kZWZhdWx0cz17dGhyZXNob2xkOi0xMn0sdC5MaW1pdGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9jb21wcmVzc29yLmRpc3Bvc2UoKSx0aGlzLl9jb21wcmVzc29yPW51bGwsdGhpcy5fd3JpdGFibGUoXCJ0aHJlc2hvbGRcIiksdGhpcy50aHJlc2hvbGQ9bnVsbCx0aGlzfSx0LkxpbWl0ZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lkxvd3Bhc3NDb21iRmlsdGVyPWZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVJbnNPdXRzKDEsMSk7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJkZWxheVRpbWVcIixcInJlc29uYW5jZVwiLFwiZGFtcGVuaW5nXCJdLHQuTG93cGFzc0NvbWJGaWx0ZXIuZGVmYXVsdHMpO3RoaXMuX2RlbGF5PXRoaXMuaW5wdXQ9bmV3IHQuRGVsYXkoZS5kZWxheVRpbWUpLHRoaXMuZGVsYXlUaW1lPXRoaXMuX2RlbGF5LmRlbGF5VGltZSx0aGlzLl9sb3dwYXNzPXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKSx0aGlzLl9sb3dwYXNzLlEudmFsdWU9LTMuMDEwMjk5OTU2NjM5ODEyNSx0aGlzLl9sb3dwYXNzLnR5cGU9XCJsb3dwYXNzXCIsdGhpcy5kYW1wZW5pbmc9bmV3IHQuUGFyYW0oe3BhcmFtOnRoaXMuX2xvd3Bhc3MuZnJlcXVlbmN5LHVuaXRzOnQuVHlwZS5GcmVxdWVuY3ksdmFsdWU6ZS5kYW1wZW5pbmd9KSx0aGlzLl9mZWVkYmFjaz1uZXcgdC5HYWluKGUucmVzb25hbmNlLHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5yZXNvbmFuY2U9dGhpcy5fZmVlZGJhY2suZ2Fpbix0aGlzLl9kZWxheS5jaGFpbih0aGlzLl9sb3dwYXNzLHRoaXMuX2ZlZWRiYWNrLHRoaXMuX2RlbGF5KSx0aGlzLl9yZWFkT25seShbXCJkYW1wZW5pbmdcIixcInJlc29uYW5jZVwiLFwiZGVsYXlUaW1lXCJdKX0sdC5leHRlbmQodC5Mb3dwYXNzQ29tYkZpbHRlciksdC5Mb3dwYXNzQ29tYkZpbHRlci5kZWZhdWx0cz17ZGVsYXlUaW1lOi4xLHJlc29uYW5jZTouNSxkYW1wZW5pbmc6M2UzfSx0Lkxvd3Bhc3NDb21iRmlsdGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJkYW1wZW5pbmdcIixcInJlc29uYW5jZVwiLFwiZGVsYXlUaW1lXCJdKSx0aGlzLmRhbXBlbmluZy5kaXNwb3NlKCksdGhpcy5kYW1wZW5pbmc9bnVsbCx0aGlzLnJlc29uYW5jZS5kaXNwb3NlKCksdGhpcy5yZXNvbmFuY2U9bnVsbCx0aGlzLl9kZWxheS5kaXNwb3NlKCksdGhpcy5fZGVsYXk9bnVsbCx0aGlzLmRlbGF5VGltZT1udWxsLHRoaXMuX2xvd3Bhc3MuZGlzY29ubmVjdCgpLHRoaXMuX2xvd3Bhc3M9bnVsbCx0aGlzLl9mZWVkYmFjay5kaXNjb25uZWN0KCksdGhpcy5fZmVlZGJhY2s9bnVsbCx0aGlzfSx0Lkxvd3Bhc3NDb21iRmlsdGVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5NZXJnZT1mdW5jdGlvbigpe3RoaXMuY3JlYXRlSW5zT3V0cygyLDApLHRoaXMubGVmdD10aGlzLmlucHV0WzBdPW5ldyB0LkdhaW4sdGhpcy5yaWdodD10aGlzLmlucHV0WzFdPW5ldyB0LkdhaW4sdGhpcy5fbWVyZ2VyPXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVDaGFubmVsTWVyZ2VyKDIpLHRoaXMubGVmdC5jb25uZWN0KHRoaXMuX21lcmdlciwwLDApLHRoaXMucmlnaHQuY29ubmVjdCh0aGlzLl9tZXJnZXIsMCwxKSx0aGlzLmxlZnQuY2hhbm5lbENvdW50PTEsdGhpcy5yaWdodC5jaGFubmVsQ291bnQ9MSx0aGlzLmxlZnQuY2hhbm5lbENvdW50TW9kZT1cImV4cGxpY2l0XCIsdGhpcy5yaWdodC5jaGFubmVsQ291bnRNb2RlPVwiZXhwbGljaXRcIn0sdC5leHRlbmQodC5NZXJnZSksdC5NZXJnZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5sZWZ0LmRpc3Bvc2UoKSx0aGlzLmxlZnQ9bnVsbCx0aGlzLnJpZ2h0LmRpc3Bvc2UoKSx0aGlzLnJpZ2h0PW51bGwsdGhpcy5fbWVyZ2VyLmRpc2Nvbm5lY3QoKSx0aGlzLl9tZXJnZXI9bnVsbCx0aGlzfSx0Lk1lcmdlfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5NZXRlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1widHlwZVwiLFwic21vb3RoaW5nXCJdLHQuTWV0ZXIuZGVmYXVsdHMpO3RoaXMudHlwZT1lLnR5cGUsdGhpcy5pbnB1dD10aGlzLm91dHB1dD10aGlzLl9hbmFseXNlcj1uZXcgdC5BbmFseXNlcihcIndhdmVmb3JtXCIsNTEyKSx0aGlzLl9hbmFseXNlci5yZXR1cm5UeXBlPVwiZmxvYXRcIix0aGlzLnNtb290aGluZz1lLnNtb290aGluZyx0aGlzLl9sYXN0VmFsdWU9MH0sdC5leHRlbmQodC5NZXRlciksdC5NZXRlci5UeXBlPXtMZXZlbDpcImxldmVsXCIsU2lnbmFsOlwic2lnbmFsXCJ9LHQuTWV0ZXIuZGVmYXVsdHM9e3Ntb290aGluZzouOCx0eXBlOnQuTWV0ZXIuVHlwZS5MZXZlbH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTWV0ZXIucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fYW5hbHlzZXIuYW5hbHlzZSgpO2lmKHRoaXMudHlwZT09PXQuTWV0ZXIuVHlwZS5MZXZlbCl7Zm9yKHZhciBpPTAsbj0wO248ZS5sZW5ndGg7bisrKWkrPU1hdGgucG93KGVbbl0sMik7dmFyIHM9TWF0aC5zcXJ0KGkvZS5sZW5ndGgpO3M9TWF0aC5tYXgocyx0aGlzLl9sYXN0VmFsdWUqdGhpcy5zbW9vdGhpbmcpLHRoaXMuX2xhc3RWYWx1ZT1zO3ZhciBvPXMvLjM1O3JldHVybiBNYXRoLnNxcnQobyl9cmV0dXJuIGVbMF19fSksdC5NZXRlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fYW5hbHlzZXIuZGlzcG9zZSgpLHRoaXMuX2FuYWx5c2VyPW51bGwsdGhpc30sdC5NZXRlcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU3BsaXQ9ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZUluc091dHMoMCwyKSx0aGlzLl9zcGxpdHRlcj10aGlzLmlucHV0PXRoaXMuY29udGV4dC5jcmVhdGVDaGFubmVsU3BsaXR0ZXIoMiksdGhpcy5sZWZ0PXRoaXMub3V0cHV0WzBdPW5ldyB0LkdhaW4sdGhpcy5yaWdodD10aGlzLm91dHB1dFsxXT1uZXcgdC5HYWluLHRoaXMuX3NwbGl0dGVyLmNvbm5lY3QodGhpcy5sZWZ0LDAsMCksdGhpcy5fc3BsaXR0ZXIuY29ubmVjdCh0aGlzLnJpZ2h0LDEsMCl9LHQuZXh0ZW5kKHQuU3BsaXQpLHQuU3BsaXQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NwbGl0dGVyLmRpc2Nvbm5lY3QoKSx0aGlzLmxlZnQuZGlzcG9zZSgpLHRoaXMubGVmdD1udWxsLHRoaXMucmlnaHQuZGlzcG9zZSgpLHRoaXMucmlnaHQ9bnVsbCx0aGlzLl9zcGxpdHRlcj1udWxsLHRoaXN9LHQuU3BsaXR9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lk1pZFNpZGVTcGxpdD1mdW5jdGlvbigpe3RoaXMuY3JlYXRlSW5zT3V0cygwLDIpLHRoaXMuX3NwbGl0PXRoaXMuaW5wdXQ9bmV3IHQuU3BsaXQsdGhpcy5taWQ9dGhpcy5vdXRwdXRbMF09bmV3IHQuRXhwcihcIigkMCArICQxKSAqICQyXCIpLHRoaXMuc2lkZT10aGlzLm91dHB1dFsxXT1uZXcgdC5FeHByKFwiKCQwIC0gJDEpICogJDJcIiksdGhpcy5fc3BsaXQuY29ubmVjdCh0aGlzLm1pZCwwLDApLHRoaXMuX3NwbGl0LmNvbm5lY3QodGhpcy5taWQsMSwxKSx0aGlzLl9zcGxpdC5jb25uZWN0KHRoaXMuc2lkZSwwLDApLHRoaXMuX3NwbGl0LmNvbm5lY3QodGhpcy5zaWRlLDEsMSksdGhpcy5jb250ZXh0LmdldENvbnN0YW50KE1hdGguU1FSVDFfMikuY29ubmVjdCh0aGlzLm1pZCwwLDIpLHRoaXMuY29udGV4dC5nZXRDb25zdGFudChNYXRoLlNRUlQxXzIpLmNvbm5lY3QodGhpcy5zaWRlLDAsMil9LHQuZXh0ZW5kKHQuTWlkU2lkZVNwbGl0KSx0Lk1pZFNpZGVTcGxpdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5taWQuZGlzcG9zZSgpLHRoaXMubWlkPW51bGwsdGhpcy5zaWRlLmRpc3Bvc2UoKSx0aGlzLnNpZGU9bnVsbCx0aGlzLl9zcGxpdC5kaXNwb3NlKCksdGhpcy5fc3BsaXQ9bnVsbCx0aGlzfSx0Lk1pZFNpZGVTcGxpdH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTWlkU2lkZU1lcmdlPWZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVJbnNPdXRzKDIsMCksdGhpcy5taWQ9dGhpcy5pbnB1dFswXT1uZXcgdC5HYWluLHRoaXMuX2xlZnQ9bmV3IHQuRXhwcihcIigkMCArICQxKSAqICQyXCIpLHRoaXMuc2lkZT10aGlzLmlucHV0WzFdPW5ldyB0LkdhaW4sdGhpcy5fcmlnaHQ9bmV3IHQuRXhwcihcIigkMCAtICQxKSAqICQyXCIpLHRoaXMuX21lcmdlPXRoaXMub3V0cHV0PW5ldyB0Lk1lcmdlLHRoaXMubWlkLmNvbm5lY3QodGhpcy5fbGVmdCwwLDApLHRoaXMuc2lkZS5jb25uZWN0KHRoaXMuX2xlZnQsMCwxKSx0aGlzLm1pZC5jb25uZWN0KHRoaXMuX3JpZ2h0LDAsMCksdGhpcy5zaWRlLmNvbm5lY3QodGhpcy5fcmlnaHQsMCwxKSx0aGlzLl9sZWZ0LmNvbm5lY3QodGhpcy5fbWVyZ2UsMCwwKSx0aGlzLl9yaWdodC5jb25uZWN0KHRoaXMuX21lcmdlLDAsMSksdGhpcy5jb250ZXh0LmdldENvbnN0YW50KE1hdGguU1FSVDFfMikuY29ubmVjdCh0aGlzLl9sZWZ0LDAsMiksdGhpcy5jb250ZXh0LmdldENvbnN0YW50KE1hdGguU1FSVDFfMikuY29ubmVjdCh0aGlzLl9yaWdodCwwLDIpfSx0LmV4dGVuZCh0Lk1pZFNpZGVNZXJnZSksdC5NaWRTaWRlTWVyZ2UucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMubWlkLmRpc3Bvc2UoKSx0aGlzLm1pZD1udWxsLHRoaXMuc2lkZS5kaXNwb3NlKCksdGhpcy5zaWRlPW51bGwsdGhpcy5fbGVmdC5kaXNwb3NlKCksdGhpcy5fbGVmdD1udWxsLHRoaXMuX3JpZ2h0LmRpc3Bvc2UoKSx0aGlzLl9yaWdodD1udWxsLHRoaXMuX21lcmdlLmRpc3Bvc2UoKSx0aGlzLl9tZXJnZT1udWxsLHRoaXN9LHQuTWlkU2lkZU1lcmdlfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5NaWRTaWRlQ29tcHJlc3Nvcj1mdW5jdGlvbihlKXtlPXRoaXMuZGVmYXVsdEFyZyhlLHQuTWlkU2lkZUNvbXByZXNzb3IuZGVmYXVsdHMpLHRoaXMuX21pZFNpZGVTcGxpdD10aGlzLmlucHV0PW5ldyB0Lk1pZFNpZGVTcGxpdCx0aGlzLl9taWRTaWRlTWVyZ2U9dGhpcy5vdXRwdXQ9bmV3IHQuTWlkU2lkZU1lcmdlLHRoaXMubWlkPW5ldyB0LkNvbXByZXNzb3IoZS5taWQpLHRoaXMuc2lkZT1uZXcgdC5Db21wcmVzc29yKGUuc2lkZSksdGhpcy5fbWlkU2lkZVNwbGl0Lm1pZC5jaGFpbih0aGlzLm1pZCx0aGlzLl9taWRTaWRlTWVyZ2UubWlkKSx0aGlzLl9taWRTaWRlU3BsaXQuc2lkZS5jaGFpbih0aGlzLnNpZGUsdGhpcy5fbWlkU2lkZU1lcmdlLnNpZGUpLHRoaXMuX3JlYWRPbmx5KFtcIm1pZFwiLFwic2lkZVwiXSl9LHQuZXh0ZW5kKHQuTWlkU2lkZUNvbXByZXNzb3IpLHQuTWlkU2lkZUNvbXByZXNzb3IuZGVmYXVsdHM9e21pZDp7cmF0aW86Myx0aHJlc2hvbGQ6LTI0LHJlbGVhc2U6LjAzLGF0dGFjazouMDIsa25lZToxNn0sc2lkZTp7cmF0aW86Nix0aHJlc2hvbGQ6LTMwLHJlbGVhc2U6LjI1LGF0dGFjazouMDMsa25lZToxMH19LHQuTWlkU2lkZUNvbXByZXNzb3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcIm1pZFwiLFwic2lkZVwiXSksdGhpcy5taWQuZGlzcG9zZSgpLHRoaXMubWlkPW51bGwsdGhpcy5zaWRlLmRpc3Bvc2UoKSx0aGlzLnNpZGU9bnVsbCx0aGlzLl9taWRTaWRlU3BsaXQuZGlzcG9zZSgpLHRoaXMuX21pZFNpZGVTcGxpdD1udWxsLHRoaXMuX21pZFNpZGVNZXJnZS5kaXNwb3NlKCksdGhpcy5fbWlkU2lkZU1lcmdlPW51bGwsdGhpc30sdC5NaWRTaWRlQ29tcHJlc3Nvcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTW9ubz1mdW5jdGlvbigpe3RoaXMuY3JlYXRlSW5zT3V0cygxLDApLHRoaXMuX21lcmdlPXRoaXMub3V0cHV0PW5ldyB0Lk1lcmdlLHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLl9tZXJnZSwwLDApLHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLl9tZXJnZSwwLDEpLHRoaXMuaW5wdXQuZ2Fpbi52YWx1ZT10aGlzLmRiVG9HYWluKC0xMCl9LHQuZXh0ZW5kKHQuTW9ubyksdC5Nb25vLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9tZXJnZS5kaXNwb3NlKCksdGhpcy5fbWVyZ2U9bnVsbCx0aGlzfSx0Lk1vbm99KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lk11bHRpYmFuZENvbXByZXNzb3I9ZnVuY3Rpb24oZSl7ZT10aGlzLmRlZmF1bHRBcmcoYXJndW1lbnRzLHQuTXVsdGliYW5kQ29tcHJlc3Nvci5kZWZhdWx0cyksdGhpcy5fc3BsaXR0ZXI9dGhpcy5pbnB1dD1uZXcgdC5NdWx0aWJhbmRTcGxpdCh7bG93RnJlcXVlbmN5OmUubG93RnJlcXVlbmN5LGhpZ2hGcmVxdWVuY3k6ZS5oaWdoRnJlcXVlbmN5fSksdGhpcy5sb3dGcmVxdWVuY3k9dGhpcy5fc3BsaXR0ZXIubG93RnJlcXVlbmN5LHRoaXMuaGlnaEZyZXF1ZW5jeT10aGlzLl9zcGxpdHRlci5oaWdoRnJlcXVlbmN5LHRoaXMub3V0cHV0PW5ldyB0LkdhaW4sdGhpcy5sb3c9bmV3IHQuQ29tcHJlc3NvcihlLmxvdyksdGhpcy5taWQ9bmV3IHQuQ29tcHJlc3NvcihlLm1pZCksdGhpcy5oaWdoPW5ldyB0LkNvbXByZXNzb3IoZS5oaWdoKSx0aGlzLl9zcGxpdHRlci5sb3cuY2hhaW4odGhpcy5sb3csdGhpcy5vdXRwdXQpLHRoaXMuX3NwbGl0dGVyLm1pZC5jaGFpbih0aGlzLm1pZCx0aGlzLm91dHB1dCksdGhpcy5fc3BsaXR0ZXIuaGlnaC5jaGFpbih0aGlzLmhpZ2gsdGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcImhpZ2hcIixcIm1pZFwiLFwibG93XCIsXCJoaWdoRnJlcXVlbmN5XCIsXCJsb3dGcmVxdWVuY3lcIl0pfSx0LmV4dGVuZCh0Lk11bHRpYmFuZENvbXByZXNzb3IpLHQuTXVsdGliYW5kQ29tcHJlc3Nvci5kZWZhdWx0cz17bG93OnQuQ29tcHJlc3Nvci5kZWZhdWx0cyxtaWQ6dC5Db21wcmVzc29yLmRlZmF1bHRzLGhpZ2g6dC5Db21wcmVzc29yLmRlZmF1bHRzLGxvd0ZyZXF1ZW5jeToyNTAsaGlnaEZyZXF1ZW5jeToyZTN9LHQuTXVsdGliYW5kQ29tcHJlc3Nvci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc3BsaXR0ZXIuZGlzcG9zZSgpLHRoaXMuX3dyaXRhYmxlKFtcImhpZ2hcIixcIm1pZFwiLFwibG93XCIsXCJoaWdoRnJlcXVlbmN5XCIsXCJsb3dGcmVxdWVuY3lcIl0pLHRoaXMubG93LmRpc3Bvc2UoKSx0aGlzLm1pZC5kaXNwb3NlKCksdGhpcy5oaWdoLmRpc3Bvc2UoKSx0aGlzLl9zcGxpdHRlcj1udWxsLHRoaXMubG93PW51bGwsdGhpcy5taWQ9bnVsbCx0aGlzLmhpZ2g9bnVsbCx0aGlzLmxvd0ZyZXF1ZW5jeT1udWxsLHRoaXMuaGlnaEZyZXF1ZW5jeT1udWxsLHRoaXN9LHQuTXVsdGliYW5kQ29tcHJlc3Nvcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuUGFubmVyPWZ1bmN0aW9uKGUpe3RoaXMuX2hhc1N0ZXJlb1Bhbm5lcj8odGhpcy5fcGFubmVyPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZVN0ZXJlb1Bhbm5lcigpLHRoaXMucGFuPXRoaXMuX3Bhbm5lci5wYW4pOih0aGlzLl9jcm9zc0ZhZGU9bmV3IHQuQ3Jvc3NGYWRlLHRoaXMuX21lcmdlcj10aGlzLm91dHB1dD1uZXcgdC5NZXJnZSx0aGlzLl9zcGxpdHRlcj10aGlzLmlucHV0PW5ldyB0LlNwbGl0LHRoaXMucGFuPW5ldyB0LlNpZ25hbCgwLHQuVHlwZS5BdWRpb1JhbmdlKSx0aGlzLl96ZXJvPW5ldyB0Llplcm8sdGhpcy5fYTJnPW5ldyB0LkF1ZGlvVG9HYWluLHRoaXMuX3plcm8uY29ubmVjdCh0aGlzLl9hMmcpLHRoaXMucGFuLmNoYWluKHRoaXMuX2EyZyx0aGlzLl9jcm9zc0ZhZGUuZmFkZSksdGhpcy5fc3BsaXR0ZXIuY29ubmVjdCh0aGlzLl9jcm9zc0ZhZGUsMCwwKSx0aGlzLl9zcGxpdHRlci5jb25uZWN0KHRoaXMuX2Nyb3NzRmFkZSwxLDEpLHRoaXMuX2Nyb3NzRmFkZS5hLmNvbm5lY3QodGhpcy5fbWVyZ2VyLDAsMCksdGhpcy5fY3Jvc3NGYWRlLmIuY29ubmVjdCh0aGlzLl9tZXJnZXIsMCwxKSksdGhpcy5wYW4udmFsdWU9dGhpcy5kZWZhdWx0QXJnKGUsMCksdGhpcy5fcmVhZE9ubHkoXCJwYW5cIil9LHQuZXh0ZW5kKHQuUGFubmVyKSx0LlBhbm5lci5wcm90b3R5cGUuX2hhc1N0ZXJlb1Bhbm5lcj10LnByb3RvdHlwZS5pc0Z1bmN0aW9uKHQuY29udGV4dC5jcmVhdGVTdGVyZW9QYW5uZXIpLHQuUGFubmVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShcInBhblwiKSx0aGlzLl9oYXNTdGVyZW9QYW5uZXI/KHRoaXMuX3Bhbm5lci5kaXNjb25uZWN0KCksdGhpcy5fcGFubmVyPW51bGwsdGhpcy5wYW49bnVsbCk6KHRoaXMuX3plcm8uZGlzcG9zZSgpLHRoaXMuX3plcm89bnVsbCx0aGlzLl9jcm9zc0ZhZGUuZGlzcG9zZSgpLHRoaXMuX2Nyb3NzRmFkZT1udWxsLHRoaXMuX3NwbGl0dGVyLmRpc3Bvc2UoKSx0aGlzLl9zcGxpdHRlcj1udWxsLHRoaXMuX21lcmdlci5kaXNwb3NlKCksdGhpcy5fbWVyZ2VyPW51bGwsdGhpcy5wYW4uZGlzcG9zZSgpLHRoaXMucGFuPW51bGwsdGhpcy5fYTJnLmRpc3Bvc2UoKSx0aGlzLl9hMmc9bnVsbCksdGhpc30sdC5QYW5uZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlBhbm5lcjNEPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJwb3NpdGlvblhcIixcInBvc2l0aW9uWVwiLFwicG9zaXRpb25aXCJdLHQuUGFubmVyM0QuZGVmYXVsdHMpO3RoaXMuX3Bhbm5lcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVQYW5uZXIoKSx0aGlzLl9wYW5uZXIucGFubmluZ01vZGVsPWUucGFubmluZ01vZGVsLHRoaXMuX3Bhbm5lci5tYXhEaXN0YW5jZT1lLm1heERpc3RhbmNlLHRoaXMuX3Bhbm5lci5kaXN0YW5jZU1vZGVsPWUuZGlzdGFuY2VNb2RlbCx0aGlzLl9wYW5uZXIuY29uZU91dGVyR2Fpbj1lLmNvbmVPdXRlckdhaW4sdGhpcy5fcGFubmVyLmNvbmVPdXRlckFuZ2xlPWUuY29uZU91dGVyQW5nbGUsdGhpcy5fcGFubmVyLmNvbmVJbm5lckFuZ2xlPWUuY29uZUlubmVyQW5nbGUsdGhpcy5fcGFubmVyLnJlZkRpc3RhbmNlPWUucmVmRGlzdGFuY2UsdGhpcy5fcGFubmVyLnJvbGxvZmZGYWN0b3I9ZS5yb2xsb2ZmRmFjdG9yLHRoaXMuX29yaWVudGF0aW9uPVtlLm9yaWVudGF0aW9uWCxlLm9yaWVudGF0aW9uWSxlLm9yaWVudGF0aW9uWl0sdGhpcy5fcG9zaXRpb249W2UucG9zaXRpb25YLGUucG9zaXRpb25ZLGUucG9zaXRpb25aXSx0aGlzLm9yaWVudGF0aW9uWD1lLm9yaWVudGF0aW9uWCx0aGlzLm9yaWVudGF0aW9uWT1lLm9yaWVudGF0aW9uWSx0aGlzLm9yaWVudGF0aW9uWj1lLm9yaWVudGF0aW9uWix0aGlzLnBvc2l0aW9uWD1lLnBvc2l0aW9uWCx0aGlzLnBvc2l0aW9uWT1lLnBvc2l0aW9uWSx0aGlzLnBvc2l0aW9uWj1lLnBvc2l0aW9uWn0sdC5leHRlbmQodC5QYW5uZXIzRCksdC5QYW5uZXIzRC5kZWZhdWx0cz17cG9zaXRpb25YOjAscG9zaXRpb25ZOjAscG9zaXRpb25aOjAsb3JpZW50YXRpb25YOjAsb3JpZW50YXRpb25ZOjAsb3JpZW50YXRpb25aOjAscGFubmluZ01vZGVsOlwiZXF1YWxwb3dlclwiLG1heERpc3RhbmNlOjFlNCxkaXN0YW5jZU1vZGVsOlwiaW52ZXJzZVwiLGNvbmVPdXRlckdhaW46MCxjb25lT3V0ZXJBbmdsZTozNjAsY29uZUlubmVyQW5nbGU6MzYwLHJlZkRpc3RhbmNlOjEscm9sbG9mZkZhY3RvcjoxfSx0LlBhbm5lcjNELnByb3RvdHlwZS5fcmFtcFRpbWVDb25zdGFudD0uMDEsdC5QYW5uZXIzRC5wcm90b3R5cGUuc2V0UG9zaXRpb249ZnVuY3Rpb24odCxlLGkpe2lmKHRoaXMuX3Bhbm5lci5wb3NpdGlvblgpe3ZhciBuPXRoaXMubm93KCk7dGhpcy5fcGFubmVyLnBvc2l0aW9uWC5zZXRUYXJnZXRBdFRpbWUodCxuLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpLHRoaXMuX3Bhbm5lci5wb3NpdGlvblkuc2V0VGFyZ2V0QXRUaW1lKGUsbix0aGlzLl9yYW1wVGltZUNvbnN0YW50KSx0aGlzLl9wYW5uZXIucG9zaXRpb25aLnNldFRhcmdldEF0VGltZShpLG4sdGhpcy5fcmFtcFRpbWVDb25zdGFudCl9ZWxzZSB0aGlzLl9wYW5uZXIuc2V0UG9zaXRpb24odCxlLGkpO3JldHVybiB0aGlzLl9wb3NpdGlvbj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLHRoaXN9LHQuUGFubmVyM0QucHJvdG90eXBlLnNldE9yaWVudGF0aW9uPWZ1bmN0aW9uKHQsZSxpKXtpZih0aGlzLl9wYW5uZXIub3JpZW50YXRpb25YKXt2YXIgbj10aGlzLm5vdygpO3RoaXMuX3Bhbm5lci5vcmllbnRhdGlvblguc2V0VGFyZ2V0QXRUaW1lKHQsbix0aGlzLl9yYW1wVGltZUNvbnN0YW50KSx0aGlzLl9wYW5uZXIub3JpZW50YXRpb25ZLnNldFRhcmdldEF0VGltZShlLG4sdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5fcGFubmVyLm9yaWVudGF0aW9uWi5zZXRUYXJnZXRBdFRpbWUoaSxuLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpfWVsc2UgdGhpcy5fcGFubmVyLnNldE9yaWVudGF0aW9uKHQsZSxpKTtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb249QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYW5uZXIzRC5wcm90b3R5cGUsXCJwb3NpdGlvblhcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Bvc2l0aW9uWzBdPXQsdGhpcy5zZXRQb3NpdGlvbi5hcHBseSh0aGlzLHRoaXMuX3Bvc2l0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvc2l0aW9uWzBdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhbm5lcjNELnByb3RvdHlwZSxcInBvc2l0aW9uWVwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcG9zaXRpb25bMV09dCx0aGlzLnNldFBvc2l0aW9uLmFwcGx5KHRoaXMsdGhpcy5fcG9zaXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zaXRpb25bMV19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFubmVyM0QucHJvdG90eXBlLFwicG9zaXRpb25aXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9wb3NpdGlvblsyXT10LHRoaXMuc2V0UG9zaXRpb24uYXBwbHkodGhpcyx0aGlzLl9wb3NpdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvblsyXX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYW5uZXIzRC5wcm90b3R5cGUsXCJvcmllbnRhdGlvblhcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29yaWVudGF0aW9uWzBdPXQsdGhpcy5zZXRPcmllbnRhdGlvbi5hcHBseSh0aGlzLHRoaXMuX29yaWVudGF0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uWzBdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhbm5lcjNELnByb3RvdHlwZSxcIm9yaWVudGF0aW9uWVwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZW50YXRpb25bMV09dCx0aGlzLnNldE9yaWVudGF0aW9uLmFwcGx5KHRoaXMsdGhpcy5fb3JpZW50YXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb25bMV19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFubmVyM0QucHJvdG90eXBlLFwib3JpZW50YXRpb25aXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9vcmllbnRhdGlvblsyXT10LHRoaXMuc2V0T3JpZW50YXRpb24uYXBwbHkodGhpcyx0aGlzLl9vcmllbnRhdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvblsyXX19KSx0LlBhbm5lcjNELl9hbGlhc1Byb3BlcnR5PWZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhbm5lcjNELnByb3RvdHlwZSxlLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFubmVyW2VdPXR9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYW5uZXJbZV19fSl9LHQuUGFubmVyM0QuX2FsaWFzUHJvcGVydHkoXCJwYW5uaW5nTW9kZWxcIiksdC5QYW5uZXIzRC5fYWxpYXNQcm9wZXJ0eShcInJlZkRpc3RhbmNlXCIpLHQuUGFubmVyM0QuX2FsaWFzUHJvcGVydHkoXCJyb2xsb2ZmRmFjdG9yXCIpLHQuUGFubmVyM0QuX2FsaWFzUHJvcGVydHkoXCJkaXN0YW5jZU1vZGVsXCIpLHQuUGFubmVyM0QuX2FsaWFzUHJvcGVydHkoXCJjb25lSW5uZXJBbmdsZVwiKSx0LlBhbm5lcjNELl9hbGlhc1Byb3BlcnR5KFwiY29uZU91dGVyQW5nbGVcIiksdC5QYW5uZXIzRC5fYWxpYXNQcm9wZXJ0eShcImNvbmVPdXRlckdhaW5cIiksdC5QYW5uZXIzRC5fYWxpYXNQcm9wZXJ0eShcIm1heERpc3RhbmNlXCIpLHQuUGFubmVyM0QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFubmVyLmRpc2Nvbm5lY3QoKSx0aGlzLl9wYW5uZXI9bnVsbCx0aGlzLl9vcmllbnRhdGlvbj1udWxsLHRoaXMuX3Bvc2l0aW9uPW51bGwsdGhpc30sdC5QYW5uZXIzRH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuUGFuVm9sPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJwYW5cIixcInZvbHVtZVwiXSx0LlBhblZvbC5kZWZhdWx0cyk7dGhpcy5fcGFubmVyPXRoaXMuaW5wdXQ9bmV3IHQuUGFubmVyKGUucGFuKSx0aGlzLnBhbj10aGlzLl9wYW5uZXIucGFuLHRoaXMuX3ZvbHVtZT10aGlzLm91dHB1dD1uZXcgdC5Wb2x1bWUoZS52b2x1bWUpLHRoaXMudm9sdW1lPXRoaXMuX3ZvbHVtZS52b2x1bWUsdGhpcy5fcGFubmVyLmNvbm5lY3QodGhpcy5fdm9sdW1lKSx0aGlzLl9yZWFkT25seShbXCJwYW5cIixcInZvbHVtZVwiXSl9LHQuZXh0ZW5kKHQuUGFuVm9sKSx0LlBhblZvbC5kZWZhdWx0cz17cGFuOi41LHZvbHVtZTowfSx0LlBhblZvbC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wicGFuXCIsXCJ2b2x1bWVcIl0pLHRoaXMuX3Bhbm5lci5kaXNwb3NlKCksdGhpcy5fcGFubmVyPW51bGwsdGhpcy5wYW49bnVsbCx0aGlzLl92b2x1bWUuZGlzcG9zZSgpLHRoaXMuX3ZvbHVtZT1udWxsLHRoaXMudm9sdW1lPW51bGwsdGhpc30sdC5QYW5Wb2x9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkN0cmxJbnRlcnBvbGF0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1widmFsdWVzXCIsXCJpbmRleFwiXSx0LkN0cmxJbnRlcnBvbGF0ZS5kZWZhdWx0cyk7dGhpcy52YWx1ZXM9ZS52YWx1ZXMsdGhpcy5pbmRleD1lLmluZGV4fSx0LmV4dGVuZCh0LkN0cmxJbnRlcnBvbGF0ZSksdC5DdHJsSW50ZXJwb2xhdGUuZGVmYXVsdHM9e2luZGV4OjAsdmFsdWVzOltdfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DdHJsSW50ZXJwb2xhdGUucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbmRleDt0PU1hdGgubWluKHQsdGhpcy52YWx1ZXMubGVuZ3RoLTEpO3ZhciBlPU1hdGguZmxvb3IodCksaT10aGlzLnZhbHVlc1tlXSxuPXRoaXMudmFsdWVzW01hdGguY2VpbCh0KV07cmV0dXJuIHRoaXMuX2ludGVycG9sYXRlKHQtZSxpLG4pfX0pLHQuQ3RybEludGVycG9sYXRlLnByb3RvdHlwZS5faW50ZXJwb2xhdGU9ZnVuY3Rpb24odCxlLGkpe2lmKHRoaXMuaXNBcnJheShlKSl7Zm9yKHZhciBuPVtdLHM9MDtzPGUubGVuZ3RoO3MrKyluW3NdPXRoaXMuX2ludGVycG9sYXRlKHQsZVtzXSxpW3NdKTtyZXR1cm4gbn1pZih0aGlzLmlzT2JqZWN0KGUpKXt2YXIgbz17fTtmb3IodmFyIHIgaW4gZSlvW3JdPXRoaXMuX2ludGVycG9sYXRlKHQsZVtyXSxpW3JdKTtyZXR1cm4gb31yZXR1cm4gZT10aGlzLl90b051bWJlcihlKSxpPXRoaXMuX3RvTnVtYmVyKGkpLCgxLXQpKmUrdCppfSx0LkN0cmxJbnRlcnBvbGF0ZS5wcm90b3R5cGUuX3RvTnVtYmVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlzTnVtYmVyKHQpP3Q6dGhpcy50b1NlY29uZHModCl9LHQuQ3RybEludGVycG9sYXRlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy52YWx1ZXM9bnVsbH0sdC5DdHJsSW50ZXJwb2xhdGV9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkN0cmxNYXJrb3Y9ZnVuY3Rpb24odCxlKXt0aGlzLnZhbHVlcz10aGlzLmRlZmF1bHRBcmcodCx7fSksdGhpcy52YWx1ZT10aGlzLmRlZmF1bHRBcmcoZSxPYmplY3Qua2V5cyh0aGlzLnZhbHVlcylbMF0pfSx0LmV4dGVuZCh0LkN0cmxNYXJrb3YpLHQuQ3RybE1hcmtvdi5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMudmFsdWVzLmhhc093blByb3BlcnR5KHRoaXMudmFsdWUpKXt2YXIgdD10aGlzLnZhbHVlc1t0aGlzLnZhbHVlXTtpZih0aGlzLmlzQXJyYXkodCkpZm9yKHZhciBlPXRoaXMuX2dldFByb2JEaXN0cmlidXRpb24odCksaT1NYXRoLnJhbmRvbSgpLG49MCxzPTA7czxlLmxlbmd0aDtzKyspe3ZhciBvPWVbc107aWYoaT5uJiZpPG4rbyl7dmFyIHI9dFtzXTt0aGlzLmlzT2JqZWN0KHIpP3RoaXMudmFsdWU9ci52YWx1ZTp0aGlzLnZhbHVlPXJ9bis9b31lbHNlIHRoaXMudmFsdWU9dH1yZXR1cm4gdGhpcy52YWx1ZX0sdC5DdHJsTWFya292LnByb3RvdHlwZS5fZ2V0UHJvYkRpc3RyaWJ1dGlvbj1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10saT0wLG49ITEscz0wO3M8dC5sZW5ndGg7cysrKXt2YXIgbz10W3NdO3RoaXMuaXNPYmplY3Qobyk/KG49ITAsZVtzXT1vLnByb2JhYmlsaXR5KTplW3NdPTEvdC5sZW5ndGgsaSs9ZVtzXX1pZihuKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWVbcl09ZVtyXS9pO3JldHVybiBlfSx0LkN0cmxNYXJrb3YucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLnZhbHVlcz1udWxsfSx0LkN0cmxNYXJrb3Z9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkN0cmxQYXR0ZXJuPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ2YWx1ZXNcIixcInR5cGVcIl0sdC5DdHJsUGF0dGVybi5kZWZhdWx0cyk7dGhpcy52YWx1ZXM9ZS52YWx1ZXMsdGhpcy5pbmRleD0wLHRoaXMuX3R5cGU9bnVsbCx0aGlzLl9zaHVmZmxlZD1udWxsLHRoaXMuX2RpcmVjdGlvbj1udWxsLHRoaXMudHlwZT1lLnR5cGV9LHQuZXh0ZW5kKHQuQ3RybFBhdHRlcm4pLHQuQ3RybFBhdHRlcm4uVHlwZT17VXA6XCJ1cFwiLERvd246XCJkb3duXCIsVXBEb3duOlwidXBEb3duXCIsRG93blVwOlwiZG93blVwXCIsQWx0ZXJuYXRlVXA6XCJhbHRlcm5hdGVVcFwiLEFsdGVybmF0ZURvd246XCJhbHRlcm5hdGVEb3duXCIsUmFuZG9tOlwicmFuZG9tXCIsUmFuZG9tV2FsazpcInJhbmRvbVdhbGtcIixSYW5kb21PbmNlOlwicmFuZG9tT25jZVwifSx0LkN0cmxQYXR0ZXJuLmRlZmF1bHRzPXt0eXBlOnQuQ3RybFBhdHRlcm4uVHlwZS5VcCx2YWx1ZXM6W119LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkN0cmxQYXR0ZXJuLnByb3RvdHlwZSxcInZhbHVlXCIse2dldDpmdW5jdGlvbigpe2lmKDAhPT10aGlzLnZhbHVlcy5sZW5ndGgpe2lmKDE9PT10aGlzLnZhbHVlcy5sZW5ndGgpcmV0dXJuIHRoaXMudmFsdWVzWzBdO3RoaXMuaW5kZXg9TWF0aC5taW4odGhpcy5pbmRleCx0aGlzLnZhbHVlcy5sZW5ndGgtMSk7dmFyIGU9dGhpcy52YWx1ZXNbdGhpcy5pbmRleF07cmV0dXJuIHRoaXMudHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5SYW5kb21PbmNlJiYodGhpcy52YWx1ZXMubGVuZ3RoIT09dGhpcy5fc2h1ZmZsZWQubGVuZ3RoJiZ0aGlzLl9zaHVmZmxlVmFsdWVzKCksZT10aGlzLnZhbHVlc1t0aGlzLl9zaHVmZmxlZFt0aGlzLmluZGV4XV0pLGV9fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkN0cmxQYXR0ZXJuLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbihlKXt0aGlzLl90eXBlPWUsdGhpcy5fc2h1ZmZsZWQ9bnVsbCx0aGlzLl90eXBlPT09dC5DdHJsUGF0dGVybi5UeXBlLlVwfHx0aGlzLl90eXBlPT09dC5DdHJsUGF0dGVybi5UeXBlLlVwRG93bnx8dGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5SYW5kb21PbmNlfHx0aGlzLl90eXBlPT09dC5DdHJsUGF0dGVybi5UeXBlLkFsdGVybmF0ZVVwP3RoaXMuaW5kZXg9MDp0aGlzLl90eXBlIT09dC5DdHJsUGF0dGVybi5UeXBlLkRvd24mJnRoaXMuX3R5cGUhPT10LkN0cmxQYXR0ZXJuLlR5cGUuRG93blVwJiZ0aGlzLl90eXBlIT09dC5DdHJsUGF0dGVybi5UeXBlLkFsdGVybmF0ZURvd258fCh0aGlzLmluZGV4PXRoaXMudmFsdWVzLmxlbmd0aC0xKSx0aGlzLl90eXBlPT09dC5DdHJsUGF0dGVybi5UeXBlLlVwRG93bnx8dGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5BbHRlcm5hdGVVcD90aGlzLl9kaXJlY3Rpb249dC5DdHJsUGF0dGVybi5UeXBlLlVwOnRoaXMuX3R5cGUhPT10LkN0cmxQYXR0ZXJuLlR5cGUuRG93blVwJiZ0aGlzLl90eXBlIT09dC5DdHJsUGF0dGVybi5UeXBlLkFsdGVybmF0ZURvd258fCh0aGlzLl9kaXJlY3Rpb249dC5DdHJsUGF0dGVybi5UeXBlLkRvd24pLHRoaXMuX3R5cGU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tT25jZT90aGlzLl9zaHVmZmxlVmFsdWVzKCk6dGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uUmFuZG9tJiYodGhpcy5pbmRleD1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqdGhpcy52YWx1ZXMubGVuZ3RoKSl9fSksdC5DdHJsUGF0dGVybi5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3ZhciBlPXRoaXMudHlwZTtyZXR1cm4gZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5VcD8rK3RoaXMuaW5kZXg+PXRoaXMudmFsdWVzLmxlbmd0aCYmKHRoaXMuaW5kZXg9MCk6ZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5Eb3duPy0tdGhpcy5pbmRleDwwJiYodGhpcy5pbmRleD10aGlzLnZhbHVlcy5sZW5ndGgtMSk6ZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5VcERvd258fGU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuRG93blVwPyh0aGlzLl9kaXJlY3Rpb249PT10LkN0cmxQYXR0ZXJuLlR5cGUuVXA/dGhpcy5pbmRleCsrOnRoaXMuaW5kZXgtLSx0aGlzLmluZGV4PDA/KHRoaXMuaW5kZXg9MSx0aGlzLl9kaXJlY3Rpb249dC5DdHJsUGF0dGVybi5UeXBlLlVwKTp0aGlzLmluZGV4Pj10aGlzLnZhbHVlcy5sZW5ndGgmJih0aGlzLmluZGV4PXRoaXMudmFsdWVzLmxlbmd0aC0yLHRoaXMuX2RpcmVjdGlvbj10LkN0cmxQYXR0ZXJuLlR5cGUuRG93bikpOmU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tP3RoaXMuaW5kZXg9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKnRoaXMudmFsdWVzLmxlbmd0aCk6ZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5SYW5kb21XYWxrP01hdGgucmFuZG9tKCk8LjU/KHRoaXMuaW5kZXgtLSx0aGlzLmluZGV4PU1hdGgubWF4KHRoaXMuaW5kZXgsMCkpOih0aGlzLmluZGV4KyssdGhpcy5pbmRleD1NYXRoLm1pbih0aGlzLmluZGV4LHRoaXMudmFsdWVzLmxlbmd0aC0xKSk6ZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5SYW5kb21PbmNlPysrdGhpcy5pbmRleD49dGhpcy52YWx1ZXMubGVuZ3RoJiYodGhpcy5pbmRleD0wLHRoaXMuX3NodWZmbGVWYWx1ZXMoKSk6ZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5BbHRlcm5hdGVVcD8odGhpcy5fZGlyZWN0aW9uPT09dC5DdHJsUGF0dGVybi5UeXBlLlVwPyh0aGlzLmluZGV4Kz0yLHRoaXMuX2RpcmVjdGlvbj10LkN0cmxQYXR0ZXJuLlR5cGUuRG93bik6KHRoaXMuaW5kZXgtPTEsdGhpcy5fZGlyZWN0aW9uPXQuQ3RybFBhdHRlcm4uVHlwZS5VcCksdGhpcy5pbmRleD49dGhpcy52YWx1ZXMubGVuZ3RoJiYodGhpcy5pbmRleD0wLHRoaXMuX2RpcmVjdGlvbj10LkN0cmxQYXR0ZXJuLlR5cGUuVXApKTplPT09dC5DdHJsUGF0dGVybi5UeXBlLkFsdGVybmF0ZURvd24mJih0aGlzLl9kaXJlY3Rpb249PT10LkN0cmxQYXR0ZXJuLlR5cGUuVXA/KHRoaXMuaW5kZXgrPTEsdGhpcy5fZGlyZWN0aW9uPXQuQ3RybFBhdHRlcm4uVHlwZS5Eb3duKToodGhpcy5pbmRleC09Mix0aGlzLl9kaXJlY3Rpb249dC5DdHJsUGF0dGVybi5UeXBlLlVwKSx0aGlzLmluZGV4PDAmJih0aGlzLmluZGV4PXRoaXMudmFsdWVzLmxlbmd0aC0xLHRoaXMuX2RpcmVjdGlvbj10LkN0cmxQYXR0ZXJuLlR5cGUuRG93bikpLHRoaXMudmFsdWV9LHQuQ3RybFBhdHRlcm4ucHJvdG90eXBlLl9zaHVmZmxlVmFsdWVzPWZ1bmN0aW9uKCl7dmFyIHQ9W107dGhpcy5fc2h1ZmZsZWQ9W107Zm9yKHZhciBlPTA7ZTx0aGlzLnZhbHVlcy5sZW5ndGg7ZSsrKXRbZV09ZTtmb3IoO3QubGVuZ3RoPjA7KXt2YXIgaT10LnNwbGljZShNYXRoLmZsb29yKHQubGVuZ3RoKk1hdGgucmFuZG9tKCkpLDEpO3RoaXMuX3NodWZmbGVkLnB1c2goaVswXSl9fSx0LkN0cmxQYXR0ZXJuLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fc2h1ZmZsZWQ9bnVsbCx0aGlzLnZhbHVlcz1udWxsfSx0LkN0cmxQYXR0ZXJufSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5DdHJsUmFuZG9tPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJtaW5cIixcIm1heFwiXSx0LkN0cmxSYW5kb20uZGVmYXVsdHMpO3RoaXMubWluPWUubWluLHRoaXMubWF4PWUubWF4LHRoaXMuaW50ZWdlcj1lLmludGVnZXJ9LHQuZXh0ZW5kKHQuQ3RybFJhbmRvbSksdC5DdHJsUmFuZG9tLmRlZmF1bHRzPXttaW46MCxtYXg6MSxpbnRlZ2VyOiExfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DdHJsUmFuZG9tLnByb3RvdHlwZSxcInZhbHVlXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMudG9TZWNvbmRzKHRoaXMubWluKSxlPXRoaXMudG9TZWNvbmRzKHRoaXMubWF4KSxpPU1hdGgucmFuZG9tKCksbj1pKnQrKDEtaSkqZTtyZXR1cm4gdGhpcy5pbnRlZ2VyJiYobj1NYXRoLmZsb29yKG4pKSxufX0pLHQuQ3RybFJhbmRvbX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHdpbmRvdy5BdWRpb0J1ZmZlciYmIUF1ZGlvQnVmZmVyLnByb3RvdHlwZS5jb3B5VG9DaGFubmVsJiYoQXVkaW9CdWZmZXIucHJvdG90eXBlLmNvcHlUb0NoYW5uZWw9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMuZ2V0Q2hhbm5lbERhdGEoZSk7aT1pfHwwO2Zvcih2YXIgcz0wO3M8bi5sZW5ndGg7cysrKW5bcytpXT10W3NdfSxBdWRpb0J1ZmZlci5wcm90b3R5cGUuY29weUZyb21DaGFubmVsPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLmdldENoYW5uZWxEYXRhKGUpO2k9aXx8MDtmb3IodmFyIHM9MDtzPG4ubGVuZ3RoO3MrKyl0W3NdPW5bcytpXX0pLHQuQnVmZmVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ1cmxcIixcIm9ubG9hZFwiLFwib25lcnJvclwiXSx0LkJ1ZmZlci5kZWZhdWx0cyk7dGhpcy5fYnVmZmVyPW51bGwsdGhpcy5fcmV2ZXJzZWQ9ZS5yZXZlcnNlLHRoaXMuX3hocj1udWxsLGUudXJsIGluc3RhbmNlb2YgQXVkaW9CdWZmZXJ8fGUudXJsIGluc3RhbmNlb2YgdC5CdWZmZXI/KHRoaXMuc2V0KGUudXJsKSxlLm9ubG9hZCYmZS5vbmxvYWQodGhpcykpOnRoaXMuaXNTdHJpbmcoZS51cmwpJiZ0aGlzLmxvYWQoZS51cmwsZS5vbmxvYWQsZS5vbmVycm9yKX0sdC5leHRlbmQodC5CdWZmZXIpLHQuQnVmZmVyLmRlZmF1bHRzPXt1cmw6dm9pZCAwLHJldmVyc2U6ITF9LHQuQnVmZmVyLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiB0LkJ1ZmZlcj90aGlzLl9idWZmZXI9ZS5nZXQoKTp0aGlzLl9idWZmZXI9ZSx0aGlzfSx0LkJ1ZmZlci5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlcn0sdC5CdWZmZXIucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oZSxpLG4pe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihzLG8pe3RoaXMuX3hocj10LkJ1ZmZlci5sb2FkKGUsZnVuY3Rpb24odCl7dGhpcy5feGhyPW51bGwsdGhpcy5zZXQodCkscyh0aGlzKSxpJiZpKHRoaXMpfS5iaW5kKHRoaXMpLGZ1bmN0aW9uKHQpe3RoaXMuX3hocj1udWxsLG8odCksbiYmbih0KX0uYmluZCh0aGlzKSl9LmJpbmQodGhpcykpfSx0LkJ1ZmZlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkVtaXR0ZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9idWZmZXI9bnVsbCx0aGlzLl94aHImJih0LkJ1ZmZlci5fY3VycmVudERvd25sb2Fkcy0tLHRoaXMuX3hoci5hYm9ydCgpLHRoaXMuX3hocj1udWxsKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5CdWZmZXIucHJvdG90eXBlLFwibG9hZGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aD4wfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkJ1ZmZlci5wcm90b3R5cGUsXCJkdXJhdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyP3RoaXMuX2J1ZmZlci5kdXJhdGlvbjowfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkJ1ZmZlci5wcm90b3R5cGUsXCJsZW5ndGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlcj90aGlzLl9idWZmZXIubGVuZ3RoOjB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQnVmZmVyLnByb3RvdHlwZSxcIm51bWJlck9mQ2hhbm5lbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlcj90aGlzLl9idWZmZXIubnVtYmVyT2ZDaGFubmVsczowfX0pLHQuQnVmZmVyLnByb3RvdHlwZS5mcm9tQXJyYXk9ZnVuY3Rpb24odCl7dmFyIGU9dFswXS5sZW5ndGg+MCxpPWU/dC5sZW5ndGg6MSxuPWU/dFswXS5sZW5ndGg6dC5sZW5ndGgscz10aGlzLmNvbnRleHQuY3JlYXRlQnVmZmVyKGksbix0aGlzLmNvbnRleHQuc2FtcGxlUmF0ZSk7ZXx8MSE9PWl8fCh0PVt0XSk7Zm9yKHZhciBvPTA7bzxpO28rKylzLmNvcHlUb0NoYW5uZWwodFtvXSxvKTtyZXR1cm4gdGhpcy5fYnVmZmVyPXMsdGhpc30sdC5CdWZmZXIucHJvdG90eXBlLnRvTW9ubz1mdW5jdGlvbih0KXtpZih0aGlzLmlzTnVtYmVyKHQpKXRoaXMuZnJvbUFycmF5KHRoaXMudG9BcnJheSh0KSk7ZWxzZXtmb3IodmFyIGU9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmxlbmd0aCksaT10aGlzLm51bWJlck9mQ2hhbm5lbHMsbj0wO248aTtuKyspZm9yKHZhciBzPXRoaXMudG9BcnJheShuKSxvPTA7bzxzLmxlbmd0aDtvKyspZVtvXSs9c1tvXTtlPWUubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0L2l9KSx0aGlzLmZyb21BcnJheShlKX1yZXR1cm4gdGhpc30sdC5CdWZmZXIucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24odCl7aWYodGhpcy5pc051bWJlcih0KSlyZXR1cm4gdGhpcy5nZXRDaGFubmVsRGF0YSh0KTtpZigxPT09dGhpcy5udW1iZXJPZkNoYW5uZWxzKXJldHVybiB0aGlzLnRvQXJyYXkoMCk7Zm9yKHZhciBlPVtdLGk9MDtpPHRoaXMubnVtYmVyT2ZDaGFubmVscztpKyspZVtpXT10aGlzLmdldENoYW5uZWxEYXRhKGkpO3JldHVybiBlfSx0LkJ1ZmZlci5wcm90b3R5cGUuZ2V0Q2hhbm5lbERhdGE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2J1ZmZlci5nZXRDaGFubmVsRGF0YSh0KX0sdC5CdWZmZXIucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKGUsaSl7aT10aGlzLmRlZmF1bHRBcmcoaSx0aGlzLmR1cmF0aW9uKTtmb3IodmFyIG49TWF0aC5mbG9vcih0aGlzLmNvbnRleHQuc2FtcGxlUmF0ZSp0aGlzLnRvU2Vjb25kcyhlKSkscz1NYXRoLmZsb29yKHRoaXMuY29udGV4dC5zYW1wbGVSYXRlKnRoaXMudG9TZWNvbmRzKGkpKSxvPVtdLHI9MDtyPHRoaXMubnVtYmVyT2ZDaGFubmVscztyKyspb1tyXT10aGlzLnRvQXJyYXkocikuc2xpY2UobixzKTtyZXR1cm4obmV3IHQuQnVmZmVyKS5mcm9tQXJyYXkobyl9LHQuQnVmZmVyLnByb3RvdHlwZS5fcmV2ZXJzZT1mdW5jdGlvbigpe2lmKHRoaXMubG9hZGVkKWZvcih2YXIgdD0wO3Q8dGhpcy5udW1iZXJPZkNoYW5uZWxzO3QrKylBcnJheS5wcm90b3R5cGUucmV2ZXJzZS5jYWxsKHRoaXMuZ2V0Q2hhbm5lbERhdGEodCkpO3JldHVybiB0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5CdWZmZXIucHJvdG90eXBlLFwicmV2ZXJzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmV2ZXJzZWR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9yZXZlcnNlZCE9PXQmJih0aGlzLl9yZXZlcnNlZD10LHRoaXMuX3JldmVyc2UoKSl9fSksdC5FbWl0dGVyLm1peGluKHQuQnVmZmVyKSx0LkJ1ZmZlci5fZG93bmxvYWRRdWV1ZT1bXSx0LkJ1ZmZlci5fY3VycmVudERvd25sb2Fkcz0wLHQuQnVmZmVyLmJhc2VVcmw9XCJcIix0LkJ1ZmZlci5sb2FkPWZ1bmN0aW9uKGUsaSxuKXtmdW5jdGlvbiBzKGUpe2lmKCFuKXRocm93IG5ldyBFcnJvcihlKTtuKGUpLHQuQnVmZmVyLmVtaXQoXCJlcnJvclwiLGUpfWZ1bmN0aW9uIG8oKXtmb3IodmFyIGU9MCxpPTA7aTx0LkJ1ZmZlci5fZG93bmxvYWRRdWV1ZS5sZW5ndGg7aSsrKWUrPXQuQnVmZmVyLl9kb3dubG9hZFF1ZXVlW2ldLnByb2dyZXNzO3QuQnVmZmVyLmVtaXQoXCJwcm9ncmVzc1wiLGUvdC5CdWZmZXIuX2Rvd25sb2FkUXVldWUubGVuZ3RoKX1pPWl8fHQubm9PcDt2YXIgcj1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuIHIub3BlbihcIkdFVFwiLHQuQnVmZmVyLmJhc2VVcmwrZSwhMCksci5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiLHIucHJvZ3Jlc3M9MCx0LkJ1ZmZlci5fY3VycmVudERvd25sb2FkcysrLHQuQnVmZmVyLl9kb3dubG9hZFF1ZXVlLnB1c2gociksci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKCl7MjAwPT09ci5zdGF0dXM/dC5jb250ZXh0LmRlY29kZUF1ZGlvRGF0YShyLnJlc3BvbnNlLGZ1bmN0aW9uKGUpe3IucHJvZ3Jlc3M9MSxvKCksaShlKSwwPT09LS10LkJ1ZmZlci5fY3VycmVudERvd25sb2FkcyYmKHQuQnVmZmVyLl9kb3dubG9hZFF1ZXVlPVtdLHQuQnVmZmVyLmVtaXQoXCJsb2FkXCIpKX0sZnVuY3Rpb24oKXtzKFwiVG9uZS5CdWZmZXI6IGNvdWxkIG5vdCBkZWNvZGUgYXVkaW8gZGF0YTogXCIrZSl9KTpzKFwiVG9uZS5CdWZmZXI6IGNvdWxkIG5vdCBsb2NhdGUgZmlsZTogXCIrZSl9KSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHMpLHIuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsZnVuY3Rpb24odCl7dC5sZW5ndGhDb21wdXRhYmxlJiYoci5wcm9ncmVzcz10LmxvYWRlZC90LnRvdGFsKi45NSxvKCkpfSksci5zZW5kKCkscn0sdC5CdWZmZXIuY2FuY2VsRG93bmxvYWRzPWZ1bmN0aW9uKCl7cmV0dXJuIHQuQnVmZmVyLl9kb3dubG9hZFF1ZXVlLmZvckVhY2goZnVuY3Rpb24odCl7dC5hYm9ydCgpfSksdC5CdWZmZXIuX2N1cnJlbnREb3dubG9hZHM9MCx0LkJ1ZmZlcn0sdC5CdWZmZXIuc3VwcG9ydHNUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuc3BsaXQoXCIuXCIpO3JldHVybiBlPWVbZS5sZW5ndGgtMV0sXCJcIiE9PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKS5jYW5QbGF5VHlwZShcImF1ZGlvL1wiK2UpfSx0LmxvYWRlZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0LkJ1ZmZlci5vZmYoXCJsb2FkXCIsaSksdC5CdWZmZXIub2ZmKFwiZXJyb3JcIixuKX12YXIgaSxuO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlLHMpe2k9ZnVuY3Rpb24oKXtlKCl9LG49ZnVuY3Rpb24oKXtzKCl9LHQuQnVmZmVyLm9uKFwibG9hZFwiLGkpLHQuQnVmZmVyLm9uKFwiZXJyb3JcIixuKX0pLnRoZW4oZSkuY2F0Y2goZnVuY3Rpb24odCl7dGhyb3cgZSgpLG5ldyBFcnJvcih0KX0pfSx0LkJ1ZmZlcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQnVmZmVycz1mdW5jdGlvbih0LGUsaSl7dGhpcy5fYnVmZmVycz17fSx0aGlzLmJhc2VVcmw9dGhpcy5kZWZhdWx0QXJnKGksXCJcIiksdD10aGlzLl9mbGF0dGVuVXJscyh0KSx0aGlzLl9sb2FkaW5nQ291bnQ9MDtmb3IodmFyIG4gaW4gdCl0aGlzLl9sb2FkaW5nQ291bnQrKyx0aGlzLmFkZChuLHRbbl0sdGhpcy5fYnVmZmVyTG9hZGVkLmJpbmQodGhpcyxlKSl9LHQuZXh0ZW5kKHQuQnVmZmVycyksdC5CdWZmZXJzLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2J1ZmZlcnMuaGFzT3duUHJvcGVydHkodCl9LHQuQnVmZmVycy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuaGFzKHQpKXJldHVybiB0aGlzLl9idWZmZXJzW3RdO3Rocm93IG5ldyBFcnJvcihcIlRvbmUuQnVmZmVyczogbm8gYnVmZmVyIG5hbWVkIFwiK3QpfSx0LkJ1ZmZlcnMucHJvdG90eXBlLl9idWZmZXJMb2FkZWQ9ZnVuY3Rpb24odCl7MD09PS0tdGhpcy5fbG9hZGluZ0NvdW50JiZ0JiZ0KHRoaXMpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5CdWZmZXJzLnByb3RvdHlwZSxcImxvYWRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD0hMDtmb3IodmFyIGUgaW4gdGhpcy5fYnVmZmVycyl7dmFyIGk9dGhpcy5nZXQoZSk7dD10JiZpLmxvYWRlZH1yZXR1cm4gdH19KSx0LkJ1ZmZlcnMucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlLGksbil7cmV0dXJuIG49dGhpcy5kZWZhdWx0QXJnKG4sdC5ub09wKSxpIGluc3RhbmNlb2YgdC5CdWZmZXI/KHRoaXMuX2J1ZmZlcnNbZV09aSxuKHRoaXMpKTppIGluc3RhbmNlb2YgQXVkaW9CdWZmZXI/KHRoaXMuX2J1ZmZlcnNbZV09bmV3IHQuQnVmZmVyKGkpLG4odGhpcykpOnRoaXMuaXNTdHJpbmcoaSkmJih0aGlzLl9idWZmZXJzW2VdPW5ldyB0LkJ1ZmZlcih0aGlzLmJhc2VVcmwraSxuKSksdGhpc30sdC5CdWZmZXJzLnByb3RvdHlwZS5fZmxhdHRlblVybHM9ZnVuY3Rpb24odCl7dmFyIGU9e307Zm9yKHZhciBpIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShpKSlpZih0aGlzLmlzT2JqZWN0KHRbaV0pKXt2YXIgbj10aGlzLl9mbGF0dGVuVXJscyh0W2ldKTtmb3IodmFyIHMgaW4gbiluLmhhc093blByb3BlcnR5KHMpJiYoZVtpK1wiLlwiK3NdPW5bc10pfWVsc2UgZVtpXT10W2ldO3JldHVybiBlfSx0LkJ1ZmZlcnMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5fYnVmZmVycyl0aGlzLl9idWZmZXJzW3RdLmRpc3Bvc2UoKTtyZXR1cm4gdGhpcy5fYnVmZmVycz1udWxsLHRoaXN9LHQuQnVmZmVyc30pLHQoZnVuY3Rpb24odCl7dmFyIGU9e307cmV0dXJuIHQucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oaSxuKXtlLmhhc093blByb3BlcnR5KGkpfHwoZVtpXT10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpKSxuPXRoaXMuZGVmYXVsdEFyZyhuLDApO3ZhciBzPW5ldyB0LkdhaW4obix0LlR5cGUuRGVjaWJlbHMpO3JldHVybiB0aGlzLm91dHB1dC5jaGFpbihzLGVbaV0pLHN9LHQucHJvdG90eXBlLnJlY2VpdmU9ZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5oYXNPd25Qcm9wZXJ0eSh0KXx8KGVbdF09dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSksdGhpcy5pc1VuZGVmKGkpJiYoaT10aGlzLmlucHV0KSxlW3RdLmNvbm5lY3QoaSksdGhpc30sdC5Db250ZXh0Lm9uKFwiaW5pdFwiLGZ1bmN0aW9uKHQpe3QuQnVzZXM/ZT10LkJ1c2VzOihlPXt9LHQuQnVzZXM9ZSl9KSx0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5EcmF3PWZ1bmN0aW9uKCl7dGhpcy5fZXZlbnRzPW5ldyB0LlRpbWVsaW5lLHRoaXMuZXhwaXJhdGlvbj0uMjUsdGhpcy5hbnRpY2lwYXRpb249LjAwOCx0aGlzLl9ib3VuZERyYXdMb29wPXRoaXMuX2RyYXdMb29wLmJpbmQodGhpcyl9LHQuZXh0ZW5kKHQuRHJhdyksdC5EcmF3LnByb3RvdHlwZS5zY2hlZHVsZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9ldmVudHMuYWRkKHtjYWxsYmFjazp0LHRpbWU6dGhpcy50b1NlY29uZHMoZSl9KSwxPT09dGhpcy5fZXZlbnRzLmxlbmd0aCYmcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2JvdW5kRHJhd0xvb3ApLHRoaXN9LHQuRHJhdy5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ldmVudHMuY2FuY2VsKHRoaXMudG9TZWNvbmRzKHQpKSx0aGlzfSx0LkRyYXcucHJvdG90eXBlLl9kcmF3TG9vcD1mdW5jdGlvbigpe2Zvcih2YXIgZT10Lm5vdygpO3RoaXMuX2V2ZW50cy5sZW5ndGgmJnRoaXMuX2V2ZW50cy5wZWVrKCkudGltZS10aGlzLmFudGljaXBhdGlvbjw9ZTspe3ZhciBpPXRoaXMuX2V2ZW50cy5zaGlmdCgpO2UtaS50aW1lPD10aGlzLmV4cGlyYXRpb24mJmkuY2FsbGJhY2soKX10aGlzLl9ldmVudHMubGVuZ3RoPjAmJnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9ib3VuZERyYXdMb29wKX0sdC5EcmF3PW5ldyB0LkRyYXcsdC5EcmF3fSksdChmdW5jdGlvbih0KXt0Lkxpc3RlbmVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJwb3NpdGlvblhcIixcInBvc2l0aW9uWVwiLFwicG9zaXRpb25aXCJdLGUuZGVmYXVsdHMpO3RoaXMuX29yaWVudGF0aW9uPVt0LmZvcndhcmRYLHQuZm9yd2FyZFksdC5mb3J3YXJkWix0LnVwWCx0LnVwWSx0LnVwWl0sdGhpcy5fcG9zaXRpb249W3QucG9zaXRpb25YLHQucG9zaXRpb25ZLHQucG9zaXRpb25aXSx0aGlzLmZvcndhcmRYPXQuZm9yd2FyZFgsdGhpcy5mb3J3YXJkWT10LmZvcndhcmRZLHRoaXMuZm9yd2FyZFo9dC5mb3J3YXJkWix0aGlzLnVwWD10LnVwWCx0aGlzLnVwWT10LnVwWSx0aGlzLnVwWj10LnVwWix0aGlzLnBvc2l0aW9uWD10LnBvc2l0aW9uWCx0aGlzLnBvc2l0aW9uWT10LnBvc2l0aW9uWSx0aGlzLnBvc2l0aW9uWj10LnBvc2l0aW9uWn0sdC5leHRlbmQodC5MaXN0ZW5lciksdC5MaXN0ZW5lci5kZWZhdWx0cz17cG9zaXRpb25YOjAscG9zaXRpb25ZOjAscG9zaXRpb25aOjAsZm9yd2FyZFg6MCxmb3J3YXJkWTowLGZvcndhcmRaOjEsdXBYOjAsdXBZOjEsdXBaOjB9LHQuTGlzdGVuZXIucHJvdG90eXBlLl9yYW1wVGltZUNvbnN0YW50PS4wMSx0Lkxpc3RlbmVyLnByb3RvdHlwZS5zZXRQb3NpdGlvbj1mdW5jdGlvbih0LGUsaSl7aWYodGhpcy5jb250ZXh0Lmxpc3RlbmVyLnBvc2l0aW9uWCl7dmFyIG49dGhpcy5ub3coKTt0aGlzLmNvbnRleHQubGlzdGVuZXIucG9zaXRpb25YLnNldFRhcmdldEF0VGltZSh0LG4sdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5jb250ZXh0Lmxpc3RlbmVyLnBvc2l0aW9uWS5zZXRUYXJnZXRBdFRpbWUoZSxuLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpLHRoaXMuY29udGV4dC5saXN0ZW5lci5wb3NpdGlvblouc2V0VGFyZ2V0QXRUaW1lKGksbix0aGlzLl9yYW1wVGltZUNvbnN0YW50KX1lbHNlIHRoaXMuY29udGV4dC5saXN0ZW5lci5zZXRQb3NpdGlvbih0LGUsaSk7cmV0dXJuIHRoaXMuX3Bvc2l0aW9uPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksdGhpc30sdC5MaXN0ZW5lci5wcm90b3R5cGUuc2V0T3JpZW50YXRpb249ZnVuY3Rpb24odCxlLGksbixzLG8pe2lmKHRoaXMuY29udGV4dC5saXN0ZW5lci5mb3J3YXJkWCl7dmFyIHI9dGhpcy5ub3coKTt0aGlzLmNvbnRleHQubGlzdGVuZXIuZm9yd2FyZFguc2V0VGFyZ2V0QXRUaW1lKHQscix0aGlzLl9yYW1wVGltZUNvbnN0YW50KSx0aGlzLmNvbnRleHQubGlzdGVuZXIuZm9yd2FyZFkuc2V0VGFyZ2V0QXRUaW1lKGUscix0aGlzLl9yYW1wVGltZUNvbnN0YW50KSx0aGlzLmNvbnRleHQubGlzdGVuZXIuZm9yd2FyZFouc2V0VGFyZ2V0QXRUaW1lKGkscix0aGlzLl9yYW1wVGltZUNvbnN0YW50KSx0aGlzLmNvbnRleHQubGlzdGVuZXIudXBYLnNldFRhcmdldEF0VGltZShuLHIsdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5jb250ZXh0Lmxpc3RlbmVyLnVwWS5zZXRUYXJnZXRBdFRpbWUocyxyLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpLHRoaXMuY29udGV4dC5saXN0ZW5lci51cFouc2V0VGFyZ2V0QXRUaW1lKG8scix0aGlzLl9yYW1wVGltZUNvbnN0YW50KX1lbHNlIHRoaXMuY29udGV4dC5saXN0ZW5lci5zZXRPcmllbnRhdGlvbih0LGUsaSxuLHMsbyk7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTGlzdGVuZXIucHJvdG90eXBlLFwicG9zaXRpb25YXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9wb3NpdGlvblswXT10LHRoaXMuc2V0UG9zaXRpb24uYXBwbHkodGhpcyx0aGlzLl9wb3NpdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvblswXX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5MaXN0ZW5lci5wcm90b3R5cGUsXCJwb3NpdGlvbllcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Bvc2l0aW9uWzFdPXQsdGhpcy5zZXRQb3NpdGlvbi5hcHBseSh0aGlzLHRoaXMuX3Bvc2l0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvc2l0aW9uWzFdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxpc3RlbmVyLnByb3RvdHlwZSxcInBvc2l0aW9uWlwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcG9zaXRpb25bMl09dCx0aGlzLnNldFBvc2l0aW9uLmFwcGx5KHRoaXMsdGhpcy5fcG9zaXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zaXRpb25bMl19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTGlzdGVuZXIucHJvdG90eXBlLFwiZm9yd2FyZFhcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29yaWVudGF0aW9uWzBdPXQsdGhpcy5zZXRPcmllbnRhdGlvbi5hcHBseSh0aGlzLHRoaXMuX29yaWVudGF0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uWzBdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxpc3RlbmVyLnByb3RvdHlwZSxcImZvcndhcmRZXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9vcmllbnRhdGlvblsxXT10LHRoaXMuc2V0T3JpZW50YXRpb24uYXBwbHkodGhpcyx0aGlzLl9vcmllbnRhdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvblsxXX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5MaXN0ZW5lci5wcm90b3R5cGUsXCJmb3J3YXJkWlwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZW50YXRpb25bMl09dCx0aGlzLnNldE9yaWVudGF0aW9uLmFwcGx5KHRoaXMsdGhpcy5fb3JpZW50YXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb25bMl19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTGlzdGVuZXIucHJvdG90eXBlLFwidXBYXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9vcmllbnRhdGlvblszXT10LHRoaXMuc2V0T3JpZW50YXRpb24uYXBwbHkodGhpcyx0aGlzLl9vcmllbnRhdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvblszXX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5MaXN0ZW5lci5wcm90b3R5cGUsXCJ1cFlcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29yaWVudGF0aW9uWzRdPXQsdGhpcy5zZXRPcmllbnRhdGlvbi5hcHBseSh0aGlzLHRoaXMuX29yaWVudGF0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uWzRdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxpc3RlbmVyLnByb3RvdHlwZSxcInVwWlwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZW50YXRpb25bNV09dCx0aGlzLnNldE9yaWVudGF0aW9uLmFwcGx5KHRoaXMsdGhpcy5fb3JpZW50YXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb25bNV19fSksdC5MaXN0ZW5lci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvbj1udWxsLHRoaXMuX3Bvc2l0aW9uPW51bGwsdGhpc307dmFyIGU9dC5MaXN0ZW5lcjtyZXR1cm4gdC5MaXN0ZW5lcj1uZXcgZSx0LkNvbnRleHQub24oXCJpbml0XCIsZnVuY3Rpb24oaSl7aS5MaXN0ZW5lciBpbnN0YW5jZW9mIGU/dC5MaXN0ZW5lcj1pLkxpc3RlbmVyOnQuTGlzdGVuZXI9bmV3IGUsaS5MaXN0ZW5lcj10Lkxpc3RlbmVyfSksdC5MaXN0ZW5lcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIXdpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIk9mZmxpbmVBdWRpb0NvbnRleHRcIikmJndpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIndlYmtpdE9mZmxpbmVBdWRpb0NvbnRleHRcIikmJih3aW5kb3cuT2ZmbGluZUF1ZGlvQ29udGV4dD13aW5kb3cud2Via2l0T2ZmbGluZUF1ZGlvQ29udGV4dCksdC5PZmZsaW5lQ29udGV4dD1mdW5jdGlvbihlLGksbil7dmFyIHM9bmV3IE9mZmxpbmVBdWRpb0NvbnRleHQoZSxpKm4sbik7dC5Db250ZXh0LmNhbGwodGhpcyxzKSx0aGlzLl9kdXJhdGlvbj1pLHRoaXMuX2N1cnJlbnRUaW1lPTAsdGhpcy5sb29rQWhlYWQ9dGhpcy5ibG9ja1RpbWUsdGhpcy51cGRhdGVJbnRlcnZhbD10aGlzLmJsb2NrVGltZX0sdC5leHRlbmQodC5PZmZsaW5lQ29udGV4dCx0LkNvbnRleHQpLHQuT2ZmbGluZUNvbnRleHQucHJvdG90eXBlLm5vdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50VGltZX0sdC5PZmZsaW5lQ29udGV4dC5wcm90b3R5cGUuX2NyZWF0ZVdvcmtlcj1mdW5jdGlvbigpe3JldHVybntwb3N0TWVzc2FnZTpmdW5jdGlvbigpe319fSx0Lk9mZmxpbmVDb250ZXh0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtmb3IoO3RoaXMuX2R1cmF0aW9uLXRoaXMuX2N1cnJlbnRUaW1lPj0wOyl0aGlzLmVtaXQoXCJ0aWNrXCIpLHRoaXMuX2N1cnJlbnRUaW1lKz10LnByb3RvdHlwZS5ibG9ja1RpbWU7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe3RoaXMuX2NvbnRleHQub25jb21wbGV0ZT1mdW5jdGlvbihlKXt0KGUucmVuZGVyZWRCdWZmZXIpfSx0aGlzLl9jb250ZXh0LnN0YXJ0UmVuZGVyaW5nKCl9LmJpbmQodGhpcykpfSx0Lk9mZmxpbmVDb250ZXh0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5PZmZsaW5lPWZ1bmN0aW9uKGUsaSl7dmFyIG49dC5jb250ZXh0LnNhbXBsZVJhdGUscz10LmNvbnRleHQsbz1uZXcgdC5PZmZsaW5lQ29udGV4dCgyLGksbik7dC5jb250ZXh0PW8sZSh0LlRyYW5zcG9ydCk7dmFyIHI9by5yZW5kZXIoKTtyZXR1cm4gdC5jb250ZXh0PXMsci50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdC5CdWZmZXIoZSl9KX0sdC5PZmZsaW5lfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5FZmZlY3Q9ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZUluc091dHMoMSwxKTt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcIndldFwiXSx0LkVmZmVjdC5kZWZhdWx0cyk7dGhpcy5fZHJ5V2V0PW5ldyB0LkNyb3NzRmFkZShlLndldCksdGhpcy53ZXQ9dGhpcy5fZHJ5V2V0LmZhZGUsdGhpcy5lZmZlY3RTZW5kPW5ldyB0LkdhaW4sdGhpcy5lZmZlY3RSZXR1cm49bmV3IHQuR2Fpbix0aGlzLmlucHV0LmNvbm5lY3QodGhpcy5fZHJ5V2V0LmEpLHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLmVmZmVjdFNlbmQpLHRoaXMuZWZmZWN0UmV0dXJuLmNvbm5lY3QodGhpcy5fZHJ5V2V0LmIpLHRoaXMuX2RyeVdldC5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJ3ZXRcIl0pfSx0LmV4dGVuZCh0LkVmZmVjdCksdC5FZmZlY3QuZGVmYXVsdHM9e3dldDoxfSx0LkVmZmVjdC5wcm90b3R5cGUuY29ubmVjdEVmZmVjdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lZmZlY3RTZW5kLmNoYWluKHQsdGhpcy5lZmZlY3RSZXR1cm4pLHRoaXN9LHQuRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9kcnlXZXQuZGlzcG9zZSgpLHRoaXMuX2RyeVdldD1udWxsLHRoaXMuZWZmZWN0U2VuZC5kaXNwb3NlKCksdGhpcy5lZmZlY3RTZW5kPW51bGwsdGhpcy5lZmZlY3RSZXR1cm4uZGlzcG9zZSgpLHRoaXMuZWZmZWN0UmV0dXJuPW51bGwsdGhpcy5fd3JpdGFibGUoW1wid2V0XCJdKSx0aGlzLndldD1udWxsLHRoaXN9LHQuRWZmZWN0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5BdXRvRmlsdGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcImJhc2VGcmVxdWVuY3lcIixcIm9jdGF2ZXNcIl0sdC5BdXRvRmlsdGVyLmRlZmF1bHRzKTt0LkVmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5fbGZvPW5ldyB0LkxGTyh7ZnJlcXVlbmN5OmUuZnJlcXVlbmN5LGFtcGxpdHVkZTplLmRlcHRofSksdGhpcy5kZXB0aD10aGlzLl9sZm8uYW1wbGl0dWRlLHRoaXMuZnJlcXVlbmN5PXRoaXMuX2xmby5mcmVxdWVuY3ksdGhpcy5maWx0ZXI9bmV3IHQuRmlsdGVyKGUuZmlsdGVyKSx0aGlzLl9vY3RhdmVzPTAsdGhpcy5jb25uZWN0RWZmZWN0KHRoaXMuZmlsdGVyKSx0aGlzLl9sZm8uY29ubmVjdCh0aGlzLmZpbHRlci5mcmVxdWVuY3kpLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5fcmVhZE9ubHkoW1wiZnJlcXVlbmN5XCIsXCJkZXB0aFwiXSksdGhpcy5vY3RhdmVzPWUub2N0YXZlcyx0aGlzLmJhc2VGcmVxdWVuY3k9ZS5iYXNlRnJlcXVlbmN5fSx0LmV4dGVuZCh0LkF1dG9GaWx0ZXIsdC5FZmZlY3QpLHQuQXV0b0ZpbHRlci5kZWZhdWx0cz17ZnJlcXVlbmN5OjEsdHlwZTpcInNpbmVcIixkZXB0aDoxLGJhc2VGcmVxdWVuY3k6MjAwLG9jdGF2ZXM6Mi42LGZpbHRlcjp7dHlwZTpcImxvd3Bhc3NcIixyb2xsb2ZmOi0xMixROjF9fSx0LkF1dG9GaWx0ZXIucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sZm8uc3RhcnQodCksdGhpc30sdC5BdXRvRmlsdGVyLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sZm8uc3RvcCh0KSx0aGlzfSx0LkF1dG9GaWx0ZXIucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmby5zeW5jKHQpLHRoaXN9LHQuQXV0b0ZpbHRlci5wcm90b3R5cGUudW5zeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmby51bnN5bmMoKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BdXRvRmlsdGVyLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmby50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvLnR5cGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BdXRvRmlsdGVyLnByb3RvdHlwZSxcImJhc2VGcmVxdWVuY3lcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmby5taW59LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sZm8ubWluPXRoaXMudG9GcmVxdWVuY3kodCksdGhpcy5vY3RhdmVzPXRoaXMuX29jdGF2ZXN9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQXV0b0ZpbHRlci5wcm90b3R5cGUsXCJvY3RhdmVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vY3RhdmVzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb2N0YXZlcz10LHRoaXMuX2xmby5tYXg9dGhpcy5iYXNlRnJlcXVlbmN5Kk1hdGgucG93KDIsdCl9fSksdC5BdXRvRmlsdGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbGZvLmRpc3Bvc2UoKSx0aGlzLl9sZm89bnVsbCx0aGlzLmZpbHRlci5kaXNwb3NlKCksdGhpcy5maWx0ZXI9bnVsbCx0aGlzLl93cml0YWJsZShbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGVwdGg9bnVsbCx0aGlzfSx0LkF1dG9GaWx0ZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkF1dG9QYW5uZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiXSx0LkF1dG9QYW5uZXIuZGVmYXVsdHMpO3QuRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9sZm89bmV3IHQuTEZPKHtmcmVxdWVuY3k6ZS5mcmVxdWVuY3ksYW1wbGl0dWRlOmUuZGVwdGgsbWluOi0xLG1heDoxfSksdGhpcy5kZXB0aD10aGlzLl9sZm8uYW1wbGl0dWRlLHRoaXMuX3Bhbm5lcj1uZXcgdC5QYW5uZXIsdGhpcy5mcmVxdWVuY3k9dGhpcy5fbGZvLmZyZXF1ZW5jeSx0aGlzLmNvbm5lY3RFZmZlY3QodGhpcy5fcGFubmVyKSx0aGlzLl9sZm8uY29ubmVjdCh0aGlzLl9wYW5uZXIucGFuKSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuX3JlYWRPbmx5KFtcImRlcHRoXCIsXCJmcmVxdWVuY3lcIl0pfSx0LmV4dGVuZCh0LkF1dG9QYW5uZXIsdC5FZmZlY3QpLHQuQXV0b1Bhbm5lci5kZWZhdWx0cz17ZnJlcXVlbmN5OjEsdHlwZTpcInNpbmVcIixkZXB0aDoxfSx0LkF1dG9QYW5uZXIucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sZm8uc3RhcnQodCksdGhpc30sdC5BdXRvUGFubmVyLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sZm8uc3RvcCh0KSx0aGlzfSx0LkF1dG9QYW5uZXIucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmby5zeW5jKHQpLHRoaXN9LHQuQXV0b1Bhbm5lci5wcm90b3R5cGUudW5zeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmby51bnN5bmMoKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BdXRvUGFubmVyLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmby50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvLnR5cGU9dH19KSx0LkF1dG9QYW5uZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9sZm8uZGlzcG9zZSgpLHRoaXMuX2xmbz1udWxsLHRoaXMuX3Bhbm5lci5kaXNwb3NlKCksdGhpcy5fcGFubmVyPW51bGwsdGhpcy5fd3JpdGFibGUoW1wiZGVwdGhcIixcImZyZXF1ZW5jeVwiXSksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRlcHRoPW51bGwsdGhpc30sdC5BdXRvUGFubmVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5BdXRvV2FoPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJiYXNlRnJlcXVlbmN5XCIsXCJvY3RhdmVzXCIsXCJzZW5zaXRpdml0eVwiXSx0LkF1dG9XYWguZGVmYXVsdHMpO3QuRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLmZvbGxvd2VyPW5ldyB0LkZvbGxvd2VyKGUuZm9sbG93ZXIpLHRoaXMuX3N3ZWVwUmFuZ2U9bmV3IHQuU2NhbGVFeHAoMCwxLC41KSx0aGlzLl9iYXNlRnJlcXVlbmN5PWUuYmFzZUZyZXF1ZW5jeSx0aGlzLl9vY3RhdmVzPWUub2N0YXZlcyx0aGlzLl9pbnB1dEJvb3N0PW5ldyB0LkdhaW4sdGhpcy5fYmFuZHBhc3M9bmV3IHQuRmlsdGVyKHtyb2xsb2ZmOi00OCxmcmVxdWVuY3k6MCxROmUuUX0pLHRoaXMuX3BlYWtpbmc9bmV3IHQuRmlsdGVyKDAsXCJwZWFraW5nXCIpLHRoaXMuX3BlYWtpbmcuZ2Fpbi52YWx1ZT1lLmdhaW4sdGhpcy5nYWluPXRoaXMuX3BlYWtpbmcuZ2Fpbix0aGlzLlE9dGhpcy5fYmFuZHBhc3MuUSx0aGlzLmVmZmVjdFNlbmQuY2hhaW4odGhpcy5faW5wdXRCb29zdCx0aGlzLmZvbGxvd2VyLHRoaXMuX3N3ZWVwUmFuZ2UpLHRoaXMuX3N3ZWVwUmFuZ2UuY29ubmVjdCh0aGlzLl9iYW5kcGFzcy5mcmVxdWVuY3kpLHRoaXMuX3N3ZWVwUmFuZ2UuY29ubmVjdCh0aGlzLl9wZWFraW5nLmZyZXF1ZW5jeSksdGhpcy5lZmZlY3RTZW5kLmNoYWluKHRoaXMuX2JhbmRwYXNzLHRoaXMuX3BlYWtpbmcsdGhpcy5lZmZlY3RSZXR1cm4pLHRoaXMuX3NldFN3ZWVwUmFuZ2UoKSx0aGlzLnNlbnNpdGl2aXR5PWUuc2Vuc2l0aXZpdHksdGhpcy5fcmVhZE9ubHkoW1wiZ2FpblwiLFwiUVwiXSl9LHQuZXh0ZW5kKHQuQXV0b1dhaCx0LkVmZmVjdCksdC5BdXRvV2FoLmRlZmF1bHRzPXtiYXNlRnJlcXVlbmN5OjEwMCxvY3RhdmVzOjYsc2Vuc2l0aXZpdHk6MCxROjIsZ2FpbjoyLGZvbGxvd2VyOnthdHRhY2s6LjMscmVsZWFzZTouNX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkF1dG9XYWgucHJvdG90eXBlLFwib2N0YXZlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2N0YXZlc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29jdGF2ZXM9dCx0aGlzLl9zZXRTd2VlcFJhbmdlKCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQXV0b1dhaC5wcm90b3R5cGUsXCJiYXNlRnJlcXVlbmN5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXNlRnJlcXVlbmN5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFzZUZyZXF1ZW5jeT10LHRoaXMuX3NldFN3ZWVwUmFuZ2UoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BdXRvV2FoLnByb3RvdHlwZSxcInNlbnNpdGl2aXR5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhaW5Ub0RiKDEvdGhpcy5faW5wdXRCb29zdC5nYWluLnZhbHVlKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lucHV0Qm9vc3QuZ2Fpbi52YWx1ZT0xL3RoaXMuZGJUb0dhaW4odCl9fSksdC5BdXRvV2FoLnByb3RvdHlwZS5fc2V0U3dlZXBSYW5nZT1mdW5jdGlvbigpe3RoaXMuX3N3ZWVwUmFuZ2UubWluPXRoaXMuX2Jhc2VGcmVxdWVuY3ksdGhpcy5fc3dlZXBSYW5nZS5tYXg9TWF0aC5taW4odGhpcy5fYmFzZUZyZXF1ZW5jeSpNYXRoLnBvdygyLHRoaXMuX29jdGF2ZXMpLHRoaXMuY29udGV4dC5zYW1wbGVSYXRlLzIpfSx0LkF1dG9XYWgucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLmZvbGxvd2VyLmRpc3Bvc2UoKSx0aGlzLmZvbGxvd2VyPW51bGwsdGhpcy5fc3dlZXBSYW5nZS5kaXNwb3NlKCksdGhpcy5fc3dlZXBSYW5nZT1udWxsLHRoaXMuX2JhbmRwYXNzLmRpc3Bvc2UoKSx0aGlzLl9iYW5kcGFzcz1udWxsLHRoaXMuX3BlYWtpbmcuZGlzcG9zZSgpLHRoaXMuX3BlYWtpbmc9bnVsbCx0aGlzLl9pbnB1dEJvb3N0LmRpc3Bvc2UoKSx0aGlzLl9pbnB1dEJvb3N0PW51bGwsdGhpcy5fd3JpdGFibGUoW1wiZ2FpblwiLFwiUVwiXSksdGhpcy5nYWluPW51bGwsdGhpcy5RPW51bGwsdGhpc30sdC5BdXRvV2FofSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5CaXRDcnVzaGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJiaXRzXCJdLHQuQml0Q3J1c2hlci5kZWZhdWx0cyk7dC5FZmZlY3QuY2FsbCh0aGlzLGUpO3ZhciBpPTEvTWF0aC5wb3coMixlLmJpdHMtMSk7dGhpcy5fc3VidHJhY3Q9bmV3IHQuU3VidHJhY3QsdGhpcy5fbW9kdWxvPW5ldyB0Lk1vZHVsbyhpKSx0aGlzLl9iaXRzPWUuYml0cyx0aGlzLmVmZmVjdFNlbmQuZmFuKHRoaXMuX3N1YnRyYWN0LHRoaXMuX21vZHVsbyksdGhpcy5fbW9kdWxvLmNvbm5lY3QodGhpcy5fc3VidHJhY3QsMCwxKSx0aGlzLl9zdWJ0cmFjdC5jb25uZWN0KHRoaXMuZWZmZWN0UmV0dXJuKX0sdC5leHRlbmQodC5CaXRDcnVzaGVyLHQuRWZmZWN0KSx0LkJpdENydXNoZXIuZGVmYXVsdHM9e2JpdHM6NH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQml0Q3J1c2hlci5wcm90b3R5cGUsXCJiaXRzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iaXRzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYml0cz10O3ZhciBlPTEvTWF0aC5wb3coMix0LTEpO3RoaXMuX21vZHVsby52YWx1ZT1lfX0pLHQuQml0Q3J1c2hlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3N1YnRyYWN0LmRpc3Bvc2UoKSx0aGlzLl9zdWJ0cmFjdD1udWxsLHRoaXMuX21vZHVsby5kaXNwb3NlKCksdGhpcy5fbW9kdWxvPW51bGwsdGhpc30sdC5CaXRDcnVzaGVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5DaGVieXNoZXY9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcIm9yZGVyXCJdLHQuQ2hlYnlzaGV2LmRlZmF1bHRzKTt0LkVmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5fc2hhcGVyPW5ldyB0LldhdmVTaGFwZXIoNDA5NiksdGhpcy5fb3JkZXI9ZS5vcmRlcix0aGlzLmNvbm5lY3RFZmZlY3QodGhpcy5fc2hhcGVyKSx0aGlzLm9yZGVyPWUub3JkZXIsdGhpcy5vdmVyc2FtcGxlPWUub3ZlcnNhbXBsZX0sdC5leHRlbmQodC5DaGVieXNoZXYsdC5FZmZlY3QpLHQuQ2hlYnlzaGV2LmRlZmF1bHRzPXtvcmRlcjoxLG92ZXJzYW1wbGU6XCJub25lXCJ9LHQuQ2hlYnlzaGV2LnByb3RvdHlwZS5fZ2V0Q29lZmZpY2llbnQ9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBpLmhhc093blByb3BlcnR5KGUpP2lbZV06KGlbZV09MD09PWU/MDoxPT09ZT90OjIqdCp0aGlzLl9nZXRDb2VmZmljaWVudCh0LGUtMSxpKS10aGlzLl9nZXRDb2VmZmljaWVudCh0LGUtMixpKSxpW2VdKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQ2hlYnlzaGV2LnByb3RvdHlwZSxcIm9yZGVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmRlcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29yZGVyPXQ7Zm9yKHZhciBlPW5ldyBBcnJheSg0MDk2KSxpPWUubGVuZ3RoLG49MDtuPGk7KytuKXt2YXIgcz0yKm4vaS0xO2Vbbl09MD09PXM/MDp0aGlzLl9nZXRDb2VmZmljaWVudChzLHQse30pfXRoaXMuX3NoYXBlci5jdXJ2ZT1lfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNoZWJ5c2hldi5wcm90b3R5cGUsXCJvdmVyc2FtcGxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFwZXIub3ZlcnNhbXBsZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NoYXBlci5vdmVyc2FtcGxlPXR9fSksdC5DaGVieXNoZXYucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zaGFwZXIuZGlzcG9zZSgpLHRoaXMuX3NoYXBlcj1udWxsLHRoaXN9LHQuQ2hlYnlzaGV2fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5TdGVyZW9FZmZlY3Q9ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZUluc091dHMoMSwxKTt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcIndldFwiXSx0LkVmZmVjdC5kZWZhdWx0cyk7dGhpcy5fZHJ5V2V0PW5ldyB0LkNyb3NzRmFkZShlLndldCksdGhpcy53ZXQ9dGhpcy5fZHJ5V2V0LmZhZGUsdGhpcy5fc3BsaXQ9bmV3IHQuU3BsaXQsdGhpcy5lZmZlY3RTZW5kTD10aGlzLl9zcGxpdC5sZWZ0LHRoaXMuZWZmZWN0U2VuZFI9dGhpcy5fc3BsaXQucmlnaHQsdGhpcy5fbWVyZ2U9bmV3IHQuTWVyZ2UsdGhpcy5lZmZlY3RSZXR1cm5MPXRoaXMuX21lcmdlLmxlZnQsdGhpcy5lZmZlY3RSZXR1cm5SPXRoaXMuX21lcmdlLnJpZ2h0LHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLl9zcGxpdCksdGhpcy5pbnB1dC5jb25uZWN0KHRoaXMuX2RyeVdldCwwLDApLHRoaXMuX21lcmdlLmNvbm5lY3QodGhpcy5fZHJ5V2V0LDAsMSksdGhpcy5fZHJ5V2V0LmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcIndldFwiXSl9LHQuZXh0ZW5kKHQuU3RlcmVvRWZmZWN0LHQuRWZmZWN0KSx0LlN0ZXJlb0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZHJ5V2V0LmRpc3Bvc2UoKSx0aGlzLl9kcnlXZXQ9bnVsbCx0aGlzLl9zcGxpdC5kaXNwb3NlKCksdGhpcy5fc3BsaXQ9bnVsbCx0aGlzLl9tZXJnZS5kaXNwb3NlKCksdGhpcy5fbWVyZ2U9bnVsbCx0aGlzLmVmZmVjdFNlbmRMPW51bGwsdGhpcy5lZmZlY3RTZW5kUj1udWxsLHRoaXMuZWZmZWN0UmV0dXJuTD1udWxsLHRoaXMuZWZmZWN0UmV0dXJuUj1udWxsLHRoaXMuX3dyaXRhYmxlKFtcIndldFwiXSksdGhpcy53ZXQ9bnVsbCx0aGlzfSx0LlN0ZXJlb0VmZmVjdH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRmVlZGJhY2tFZmZlY3Q9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImZlZWRiYWNrXCJdKTtlPXRoaXMuZGVmYXVsdEFyZyhlLHQuRmVlZGJhY2tFZmZlY3QuZGVmYXVsdHMpLHQuRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9mZWVkYmFja0dhaW49bmV3IHQuR2FpbihlLmZlZWRiYWNrLHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5mZWVkYmFjaz10aGlzLl9mZWVkYmFja0dhaW4uZ2Fpbix0aGlzLmVmZmVjdFJldHVybi5jaGFpbih0aGlzLl9mZWVkYmFja0dhaW4sdGhpcy5lZmZlY3RTZW5kKSx0aGlzLl9yZWFkT25seShbXCJmZWVkYmFja1wiXSl9LHQuZXh0ZW5kKHQuRmVlZGJhY2tFZmZlY3QsdC5FZmZlY3QpLHQuRmVlZGJhY2tFZmZlY3QuZGVmYXVsdHM9e2ZlZWRiYWNrOi4xMjV9LHQuRmVlZGJhY2tFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmZWVkYmFja1wiXSksdGhpcy5fZmVlZGJhY2tHYWluLmRpc3Bvc2UoKSx0aGlzLl9mZWVkYmFja0dhaW49bnVsbCx0aGlzLmZlZWRiYWNrPW51bGwsdGhpc30sdC5GZWVkYmFja0VmZmVjdH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU3RlcmVvWEZlZWRiYWNrRWZmZWN0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmZWVkYmFja1wiXSx0LkZlZWRiYWNrRWZmZWN0LmRlZmF1bHRzKTt0LlN0ZXJlb0VmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5mZWVkYmFjaz1uZXcgdC5TaWduYWwoZS5mZWVkYmFjayx0LlR5cGUuTm9ybWFsUmFuZ2UpLHRoaXMuX2ZlZWRiYWNrTFI9bmV3IHQuR2Fpbix0aGlzLl9mZWVkYmFja1JMPW5ldyB0LkdhaW4sdGhpcy5lZmZlY3RSZXR1cm5MLmNoYWluKHRoaXMuX2ZlZWRiYWNrTFIsdGhpcy5lZmZlY3RTZW5kUiksdGhpcy5lZmZlY3RSZXR1cm5SLmNoYWluKHRoaXMuX2ZlZWRiYWNrUkwsdGhpcy5lZmZlY3RTZW5kTCksdGhpcy5mZWVkYmFjay5mYW4odGhpcy5fZmVlZGJhY2tMUi5nYWluLHRoaXMuX2ZlZWRiYWNrUkwuZ2FpbiksdGhpcy5fcmVhZE9ubHkoW1wiZmVlZGJhY2tcIl0pfSx0LmV4dGVuZCh0LlN0ZXJlb1hGZWVkYmFja0VmZmVjdCx0LkZlZWRiYWNrRWZmZWN0KSx0LlN0ZXJlb1hGZWVkYmFja0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlN0ZXJlb0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImZlZWRiYWNrXCJdKSx0aGlzLmZlZWRiYWNrLmRpc3Bvc2UoKSx0aGlzLmZlZWRiYWNrPW51bGwsdGhpcy5fZmVlZGJhY2tMUi5kaXNwb3NlKCksdGhpcy5fZmVlZGJhY2tMUj1udWxsLHRoaXMuX2ZlZWRiYWNrUkwuZGlzcG9zZSgpLHRoaXMuX2ZlZWRiYWNrUkw9bnVsbCx0aGlzfSx0LlN0ZXJlb1hGZWVkYmFja0VmZmVjdH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ2hvcnVzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcImRlbGF5VGltZVwiLFwiZGVwdGhcIl0sdC5DaG9ydXMuZGVmYXVsdHMpO3QuU3RlcmVvWEZlZWRiYWNrRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9kZXB0aD1lLmRlcHRoLHRoaXMuX2RlbGF5VGltZT1lLmRlbGF5VGltZS8xZTMsdGhpcy5fbGZvTD1uZXcgdC5MRk8oe2ZyZXF1ZW5jeTplLmZyZXF1ZW5jeSxtaW46MCxtYXg6MX0pLHRoaXMuX2xmb1I9bmV3IHQuTEZPKHtmcmVxdWVuY3k6ZS5mcmVxdWVuY3ksbWluOjAsbWF4OjEscGhhc2U6MTgwfSksdGhpcy5fZGVsYXlOb2RlTD1uZXcgdC5EZWxheSx0aGlzLl9kZWxheU5vZGVSPW5ldyB0LkRlbGF5LHRoaXMuZnJlcXVlbmN5PXRoaXMuX2xmb0wuZnJlcXVlbmN5LHRoaXMuZWZmZWN0U2VuZEwuY2hhaW4odGhpcy5fZGVsYXlOb2RlTCx0aGlzLmVmZmVjdFJldHVybkwpLHRoaXMuZWZmZWN0U2VuZFIuY2hhaW4odGhpcy5fZGVsYXlOb2RlUix0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuZWZmZWN0U2VuZEwuY29ubmVjdCh0aGlzLmVmZmVjdFJldHVybkwpLHRoaXMuZWZmZWN0U2VuZFIuY29ubmVjdCh0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuX2xmb0wuY29ubmVjdCh0aGlzLl9kZWxheU5vZGVMLmRlbGF5VGltZSksdGhpcy5fbGZvUi5jb25uZWN0KHRoaXMuX2RlbGF5Tm9kZVIuZGVsYXlUaW1lKSx0aGlzLl9sZm9MLnN0YXJ0KCksdGhpcy5fbGZvUi5zdGFydCgpLHRoaXMuX2xmb0wuZnJlcXVlbmN5LmNvbm5lY3QodGhpcy5fbGZvUi5mcmVxdWVuY3kpLHRoaXMuZGVwdGg9dGhpcy5fZGVwdGgsdGhpcy5mcmVxdWVuY3kudmFsdWU9ZS5mcmVxdWVuY3ksdGhpcy50eXBlPWUudHlwZSx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIl0pLHRoaXMuc3ByZWFkPWUuc3ByZWFkfSx0LmV4dGVuZCh0LkNob3J1cyx0LlN0ZXJlb1hGZWVkYmFja0VmZmVjdCksdC5DaG9ydXMuZGVmYXVsdHM9e2ZyZXF1ZW5jeToxLjUsZGVsYXlUaW1lOjMuNSxkZXB0aDouNyxmZWVkYmFjazouMSx0eXBlOlwic2luZVwiLHNwcmVhZDoxODB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNob3J1cy5wcm90b3R5cGUsXCJkZXB0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVwdGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kZXB0aD10O3ZhciBlPXRoaXMuX2RlbGF5VGltZSp0O3RoaXMuX2xmb0wubWluPU1hdGgubWF4KHRoaXMuX2RlbGF5VGltZS1lLDApLHRoaXMuX2xmb0wubWF4PXRoaXMuX2RlbGF5VGltZStlLHRoaXMuX2xmb1IubWluPU1hdGgubWF4KHRoaXMuX2RlbGF5VGltZS1lLDApLHRoaXMuX2xmb1IubWF4PXRoaXMuX2RlbGF5VGltZStlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNob3J1cy5wcm90b3R5cGUsXCJkZWxheVRpbWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDFlMyp0aGlzLl9kZWxheVRpbWV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kZWxheVRpbWU9dC8xZTMsdGhpcy5kZXB0aD10aGlzLl9kZXB0aH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DaG9ydXMucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvTC50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvTC50eXBlPXQsdGhpcy5fbGZvUi50eXBlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQ2hvcnVzLnByb3RvdHlwZSxcInNwcmVhZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvUi5waGFzZS10aGlzLl9sZm9MLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvTC5waGFzZT05MC10LzIsdGhpcy5fbGZvUi5waGFzZT10LzIrOTB9fSksdC5DaG9ydXMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TdGVyZW9YRmVlZGJhY2tFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9sZm9MLmRpc3Bvc2UoKSx0aGlzLl9sZm9MPW51bGwsdGhpcy5fbGZvUi5kaXNwb3NlKCksdGhpcy5fbGZvUj1udWxsLHRoaXMuX2RlbGF5Tm9kZUwuZGlzcG9zZSgpLHRoaXMuX2RlbGF5Tm9kZUw9bnVsbCx0aGlzLl9kZWxheU5vZGVSLmRpc3Bvc2UoKSx0aGlzLl9kZWxheU5vZGVSPW51bGwsdGhpcy5fd3JpdGFibGUoXCJmcmVxdWVuY3lcIiksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzfSx0LkNob3J1c30pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ29udm9sdmVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ1cmxcIixcIm9ubG9hZFwiXSx0LkNvbnZvbHZlci5kZWZhdWx0cyk7dC5FZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuX2NvbnZvbHZlcj10aGlzLmNvbnRleHQuY3JlYXRlQ29udm9sdmVyKCksdGhpcy5fYnVmZmVyPW5ldyB0LkJ1ZmZlcix0aGlzLmlzU3RyaW5nKGUudXJsKT90aGlzLl9idWZmZXIubG9hZChlLnVybCxmdW5jdGlvbih0KXt0aGlzLmJ1ZmZlcj10LGUub25sb2FkKCl9LmJpbmQodGhpcykpOmUudXJsJiYodGhpcy5idWZmZXI9ZS51cmwsZS5vbmxvYWQoKSksdGhpcy5jb25uZWN0RWZmZWN0KHRoaXMuX2NvbnZvbHZlcil9LHQuZXh0ZW5kKHQuQ29udm9sdmVyLHQuRWZmZWN0KSx0LkNvbnZvbHZlci5kZWZhdWx0cz17b25sb2FkOnQubm9PcH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQ29udm9sdmVyLnByb3RvdHlwZSxcImJ1ZmZlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLmdldCgpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYnVmZmVyLnNldCh0KSx0aGlzLl9jb252b2x2ZXIuYnVmZmVyPXRoaXMuX2J1ZmZlci5nZXQoKX19KSx0LkNvbnZvbHZlci5wcm90b3R5cGUubG9hZD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9idWZmZXIubG9hZCh0LGZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyPXQsZSYmZSgpfS5iaW5kKHRoaXMpKX0sdC5Db252b2x2ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9jb252b2x2ZXIuZGlzY29ubmVjdCgpLHRoaXMuX2NvbnZvbHZlcj1udWxsLHRoaXMuX2J1ZmZlci5kaXNwb3NlKCksdGhpcy5fYnVmZmVyPW51bGwsdGhpc30sdC5Db252b2x2ZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkRpc3RvcnRpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImRpc3RvcnRpb25cIl0sdC5EaXN0b3J0aW9uLmRlZmF1bHRzKTt0LkVmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5fc2hhcGVyPW5ldyB0LldhdmVTaGFwZXIoNDA5NiksdGhpcy5fZGlzdG9ydGlvbj1lLmRpc3RvcnRpb24sdGhpcy5jb25uZWN0RWZmZWN0KHRoaXMuX3NoYXBlciksdGhpcy5kaXN0b3J0aW9uPWUuZGlzdG9ydGlvbix0aGlzLm92ZXJzYW1wbGU9ZS5vdmVyc2FtcGxlfSx0LmV4dGVuZCh0LkRpc3RvcnRpb24sdC5FZmZlY3QpLHQuRGlzdG9ydGlvbi5kZWZhdWx0cz17ZGlzdG9ydGlvbjouNCxvdmVyc2FtcGxlOlwibm9uZVwifSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5EaXN0b3J0aW9uLnByb3RvdHlwZSxcImRpc3RvcnRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc3RvcnRpb259LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kaXN0b3J0aW9uPXQ7dmFyIGU9MTAwKnQsaT1NYXRoLlBJLzE4MDt0aGlzLl9zaGFwZXIuc2V0TWFwKGZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmFicyh0KTwuMDAxPzA6KDMrZSkqdCoyMCppLyhNYXRoLlBJK2UqTWF0aC5hYnModCkpfSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRGlzdG9ydGlvbi5wcm90b3R5cGUsXCJvdmVyc2FtcGxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFwZXIub3ZlcnNhbXBsZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NoYXBlci5vdmVyc2FtcGxlPXR9fSksdC5EaXN0b3J0aW9uLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc2hhcGVyLmRpc3Bvc2UoKSx0aGlzLl9zaGFwZXI9bnVsbCx0aGlzfSx0LkRpc3RvcnRpb259KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkZlZWRiYWNrRGVsYXk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImRlbGF5VGltZVwiLFwiZmVlZGJhY2tcIl0sdC5GZWVkYmFja0RlbGF5LmRlZmF1bHRzKTt0LkZlZWRiYWNrRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9kZWxheU5vZGU9bmV3IHQuRGVsYXkoZS5kZWxheVRpbWUpLHRoaXMuZGVsYXlUaW1lPXRoaXMuX2RlbGF5Tm9kZS5kZWxheVRpbWUsdGhpcy5jb25uZWN0RWZmZWN0KHRoaXMuX2RlbGF5Tm9kZSksdGhpcy5fcmVhZE9ubHkoW1wiZGVsYXlUaW1lXCJdKX0sdC5leHRlbmQodC5GZWVkYmFja0RlbGF5LHQuRmVlZGJhY2tFZmZlY3QpLHQuRmVlZGJhY2tEZWxheS5kZWZhdWx0cz17ZGVsYXlUaW1lOi4yNX0sdC5GZWVkYmFja0RlbGF5LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuRmVlZGJhY2tFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9kZWxheU5vZGUuZGlzcG9zZSgpLHRoaXMuX2RlbGF5Tm9kZT1udWxsLHRoaXMuX3dyaXRhYmxlKFtcImRlbGF5VGltZVwiXSksdGhpcy5kZWxheVRpbWU9bnVsbCx0aGlzfSx0LkZlZWRiYWNrRGVsYXl9KSx0KGZ1bmN0aW9uKHQpe3ZhciBlPVsxNTU3LzQ0MTAwLDE2MTcvNDQxMDAsMTQ5MS80NDEwMCwxNDIyLzQ0MTAwLDEyNzcvNDQxMDAsMTM1Ni80NDEwMCwxMTg4LzQ0MTAwLDExMTYvNDQxMDBdLGk9WzIyNSw1NTYsNDQxLDM0MV07cmV0dXJuIHQuRnJlZXZlcmI9ZnVuY3Rpb24oKXt2YXIgbj10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInJvb21TaXplXCIsXCJkYW1wZW5pbmdcIl0sdC5GcmVldmVyYi5kZWZhdWx0cyk7dC5TdGVyZW9FZmZlY3QuY2FsbCh0aGlzLG4pLHRoaXMucm9vbVNpemU9bmV3IHQuU2lnbmFsKG4ucm9vbVNpemUsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLmRhbXBlbmluZz1uZXcgdC5TaWduYWwobi5kYW1wZW5pbmcsdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5fY29tYkZpbHRlcnM9W10sdGhpcy5fYWxscGFzc0ZpbHRlcnNMPVtdLHRoaXMuX2FsbHBhc3NGaWx0ZXJzUj1bXTtmb3IodmFyIHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIG89dGhpcy5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpO28udHlwZT1cImFsbHBhc3NcIixvLmZyZXF1ZW5jeS52YWx1ZT1pW3NdLHRoaXMuX2FsbHBhc3NGaWx0ZXJzTC5wdXNoKG8pfWZvcih2YXIgcj0wO3I8aS5sZW5ndGg7cisrKXt2YXIgYT10aGlzLmNvbnRleHQuY3JlYXRlQmlxdWFkRmlsdGVyKCk7YS50eXBlPVwiYWxscGFzc1wiLGEuZnJlcXVlbmN5LnZhbHVlPWlbcl0sdGhpcy5fYWxscGFzc0ZpbHRlcnNSLnB1c2goYSl9Zm9yKHZhciBoPTA7aDxlLmxlbmd0aDtoKyspe3ZhciBsPW5ldyB0Lkxvd3Bhc3NDb21iRmlsdGVyKGVbaF0pO2g8ZS5sZW5ndGgvMj90aGlzLmVmZmVjdFNlbmRMLmNoYWluKGwsdGhpcy5fYWxscGFzc0ZpbHRlcnNMWzBdKTp0aGlzLmVmZmVjdFNlbmRSLmNoYWluKGwsdGhpcy5fYWxscGFzc0ZpbHRlcnNSWzBdKSx0aGlzLnJvb21TaXplLmNvbm5lY3QobC5yZXNvbmFuY2UpLHRoaXMuZGFtcGVuaW5nLmNvbm5lY3QobC5kYW1wZW5pbmcpLHRoaXMuX2NvbWJGaWx0ZXJzLnB1c2gobCl9dGhpcy5jb25uZWN0U2VyaWVzLmFwcGx5KHRoaXMsdGhpcy5fYWxscGFzc0ZpbHRlcnNMKSx0aGlzLmNvbm5lY3RTZXJpZXMuYXBwbHkodGhpcyx0aGlzLl9hbGxwYXNzRmlsdGVyc1IpLHRoaXMuX2FsbHBhc3NGaWx0ZXJzTFt0aGlzLl9hbGxwYXNzRmlsdGVyc0wubGVuZ3RoLTFdLmNvbm5lY3QodGhpcy5lZmZlY3RSZXR1cm5MKSx0aGlzLl9hbGxwYXNzRmlsdGVyc1JbdGhpcy5fYWxscGFzc0ZpbHRlcnNSLmxlbmd0aC0xXS5jb25uZWN0KHRoaXMuZWZmZWN0UmV0dXJuUiksdGhpcy5fcmVhZE9ubHkoW1wicm9vbVNpemVcIixcImRhbXBlbmluZ1wiXSl9LHQuZXh0ZW5kKHQuRnJlZXZlcmIsdC5TdGVyZW9FZmZlY3QpLHQuRnJlZXZlcmIuZGVmYXVsdHM9e3Jvb21TaXplOi43LGRhbXBlbmluZzozZTN9LHQuRnJlZXZlcmIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LlN0ZXJlb0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO2Zvcih2YXIgZT0wO2U8dGhpcy5fYWxscGFzc0ZpbHRlcnNMLmxlbmd0aDtlKyspdGhpcy5fYWxscGFzc0ZpbHRlcnNMW2VdLmRpc2Nvbm5lY3QoKSx0aGlzLl9hbGxwYXNzRmlsdGVyc0xbZV09bnVsbDt0aGlzLl9hbGxwYXNzRmlsdGVyc0w9bnVsbDtmb3IodmFyIGk9MDtpPHRoaXMuX2FsbHBhc3NGaWx0ZXJzUi5sZW5ndGg7aSsrKXRoaXMuX2FsbHBhc3NGaWx0ZXJzUltpXS5kaXNjb25uZWN0KCksdGhpcy5fYWxscGFzc0ZpbHRlcnNSW2ldPW51bGw7dGhpcy5fYWxscGFzc0ZpbHRlcnNSPW51bGw7Zm9yKHZhciBuPTA7bjx0aGlzLl9jb21iRmlsdGVycy5sZW5ndGg7bisrKXRoaXMuX2NvbWJGaWx0ZXJzW25dLmRpc3Bvc2UoKSx0aGlzLl9jb21iRmlsdGVyc1tuXT1udWxsO3JldHVybiB0aGlzLl9jb21iRmlsdGVycz1udWxsLHRoaXMuX3dyaXRhYmxlKFtcInJvb21TaXplXCIsXCJkYW1wZW5pbmdcIl0pLHRoaXMucm9vbVNpemUuZGlzcG9zZSgpLHRoaXMucm9vbVNpemU9bnVsbCx0aGlzLmRhbXBlbmluZy5kaXNwb3NlKCksdGhpcy5kYW1wZW5pbmc9bnVsbCx0aGlzfSx0LkZyZWV2ZXJifSksdChmdW5jdGlvbih0KXt2YXIgZT1bLjA2NzQ4LC4wNjQwNCwuMDgyMTIsLjA5MDA0XSxpPVsuNzczLC44MDIsLjc1MywuNzMzXSxuPVszNDcsMTEzLDM3XTtyZXR1cm4gdC5KQ1JldmVyYj1mdW5jdGlvbigpe3ZhciBzPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wicm9vbVNpemVcIl0sdC5KQ1JldmVyYi5kZWZhdWx0cyk7dC5TdGVyZW9FZmZlY3QuY2FsbCh0aGlzLHMpLHRoaXMucm9vbVNpemU9bmV3IHQuU2lnbmFsKHMucm9vbVNpemUsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl9zY2FsZVJvb21TaXplPW5ldyB0LlNjYWxlKC0uNzMzLC4xOTcpLHRoaXMuX2FsbHBhc3NGaWx0ZXJzPVtdLHRoaXMuX2ZlZWRiYWNrQ29tYkZpbHRlcnM9W107Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspe3ZhciByPXRoaXMuY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKTtyLnR5cGU9XCJhbGxwYXNzXCIsci5mcmVxdWVuY3kudmFsdWU9bltvXSx0aGlzLl9hbGxwYXNzRmlsdGVycy5wdXNoKHIpfWZvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKXt2YXIgaD1uZXcgdC5GZWVkYmFja0NvbWJGaWx0ZXIoZVthXSwuMSk7dGhpcy5fc2NhbGVSb29tU2l6ZS5jb25uZWN0KGgucmVzb25hbmNlKSxoLnJlc29uYW5jZS52YWx1ZT1pW2FdLHRoaXMuX2FsbHBhc3NGaWx0ZXJzW3RoaXMuX2FsbHBhc3NGaWx0ZXJzLmxlbmd0aC0xXS5jb25uZWN0KGgpLGE8ZS5sZW5ndGgvMj9oLmNvbm5lY3QodGhpcy5lZmZlY3RSZXR1cm5MKTpoLmNvbm5lY3QodGhpcy5lZmZlY3RSZXR1cm5SKSx0aGlzLl9mZWVkYmFja0NvbWJGaWx0ZXJzLnB1c2goaCl9dGhpcy5yb29tU2l6ZS5jb25uZWN0KHRoaXMuX3NjYWxlUm9vbVNpemUpLHRoaXMuY29ubmVjdFNlcmllcy5hcHBseSh0aGlzLHRoaXMuX2FsbHBhc3NGaWx0ZXJzKSx0aGlzLmVmZmVjdFNlbmRMLmNvbm5lY3QodGhpcy5fYWxscGFzc0ZpbHRlcnNbMF0pLHRoaXMuZWZmZWN0U2VuZFIuY29ubmVjdCh0aGlzLl9hbGxwYXNzRmlsdGVyc1swXSksdGhpcy5fcmVhZE9ubHkoW1wicm9vbVNpemVcIl0pfSx0LmV4dGVuZCh0LkpDUmV2ZXJiLHQuU3RlcmVvRWZmZWN0KSx0LkpDUmV2ZXJiLmRlZmF1bHRzPXtyb29tU2l6ZTouNX0sdC5KQ1JldmVyYi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QuU3RlcmVvRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7Zm9yKHZhciBlPTA7ZTx0aGlzLl9hbGxwYXNzRmlsdGVycy5sZW5ndGg7ZSsrKXRoaXMuX2FsbHBhc3NGaWx0ZXJzW2VdLmRpc2Nvbm5lY3QoKSx0aGlzLl9hbGxwYXNzRmlsdGVyc1tlXT1udWxsO3RoaXMuX2FsbHBhc3NGaWx0ZXJzPW51bGw7Zm9yKHZhciBpPTA7aTx0aGlzLl9mZWVkYmFja0NvbWJGaWx0ZXJzLmxlbmd0aDtpKyspdGhpcy5fZmVlZGJhY2tDb21iRmlsdGVyc1tpXS5kaXNwb3NlKCksdGhpcy5fZmVlZGJhY2tDb21iRmlsdGVyc1tpXT1udWxsO3JldHVybiB0aGlzLl9mZWVkYmFja0NvbWJGaWx0ZXJzPW51bGwsdGhpcy5fd3JpdGFibGUoW1wicm9vbVNpemVcIl0pLHRoaXMucm9vbVNpemUuZGlzcG9zZSgpLHRoaXMucm9vbVNpemU9bnVsbCx0aGlzLl9zY2FsZVJvb21TaXplLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZVJvb21TaXplPW51bGwsdGhpc30sdC5KQ1JldmVyYn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTWlkU2lkZUVmZmVjdD1mdW5jdGlvbigpe3QuRWZmZWN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9taWRTaWRlU3BsaXQ9bmV3IHQuTWlkU2lkZVNwbGl0LHRoaXMuX21pZFNpZGVNZXJnZT1uZXcgdC5NaWRTaWRlTWVyZ2UsdGhpcy5taWRTZW5kPXRoaXMuX21pZFNpZGVTcGxpdC5taWQsdGhpcy5zaWRlU2VuZD10aGlzLl9taWRTaWRlU3BsaXQuc2lkZSx0aGlzLm1pZFJldHVybj10aGlzLl9taWRTaWRlTWVyZ2UubWlkLHRoaXMuc2lkZVJldHVybj10aGlzLl9taWRTaWRlTWVyZ2Uuc2lkZSx0aGlzLmVmZmVjdFNlbmQuY29ubmVjdCh0aGlzLl9taWRTaWRlU3BsaXQpLHRoaXMuX21pZFNpZGVNZXJnZS5jb25uZWN0KHRoaXMuZWZmZWN0UmV0dXJuKX0sdC5leHRlbmQodC5NaWRTaWRlRWZmZWN0LHQuRWZmZWN0KSx0Lk1pZFNpZGVFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9taWRTaWRlU3BsaXQuZGlzcG9zZSgpLHRoaXMuX21pZFNpZGVTcGxpdD1udWxsLHRoaXMuX21pZFNpZGVNZXJnZS5kaXNwb3NlKCksdGhpcy5fbWlkU2lkZU1lcmdlPW51bGwsdGhpcy5taWRTZW5kPW51bGwsdGhpcy5zaWRlU2VuZD1udWxsLHRoaXMubWlkUmV0dXJuPW51bGwsdGhpcy5zaWRlUmV0dXJuPW51bGwsdGhpc30sdC5NaWRTaWRlRWZmZWN0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5QaGFzZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiLFwib2N0YXZlc1wiLFwiYmFzZUZyZXF1ZW5jeVwiXSx0LlBoYXNlci5kZWZhdWx0cyk7dC5TdGVyZW9FZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuX2xmb0w9bmV3IHQuTEZPKGUuZnJlcXVlbmN5LDAsMSksdGhpcy5fbGZvUj1uZXcgdC5MRk8oZS5mcmVxdWVuY3ksMCwxKSx0aGlzLl9sZm9SLnBoYXNlPTE4MCx0aGlzLl9iYXNlRnJlcXVlbmN5PWUuYmFzZUZyZXF1ZW5jeSx0aGlzLl9vY3RhdmVzPWUub2N0YXZlcyx0aGlzLlE9bmV3IHQuU2lnbmFsKGUuUSx0LlR5cGUuUG9zaXRpdmUpLHRoaXMuX2ZpbHRlcnNMPXRoaXMuX21ha2VGaWx0ZXJzKGUuc3RhZ2VzLHRoaXMuX2xmb0wsdGhpcy5RKSx0aGlzLl9maWx0ZXJzUj10aGlzLl9tYWtlRmlsdGVycyhlLnN0YWdlcyx0aGlzLl9sZm9SLHRoaXMuUSksdGhpcy5mcmVxdWVuY3k9dGhpcy5fbGZvTC5mcmVxdWVuY3ksdGhpcy5mcmVxdWVuY3kudmFsdWU9ZS5mcmVxdWVuY3ksdGhpcy5lZmZlY3RTZW5kTC5jb25uZWN0KHRoaXMuX2ZpbHRlcnNMWzBdKSx0aGlzLmVmZmVjdFNlbmRSLmNvbm5lY3QodGhpcy5fZmlsdGVyc1JbMF0pLHRoaXMuX2ZpbHRlcnNMW2Uuc3RhZ2VzLTFdLmNvbm5lY3QodGhpcy5lZmZlY3RSZXR1cm5MKSx0aGlzLl9maWx0ZXJzUltlLnN0YWdlcy0xXS5jb25uZWN0KHRoaXMuZWZmZWN0UmV0dXJuUiksdGhpcy5fbGZvTC5mcmVxdWVuY3kuY29ubmVjdCh0aGlzLl9sZm9SLmZyZXF1ZW5jeSksdGhpcy5iYXNlRnJlcXVlbmN5PWUuYmFzZUZyZXF1ZW5jeSx0aGlzLm9jdGF2ZXM9ZS5vY3RhdmVzLHRoaXMuX2xmb0wuc3RhcnQoKSx0aGlzLl9sZm9SLnN0YXJ0KCksdGhpcy5fcmVhZE9ubHkoW1wiZnJlcXVlbmN5XCIsXCJRXCJdKX0sdC5leHRlbmQodC5QaGFzZXIsdC5TdGVyZW9FZmZlY3QpLHQuUGhhc2VyLmRlZmF1bHRzPXtmcmVxdWVuY3k6LjUsb2N0YXZlczozLHN0YWdlczoxMCxROjEwLGJhc2VGcmVxdWVuY3k6MzUwfSx0LlBoYXNlci5wcm90b3R5cGUuX21ha2VGaWx0ZXJzPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG49bmV3IEFycmF5KHQpLHM9MDtzPHQ7cysrKXt2YXIgbz10aGlzLmNvbnRleHQuY3JlYXRlQmlxdWFkRmlsdGVyKCk7by50eXBlPVwiYWxscGFzc1wiLGkuY29ubmVjdChvLlEpLGUuY29ubmVjdChvLmZyZXF1ZW5jeSksbltzXT1vfXJldHVybiB0aGlzLmNvbm5lY3RTZXJpZXMuYXBwbHkodGhpcyxuKSxufSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QaGFzZXIucHJvdG90eXBlLFwib2N0YXZlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2N0YXZlc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29jdGF2ZXM9dDt2YXIgZT10aGlzLl9iYXNlRnJlcXVlbmN5Kk1hdGgucG93KDIsdCk7dGhpcy5fbGZvTC5tYXg9ZSx0aGlzLl9sZm9SLm1heD1lfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBoYXNlci5wcm90b3R5cGUsXCJiYXNlRnJlcXVlbmN5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXNlRnJlcXVlbmN5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFzZUZyZXF1ZW5jeT10LHRoaXMuX2xmb0wubWluPXQsdGhpcy5fbGZvUi5taW49dCx0aGlzLm9jdGF2ZXM9dGhpcy5fb2N0YXZlc319KSx0LlBoYXNlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QuU3RlcmVvRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJRXCJdKSx0aGlzLlEuZGlzcG9zZSgpLHRoaXMuUT1udWxsLHRoaXMuX2xmb0wuZGlzcG9zZSgpLHRoaXMuX2xmb0w9bnVsbCx0aGlzLl9sZm9SLmRpc3Bvc2UoKSx0aGlzLl9sZm9SPW51bGw7Zm9yKHZhciBlPTA7ZTx0aGlzLl9maWx0ZXJzTC5sZW5ndGg7ZSsrKXRoaXMuX2ZpbHRlcnNMW2VdLmRpc2Nvbm5lY3QoKSx0aGlzLl9maWx0ZXJzTFtlXT1udWxsO3RoaXMuX2ZpbHRlcnNMPW51bGw7Zm9yKHZhciBpPTA7aTx0aGlzLl9maWx0ZXJzUi5sZW5ndGg7aSsrKXRoaXMuX2ZpbHRlcnNSW2ldLmRpc2Nvbm5lY3QoKSx0aGlzLl9maWx0ZXJzUltpXT1udWxsO3JldHVybiB0aGlzLl9maWx0ZXJzUj1udWxsLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpc30sdC5QaGFzZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlBpbmdQb25nRGVsYXk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImRlbGF5VGltZVwiLFwiZmVlZGJhY2tcIl0sdC5QaW5nUG9uZ0RlbGF5LmRlZmF1bHRzKTt0LlN0ZXJlb1hGZWVkYmFja0VmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5fbGVmdERlbGF5PW5ldyB0LkRlbGF5KDAsZS5tYXhEZWxheVRpbWUpLHRoaXMuX3JpZ2h0RGVsYXk9bmV3IHQuRGVsYXkoMCxlLm1heERlbGF5VGltZSksdGhpcy5fcmlnaHRQcmVEZWxheT1uZXcgdC5EZWxheSgwLGUubWF4RGVsYXlUaW1lKSx0aGlzLmRlbGF5VGltZT1uZXcgdC5TaWduYWwoZS5kZWxheVRpbWUsdC5UeXBlLlRpbWUpLHRoaXMuZWZmZWN0U2VuZEwuY2hhaW4odGhpcy5fbGVmdERlbGF5LHRoaXMuZWZmZWN0UmV0dXJuTCksdGhpcy5lZmZlY3RTZW5kUi5jaGFpbih0aGlzLl9yaWdodFByZURlbGF5LHRoaXMuX3JpZ2h0RGVsYXksdGhpcy5lZmZlY3RSZXR1cm5SKSx0aGlzLmRlbGF5VGltZS5mYW4odGhpcy5fbGVmdERlbGF5LmRlbGF5VGltZSx0aGlzLl9yaWdodERlbGF5LmRlbGF5VGltZSx0aGlzLl9yaWdodFByZURlbGF5LmRlbGF5VGltZSksdGhpcy5fZmVlZGJhY2tMUi5kaXNjb25uZWN0KCksdGhpcy5fZmVlZGJhY2tMUi5jb25uZWN0KHRoaXMuX3JpZ2h0RGVsYXkpLHRoaXMuX3JlYWRPbmx5KFtcImRlbGF5VGltZVwiXSl9LHQuZXh0ZW5kKHQuUGluZ1BvbmdEZWxheSx0LlN0ZXJlb1hGZWVkYmFja0VmZmVjdCksdC5QaW5nUG9uZ0RlbGF5LmRlZmF1bHRzPXtkZWxheVRpbWU6LjI1LG1heERlbGF5VGltZToxfSx0LlBpbmdQb25nRGVsYXkucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TdGVyZW9YRmVlZGJhY2tFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9sZWZ0RGVsYXkuZGlzcG9zZSgpLHRoaXMuX2xlZnREZWxheT1udWxsLHRoaXMuX3JpZ2h0RGVsYXkuZGlzcG9zZSgpLHRoaXMuX3JpZ2h0RGVsYXk9bnVsbCx0aGlzLl9yaWdodFByZURlbGF5LmRpc3Bvc2UoKSx0aGlzLl9yaWdodFByZURlbGF5PW51bGwsdGhpcy5fd3JpdGFibGUoW1wiZGVsYXlUaW1lXCJdKSx0aGlzLmRlbGF5VGltZS5kaXNwb3NlKCksdGhpcy5kZWxheVRpbWU9bnVsbCx0aGlzfSx0LlBpbmdQb25nRGVsYXl9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlBpdGNoU2hpZnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInBpdGNoXCJdLHQuUGl0Y2hTaGlmdC5kZWZhdWx0cyk7dC5GZWVkYmFja0VmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5fZnJlcXVlbmN5PW5ldyB0LlNpZ25hbCgwKSx0aGlzLl9kZWxheUE9bmV3IHQuRGVsYXkoMCwxKSx0aGlzLl9sZm9BPW5ldyB0LkxGTyh7bWluOjAsbWF4Oi4xLHR5cGU6XCJzYXd0b290aFwifSkuY29ubmVjdCh0aGlzLl9kZWxheUEuZGVsYXlUaW1lKSx0aGlzLl9kZWxheUI9bmV3IHQuRGVsYXkoMCwxKSx0aGlzLl9sZm9CPW5ldyB0LkxGTyh7bWluOjAsbWF4Oi4xLHR5cGU6XCJzYXd0b290aFwiLHBoYXNlOjE4MH0pLmNvbm5lY3QodGhpcy5fZGVsYXlCLmRlbGF5VGltZSksdGhpcy5fY3Jvc3NGYWRlPW5ldyB0LkNyb3NzRmFkZSx0aGlzLl9jcm9zc0ZhZGVMRk89bmV3IHQuTEZPKHttaW46MCxtYXg6MSx0eXBlOlwidHJpYW5nbGVcIixwaGFzZTo5MH0pLmNvbm5lY3QodGhpcy5fY3Jvc3NGYWRlLmZhZGUpLHRoaXMuX2ZlZWRiYWNrRGVsYXk9bmV3IHQuRGVsYXkoZS5kZWxheVRpbWUpLHRoaXMuZGVsYXlUaW1lPXRoaXMuX2ZlZWRiYWNrRGVsYXkuZGVsYXlUaW1lLHRoaXMuX3JlYWRPbmx5KFwiZGVsYXlUaW1lXCIpLHRoaXMuX3BpdGNoPWUucGl0Y2gsdGhpcy5fd2luZG93U2l6ZT1lLndpbmRvd1NpemUsdGhpcy5fZGVsYXlBLmNvbm5lY3QodGhpcy5fY3Jvc3NGYWRlLmEpLHRoaXMuX2RlbGF5Qi5jb25uZWN0KHRoaXMuX2Nyb3NzRmFkZS5iKSx0aGlzLl9mcmVxdWVuY3kuZmFuKHRoaXMuX2xmb0EuZnJlcXVlbmN5LHRoaXMuX2xmb0IuZnJlcXVlbmN5LHRoaXMuX2Nyb3NzRmFkZUxGTy5mcmVxdWVuY3kpLHRoaXMuZWZmZWN0U2VuZC5mYW4odGhpcy5fZGVsYXlBLHRoaXMuX2RlbGF5QiksdGhpcy5fY3Jvc3NGYWRlLmNoYWluKHRoaXMuX2ZlZWRiYWNrRGVsYXksdGhpcy5lZmZlY3RSZXR1cm4pO3ZhciBpPXRoaXMubm93KCk7dGhpcy5fbGZvQS5zdGFydChpKSx0aGlzLl9sZm9CLnN0YXJ0KGkpLHRoaXMuX2Nyb3NzRmFkZUxGTy5zdGFydChpKSx0aGlzLndpbmRvd1NpemU9dGhpcy5fd2luZG93U2l6ZX0sdC5leHRlbmQodC5QaXRjaFNoaWZ0LHQuRmVlZGJhY2tFZmZlY3QpLHQuUGl0Y2hTaGlmdC5kZWZhdWx0cz17cGl0Y2g6MCx3aW5kb3dTaXplOi4xLGRlbGF5VGltZTowLGZlZWRiYWNrOjB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBpdGNoU2hpZnQucHJvdG90eXBlLFwicGl0Y2hcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BpdGNofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGl0Y2g9dDt2YXIgZT0wO3Q8MD8odGhpcy5fbGZvQS5taW49MCx0aGlzLl9sZm9BLm1heD10aGlzLl93aW5kb3dTaXplLHRoaXMuX2xmb0IubWluPTAsdGhpcy5fbGZvQi5tYXg9dGhpcy5fd2luZG93U2l6ZSxlPXRoaXMuaW50ZXJ2YWxUb0ZyZXF1ZW5jeVJhdGlvKHQtMSkrMSk6KHRoaXMuX2xmb0EubWluPXRoaXMuX3dpbmRvd1NpemUsdGhpcy5fbGZvQS5tYXg9MCx0aGlzLl9sZm9CLm1pbj10aGlzLl93aW5kb3dTaXplLHRoaXMuX2xmb0IubWF4PTAsZT10aGlzLmludGVydmFsVG9GcmVxdWVuY3lSYXRpbyh0KS0xKSx0aGlzLl9mcmVxdWVuY3kudmFsdWU9ZSooMS4yL3RoaXMuX3dpbmRvd1NpemUpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBpdGNoU2hpZnQucHJvdG90eXBlLFwid2luZG93U2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2luZG93U2l6ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3dpbmRvd1NpemU9dGhpcy50b1NlY29uZHModCksdGhpcy5waXRjaD10aGlzLl9waXRjaH19KSx0LlBpdGNoU2hpZnQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5GZWVkYmFja0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2ZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5fZnJlcXVlbmN5PW51bGwsdGhpcy5fZGVsYXlBLmRpc2Nvbm5lY3QoKSx0aGlzLl9kZWxheUE9bnVsbCx0aGlzLl9kZWxheUIuZGlzY29ubmVjdCgpLHRoaXMuX2RlbGF5Qj1udWxsLHRoaXMuX2xmb0EuZGlzcG9zZSgpLHRoaXMuX2xmb0E9bnVsbCx0aGlzLl9sZm9CLmRpc3Bvc2UoKSx0aGlzLl9sZm9CPW51bGwsdGhpcy5fY3Jvc3NGYWRlLmRpc3Bvc2UoKSx0aGlzLl9jcm9zc0ZhZGU9bnVsbCx0aGlzLl9jcm9zc0ZhZGVMRk8uZGlzcG9zZSgpLHRoaXMuX2Nyb3NzRmFkZUxGTz1udWxsLHRoaXMuX3dyaXRhYmxlKFwiZGVsYXlUaW1lXCIpLHRoaXMuX2ZlZWRiYWNrRGVsYXkuZGlzcG9zZSgpLHRoaXMuX2ZlZWRiYWNrRGVsYXk9bnVsbCx0aGlzLmRlbGF5VGltZT1udWxsLHRoaXN9LHQuUGl0Y2hTaGlmdH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU3RlcmVvRmVlZGJhY2tFZmZlY3Q9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImZlZWRiYWNrXCJdLHQuRmVlZGJhY2tFZmZlY3QuZGVmYXVsdHMpO3QuU3RlcmVvRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLmZlZWRiYWNrPW5ldyB0LlNpZ25hbChlLmZlZWRiYWNrLHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5fZmVlZGJhY2tMPW5ldyB0LkdhaW4sdGhpcy5fZmVlZGJhY2tSPW5ldyB0LkdhaW4sdGhpcy5lZmZlY3RSZXR1cm5MLmNoYWluKHRoaXMuX2ZlZWRiYWNrTCx0aGlzLmVmZmVjdFNlbmRMKSx0aGlzLmVmZmVjdFJldHVyblIuY2hhaW4odGhpcy5fZmVlZGJhY2tSLHRoaXMuZWZmZWN0U2VuZFIpLHRoaXMuZmVlZGJhY2suZmFuKHRoaXMuX2ZlZWRiYWNrTC5nYWluLHRoaXMuX2ZlZWRiYWNrUi5nYWluKSx0aGlzLl9yZWFkT25seShbXCJmZWVkYmFja1wiXSl9LHQuZXh0ZW5kKHQuU3RlcmVvRmVlZGJhY2tFZmZlY3QsdC5GZWVkYmFja0VmZmVjdCksdC5TdGVyZW9GZWVkYmFja0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlN0ZXJlb0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImZlZWRiYWNrXCJdKSx0aGlzLmZlZWRiYWNrLmRpc3Bvc2UoKSx0aGlzLmZlZWRiYWNrPW51bGwsdGhpcy5fZmVlZGJhY2tMLmRpc3Bvc2UoKSx0aGlzLl9mZWVkYmFja0w9bnVsbCx0aGlzLl9mZWVkYmFja1IuZGlzcG9zZSgpLHRoaXMuX2ZlZWRiYWNrUj1udWxsLHRoaXN9LHQuU3RlcmVvRmVlZGJhY2tFZmZlY3R9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlN0ZXJlb1dpZGVuZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcIndpZHRoXCJdLHQuU3RlcmVvV2lkZW5lci5kZWZhdWx0cyk7dC5NaWRTaWRlRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLndpZHRoPW5ldyB0LlNpZ25hbChlLndpZHRoLHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5fbWlkTXVsdD1uZXcgdC5FeHByKFwiJDAgKiAoJDEgKiAoMSAtICQyKSlcIiksdGhpcy5fc2lkZU11bHQ9bmV3IHQuRXhwcihcIiQwICogKCQxICogJDIpXCIpLHRoaXMuX3R3bz1uZXcgdC5TaWduYWwoMiksdGhpcy5fdHdvLmNvbm5lY3QodGhpcy5fbWlkTXVsdCwwLDEpLHRoaXMud2lkdGguY29ubmVjdCh0aGlzLl9taWRNdWx0LDAsMiksdGhpcy5fdHdvLmNvbm5lY3QodGhpcy5fc2lkZU11bHQsMCwxKSx0aGlzLndpZHRoLmNvbm5lY3QodGhpcy5fc2lkZU11bHQsMCwyKSx0aGlzLm1pZFNlbmQuY2hhaW4odGhpcy5fbWlkTXVsdCx0aGlzLm1pZFJldHVybiksdGhpcy5zaWRlU2VuZC5jaGFpbih0aGlzLl9zaWRlTXVsdCx0aGlzLnNpZGVSZXR1cm4pLHRoaXMuX3JlYWRPbmx5KFtcIndpZHRoXCJdKX0sdC5leHRlbmQodC5TdGVyZW9XaWRlbmVyLHQuTWlkU2lkZUVmZmVjdCksdC5TdGVyZW9XaWRlbmVyLmRlZmF1bHRzPXt3aWR0aDouNX0sdC5TdGVyZW9XaWRlbmVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuTWlkU2lkZUVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcIndpZHRoXCJdKSx0aGlzLndpZHRoLmRpc3Bvc2UoKSx0aGlzLndpZHRoPW51bGwsdGhpcy5fbWlkTXVsdC5kaXNwb3NlKCksdGhpcy5fbWlkTXVsdD1udWxsLHRoaXMuX3NpZGVNdWx0LmRpc3Bvc2UoKSx0aGlzLl9zaWRlTXVsdD1udWxsLHRoaXMuX3R3by5kaXNwb3NlKCksdGhpcy5fdHdvPW51bGwsdGhpc30sdC5TdGVyZW9XaWRlbmVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5UcmVtb2xvPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdLHQuVHJlbW9sby5kZWZhdWx0cyk7dC5TdGVyZW9FZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuX2xmb0w9bmV3IHQuTEZPKHtwaGFzZTplLnNwcmVhZCxtaW46MSxtYXg6MH0pLHRoaXMuX2xmb1I9bmV3IHQuTEZPKHtwaGFzZTplLnNwcmVhZCxtaW46MSxtYXg6MH0pLHRoaXMuX2FtcGxpdHVkZUw9bmV3IHQuR2Fpbix0aGlzLl9hbXBsaXR1ZGVSPW5ldyB0LkdhaW4sdGhpcy5mcmVxdWVuY3k9bmV3IHQuU2lnbmFsKGUuZnJlcXVlbmN5LHQuVHlwZS5GcmVxdWVuY3kpLHRoaXMuZGVwdGg9bmV3IHQuU2lnbmFsKGUuZGVwdGgsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdKSx0aGlzLmVmZmVjdFNlbmRMLmNoYWluKHRoaXMuX2FtcGxpdHVkZUwsdGhpcy5lZmZlY3RSZXR1cm5MKSx0aGlzLmVmZmVjdFNlbmRSLmNoYWluKHRoaXMuX2FtcGxpdHVkZVIsdGhpcy5lZmZlY3RSZXR1cm5SKSx0aGlzLl9sZm9MLmNvbm5lY3QodGhpcy5fYW1wbGl0dWRlTC5nYWluKSx0aGlzLl9sZm9SLmNvbm5lY3QodGhpcy5fYW1wbGl0dWRlUi5nYWluKSx0aGlzLmZyZXF1ZW5jeS5mYW4odGhpcy5fbGZvTC5mcmVxdWVuY3ksdGhpcy5fbGZvUi5mcmVxdWVuY3kpLHRoaXMuZGVwdGguZmFuKHRoaXMuX2xmb1IuYW1wbGl0dWRlLHRoaXMuX2xmb0wuYW1wbGl0dWRlKSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuc3ByZWFkPWUuc3ByZWFkfSx0LmV4dGVuZCh0LlRyZW1vbG8sdC5TdGVyZW9FZmZlY3QpLHQuVHJlbW9sby5kZWZhdWx0cz17ZnJlcXVlbmN5OjEwLHR5cGU6XCJzaW5lXCIsZGVwdGg6LjUsc3ByZWFkOjE4MH0sdC5UcmVtb2xvLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGZvTC5zdGFydCh0KSx0aGlzLl9sZm9SLnN0YXJ0KHQpLHRoaXN9LHQuVHJlbW9sby5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGZvTC5zdG9wKHQpLHRoaXMuX2xmb1Iuc3RvcCh0KSx0aGlzfSx0LlRyZW1vbG8ucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmb0wuc3luYyh0KSx0aGlzLl9sZm9SLnN5bmModCksdGhpc30sdC5UcmVtb2xvLnByb3RvdHlwZS51bnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvTC51bnN5bmMoKSx0aGlzLl9sZm9SLnVuc3luYygpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyZW1vbG8ucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvTC50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvTC50eXBlPXQsdGhpcy5fbGZvUi50eXBlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVHJlbW9sby5wcm90b3R5cGUsXCJzcHJlYWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmb1IucGhhc2UtdGhpcy5fbGZvTC5waGFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xmb0wucGhhc2U9OTAtdC8yLHRoaXMuX2xmb1IucGhhc2U9dC8yKzkwfX0pLHQuVHJlbW9sby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlN0ZXJlb0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImZyZXF1ZW5jeVwiLFwiZGVwdGhcIl0pLHRoaXMuX2xmb0wuZGlzcG9zZSgpLHRoaXMuX2xmb0w9bnVsbCx0aGlzLl9sZm9SLmRpc3Bvc2UoKSx0aGlzLl9sZm9SPW51bGwsdGhpcy5fYW1wbGl0dWRlTC5kaXNwb3NlKCksdGhpcy5fYW1wbGl0dWRlTD1udWxsLHRoaXMuX2FtcGxpdHVkZVIuZGlzcG9zZSgpLHRoaXMuX2FtcGxpdHVkZVI9bnVsbCx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGVwdGg9bnVsbCx0aGlzfSx0LlRyZW1vbG99KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlZpYnJhdG89ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiLFwiZGVwdGhcIl0sdC5WaWJyYXRvLmRlZmF1bHRzKTt0LkVmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5fZGVsYXlOb2RlPW5ldyB0LkRlbGF5KDAsZS5tYXhEZWxheSksdGhpcy5fbGZvPW5ldyB0LkxGTyh7dHlwZTplLnR5cGUsbWluOjAsbWF4OmUubWF4RGVsYXksZnJlcXVlbmN5OmUuZnJlcXVlbmN5LHBoYXNlOi05MH0pLnN0YXJ0KCkuY29ubmVjdCh0aGlzLl9kZWxheU5vZGUuZGVsYXlUaW1lKSx0aGlzLmZyZXF1ZW5jeT10aGlzLl9sZm8uZnJlcXVlbmN5LHRoaXMuZGVwdGg9dGhpcy5fbGZvLmFtcGxpdHVkZSx0aGlzLmRlcHRoLnZhbHVlPWUuZGVwdGgsdGhpcy5fcmVhZE9ubHkoW1wiZnJlcXVlbmN5XCIsXCJkZXB0aFwiXSksdGhpcy5lZmZlY3RTZW5kLmNoYWluKHRoaXMuX2RlbGF5Tm9kZSx0aGlzLmVmZmVjdFJldHVybil9LHQuZXh0ZW5kKHQuVmlicmF0byx0LkVmZmVjdCksdC5WaWJyYXRvLmRlZmF1bHRzPXttYXhEZWxheTouMDA1LGZyZXF1ZW5jeTo1LGRlcHRoOi4xLHR5cGU6XCJzaW5lXCJ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlZpYnJhdG8ucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sZm8udHlwZT10fX0pLHQuVmlicmF0by5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QuRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZGVsYXlOb2RlLmRpc3Bvc2UoKSx0aGlzLl9kZWxheU5vZGU9bnVsbCx0aGlzLl9sZm8uZGlzcG9zZSgpLHRoaXMuX2xmbz1udWxsLHRoaXMuX3dyaXRhYmxlKFtcImZyZXF1ZW5jeVwiLFwiZGVwdGhcIl0pLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXB0aD1udWxsfSx0LlZpYnJhdG99KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkV2ZW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJjYWxsYmFja1wiLFwidmFsdWVcIl0sdC5FdmVudC5kZWZhdWx0cyk7dGhpcy5fbG9vcD1lLmxvb3AsdGhpcy5jYWxsYmFjaz1lLmNhbGxiYWNrLHRoaXMudmFsdWU9ZS52YWx1ZSx0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1RpY2tzKGUubG9vcFN0YXJ0KSx0aGlzLl9sb29wRW5kPXRoaXMudG9UaWNrcyhlLmxvb3BFbmQpLHRoaXMuX3N0YXRlPW5ldyB0LlRpbWVsaW5lU3RhdGUodC5TdGF0ZS5TdG9wcGVkKSx0aGlzLl9wbGF5YmFja1JhdGU9MSx0aGlzLl9zdGFydE9mZnNldD0wLHRoaXMucHJvYmFiaWxpdHk9ZS5wcm9iYWJpbGl0eSx0aGlzLmh1bWFuaXplPWUuaHVtYW5pemUsdGhpcy5tdXRlPWUubXV0ZSx0aGlzLnBsYXliYWNrUmF0ZT1lLnBsYXliYWNrUmF0ZX0sdC5leHRlbmQodC5FdmVudCksdC5FdmVudC5kZWZhdWx0cz17Y2FsbGJhY2s6dC5ub09wLGxvb3A6ITEsbG9vcEVuZDpcIjFtXCIsbG9vcFN0YXJ0OjAscGxheWJhY2tSYXRlOjEsdmFsdWU6bnVsbCxwcm9iYWJpbGl0eToxLG11dGU6ITEsaHVtYW5pemU6ITF9LHQuRXZlbnQucHJvdG90eXBlLl9yZXNjaGVkdWxlRXZlbnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPXRoaXMuZGVmYXVsdEFyZyhlLC0xKSx0aGlzLl9zdGF0ZS5mb3JFYWNoRnJvbShlLGZ1bmN0aW9uKGUpe3ZhciBpO2lmKGUuc3RhdGU9PT10LlN0YXRlLlN0YXJ0ZWQpe3RoaXMuaXNVbmRlZihlLmlkKXx8dC5UcmFuc3BvcnQuY2xlYXIoZS5pZCk7dmFyIG49ZS50aW1lK01hdGgucm91bmQodGhpcy5zdGFydE9mZnNldC90aGlzLl9wbGF5YmFja1JhdGUpO2lmKHRoaXMuX2xvb3Ape2k9MS8wLHRoaXMuaXNOdW1iZXIodGhpcy5fbG9vcCkmJihpPXRoaXMuX2xvb3AqdGhpcy5fZ2V0TG9vcER1cmF0aW9uKCkpO3ZhciBzPXRoaXMuX3N0YXRlLmdldEFmdGVyKG4pO251bGwhPT1zJiYoaT1NYXRoLm1pbihpLHMudGltZS1uKSksaSE9PTEvMCYmKHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHQuU3RhdGUuU3RvcHBlZCxuK2krMSksaT10LlRpbWUoaSxcImlcIikpO3ZhciBvPXQuVGltZSh0aGlzLl9nZXRMb29wRHVyYXRpb24oKSxcImlcIik7ZS5pZD10LlRyYW5zcG9ydC5zY2hlZHVsZVJlcGVhdCh0aGlzLl90aWNrLmJpbmQodGhpcyksbyx0LlRyYW5zcG9ydFRpbWUobixcImlcIiksaSl9ZWxzZSBlLmlkPXQuVHJhbnNwb3J0LnNjaGVkdWxlKHRoaXMuX3RpY2suYmluZCh0aGlzKSxuK1wiaVwiKX19LmJpbmQodGhpcykpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkV2ZW50LnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZSh0LlRyYW5zcG9ydC50aWNrcyl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRXZlbnQucHJvdG90eXBlLFwic3RhcnRPZmZzZXRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0T2Zmc2V0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc3RhcnRPZmZzZXQ9dH19KSx0LkV2ZW50LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihlKXtyZXR1cm4gZT10aGlzLnRvVGlja3MoZSksdGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUoZSk9PT10LlN0YXRlLlN0b3BwZWQmJih0aGlzLl9zdGF0ZS5hZGQoe3N0YXRlOnQuU3RhdGUuU3RhcnRlZCx0aW1lOmUsaWQ6dm9pZCAwfSksdGhpcy5fcmVzY2hlZHVsZUV2ZW50cyhlKSksdGhpc30sdC5FdmVudC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbihlKXtpZih0aGlzLmNhbmNlbChlKSxlPXRoaXMudG9UaWNrcyhlKSx0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZShlKT09PXQuU3RhdGUuU3RhcnRlZCl7dGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUodC5TdGF0ZS5TdG9wcGVkLGUpO3ZhciBpPXRoaXMuX3N0YXRlLmdldEJlZm9yZShlKSxuPWU7bnVsbCE9PWkmJihuPWkudGltZSksdGhpcy5fcmVzY2hlZHVsZUV2ZW50cyhuKX1yZXR1cm4gdGhpc30sdC5FdmVudC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKGUpe3JldHVybiBlPXRoaXMuZGVmYXVsdEFyZyhlLC0xLzApLGU9dGhpcy50b1RpY2tzKGUpLHRoaXMuX3N0YXRlLmZvckVhY2hGcm9tKGUsZnVuY3Rpb24oZSl7dC5UcmFuc3BvcnQuY2xlYXIoZS5pZCl9KSx0aGlzLl9zdGF0ZS5jYW5jZWwoZSksdGhpc30sdC5FdmVudC5wcm90b3R5cGUuX3RpY2s9ZnVuY3Rpb24oZSl7aWYoIXRoaXMubXV0ZSYmdGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUodC5UcmFuc3BvcnQudGlja3MpPT09dC5TdGF0ZS5TdGFydGVkKXtpZih0aGlzLnByb2JhYmlsaXR5PDEmJk1hdGgucmFuZG9tKCk+dGhpcy5wcm9iYWJpbGl0eSlyZXR1cm47aWYodGhpcy5odW1hbml6ZSl7dmFyIGk9LjAyO3RoaXMuaXNCb29sZWFuKHRoaXMuaHVtYW5pemUpfHwoaT10aGlzLnRvU2Vjb25kcyh0aGlzLmh1bWFuaXplKSksZSs9KDIqTWF0aC5yYW5kb20oKS0xKSppfXRoaXMuY2FsbGJhY2soZSx0aGlzLnZhbHVlKX19LHQuRXZlbnQucHJvdG90eXBlLl9nZXRMb29wRHVyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5yb3VuZCgodGhpcy5fbG9vcEVuZC10aGlzLl9sb29wU3RhcnQpL3RoaXMuX3BsYXliYWNrUmF0ZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkV2ZW50LnByb3RvdHlwZSxcImxvb3BcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvb3B9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wPXQsdGhpcy5fcmVzY2hlZHVsZUV2ZW50cygpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkV2ZW50LnByb3RvdHlwZSxcInBsYXliYWNrUmF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxheWJhY2tSYXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGxheWJhY2tSYXRlPXQsdGhpcy5fcmVzY2hlZHVsZUV2ZW50cygpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkV2ZW50LnByb3RvdHlwZSxcImxvb3BFbmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuVHJhbnNwb3J0VGltZSh0aGlzLl9sb29wRW5kLFwiaVwiKS50b05vdGF0aW9uKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wRW5kPXRoaXMudG9UaWNrcyh0KSx0aGlzLl9sb29wJiZ0aGlzLl9yZXNjaGVkdWxlRXZlbnRzKCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRXZlbnQucHJvdG90eXBlLFwibG9vcFN0YXJ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LlRyYW5zcG9ydFRpbWUodGhpcy5fbG9vcFN0YXJ0LFwiaVwiKS50b05vdGF0aW9uKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1RpY2tzKHQpLHRoaXMuX2xvb3AmJnRoaXMuX3Jlc2NoZWR1bGVFdmVudHMoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5FdmVudC5wcm90b3R5cGUsXCJwcm9ncmVzc1wiLHtnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9sb29wKXt2YXIgZT10LlRyYW5zcG9ydC50aWNrcyxpPXRoaXMuX3N0YXRlLmdldChlKTtpZihudWxsIT09aSYmaS5zdGF0ZT09PXQuU3RhdGUuU3RhcnRlZCl7dmFyIG49dGhpcy5fZ2V0TG9vcER1cmF0aW9uKCk7cmV0dXJuKGUtaS50aW1lKSVuL259cmV0dXJuIDB9cmV0dXJuIDB9fSksdC5FdmVudC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuY2FuY2VsKCksdGhpcy5fc3RhdGUuZGlzcG9zZSgpLHRoaXMuX3N0YXRlPW51bGwsdGhpcy5jYWxsYmFjaz1udWxsLHRoaXMudmFsdWU9bnVsbH0sdC5FdmVudH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTG9vcD1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiY2FsbGJhY2tcIixcImludGVydmFsXCJdLHQuTG9vcC5kZWZhdWx0cyk7dGhpcy5fZXZlbnQ9bmV3IHQuRXZlbnQoe2NhbGxiYWNrOnRoaXMuX3RpY2suYmluZCh0aGlzKSxsb29wOiEwLGxvb3BFbmQ6ZS5pbnRlcnZhbCxwbGF5YmFja1JhdGU6ZS5wbGF5YmFja1JhdGUscHJvYmFiaWxpdHk6ZS5wcm9iYWJpbGl0eX0pLHRoaXMuY2FsbGJhY2s9ZS5jYWxsYmFjayx0aGlzLml0ZXJhdGlvbnM9ZS5pdGVyYXRpb25zfSx0LmV4dGVuZCh0Lkxvb3ApLHQuTG9vcC5kZWZhdWx0cz17aW50ZXJ2YWw6XCI0blwiLGNhbGxiYWNrOnQubm9PcCxwbGF5YmFja1JhdGU6MSxpdGVyYXRpb25zOjEvMCxwcm9iYWJpbGl0eTohMCxtdXRlOiExfSx0Lkxvb3AucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ldmVudC5zdGFydCh0KSx0aGlzfSx0Lkxvb3AucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50LnN0b3AodCksdGhpc30sdC5Mb29wLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50LmNhbmNlbCh0KSx0aGlzfSx0Lkxvb3AucHJvdG90eXBlLl90aWNrPWZ1bmN0aW9uKHQpe3RoaXMuY2FsbGJhY2sodCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxvb3AucHJvdG90eXBlLFwic3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50LnN0YXRlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxvb3AucHJvdG90eXBlLFwicHJvZ3Jlc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50LnByb2dyZXNzfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxvb3AucHJvdG90eXBlLFwiaW50ZXJ2YWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50Lmxvb3BFbmR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ldmVudC5sb29wRW5kPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTG9vcC5wcm90b3R5cGUsXCJwbGF5YmFja1JhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50LnBsYXliYWNrUmF0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V2ZW50LnBsYXliYWNrUmF0ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxvb3AucHJvdG90eXBlLFwiaHVtYW5pemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50Lmh1bWFuaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXZlbnQuaHVtYW5pemU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Mb29wLnByb3RvdHlwZSxcInByb2JhYmlsaXR5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudC5wcm9iYWJpbGl0eX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V2ZW50LnByb2JhYmlsaXR5PXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTG9vcC5wcm90b3R5cGUsXCJtdXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudC5tdXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXZlbnQubXV0ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxvb3AucHJvdG90eXBlLFwiaXRlcmF0aW9uc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMD09PXRoaXMuX2V2ZW50Lmxvb3A/MS8wOnRoaXMuX2V2ZW50Lmxvb3B9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ldmVudC5sb29wPXQ9PT0xLzB8fHR9fSksdC5Mb29wLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fZXZlbnQuZGlzcG9zZSgpLHRoaXMuX2V2ZW50PW51bGwsdGhpcy5jYWxsYmFjaz1udWxsfSx0Lkxvb3B9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlBhcnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImNhbGxiYWNrXCIsXCJldmVudHNcIl0sdC5QYXJ0LmRlZmF1bHRzKTt0aGlzLl9sb29wPWUubG9vcCx0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1RpY2tzKGUubG9vcFN0YXJ0KSx0aGlzLl9sb29wRW5kPXRoaXMudG9UaWNrcyhlLmxvb3BFbmQpLHRoaXMuX3BsYXliYWNrUmF0ZT1lLnBsYXliYWNrUmF0ZSx0aGlzLl9wcm9iYWJpbGl0eT1lLnByb2JhYmlsaXR5LHRoaXMuX2h1bWFuaXplPWUuaHVtYW5pemUsdGhpcy5fc3RhcnRPZmZzZXQ9MCx0aGlzLl9zdGF0ZT1uZXcgdC5UaW1lbGluZVN0YXRlKHQuU3RhdGUuU3RvcHBlZCksdGhpcy5fZXZlbnRzPVtdLHRoaXMuY2FsbGJhY2s9ZS5jYWxsYmFjayx0aGlzLm11dGU9ZS5tdXRlO3ZhciBpPXRoaXMuZGVmYXVsdEFyZyhlLmV2ZW50cyxbXSk7aWYoIXRoaXMuaXNVbmRlZihlLmV2ZW50cykpZm9yKHZhciBuPTA7bjxpLmxlbmd0aDtuKyspQXJyYXkuaXNBcnJheShpW25dKT90aGlzLmFkZChpW25dWzBdLGlbbl1bMV0pOnRoaXMuYWRkKGlbbl0pfSx0LmV4dGVuZCh0LlBhcnQsdC5FdmVudCksdC5QYXJ0LmRlZmF1bHRzPXtjYWxsYmFjazp0Lm5vT3AsbG9vcDohMSxsb29wRW5kOlwiMW1cIixsb29wU3RhcnQ6MCxwbGF5YmFja1JhdGU6MSxwcm9iYWJpbGl0eToxLGh1bWFuaXplOiExLG11dGU6ITF9LHQuUGFydC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSxpKXt2YXIgbj10aGlzLnRvVGlja3MoZSk7cmV0dXJuIHRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKG4pIT09dC5TdGF0ZS5TdGFydGVkJiYoaT10aGlzLl9sb29wP3RoaXMuZGVmYXVsdEFyZyhpLHRoaXMuX2xvb3BTdGFydCk6dGhpcy5kZWZhdWx0QXJnKGksMCksaT10aGlzLnRvVGlja3MoaSksdGhpcy5fc3RhdGUuYWRkKHtzdGF0ZTp0LlN0YXRlLlN0YXJ0ZWQsdGltZTpuLG9mZnNldDppfSksdGhpcy5fZm9yRWFjaChmdW5jdGlvbih0KXt0aGlzLl9zdGFydE5vdGUodCxuLGkpfSkpLHRoaXN9LHQuUGFydC5wcm90b3R5cGUuX3N0YXJ0Tm90ZT1mdW5jdGlvbihlLGksbil7aS09bix0aGlzLl9sb29wP2Uuc3RhcnRPZmZzZXQ+PXRoaXMuX2xvb3BTdGFydCYmZS5zdGFydE9mZnNldDx0aGlzLl9sb29wRW5kPyhlLnN0YXJ0T2Zmc2V0PG4mJihpKz10aGlzLl9nZXRMb29wRHVyYXRpb24oKSksZS5zdGFydCh0LlRyYW5zcG9ydFRpbWUoaSxcImlcIikpKTplLnN0YXJ0T2Zmc2V0PHRoaXMuX2xvb3BTdGFydCYmZS5zdGFydE9mZnNldD49biYmKGUubG9vcD0hMSxlLnN0YXJ0KHQuVHJhbnNwb3J0VGltZShpLFwiaVwiKSkpOmUuc3RhcnRPZmZzZXQ+PW4mJmUuc3RhcnQodC5UcmFuc3BvcnRUaW1lKGksXCJpXCIpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFydC5wcm90b3R5cGUsXCJzdGFydE9mZnNldFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhcnRPZmZzZXR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zdGFydE9mZnNldD10LHRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCl7dC5zdGFydE9mZnNldCs9dGhpcy5fc3RhcnRPZmZzZXR9KX19KSx0LlBhcnQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy50b1RpY2tzKGUpO3JldHVybiB0aGlzLl9zdGF0ZS5jYW5jZWwoaSksdGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUodC5TdGF0ZS5TdG9wcGVkLGkpLHRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCl7dC5zdG9wKGUpfSksdGhpc30sdC5QYXJ0LnByb3RvdHlwZS5hdD1mdW5jdGlvbihlLGkpe2U9dC5UcmFuc3BvcnRUaW1lKGUpO2Zvcih2YXIgbj10LlRpbWUoMSxcImlcIikudG9TZWNvbmRzKCkscz0wO3M8dGhpcy5fZXZlbnRzLmxlbmd0aDtzKyspe3ZhciBvPXRoaXMuX2V2ZW50c1tzXTtpZihNYXRoLmFicyhlLnRvVGlja3MoKS1vLnN0YXJ0T2Zmc2V0KTxuKXJldHVybiB0aGlzLmlzVW5kZWYoaSl8fChvLnZhbHVlPWkpLG99cmV0dXJuIHRoaXMuaXNVbmRlZihpKT9udWxsOih0aGlzLmFkZChlLGkpLHRoaXMuX2V2ZW50c1t0aGlzLl9ldmVudHMubGVuZ3RoLTFdKX0sdC5QYXJ0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSxpKXtlLmhhc093blByb3BlcnR5KFwidGltZVwiKSYmKGU9KGk9ZSkudGltZSksZT10aGlzLnRvVGlja3MoZSk7dmFyIG47cmV0dXJuIGkgaW5zdGFuY2VvZiB0LkV2ZW50PyhuPWkpLmNhbGxiYWNrPXRoaXMuX3RpY2suYmluZCh0aGlzKTpuPW5ldyB0LkV2ZW50KHtjYWxsYmFjazp0aGlzLl90aWNrLmJpbmQodGhpcyksdmFsdWU6aX0pLG4uc3RhcnRPZmZzZXQ9ZSxuLnNldCh7bG9vcEVuZDp0aGlzLmxvb3BFbmQsbG9vcFN0YXJ0OnRoaXMubG9vcFN0YXJ0LGxvb3A6dGhpcy5sb29wLGh1bWFuaXplOnRoaXMuaHVtYW5pemUscGxheWJhY2tSYXRlOnRoaXMucGxheWJhY2tSYXRlLHByb2JhYmlsaXR5OnRoaXMucHJvYmFiaWxpdHl9KSx0aGlzLl9ldmVudHMucHVzaChuKSx0aGlzLl9yZXN0YXJ0RXZlbnQobiksdGhpc30sdC5QYXJ0LnByb3RvdHlwZS5fcmVzdGFydEV2ZW50PWZ1bmN0aW9uKGUpe3RoaXMuX3N0YXRlLmZvckVhY2goZnVuY3Rpb24oaSl7aS5zdGF0ZT09PXQuU3RhdGUuU3RhcnRlZD90aGlzLl9zdGFydE5vdGUoZSxpLnRpbWUsaS5vZmZzZXQpOmUuc3RvcCh0LlRyYW5zcG9ydFRpbWUoaS50aW1lLFwiaVwiKSl9LmJpbmQodGhpcykpfSx0LlBhcnQucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihlLGkpe2UuaGFzT3duUHJvcGVydHkoXCJ0aW1lXCIpJiYoZT0oaT1lKS50aW1lKSxlPXRoaXMudG9UaWNrcyhlKTtmb3IodmFyIG49dGhpcy5fZXZlbnRzLmxlbmd0aC0xO24+PTA7bi0tKXt2YXIgcz10aGlzLl9ldmVudHNbbl07cyBpbnN0YW5jZW9mIHQuUGFydD9zLnJlbW92ZShlLGkpOnMuc3RhcnRPZmZzZXQ9PT1lJiYodGhpcy5pc1VuZGVmKGkpfHwhdGhpcy5pc1VuZGVmKGkpJiZzLnZhbHVlPT09aSkmJih0aGlzLl9ldmVudHMuc3BsaWNlKG4sMSkscy5kaXNwb3NlKCkpfXJldHVybiB0aGlzfSx0LlBhcnQucHJvdG90eXBlLnJlbW92ZUFsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZGlzcG9zZSgpfSksdGhpcy5fZXZlbnRzPVtdLHRoaXN9LHQuUGFydC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9UaWNrcyh0KSx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuY2FuY2VsKHQpfSksdGhpcy5fc3RhdGUuY2FuY2VsKHQpLHRoaXN9LHQuUGFydC5wcm90b3R5cGUuX2ZvckVhY2g9ZnVuY3Rpb24oZSxpKXtpPXRoaXMuZGVmYXVsdEFyZyhpLHRoaXMpO2Zvcih2YXIgbj10aGlzLl9ldmVudHMubGVuZ3RoLTE7bj49MDtuLS0pe3ZhciBzPXRoaXMuX2V2ZW50c1tuXTtzIGluc3RhbmNlb2YgdC5QYXJ0P3MuX2ZvckVhY2goZSxpKTplLmNhbGwoaSxzKX1yZXR1cm4gdGhpc30sdC5QYXJ0LnByb3RvdHlwZS5fc2V0QWxsPWZ1bmN0aW9uKHQsZSl7dGhpcy5fZm9yRWFjaChmdW5jdGlvbihpKXtpW3RdPWV9KX0sdC5QYXJ0LnByb3RvdHlwZS5fdGljaz1mdW5jdGlvbih0LGUpe3RoaXMubXV0ZXx8dGhpcy5jYWxsYmFjayh0LGUpfSx0LlBhcnQucHJvdG90eXBlLl90ZXN0TG9vcEJvdW5kcmllcz1mdW5jdGlvbihlKXtlLnN0YXJ0T2Zmc2V0PHRoaXMuX2xvb3BTdGFydHx8ZS5zdGFydE9mZnNldD49dGhpcy5fbG9vcEVuZD9lLmNhbmNlbCgwKTplLnN0YXRlPT09dC5TdGF0ZS5TdG9wcGVkJiZ0aGlzLl9yZXN0YXJ0RXZlbnQoZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhcnQucHJvdG90eXBlLFwicHJvYmFiaWxpdHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb2JhYmlsaXR5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcHJvYmFiaWxpdHk9dCx0aGlzLl9zZXRBbGwoXCJwcm9iYWJpbGl0eVwiLHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhcnQucHJvdG90eXBlLFwiaHVtYW5pemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h1bWFuaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faHVtYW5pemU9dCx0aGlzLl9zZXRBbGwoXCJodW1hbml6ZVwiLHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhcnQucHJvdG90eXBlLFwibG9vcFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9vcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3A9dCx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuX2xvb3BTdGFydD10aGlzLl9sb29wU3RhcnQsZS5fbG9vcEVuZD10aGlzLl9sb29wRW5kLGUubG9vcD10LHRoaXMuX3Rlc3RMb29wQm91bmRyaWVzKGUpfSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFydC5wcm90b3R5cGUsXCJsb29wRW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LlRyYW5zcG9ydFRpbWUodGhpcy5fbG9vcEVuZCxcImlcIikudG9Ob3RhdGlvbigpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcEVuZD10aGlzLnRvVGlja3ModCksdGhpcy5fbG9vcCYmdGhpcy5fZm9yRWFjaChmdW5jdGlvbihlKXtlLmxvb3BFbmQ9dCx0aGlzLl90ZXN0TG9vcEJvdW5kcmllcyhlKX0pfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhcnQucHJvdG90eXBlLFwibG9vcFN0YXJ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LlRyYW5zcG9ydFRpbWUodGhpcy5fbG9vcFN0YXJ0LFwiaVwiKS50b05vdGF0aW9uKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1RpY2tzKHQpLHRoaXMuX2xvb3AmJnRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCl7dC5sb29wU3RhcnQ9dGhpcy5sb29wU3RhcnQsdGhpcy5fdGVzdExvb3BCb3VuZHJpZXModCl9KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYXJ0LnByb3RvdHlwZSxcInBsYXliYWNrUmF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxheWJhY2tSYXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGxheWJhY2tSYXRlPXQsdGhpcy5fc2V0QWxsKFwicGxheWJhY2tSYXRlXCIsdCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFydC5wcm90b3R5cGUsXCJsZW5ndGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50cy5sZW5ndGh9fSksdC5QYXJ0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3ZlQWxsKCksdGhpcy5fc3RhdGUuZGlzcG9zZSgpLHRoaXMuX3N0YXRlPW51bGwsdGhpcy5jYWxsYmFjaz1udWxsLHRoaXMuX2V2ZW50cz1udWxsLHRoaXN9LHQuUGFydH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuUGF0dGVybj1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiY2FsbGJhY2tcIixcInZhbHVlc1wiLFwicGF0dGVyblwiXSx0LlBhdHRlcm4uZGVmYXVsdHMpO3QuTG9vcC5jYWxsKHRoaXMsZSksdGhpcy5fcGF0dGVybj1uZXcgdC5DdHJsUGF0dGVybih7dmFsdWVzOmUudmFsdWVzLHR5cGU6ZS5wYXR0ZXJuLGluZGV4OmUuaW5kZXh9KX0sdC5leHRlbmQodC5QYXR0ZXJuLHQuTG9vcCksdC5QYXR0ZXJuLmRlZmF1bHRzPXtwYXR0ZXJuOnQuQ3RybFBhdHRlcm4uVHlwZS5VcCx2YWx1ZXM6W119LHQuUGF0dGVybi5wcm90b3R5cGUuX3RpY2s9ZnVuY3Rpb24odCl7dGhpcy5jYWxsYmFjayh0LHRoaXMuX3BhdHRlcm4udmFsdWUpLHRoaXMuX3BhdHRlcm4ubmV4dCgpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYXR0ZXJuLnByb3RvdHlwZSxcImluZGV4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXR0ZXJuLmluZGV4fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGF0dGVybi5pbmRleD10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhdHRlcm4ucHJvdG90eXBlLFwidmFsdWVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXR0ZXJuLnZhbHVlc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhdHRlcm4udmFsdWVzPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGF0dGVybi5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGF0dGVybi52YWx1ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYXR0ZXJuLnByb3RvdHlwZSxcInBhdHRlcm5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdHRlcm4udHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhdHRlcm4udHlwZT10fX0pLHQuUGF0dGVybi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QuTG9vcC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3BhdHRlcm4uZGlzcG9zZSgpLHRoaXMuX3BhdHRlcm49bnVsbH0sdC5QYXR0ZXJufSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5TZXF1ZW5jZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiY2FsbGJhY2tcIixcImV2ZW50c1wiLFwic3ViZGl2aXNpb25cIl0sdC5TZXF1ZW5jZS5kZWZhdWx0cyksaT1lLmV2ZW50cztpZihkZWxldGUgZS5ldmVudHMsdC5QYXJ0LmNhbGwodGhpcyxlKSx0aGlzLl9zdWJkaXZpc2lvbj10aGlzLnRvVGlja3MoZS5zdWJkaXZpc2lvbiksdGhpcy5pc1VuZGVmKGUubG9vcEVuZCkmJiF0aGlzLmlzVW5kZWYoaSkmJih0aGlzLl9sb29wRW5kPWkubGVuZ3RoKnRoaXMuX3N1YmRpdmlzaW9uKSx0aGlzLl9sb29wPSEwLCF0aGlzLmlzVW5kZWYoaSkpZm9yKHZhciBuPTA7bjxpLmxlbmd0aDtuKyspdGhpcy5hZGQobixpW25dKX0sdC5leHRlbmQodC5TZXF1ZW5jZSx0LlBhcnQpLHQuU2VxdWVuY2UuZGVmYXVsdHM9e3N1YmRpdmlzaW9uOlwiNG5cIn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2VxdWVuY2UucHJvdG90eXBlLFwic3ViZGl2aXNpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuVGltZSh0aGlzLl9zdWJkaXZpc2lvbixcImlcIikudG9Ob3RhdGlvbigpfX0pLHQuU2VxdWVuY2UucHJvdG90eXBlLmF0PWZ1bmN0aW9uKGUsaSl7cmV0dXJuIHRoaXMuaXNBcnJheShpKSYmdGhpcy5yZW1vdmUoZSksdC5QYXJ0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsdGhpcy5faW5kZXhUaW1lKGUpLGkpfSx0LlNlcXVlbmNlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSxpKXtpZihudWxsPT09aSlyZXR1cm4gdGhpcztpZih0aGlzLmlzQXJyYXkoaSkpe3ZhciBuPU1hdGgucm91bmQodGhpcy5fc3ViZGl2aXNpb24vaS5sZW5ndGgpO2k9bmV3IHQuU2VxdWVuY2UodGhpcy5fdGljay5iaW5kKHRoaXMpLGksdC5UaW1lKG4sXCJpXCIpKX1yZXR1cm4gdC5QYXJ0LnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLHRoaXMuX2luZGV4VGltZShlKSxpKSx0aGlzfSx0LlNlcXVlbmNlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdC5QYXJ0LnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzLHRoaXMuX2luZGV4VGltZShlKSxpKSx0aGlzfSx0LlNlcXVlbmNlLnByb3RvdHlwZS5faW5kZXhUaW1lPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgdC5UcmFuc3BvcnRUaW1lP2U6dC5UcmFuc3BvcnRUaW1lKGUqdGhpcy5fc3ViZGl2aXNpb24rdGhpcy5zdGFydE9mZnNldCxcImlcIil9LHQuU2VxdWVuY2UucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5QYXJ0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpc30sdC5TZXF1ZW5jZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuUHVsc2VPc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcIndpZHRoXCJdLHQuT3NjaWxsYXRvci5kZWZhdWx0cyk7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMud2lkdGg9bmV3IHQuU2lnbmFsKGUud2lkdGgsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl93aWR0aEdhdGU9bmV3IHQuR2Fpbix0aGlzLl9zYXd0b290aD1uZXcgdC5Pc2NpbGxhdG9yKHtmcmVxdWVuY3k6ZS5mcmVxdWVuY3ksZGV0dW5lOmUuZGV0dW5lLHR5cGU6XCJzYXd0b290aFwiLHBoYXNlOmUucGhhc2V9KSx0aGlzLmZyZXF1ZW5jeT10aGlzLl9zYXd0b290aC5mcmVxdWVuY3ksdGhpcy5kZXR1bmU9dGhpcy5fc2F3dG9vdGguZGV0dW5lLHRoaXMuX3RocmVzaD1uZXcgdC5XYXZlU2hhcGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0PDA/LTE6MX0pLHRoaXMuX3Nhd3Rvb3RoLmNoYWluKHRoaXMuX3RocmVzaCx0aGlzLm91dHB1dCksdGhpcy53aWR0aC5jaGFpbih0aGlzLl93aWR0aEdhdGUsdGhpcy5fdGhyZXNoKSx0aGlzLl9yZWFkT25seShbXCJ3aWR0aFwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pfSx0LmV4dGVuZCh0LlB1bHNlT3NjaWxsYXRvcix0Lk9zY2lsbGF0b3IpLHQuUHVsc2VPc2NpbGxhdG9yLmRlZmF1bHRzPXtmcmVxdWVuY3k6NDQwLGRldHVuZTowLHBoYXNlOjAsd2lkdGg6LjJ9LHQuUHVsc2VPc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RhcnQ9ZnVuY3Rpb24odCl7dD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zYXd0b290aC5zdGFydCh0KSx0aGlzLl93aWR0aEdhdGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgxLHQpfSx0LlB1bHNlT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0b3A9ZnVuY3Rpb24odCl7dD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zYXd0b290aC5zdG9wKHQpLHRoaXMuX3dpZHRoR2F0ZS5nYWluLnNldFZhbHVlQXRUaW1lKDAsdCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlB1bHNlT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2F3dG9vdGgucGhhc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zYXd0b290aC5waGFzZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlB1bHNlT3NjaWxsYXRvci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVyblwicHVsc2VcIn19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QdWxzZU9zY2lsbGF0b3IucHJvdG90eXBlLFwicGFydGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuW119fSksdC5QdWxzZU9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zYXd0b290aC5kaXNwb3NlKCksdGhpcy5fc2F3dG9vdGg9bnVsbCx0aGlzLl93cml0YWJsZShbXCJ3aWR0aFwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pLHRoaXMud2lkdGguZGlzcG9zZSgpLHRoaXMud2lkdGg9bnVsbCx0aGlzLl93aWR0aEdhdGUuZGlzcG9zZSgpLHRoaXMuX3dpZHRoR2F0ZT1udWxsLHRoaXMuX3RocmVzaC5kaXNwb3NlKCksdGhpcy5fdGhyZXNoPW51bGwsdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZT1udWxsLHRoaXN9LHQuUHVsc2VPc2NpbGxhdG9yfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5QV01Pc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcIm1vZHVsYXRpb25GcmVxdWVuY3lcIl0sdC5QV01Pc2NpbGxhdG9yLmRlZmF1bHRzKTt0LlNvdXJjZS5jYWxsKHRoaXMsZSksdGhpcy5fcHVsc2U9bmV3IHQuUHVsc2VPc2NpbGxhdG9yKGUubW9kdWxhdGlvbkZyZXF1ZW5jeSksdGhpcy5fcHVsc2UuX3Nhd3Rvb3RoLnR5cGU9XCJzaW5lXCIsdGhpcy5fbW9kdWxhdG9yPW5ldyB0Lk9zY2lsbGF0b3Ioe2ZyZXF1ZW5jeTplLmZyZXF1ZW5jeSxkZXR1bmU6ZS5kZXR1bmUscGhhc2U6ZS5waGFzZX0pLHRoaXMuX3NjYWxlPW5ldyB0Lk11bHRpcGx5KDIpLHRoaXMuZnJlcXVlbmN5PXRoaXMuX21vZHVsYXRvci5mcmVxdWVuY3ksdGhpcy5kZXR1bmU9dGhpcy5fbW9kdWxhdG9yLmRldHVuZSx0aGlzLm1vZHVsYXRpb25GcmVxdWVuY3k9dGhpcy5fcHVsc2UuZnJlcXVlbmN5LHRoaXMuX21vZHVsYXRvci5jaGFpbih0aGlzLl9zY2FsZSx0aGlzLl9wdWxzZS53aWR0aCksdGhpcy5fcHVsc2UuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wibW9kdWxhdGlvbkZyZXF1ZW5jeVwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pfSx0LmV4dGVuZCh0LlBXTU9zY2lsbGF0b3IsdC5Pc2NpbGxhdG9yKSx0LlBXTU9zY2lsbGF0b3IuZGVmYXVsdHM9e2ZyZXF1ZW5jeTo0NDAsZGV0dW5lOjAscGhhc2U6MCxtb2R1bGF0aW9uRnJlcXVlbmN5Oi40fSx0LlBXTU9zY2lsbGF0b3IucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX21vZHVsYXRvci5zdGFydCh0KSx0aGlzLl9wdWxzZS5zdGFydCh0KX0sdC5QV01Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX21vZHVsYXRvci5zdG9wKHQpLHRoaXMuX3B1bHNlLnN0b3AodCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBXTU9zY2lsbGF0b3IucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInB3bVwifX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBXTU9zY2lsbGF0b3IucHJvdG90eXBlLFwicGFydGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuW119fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUFdNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxhdG9yLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbW9kdWxhdG9yLnBoYXNlPXR9fSksdC5QV01Pc2NpbGxhdG9yLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fcHVsc2UuZGlzcG9zZSgpLHRoaXMuX3B1bHNlPW51bGwsdGhpcy5fc2NhbGUuZGlzcG9zZSgpLHRoaXMuX3NjYWxlPW51bGwsdGhpcy5fbW9kdWxhdG9yLmRpc3Bvc2UoKSx0aGlzLl9tb2R1bGF0b3I9bnVsbCx0aGlzLl93cml0YWJsZShbXCJtb2R1bGF0aW9uRnJlcXVlbmN5XCIsXCJmcmVxdWVuY3lcIixcImRldHVuZVwiXSksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZT1udWxsLHRoaXMubW9kdWxhdGlvbkZyZXF1ZW5jeT1udWxsLHRoaXN9LHQuUFdNT3NjaWxsYXRvcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRk1Pc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcInR5cGVcIixcIm1vZHVsYXRpb25UeXBlXCJdLHQuRk1Pc2NpbGxhdG9yLmRlZmF1bHRzKTt0LlNvdXJjZS5jYWxsKHRoaXMsZSksdGhpcy5fY2Fycmllcj1uZXcgdC5Pc2NpbGxhdG9yKGUuZnJlcXVlbmN5LGUudHlwZSksdGhpcy5mcmVxdWVuY3k9bmV3IHQuU2lnbmFsKGUuZnJlcXVlbmN5LHQuVHlwZS5GcmVxdWVuY3kpLHRoaXMuZGV0dW5lPXRoaXMuX2NhcnJpZXIuZGV0dW5lLHRoaXMuZGV0dW5lLnZhbHVlPWUuZGV0dW5lLHRoaXMubW9kdWxhdGlvbkluZGV4PW5ldyB0Lk11bHRpcGx5KGUubW9kdWxhdGlvbkluZGV4KSx0aGlzLm1vZHVsYXRpb25JbmRleC51bml0cz10LlR5cGUuUG9zaXRpdmUsdGhpcy5fbW9kdWxhdG9yPW5ldyB0Lk9zY2lsbGF0b3IoZS5mcmVxdWVuY3ksZS5tb2R1bGF0aW9uVHlwZSksdGhpcy5oYXJtb25pY2l0eT1uZXcgdC5NdWx0aXBseShlLmhhcm1vbmljaXR5KSx0aGlzLmhhcm1vbmljaXR5LnVuaXRzPXQuVHlwZS5Qb3NpdGl2ZSx0aGlzLl9tb2R1bGF0aW9uTm9kZT1uZXcgdC5HYWluKDApLHRoaXMuZnJlcXVlbmN5LmNvbm5lY3QodGhpcy5fY2Fycmllci5mcmVxdWVuY3kpLHRoaXMuZnJlcXVlbmN5LmNoYWluKHRoaXMuaGFybW9uaWNpdHksdGhpcy5fbW9kdWxhdG9yLmZyZXF1ZW5jeSksdGhpcy5mcmVxdWVuY3kuY2hhaW4odGhpcy5tb2R1bGF0aW9uSW5kZXgsdGhpcy5fbW9kdWxhdGlvbk5vZGUpLHRoaXMuX21vZHVsYXRvci5jb25uZWN0KHRoaXMuX21vZHVsYXRpb25Ob2RlLmdhaW4pLHRoaXMuX21vZHVsYXRpb25Ob2RlLmNvbm5lY3QodGhpcy5fY2Fycmllci5mcmVxdWVuY3kpLHRoaXMuX2NhcnJpZXIuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5kZXR1bmUuY29ubmVjdCh0aGlzLl9tb2R1bGF0b3IuZGV0dW5lKSx0aGlzLnBoYXNlPWUucGhhc2UsdGhpcy5fcmVhZE9ubHkoW1wibW9kdWxhdGlvbkluZGV4XCIsXCJmcmVxdWVuY3lcIixcImRldHVuZVwiLFwiaGFybW9uaWNpdHlcIl0pfSx0LmV4dGVuZCh0LkZNT3NjaWxsYXRvcix0Lk9zY2lsbGF0b3IpLHQuRk1Pc2NpbGxhdG9yLmRlZmF1bHRzPXtmcmVxdWVuY3k6NDQwLGRldHVuZTowLHBoYXNlOjAsbW9kdWxhdGlvbkluZGV4OjIsbW9kdWxhdGlvblR5cGU6XCJzcXVhcmVcIixoYXJtb25pY2l0eToxfSx0LkZNT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKHQpe3Q9dGhpcy50b1NlY29uZHModCksdGhpcy5fbW9kdWxhdG9yLnN0YXJ0KHQpLHRoaXMuX2NhcnJpZXIuc3RhcnQodCl9LHQuRk1Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX21vZHVsYXRvci5zdG9wKHQpLHRoaXMuX2NhcnJpZXIuc3RvcCh0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRk1Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhcnJpZXIudHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NhcnJpZXIudHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJtb2R1bGF0aW9uVHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxhdG9yLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tb2R1bGF0b3IudHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2Fycmllci5waGFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NhcnJpZXIucGhhc2U9dCx0aGlzLl9tb2R1bGF0b3IucGhhc2U9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GTU9zY2lsbGF0b3IucHJvdG90eXBlLFwicGFydGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhcnJpZXIucGFydGlhbHN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jYXJyaWVyLnBhcnRpYWxzPXR9fSksdC5GTU9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJtb2R1bGF0aW9uSW5kZXhcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCIsXCJoYXJtb25pY2l0eVwiXSksdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXR1bmU9bnVsbCx0aGlzLmhhcm1vbmljaXR5LmRpc3Bvc2UoKSx0aGlzLmhhcm1vbmljaXR5PW51bGwsdGhpcy5fY2Fycmllci5kaXNwb3NlKCksdGhpcy5fY2Fycmllcj1udWxsLHRoaXMuX21vZHVsYXRvci5kaXNwb3NlKCksdGhpcy5fbW9kdWxhdG9yPW51bGwsdGhpcy5fbW9kdWxhdGlvbk5vZGUuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRpb25Ob2RlPW51bGwsdGhpcy5tb2R1bGF0aW9uSW5kZXguZGlzcG9zZSgpLHRoaXMubW9kdWxhdGlvbkluZGV4PW51bGwsdGhpc30sdC5GTU9zY2lsbGF0b3J9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkFNT3NjaWxsYXRvcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJ0eXBlXCIsXCJtb2R1bGF0aW9uVHlwZVwiXSx0LkFNT3NjaWxsYXRvci5kZWZhdWx0cyk7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMuX2NhcnJpZXI9bmV3IHQuT3NjaWxsYXRvcihlLmZyZXF1ZW5jeSxlLnR5cGUpLHRoaXMuZnJlcXVlbmN5PXRoaXMuX2NhcnJpZXIuZnJlcXVlbmN5LHRoaXMuZGV0dW5lPXRoaXMuX2NhcnJpZXIuZGV0dW5lLHRoaXMuZGV0dW5lLnZhbHVlPWUuZGV0dW5lLHRoaXMuX21vZHVsYXRvcj1uZXcgdC5Pc2NpbGxhdG9yKGUuZnJlcXVlbmN5LGUubW9kdWxhdGlvblR5cGUpLHRoaXMuX21vZHVsYXRpb25TY2FsZT1uZXcgdC5BdWRpb1RvR2Fpbix0aGlzLmhhcm1vbmljaXR5PW5ldyB0Lk11bHRpcGx5KGUuaGFybW9uaWNpdHkpLHRoaXMuaGFybW9uaWNpdHkudW5pdHM9dC5UeXBlLlBvc2l0aXZlLHRoaXMuX21vZHVsYXRpb25Ob2RlPW5ldyB0LkdhaW4oMCksdGhpcy5mcmVxdWVuY3kuY2hhaW4odGhpcy5oYXJtb25pY2l0eSx0aGlzLl9tb2R1bGF0b3IuZnJlcXVlbmN5KSx0aGlzLmRldHVuZS5jb25uZWN0KHRoaXMuX21vZHVsYXRvci5kZXR1bmUpLHRoaXMuX21vZHVsYXRvci5jaGFpbih0aGlzLl9tb2R1bGF0aW9uU2NhbGUsdGhpcy5fbW9kdWxhdGlvbk5vZGUuZ2FpbiksdGhpcy5fY2Fycmllci5jaGFpbih0aGlzLl9tb2R1bGF0aW9uTm9kZSx0aGlzLm91dHB1dCksdGhpcy5waGFzZT1lLnBoYXNlLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCIsXCJoYXJtb25pY2l0eVwiXSl9LHQuZXh0ZW5kKHQuQU1Pc2NpbGxhdG9yLHQuT3NjaWxsYXRvciksdC5BTU9zY2lsbGF0b3IuZGVmYXVsdHM9e2ZyZXF1ZW5jeTo0NDAsZGV0dW5lOjAscGhhc2U6MCxtb2R1bGF0aW9uVHlwZTpcInNxdWFyZVwiLGhhcm1vbmljaXR5OjF9LHQuQU1Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RhcnQ9ZnVuY3Rpb24odCl7dD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9tb2R1bGF0b3Iuc3RhcnQodCksdGhpcy5fY2Fycmllci5zdGFydCh0KX0sdC5BTU9zY2lsbGF0b3IucHJvdG90eXBlLl9zdG9wPWZ1bmN0aW9uKHQpe3Q9dGhpcy50b1NlY29uZHModCksdGhpcy5fbW9kdWxhdG9yLnN0b3AodCksdGhpcy5fY2Fycmllci5zdG9wKHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BTU9zY2lsbGF0b3IucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2Fycmllci50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2Fycmllci50eXBlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQU1Pc2NpbGxhdG9yLnByb3RvdHlwZSxcIm1vZHVsYXRpb25UeXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2R1bGF0b3IudHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX21vZHVsYXRvci50eXBlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQU1Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInBoYXNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYXJyaWVyLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2Fycmllci5waGFzZT10LHRoaXMuX21vZHVsYXRvci5waGFzZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkFNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwYXJ0aWFsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2Fycmllci5wYXJ0aWFsc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NhcnJpZXIucGFydGlhbHM9dH19KSx0LkFNT3NjaWxsYXRvci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCIsXCJoYXJtb25pY2l0eVwiXSksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZT1udWxsLHRoaXMuaGFybW9uaWNpdHkuZGlzcG9zZSgpLHRoaXMuaGFybW9uaWNpdHk9bnVsbCx0aGlzLl9jYXJyaWVyLmRpc3Bvc2UoKSx0aGlzLl9jYXJyaWVyPW51bGwsdGhpcy5fbW9kdWxhdG9yLmRpc3Bvc2UoKSx0aGlzLl9tb2R1bGF0b3I9bnVsbCx0aGlzLl9tb2R1bGF0aW9uTm9kZS5kaXNwb3NlKCksdGhpcy5fbW9kdWxhdGlvbk5vZGU9bnVsbCx0aGlzLl9tb2R1bGF0aW9uU2NhbGUuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRpb25TY2FsZT1udWxsLHRoaXN9LHQuQU1Pc2NpbGxhdG9yfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5GYXRPc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcInR5cGVcIixcInNwcmVhZFwiXSx0LkZhdE9zY2lsbGF0b3IuZGVmYXVsdHMpO3QuU291cmNlLmNhbGwodGhpcyxlKSx0aGlzLmZyZXF1ZW5jeT1uZXcgdC5TaWduYWwoZS5mcmVxdWVuY3ksdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5kZXR1bmU9bmV3IHQuU2lnbmFsKGUuZGV0dW5lLHQuVHlwZS5DZW50cyksdGhpcy5fb3NjaWxsYXRvcnM9W10sdGhpcy5fc3ByZWFkPWUuc3ByZWFkLHRoaXMuX3R5cGU9ZS50eXBlLHRoaXMuX3BoYXNlPWUucGhhc2UsdGhpcy5fcGFydGlhbHM9dGhpcy5kZWZhdWx0QXJnKGUucGFydGlhbHMsW10pLHRoaXMuY291bnQ9ZS5jb3VudCx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIixcImRldHVuZVwiXSl9LHQuZXh0ZW5kKHQuRmF0T3NjaWxsYXRvcix0Lk9zY2lsbGF0b3IpLHQuRmF0T3NjaWxsYXRvci5kZWZhdWx0cz17ZnJlcXVlbmN5OjQ0MCxkZXR1bmU6MCxwaGFzZTowLHNwcmVhZDoyMCxjb3VudDozLHR5cGU6XCJzYXd0b290aFwifSx0LkZhdE9zY2lsbGF0b3IucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX2ZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdGFydCh0KX0pfSx0LkZhdE9zY2lsbGF0b3IucHJvdG90eXBlLl9zdG9wPWZ1bmN0aW9uKHQpe3Q9dGhpcy50b1NlY29uZHModCksdGhpcy5fZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0b3AodCl9KX0sdC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZS5fZm9yRWFjaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMuX29zY2lsbGF0b3JzLmxlbmd0aDtlKyspdC5jYWxsKHRoaXMsdGhpcy5fb3NjaWxsYXRvcnNbZV0sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZhdE9zY2lsbGF0b3IucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3R5cGU9dCx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudHlwZT10fSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRmF0T3NjaWxsYXRvci5wcm90b3R5cGUsXCJzcHJlYWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NwcmVhZH0sc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMuX3NwcmVhZD10LHRoaXMuX29zY2lsbGF0b3JzLmxlbmd0aD4xKXt2YXIgZT0tdC8yLGk9dC8odGhpcy5fb3NjaWxsYXRvcnMubGVuZ3RoLTEpO3RoaXMuX2ZvckVhY2goZnVuY3Rpb24odCxuKXt0LmRldHVuZS52YWx1ZT1lK2kqbn0pfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZSxcImNvdW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9ycy5sZW5ndGh9LHNldDpmdW5jdGlvbihlKXtpZihlPU1hdGgubWF4KGUsMSksdGhpcy5fb3NjaWxsYXRvcnMubGVuZ3RoIT09ZSl7dGhpcy5fZm9yRWFjaChmdW5jdGlvbih0KXt0LmRpc3Bvc2UoKX0pLHRoaXMuX29zY2lsbGF0b3JzPVtdO2Zvcih2YXIgaT0wO2k8ZTtpKyspe3ZhciBuPW5ldyB0Lk9zY2lsbGF0b3I7dGhpcy50eXBlPT09dC5Pc2NpbGxhdG9yLlR5cGUuQ3VzdG9tP24ucGFydGlhbHM9dGhpcy5fcGFydGlhbHM6bi50eXBlPXRoaXMuX3R5cGUsbi5waGFzZT10aGlzLl9waGFzZSxuLnZvbHVtZS52YWx1ZT0tNi1lLHRoaXMuZnJlcXVlbmN5LmNvbm5lY3Qobi5mcmVxdWVuY3kpLHRoaXMuZGV0dW5lLmNvbm5lY3Qobi5kZXR1bmUpLG4uY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fb3NjaWxsYXRvcnNbaV09bn10aGlzLnNwcmVhZD10aGlzLl9zcHJlYWQsdGhpcy5zdGF0ZT09PXQuU3RhdGUuU3RhcnRlZCYmdGhpcy5fZm9yRWFjaChmdW5jdGlvbih0KXt0LnN0YXJ0KCl9KX19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRmF0T3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGhhc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9waGFzZT10LHRoaXMuX2ZvckVhY2goZnVuY3Rpb24oZSl7ZS5waGFzZT10fSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRmF0T3NjaWxsYXRvci5wcm90b3R5cGUsXCJwYXJ0aWFsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFydGlhbHN9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9wYXJ0aWFscz1lLHRoaXMuX3R5cGU9dC5Pc2NpbGxhdG9yLlR5cGUuQ3VzdG9tLHRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCl7dC5wYXJ0aWFscz1lfSl9fSksdC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGV0dW5lLmRpc3Bvc2UoKSx0aGlzLmRldHVuZT1udWxsLHRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCl7dC5kaXNwb3NlKCl9KSx0aGlzLl9vc2NpbGxhdG9ycz1udWxsLHRoaXMuX3BhcnRpYWxzPW51bGwsdGhpc30sdC5GYXRPc2NpbGxhdG9yfSksdChmdW5jdGlvbih0KXt0Lk9tbmlPc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcInR5cGVcIl0sdC5PbW5pT3NjaWxsYXRvci5kZWZhdWx0cyk7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbChlLmZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT1uZXcgdC5TaWduYWwoZS5kZXR1bmUsdC5UeXBlLkNlbnRzKSx0aGlzLl9zb3VyY2VUeXBlPXZvaWQgMCx0aGlzLl9vc2NpbGxhdG9yPW51bGwsdGhpcy50eXBlPWUudHlwZSx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIixcImRldHVuZVwiXSksdGhpcy5zZXQoZSl9LHQuZXh0ZW5kKHQuT21uaU9zY2lsbGF0b3IsdC5Pc2NpbGxhdG9yKSx0Lk9tbmlPc2NpbGxhdG9yLmRlZmF1bHRzPXtmcmVxdWVuY3k6NDQwLGRldHVuZTowLHR5cGU6XCJzaW5lXCIscGhhc2U6MH07dmFyIGU9e1B1bHNlOlwiUHVsc2VPc2NpbGxhdG9yXCIsUFdNOlwiUFdNT3NjaWxsYXRvclwiLE9zYzpcIk9zY2lsbGF0b3JcIixGTTpcIkZNT3NjaWxsYXRvclwiLEFNOlwiQU1Pc2NpbGxhdG9yXCIsRmF0OlwiRmF0T3NjaWxsYXRvclwifTtyZXR1cm4gdC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3Iuc3RhcnQodCl9LHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLl9zdG9wPWZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3Iuc3RvcCh0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1cIlwiO3JldHVybiB0aGlzLl9zb3VyY2VUeXBlPT09ZS5GTT90PVwiZm1cIjp0aGlzLl9zb3VyY2VUeXBlPT09ZS5BTT90PVwiYW1cIjp0aGlzLl9zb3VyY2VUeXBlPT09ZS5GYXQmJih0PVwiZmF0XCIpLHQrdGhpcy5fb3NjaWxsYXRvci50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7XCJmbVwiPT09dC5zdWJzdHIoMCwyKT8odGhpcy5fY3JlYXRlTmV3T3NjaWxsYXRvcihlLkZNKSx0aGlzLl9vc2NpbGxhdG9yLnR5cGU9dC5zdWJzdHIoMikpOlwiYW1cIj09PXQuc3Vic3RyKDAsMik/KHRoaXMuX2NyZWF0ZU5ld09zY2lsbGF0b3IoZS5BTSksdGhpcy5fb3NjaWxsYXRvci50eXBlPXQuc3Vic3RyKDIpKTpcImZhdFwiPT09dC5zdWJzdHIoMCwzKT8odGhpcy5fY3JlYXRlTmV3T3NjaWxsYXRvcihlLkZhdCksdGhpcy5fb3NjaWxsYXRvci50eXBlPXQuc3Vic3RyKDMpKTpcInB3bVwiPT09dD90aGlzLl9jcmVhdGVOZXdPc2NpbGxhdG9yKGUuUFdNKTpcInB1bHNlXCI9PT10P3RoaXMuX2NyZWF0ZU5ld09zY2lsbGF0b3IoZS5QdWxzZSk6KHRoaXMuX2NyZWF0ZU5ld09zY2lsbGF0b3IoZS5Pc2MpLHRoaXMuX29zY2lsbGF0b3IudHlwZT10KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwYXJ0aWFsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5wYXJ0aWFsc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3IucGFydGlhbHM9dH19KSx0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSxpKXtyZXR1cm5cInR5cGVcIj09PWU/dGhpcy50eXBlPWk6dGhpcy5pc09iamVjdChlKSYmZS5oYXNPd25Qcm9wZXJ0eShcInR5cGVcIikmJih0aGlzLnR5cGU9ZS50eXBlKSx0LnByb3RvdHlwZS5zZXQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXN9LHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLl9jcmVhdGVOZXdPc2NpbGxhdG9yPWZ1bmN0aW9uKGUpe2lmKGUhPT10aGlzLl9zb3VyY2VUeXBlKXt0aGlzLl9zb3VyY2VUeXBlPWU7dmFyIGk9dFtlXSxuPXRoaXMubm93KCkrdGhpcy5ibG9ja1RpbWU7aWYobnVsbCE9PXRoaXMuX29zY2lsbGF0b3Ipe3ZhciBzPXRoaXMuX29zY2lsbGF0b3I7cy5zdG9wKG4pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLmRpc3Bvc2UoKSxzPW51bGx9LDFlMyp0aGlzLmJsb2NrVGltZSl9dGhpcy5fb3NjaWxsYXRvcj1uZXcgaSx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuX29zY2lsbGF0b3IuZnJlcXVlbmN5KSx0aGlzLmRldHVuZS5jb25uZWN0KHRoaXMuX29zY2lsbGF0b3IuZGV0dW5lKSx0aGlzLl9vc2NpbGxhdG9yLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuc3RhdGU9PT10LlN0YXRlLlN0YXJ0ZWQmJnRoaXMuX29zY2lsbGF0b3Iuc3RhcnQobil9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5waGFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3IucGhhc2U9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJ3aWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9zb3VyY2VUeXBlPT09ZS5QdWxzZSlyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci53aWR0aH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJjb3VudFwiLHtnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9zb3VyY2VUeXBlPT09ZS5GYXQpcmV0dXJuIHRoaXMuX29zY2lsbGF0b3IuY291bnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zb3VyY2VUeXBlPT09ZS5GYXQmJih0aGlzLl9vc2NpbGxhdG9yLmNvdW50PXQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZSxcInNwcmVhZFwiLHtnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9zb3VyY2VUeXBlPT09ZS5GYXQpcmV0dXJuIHRoaXMuX29zY2lsbGF0b3Iuc3ByZWFkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlVHlwZT09PWUuRmF0JiYodGhpcy5fb3NjaWxsYXRvci5zcHJlYWQ9dCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwibW9kdWxhdGlvblR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fc291cmNlVHlwZT09PWUuRk18fHRoaXMuX3NvdXJjZVR5cGU9PT1lLkFNKXJldHVybiB0aGlzLl9vc2NpbGxhdG9yLm1vZHVsYXRpb25UeXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlVHlwZSE9PWUuRk0mJnRoaXMuX3NvdXJjZVR5cGUhPT1lLkFNfHwodGhpcy5fb3NjaWxsYXRvci5tb2R1bGF0aW9uVHlwZT10KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJtb2R1bGF0aW9uSW5kZXhcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fc291cmNlVHlwZT09PWUuRk0pcmV0dXJuIHRoaXMuX29zY2lsbGF0b3IubW9kdWxhdGlvbkluZGV4fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZSxcImhhcm1vbmljaXR5XCIse2dldDpmdW5jdGlvbigpe2lmKHRoaXMuX3NvdXJjZVR5cGU9PT1lLkZNfHx0aGlzLl9zb3VyY2VUeXBlPT09ZS5BTSlyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5oYXJtb25pY2l0eX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJtb2R1bGF0aW9uRnJlcXVlbmN5XCIse2dldDpmdW5jdGlvbigpe2lmKHRoaXMuX3NvdXJjZVR5cGU9PT1lLlBXTSlyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5tb2R1bGF0aW9uRnJlcXVlbmN5fX0pLHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmcmVxdWVuY3lcIixcImRldHVuZVwiXSksdGhpcy5kZXR1bmUuZGlzcG9zZSgpLHRoaXMuZGV0dW5lPW51bGwsdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5fb3NjaWxsYXRvci5kaXNwb3NlKCksdGhpcy5fb3NjaWxsYXRvcj1udWxsLHRoaXMuX3NvdXJjZVR5cGU9bnVsbCx0aGlzfSx0Lk9tbmlPc2NpbGxhdG9yfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5JbnN0cnVtZW50PWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5JbnN0cnVtZW50LmRlZmF1bHRzKSx0aGlzLl92b2x1bWU9dGhpcy5vdXRwdXQ9bmV3IHQuVm9sdW1lKGUudm9sdW1lKSx0aGlzLnZvbHVtZT10aGlzLl92b2x1bWUudm9sdW1lLHRoaXMuX3JlYWRPbmx5KFwidm9sdW1lXCIpfSx0LmV4dGVuZCh0Lkluc3RydW1lbnQpLHQuSW5zdHJ1bWVudC5kZWZhdWx0cz17dm9sdW1lOjB9LHQuSW5zdHJ1bWVudC5wcm90b3R5cGUudHJpZ2dlckF0dGFjaz10Lm5vT3AsdC5JbnN0cnVtZW50LnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT10Lm5vT3AsdC5JbnN0cnVtZW50LnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrUmVsZWFzZT1mdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gaT10aGlzLmlzVW5kZWYoaSk/dGhpcy5ub3coKSt0aGlzLmJsb2NrVGltZTp0aGlzLnRvU2Vjb25kcyhpKSxlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMudHJpZ2dlckF0dGFjayh0LGksbiksdGhpcy50cmlnZ2VyUmVsZWFzZShpK2UpLHRoaXN9LHQuSW5zdHJ1bWVudC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fdm9sdW1lLmRpc3Bvc2UoKSx0aGlzLl92b2x1bWU9bnVsbCx0aGlzLl93cml0YWJsZShbXCJ2b2x1bWVcIl0pLHRoaXMudm9sdW1lPW51bGwsdGhpc30sdC5JbnN0cnVtZW50fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Nb25vcGhvbmljPWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5Nb25vcGhvbmljLmRlZmF1bHRzKSx0Lkluc3RydW1lbnQuY2FsbCh0aGlzLGUpLHRoaXMucG9ydGFtZW50bz1lLnBvcnRhbWVudG99LHQuZXh0ZW5kKHQuTW9ub3Bob25pYyx0Lkluc3RydW1lbnQpLHQuTW9ub3Bob25pYy5kZWZhdWx0cz17cG9ydGFtZW50bzowfSx0Lk1vbm9waG9uaWMucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBlPXRoaXMuaXNVbmRlZihlKT90aGlzLm5vdygpK3RoaXMuYmxvY2tUaW1lOnRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX3RyaWdnZXJFbnZlbG9wZUF0dGFjayhlLGkpLHRoaXMuc2V0Tm90ZSh0LGUpLHRoaXN9LHQuTW9ub3Bob25pYy5wcm90b3R5cGUudHJpZ2dlclJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5pc1VuZGVmKHQpP3RoaXMubm93KCkrdGhpcy5ibG9ja1RpbWU6dGhpcy50b1NlY29uZHModCksdGhpcy5fdHJpZ2dlckVudmVsb3BlUmVsZWFzZSh0KSx0aGlzfSx0Lk1vbm9waG9uaWMucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVBdHRhY2s9ZnVuY3Rpb24oKXt9LHQuTW9ub3Bob25pYy5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24oKXt9LHQuTW9ub3Bob25pYy5wcm90b3R5cGUuc2V0Tm90ZT1mdW5jdGlvbih0LGUpe2lmKGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5wb3J0YW1lbnRvPjApe3ZhciBpPXRoaXMuZnJlcXVlbmN5LnZhbHVlO3RoaXMuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKGksZSk7dmFyIG49dGhpcy50b1NlY29uZHModGhpcy5wb3J0YW1lbnRvKTt0aGlzLmZyZXF1ZW5jeS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKHQsZStuKX1lbHNlIHRoaXMuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKHQsZSk7cmV0dXJuIHRoaXN9LHQuTW9ub3Bob25pY30pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU3ludGg9ZnVuY3Rpb24oZSl7ZT10aGlzLmRlZmF1bHRBcmcoZSx0LlN5bnRoLmRlZmF1bHRzKSx0Lk1vbm9waG9uaWMuY2FsbCh0aGlzLGUpLHRoaXMub3NjaWxsYXRvcj1uZXcgdC5PbW5pT3NjaWxsYXRvcihlLm9zY2lsbGF0b3IpLHRoaXMuZnJlcXVlbmN5PXRoaXMub3NjaWxsYXRvci5mcmVxdWVuY3ksdGhpcy5kZXR1bmU9dGhpcy5vc2NpbGxhdG9yLmRldHVuZSx0aGlzLmVudmVsb3BlPW5ldyB0LkFtcGxpdHVkZUVudmVsb3BlKGUuZW52ZWxvcGUpLHRoaXMub3NjaWxsYXRvci5jaGFpbih0aGlzLmVudmVsb3BlLHRoaXMub3V0cHV0KSx0aGlzLm9zY2lsbGF0b3Iuc3RhcnQoKSx0aGlzLl9yZWFkT25seShbXCJvc2NpbGxhdG9yXCIsXCJmcmVxdWVuY3lcIixcImRldHVuZVwiLFwiZW52ZWxvcGVcIl0pfSx0LmV4dGVuZCh0LlN5bnRoLHQuTW9ub3Bob25pYyksdC5TeW50aC5kZWZhdWx0cz17b3NjaWxsYXRvcjp7dHlwZTpcInRyaWFuZ2xlXCJ9LGVudmVsb3BlOnthdHRhY2s6LjAwNSxkZWNheTouMSxzdXN0YWluOi4zLHJlbGVhc2U6MX19LHQuU3ludGgucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVBdHRhY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5lbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQsZSksdGhpc30sdC5TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpc30sdC5TeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0Lk1vbm9waG9uaWMucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJvc2NpbGxhdG9yXCIsXCJmcmVxdWVuY3lcIixcImRldHVuZVwiLFwiZW52ZWxvcGVcIl0pLHRoaXMub3NjaWxsYXRvci5kaXNwb3NlKCksdGhpcy5vc2NpbGxhdG9yPW51bGwsdGhpcy5lbnZlbG9wZS5kaXNwb3NlKCksdGhpcy5lbnZlbG9wZT1udWxsLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXR1bmU9bnVsbCx0aGlzfSx0LlN5bnRofSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5BTVN5bnRoPWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5BTVN5bnRoLmRlZmF1bHRzKSx0Lk1vbm9waG9uaWMuY2FsbCh0aGlzLGUpLHRoaXMuX2NhcnJpZXI9bmV3IHQuU3ludGgsdGhpcy5fY2Fycmllci52b2x1bWUudmFsdWU9LTEwLHRoaXMub3NjaWxsYXRvcj10aGlzLl9jYXJyaWVyLm9zY2lsbGF0b3IsdGhpcy5lbnZlbG9wZT10aGlzLl9jYXJyaWVyLmVudmVsb3BlLnNldChlLmVudmVsb3BlKSx0aGlzLl9tb2R1bGF0b3I9bmV3IHQuU3ludGgsdGhpcy5fbW9kdWxhdG9yLnZvbHVtZS52YWx1ZT0tMTAsdGhpcy5tb2R1bGF0aW9uPXRoaXMuX21vZHVsYXRvci5vc2NpbGxhdG9yLnNldChlLm1vZHVsYXRpb24pLHRoaXMubW9kdWxhdGlvbkVudmVsb3BlPXRoaXMuX21vZHVsYXRvci5lbnZlbG9wZS5zZXQoZS5tb2R1bGF0aW9uRW52ZWxvcGUpLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbCg0NDAsdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5kZXR1bmU9bmV3IHQuU2lnbmFsKGUuZGV0dW5lLHQuVHlwZS5DZW50cyksdGhpcy5oYXJtb25pY2l0eT1uZXcgdC5NdWx0aXBseShlLmhhcm1vbmljaXR5KSx0aGlzLmhhcm1vbmljaXR5LnVuaXRzPXQuVHlwZS5Qb3NpdGl2ZSx0aGlzLl9tb2R1bGF0aW9uU2NhbGU9bmV3IHQuQXVkaW9Ub0dhaW4sdGhpcy5fbW9kdWxhdGlvbk5vZGU9bmV3IHQuR2Fpbix0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuX2NhcnJpZXIuZnJlcXVlbmN5KSx0aGlzLmZyZXF1ZW5jeS5jaGFpbih0aGlzLmhhcm1vbmljaXR5LHRoaXMuX21vZHVsYXRvci5mcmVxdWVuY3kpLHRoaXMuZGV0dW5lLmZhbih0aGlzLl9jYXJyaWVyLmRldHVuZSx0aGlzLl9tb2R1bGF0b3IuZGV0dW5lKSx0aGlzLl9tb2R1bGF0b3IuY2hhaW4odGhpcy5fbW9kdWxhdGlvblNjYWxlLHRoaXMuX21vZHVsYXRpb25Ob2RlLmdhaW4pLHRoaXMuX2NhcnJpZXIuY2hhaW4odGhpcy5fbW9kdWxhdGlvbk5vZGUsdGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiaGFybW9uaWNpdHlcIixcIm9zY2lsbGF0b3JcIixcImVudmVsb3BlXCIsXCJtb2R1bGF0aW9uXCIsXCJtb2R1bGF0aW9uRW52ZWxvcGVcIixcImRldHVuZVwiXSl9LHQuZXh0ZW5kKHQuQU1TeW50aCx0Lk1vbm9waG9uaWMpLHQuQU1TeW50aC5kZWZhdWx0cz17aGFybW9uaWNpdHk6MyxkZXR1bmU6MCxvc2NpbGxhdG9yOnt0eXBlOlwic2luZVwifSxlbnZlbG9wZTp7YXR0YWNrOi4wMSxkZWNheTouMDEsc3VzdGFpbjoxLHJlbGVhc2U6LjV9LG1vZHVsYXRpb246e3R5cGU6XCJzcXVhcmVcIn0sbW9kdWxhdGlvbkVudmVsb3BlOnthdHRhY2s6LjUsZGVjYXk6MCxzdXN0YWluOjEscmVsZWFzZTouNX19LHQuQU1TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZUF0dGFjaz1mdW5jdGlvbih0LGUpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuZW52ZWxvcGUudHJpZ2dlckF0dGFjayh0LGUpLHRoaXMubW9kdWxhdGlvbkVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCxlKSx0aGlzfSx0LkFNU3ludGgucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVSZWxlYXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVudmVsb3BlLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXMubW9kdWxhdGlvbkVudmVsb3BlLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXN9LHQuQU1TeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0Lk1vbm9waG9uaWMucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmcmVxdWVuY3lcIixcImhhcm1vbmljaXR5XCIsXCJvc2NpbGxhdG9yXCIsXCJlbnZlbG9wZVwiLFwibW9kdWxhdGlvblwiLFwibW9kdWxhdGlvbkVudmVsb3BlXCIsXCJkZXR1bmVcIl0pLHRoaXMuX2NhcnJpZXIuZGlzcG9zZSgpLHRoaXMuX2NhcnJpZXI9bnVsbCx0aGlzLl9tb2R1bGF0b3IuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRvcj1udWxsLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGV0dW5lLmRpc3Bvc2UoKSx0aGlzLmRldHVuZT1udWxsLHRoaXMuaGFybW9uaWNpdHkuZGlzcG9zZSgpLHRoaXMuaGFybW9uaWNpdHk9bnVsbCx0aGlzLl9tb2R1bGF0aW9uU2NhbGUuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRpb25TY2FsZT1udWxsLHRoaXMuX21vZHVsYXRpb25Ob2RlLmRpc3Bvc2UoKSx0aGlzLl9tb2R1bGF0aW9uTm9kZT1udWxsLHRoaXMub3NjaWxsYXRvcj1udWxsLHRoaXMuZW52ZWxvcGU9bnVsbCx0aGlzLm1vZHVsYXRpb25FbnZlbG9wZT1udWxsLHRoaXMubW9kdWxhdGlvbj1udWxsLHRoaXN9LHQuQU1TeW50aH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTW9ub1N5bnRoPWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5Nb25vU3ludGguZGVmYXVsdHMpLHQuTW9ub3Bob25pYy5jYWxsKHRoaXMsZSksdGhpcy5vc2NpbGxhdG9yPW5ldyB0Lk9tbmlPc2NpbGxhdG9yKGUub3NjaWxsYXRvciksdGhpcy5mcmVxdWVuY3k9dGhpcy5vc2NpbGxhdG9yLmZyZXF1ZW5jeSx0aGlzLmRldHVuZT10aGlzLm9zY2lsbGF0b3IuZGV0dW5lLHRoaXMuZmlsdGVyPW5ldyB0LkZpbHRlcihlLmZpbHRlciksdGhpcy5maWx0ZXJFbnZlbG9wZT1uZXcgdC5GcmVxdWVuY3lFbnZlbG9wZShlLmZpbHRlckVudmVsb3BlKSx0aGlzLmVudmVsb3BlPW5ldyB0LkFtcGxpdHVkZUVudmVsb3BlKGUuZW52ZWxvcGUpLHRoaXMub3NjaWxsYXRvci5jaGFpbih0aGlzLmZpbHRlcix0aGlzLmVudmVsb3BlLHRoaXMub3V0cHV0KSx0aGlzLm9zY2lsbGF0b3Iuc3RhcnQoKSx0aGlzLmZpbHRlckVudmVsb3BlLmNvbm5lY3QodGhpcy5maWx0ZXIuZnJlcXVlbmN5KSx0aGlzLl9yZWFkT25seShbXCJvc2NpbGxhdG9yXCIsXCJmcmVxdWVuY3lcIixcImRldHVuZVwiLFwiZmlsdGVyXCIsXCJmaWx0ZXJFbnZlbG9wZVwiLFwiZW52ZWxvcGVcIl0pfSx0LmV4dGVuZCh0Lk1vbm9TeW50aCx0Lk1vbm9waG9uaWMpLHQuTW9ub1N5bnRoLmRlZmF1bHRzPXtmcmVxdWVuY3k6XCJDNFwiLGRldHVuZTowLG9zY2lsbGF0b3I6e3R5cGU6XCJzcXVhcmVcIn0sZmlsdGVyOntROjYsdHlwZTpcImxvd3Bhc3NcIixyb2xsb2ZmOi0yNH0sZW52ZWxvcGU6e2F0dGFjazouMDA1LGRlY2F5Oi4xLHN1c3RhaW46LjkscmVsZWFzZToxfSxmaWx0ZXJFbnZlbG9wZTp7YXR0YWNrOi4wNixkZWNheTouMixzdXN0YWluOi41LHJlbGVhc2U6MixiYXNlRnJlcXVlbmN5OjIwMCxvY3RhdmVzOjcsZXhwb25lbnQ6Mn19LHQuTW9ub1N5bnRoLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlQXR0YWNrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZW52ZWxvcGUudHJpZ2dlckF0dGFjayh0LGUpLHRoaXMuZmlsdGVyRW52ZWxvcGUudHJpZ2dlckF0dGFjayh0KSx0aGlzfSx0Lk1vbm9TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpcy5maWx0ZXJFbnZlbG9wZS50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzfSx0Lk1vbm9TeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0Lk1vbm9waG9uaWMucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJvc2NpbGxhdG9yXCIsXCJmcmVxdWVuY3lcIixcImRldHVuZVwiLFwiZmlsdGVyXCIsXCJmaWx0ZXJFbnZlbG9wZVwiLFwiZW52ZWxvcGVcIl0pLHRoaXMub3NjaWxsYXRvci5kaXNwb3NlKCksdGhpcy5vc2NpbGxhdG9yPW51bGwsdGhpcy5lbnZlbG9wZS5kaXNwb3NlKCksdGhpcy5lbnZlbG9wZT1udWxsLHRoaXMuZmlsdGVyRW52ZWxvcGUuZGlzcG9zZSgpLHRoaXMuZmlsdGVyRW52ZWxvcGU9bnVsbCx0aGlzLmZpbHRlci5kaXNwb3NlKCksdGhpcy5maWx0ZXI9bnVsbCx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGV0dW5lPW51bGwsdGhpc30sdC5Nb25vU3ludGh9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkR1b1N5bnRoPWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5EdW9TeW50aC5kZWZhdWx0cyksdC5Nb25vcGhvbmljLmNhbGwodGhpcyxlKSx0aGlzLnZvaWNlMD1uZXcgdC5Nb25vU3ludGgoZS52b2ljZTApLHRoaXMudm9pY2UwLnZvbHVtZS52YWx1ZT0tMTAsdGhpcy52b2ljZTE9bmV3IHQuTW9ub1N5bnRoKGUudm9pY2UxKSx0aGlzLnZvaWNlMS52b2x1bWUudmFsdWU9LTEwLHRoaXMuX3ZpYnJhdG89bmV3IHQuTEZPKGUudmlicmF0b1JhdGUsLTUwLDUwKSx0aGlzLl92aWJyYXRvLnN0YXJ0KCksdGhpcy52aWJyYXRvUmF0ZT10aGlzLl92aWJyYXRvLmZyZXF1ZW5jeSx0aGlzLl92aWJyYXRvR2Fpbj1uZXcgdC5HYWluKGUudmlicmF0b0Ftb3VudCx0LlR5cGUuUG9zaXRpdmUpLHRoaXMudmlicmF0b0Ftb3VudD10aGlzLl92aWJyYXRvR2Fpbi5nYWluLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbCg0NDAsdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5oYXJtb25pY2l0eT1uZXcgdC5NdWx0aXBseShlLmhhcm1vbmljaXR5KSx0aGlzLmhhcm1vbmljaXR5LnVuaXRzPXQuVHlwZS5Qb3NpdGl2ZSx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHRoaXMudm9pY2UwLmZyZXF1ZW5jeSksdGhpcy5mcmVxdWVuY3kuY2hhaW4odGhpcy5oYXJtb25pY2l0eSx0aGlzLnZvaWNlMS5mcmVxdWVuY3kpLHRoaXMuX3ZpYnJhdG8uY29ubmVjdCh0aGlzLl92aWJyYXRvR2FpbiksdGhpcy5fdmlicmF0b0dhaW4uZmFuKHRoaXMudm9pY2UwLmRldHVuZSx0aGlzLnZvaWNlMS5kZXR1bmUpLHRoaXMudm9pY2UwLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMudm9pY2UxLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcInZvaWNlMFwiLFwidm9pY2UxXCIsXCJmcmVxdWVuY3lcIixcInZpYnJhdG9BbW91bnRcIixcInZpYnJhdG9SYXRlXCJdKX0sdC5leHRlbmQodC5EdW9TeW50aCx0Lk1vbm9waG9uaWMpLHQuRHVvU3ludGguZGVmYXVsdHM9e3ZpYnJhdG9BbW91bnQ6LjUsdmlicmF0b1JhdGU6NSxoYXJtb25pY2l0eToxLjUsdm9pY2UwOnt2b2x1bWU6LTEwLHBvcnRhbWVudG86MCxvc2NpbGxhdG9yOnt0eXBlOlwic2luZVwifSxmaWx0ZXJFbnZlbG9wZTp7YXR0YWNrOi4wMSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fSxlbnZlbG9wZTp7YXR0YWNrOi4wMSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fX0sdm9pY2UxOnt2b2x1bWU6LTEwLHBvcnRhbWVudG86MCxvc2NpbGxhdG9yOnt0eXBlOlwic2luZVwifSxmaWx0ZXJFbnZlbG9wZTp7YXR0YWNrOi4wMSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fSxlbnZlbG9wZTp7YXR0YWNrOi4wMSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fX19LHQuRHVvU3ludGgucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVBdHRhY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLnZvaWNlMC5lbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQsZSksdGhpcy52b2ljZTEuZW52ZWxvcGUudHJpZ2dlckF0dGFjayh0LGUpLHRoaXMudm9pY2UwLmZpbHRlckVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCksdGhpcy52b2ljZTEuZmlsdGVyRW52ZWxvcGUudHJpZ2dlckF0dGFjayh0KSx0aGlzfSx0LkR1b1N5bnRoLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy52b2ljZTAudHJpZ2dlclJlbGVhc2UodCksdGhpcy52b2ljZTEudHJpZ2dlclJlbGVhc2UodCksdGhpc30sdC5EdW9TeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0Lk1vbm9waG9uaWMucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJ2b2ljZTBcIixcInZvaWNlMVwiLFwiZnJlcXVlbmN5XCIsXCJ2aWJyYXRvQW1vdW50XCIsXCJ2aWJyYXRvUmF0ZVwiXSksdGhpcy52b2ljZTAuZGlzcG9zZSgpLHRoaXMudm9pY2UwPW51bGwsdGhpcy52b2ljZTEuZGlzcG9zZSgpLHRoaXMudm9pY2UxPW51bGwsdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5fdmlicmF0b0dhaW4uZGlzcG9zZSgpLHRoaXMuX3ZpYnJhdG9HYWluPW51bGwsdGhpcy5fdmlicmF0bz1udWxsLHRoaXMuaGFybW9uaWNpdHkuZGlzcG9zZSgpLHRoaXMuaGFybW9uaWNpdHk9bnVsbCx0aGlzLnZpYnJhdG9BbW91bnQuZGlzcG9zZSgpLHRoaXMudmlicmF0b0Ftb3VudD1udWxsLHRoaXMudmlicmF0b1JhdGU9bnVsbCx0aGlzfSx0LkR1b1N5bnRofSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5GTVN5bnRoPWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5GTVN5bnRoLmRlZmF1bHRzKSx0Lk1vbm9waG9uaWMuY2FsbCh0aGlzLGUpLHRoaXMuX2NhcnJpZXI9bmV3IHQuU3ludGgoZS5jYXJyaWVyKSx0aGlzLl9jYXJyaWVyLnZvbHVtZS52YWx1ZT0tMTAsdGhpcy5vc2NpbGxhdG9yPXRoaXMuX2NhcnJpZXIub3NjaWxsYXRvcix0aGlzLmVudmVsb3BlPXRoaXMuX2NhcnJpZXIuZW52ZWxvcGUuc2V0KGUuZW52ZWxvcGUpLHRoaXMuX21vZHVsYXRvcj1uZXcgdC5TeW50aChlLm1vZHVsYXRvciksdGhpcy5fbW9kdWxhdG9yLnZvbHVtZS52YWx1ZT0tMTAsdGhpcy5tb2R1bGF0aW9uPXRoaXMuX21vZHVsYXRvci5vc2NpbGxhdG9yLnNldChlLm1vZHVsYXRpb24pLHRoaXMubW9kdWxhdGlvbkVudmVsb3BlPXRoaXMuX21vZHVsYXRvci5lbnZlbG9wZS5zZXQoZS5tb2R1bGF0aW9uRW52ZWxvcGUpLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbCg0NDAsdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5kZXR1bmU9bmV3IHQuU2lnbmFsKGUuZGV0dW5lLHQuVHlwZS5DZW50cyksdGhpcy5oYXJtb25pY2l0eT1uZXcgdC5NdWx0aXBseShlLmhhcm1vbmljaXR5KSx0aGlzLmhhcm1vbmljaXR5LnVuaXRzPXQuVHlwZS5Qb3NpdGl2ZSx0aGlzLm1vZHVsYXRpb25JbmRleD1uZXcgdC5NdWx0aXBseShlLm1vZHVsYXRpb25JbmRleCksdGhpcy5tb2R1bGF0aW9uSW5kZXgudW5pdHM9dC5UeXBlLlBvc2l0aXZlLHRoaXMuX21vZHVsYXRpb25Ob2RlPW5ldyB0LkdhaW4oMCksdGhpcy5mcmVxdWVuY3kuY29ubmVjdCh0aGlzLl9jYXJyaWVyLmZyZXF1ZW5jeSksdGhpcy5mcmVxdWVuY3kuY2hhaW4odGhpcy5oYXJtb25pY2l0eSx0aGlzLl9tb2R1bGF0b3IuZnJlcXVlbmN5KSx0aGlzLmZyZXF1ZW5jeS5jaGFpbih0aGlzLm1vZHVsYXRpb25JbmRleCx0aGlzLl9tb2R1bGF0aW9uTm9kZSksdGhpcy5kZXR1bmUuZmFuKHRoaXMuX2NhcnJpZXIuZGV0dW5lLHRoaXMuX21vZHVsYXRvci5kZXR1bmUpLHRoaXMuX21vZHVsYXRvci5jb25uZWN0KHRoaXMuX21vZHVsYXRpb25Ob2RlLmdhaW4pLHRoaXMuX21vZHVsYXRpb25Ob2RlLmNvbm5lY3QodGhpcy5fY2Fycmllci5mcmVxdWVuY3kpLHRoaXMuX2NhcnJpZXIuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wiZnJlcXVlbmN5XCIsXCJoYXJtb25pY2l0eVwiLFwibW9kdWxhdGlvbkluZGV4XCIsXCJvc2NpbGxhdG9yXCIsXCJlbnZlbG9wZVwiLFwibW9kdWxhdGlvblwiLFwibW9kdWxhdGlvbkVudmVsb3BlXCIsXCJkZXR1bmVcIl0pfSx0LmV4dGVuZCh0LkZNU3ludGgsdC5Nb25vcGhvbmljKSx0LkZNU3ludGguZGVmYXVsdHM9e2hhcm1vbmljaXR5OjMsbW9kdWxhdGlvbkluZGV4OjEwLGRldHVuZTowLG9zY2lsbGF0b3I6e3R5cGU6XCJzaW5lXCJ9LGVudmVsb3BlOnthdHRhY2s6LjAxLGRlY2F5Oi4wMSxzdXN0YWluOjEscmVsZWFzZTouNX0sbW9kdWxhdGlvbjp7dHlwZTpcInNxdWFyZVwifSxtb2R1bGF0aW9uRW52ZWxvcGU6e2F0dGFjazouNSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fX0sdC5GTVN5bnRoLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlQXR0YWNrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5lbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQsZSksdGhpcy5tb2R1bGF0aW9uRW52ZWxvcGUudHJpZ2dlckF0dGFjayh0KSx0aGlzfSx0LkZNU3ludGgucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVSZWxlYXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuZW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpcy5tb2R1bGF0aW9uRW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpc30sdC5GTVN5bnRoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuTW9ub3Bob25pYy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImZyZXF1ZW5jeVwiLFwiaGFybW9uaWNpdHlcIixcIm1vZHVsYXRpb25JbmRleFwiLFwib3NjaWxsYXRvclwiLFwiZW52ZWxvcGVcIixcIm1vZHVsYXRpb25cIixcIm1vZHVsYXRpb25FbnZlbG9wZVwiLFwiZGV0dW5lXCJdKSx0aGlzLl9jYXJyaWVyLmRpc3Bvc2UoKSx0aGlzLl9jYXJyaWVyPW51bGwsdGhpcy5fbW9kdWxhdG9yLmRpc3Bvc2UoKSx0aGlzLl9tb2R1bGF0b3I9bnVsbCx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZS5kaXNwb3NlKCksdGhpcy5kZXR1bmU9bnVsbCx0aGlzLm1vZHVsYXRpb25JbmRleC5kaXNwb3NlKCksdGhpcy5tb2R1bGF0aW9uSW5kZXg9bnVsbCx0aGlzLmhhcm1vbmljaXR5LmRpc3Bvc2UoKSx0aGlzLmhhcm1vbmljaXR5PW51bGwsdGhpcy5fbW9kdWxhdGlvbk5vZGUuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRpb25Ob2RlPW51bGwsdGhpcy5vc2NpbGxhdG9yPW51bGwsdGhpcy5lbnZlbG9wZT1udWxsLHRoaXMubW9kdWxhdGlvbkVudmVsb3BlPW51bGwsdGhpcy5tb2R1bGF0aW9uPW51bGwsdGhpc30sdC5GTVN5bnRofSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5NZW1icmFuZVN5bnRoPWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5NZW1icmFuZVN5bnRoLmRlZmF1bHRzKSx0Lkluc3RydW1lbnQuY2FsbCh0aGlzLGUpLHRoaXMub3NjaWxsYXRvcj1uZXcgdC5PbW5pT3NjaWxsYXRvcihlLm9zY2lsbGF0b3IpLnN0YXJ0KCksdGhpcy5lbnZlbG9wZT1uZXcgdC5BbXBsaXR1ZGVFbnZlbG9wZShlLmVudmVsb3BlKSx0aGlzLm9jdGF2ZXM9ZS5vY3RhdmVzLHRoaXMucGl0Y2hEZWNheT1lLnBpdGNoRGVjYXksdGhpcy5vc2NpbGxhdG9yLmNoYWluKHRoaXMuZW52ZWxvcGUsdGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcIm9zY2lsbGF0b3JcIixcImVudmVsb3BlXCJdKX0sdC5leHRlbmQodC5NZW1icmFuZVN5bnRoLHQuSW5zdHJ1bWVudCksdC5NZW1icmFuZVN5bnRoLmRlZmF1bHRzPXtwaXRjaERlY2F5Oi4wNSxvY3RhdmVzOjEwLG9zY2lsbGF0b3I6e3R5cGU6XCJzaW5lXCJ9LGVudmVsb3BlOnthdHRhY2s6LjAwMSxkZWNheTouNCxzdXN0YWluOi4wMSxyZWxlYXNlOjEuNCxhdHRhY2tDdXJ2ZTpcImV4cG9uZW50aWFsXCJ9fSx0Lk1lbWJyYW5lU3ludGgucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlLGkpe2U9dGhpcy50b1NlY29uZHMoZSk7dmFyIG49KHQ9dGhpcy50b0ZyZXF1ZW5jeSh0KSkqdGhpcy5vY3RhdmVzO3JldHVybiB0aGlzLm9zY2lsbGF0b3IuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKG4sZSksdGhpcy5vc2NpbGxhdG9yLmZyZXF1ZW5jeS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKHQsZSt0aGlzLnRvU2Vjb25kcyh0aGlzLnBpdGNoRGVjYXkpKSx0aGlzLmVudmVsb3BlLnRyaWdnZXJBdHRhY2soZSxpKSx0aGlzfSx0Lk1lbWJyYW5lU3ludGgucHJvdG90eXBlLnRyaWdnZXJSZWxlYXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVudmVsb3BlLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXN9LHQuTWVtYnJhbmVTeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0Lkluc3RydW1lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJvc2NpbGxhdG9yXCIsXCJlbnZlbG9wZVwiXSksdGhpcy5vc2NpbGxhdG9yLmRpc3Bvc2UoKSx0aGlzLm9zY2lsbGF0b3I9bnVsbCx0aGlzLmVudmVsb3BlLmRpc3Bvc2UoKSx0aGlzLmVudmVsb3BlPW51bGwsdGhpc30sdC5NZW1icmFuZVN5bnRofSksdChmdW5jdGlvbih0KXt2YXIgZT1bMSwxLjQ4MywxLjkzMiwyLjU0NiwyLjYzLDMuODk3XTtyZXR1cm4gdC5NZXRhbFN5bnRoPWZ1bmN0aW9uKGkpe2k9dGhpcy5kZWZhdWx0QXJnKGksdC5NZXRhbFN5bnRoLmRlZmF1bHRzKSx0Lkluc3RydW1lbnQuY2FsbCh0aGlzLGkpLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbChpLmZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLl9vc2NpbGxhdG9ycz1bXSx0aGlzLl9mcmVxTXVsdGlwbGllcnM9W10sdGhpcy5fYW1wbGl0dWU9bmV3IHQuR2FpbigwKS5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9oaWdocGFzcz1uZXcgdC5GaWx0ZXIoe3R5cGU6XCJoaWdocGFzc1wiLFE6LTMuMDEwMjk5OTU2NjM5ODEyNX0pLmNvbm5lY3QodGhpcy5fYW1wbGl0dWUpLHRoaXMuX29jdGF2ZXM9aS5vY3RhdmVzLHRoaXMuX2ZpbHRlckZyZXFTY2FsZXI9bmV3IHQuU2NhbGUoaS5yZXNvbmFuY2UsN2UzKSx0aGlzLmVudmVsb3BlPW5ldyB0LkVudmVsb3BlKHthdHRhY2s6aS5lbnZlbG9wZS5hdHRhY2ssYXR0YWNrQ3VydmU6XCJsaW5lYXJcIixkZWNheTppLmVudmVsb3BlLmRlY2F5LHN1c3RhaW46MCxyZWxlYXNlOmkuZW52ZWxvcGUucmVsZWFzZX0pLmNoYWluKHRoaXMuX2ZpbHRlckZyZXFTY2FsZXIsdGhpcy5faGlnaHBhc3MuZnJlcXVlbmN5KSx0aGlzLmVudmVsb3BlLmNvbm5lY3QodGhpcy5fYW1wbGl0dWUuZ2Fpbik7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBzPW5ldyB0LkZNT3NjaWxsYXRvcih7dHlwZTpcInNxdWFyZVwiLG1vZHVsYXRpb25UeXBlOlwic3F1YXJlXCIsaGFybW9uaWNpdHk6aS5oYXJtb25pY2l0eSxtb2R1bGF0aW9uSW5kZXg6aS5tb2R1bGF0aW9uSW5kZXh9KTtzLmNvbm5lY3QodGhpcy5faGlnaHBhc3MpLnN0YXJ0KDApLHRoaXMuX29zY2lsbGF0b3JzW25dPXM7dmFyIG89bmV3IHQuTXVsdGlwbHkoZVtuXSk7dGhpcy5fZnJlcU11bHRpcGxpZXJzW25dPW8sdGhpcy5mcmVxdWVuY3kuY2hhaW4obyxzLmZyZXF1ZW5jeSl9dGhpcy5vY3RhdmVzPWkub2N0YXZlc30sdC5leHRlbmQodC5NZXRhbFN5bnRoLHQuSW5zdHJ1bWVudCksdC5NZXRhbFN5bnRoLmRlZmF1bHRzPXtmcmVxdWVuY3k6MjAwLGVudmVsb3BlOnthdHRhY2s6LjAwMSxkZWNheToxLjQscmVsZWFzZTouMn0saGFybW9uaWNpdHk6NS4xLG1vZHVsYXRpb25JbmRleDozMixyZXNvbmFuY2U6NGUzLG9jdGF2ZXM6MS41fSx0Lk1ldGFsU3ludGgucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSxlPXRoaXMuZGVmYXVsdEFyZyhlLDEpLHRoaXMuZW52ZWxvcGUudHJpZ2dlckF0dGFjayh0LGUpLHRoaXN9LHQuTWV0YWxTeW50aC5wcm90b3R5cGUudHJpZ2dlclJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5lbnZlbG9wZS50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzfSx0Lk1ldGFsU3ludGgucHJvdG90eXBlLnRyaWdnZXJBdHRhY2tSZWxlYXNlPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSx0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMudHJpZ2dlckF0dGFjayhlLGkpLHRoaXMudHJpZ2dlclJlbGVhc2UoZSt0KSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5NZXRhbFN5bnRoLnByb3RvdHlwZSxcIm1vZHVsYXRpb25JbmRleFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvcnNbMF0ubW9kdWxhdGlvbkluZGV4LnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLl9vc2NpbGxhdG9ycy5sZW5ndGg7ZSsrKXRoaXMuX29zY2lsbGF0b3JzW2VdLm1vZHVsYXRpb25JbmRleC52YWx1ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk1ldGFsU3ludGgucHJvdG90eXBlLFwiaGFybW9uaWNpdHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3JzWzBdLmhhcm1vbmljaXR5LnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLl9vc2NpbGxhdG9ycy5sZW5ndGg7ZSsrKXRoaXMuX29zY2lsbGF0b3JzW2VdLmhhcm1vbmljaXR5LnZhbHVlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTWV0YWxTeW50aC5wcm90b3R5cGUsXCJyZXNvbmFuY2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbHRlckZyZXFTY2FsZXIubWlufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZmlsdGVyRnJlcVNjYWxlci5taW49dCx0aGlzLm9jdGF2ZXM9dGhpcy5fb2N0YXZlc319KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5NZXRhbFN5bnRoLnByb3RvdHlwZSxcIm9jdGF2ZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29jdGF2ZXN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vY3RhdmVzPXQsdGhpcy5fZmlsdGVyRnJlcVNjYWxlci5tYXg9dGhpcy5fZmlsdGVyRnJlcVNjYWxlci5taW4qTWF0aC5wb3coMix0KX19KSx0Lk1ldGFsU3ludGgucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0Lkluc3RydW1lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtmb3IodmFyIGU9MDtlPHRoaXMuX29zY2lsbGF0b3JzLmxlbmd0aDtlKyspdGhpcy5fb3NjaWxsYXRvcnNbZV0uZGlzcG9zZSgpLHRoaXMuX2ZyZXFNdWx0aXBsaWVyc1tlXS5kaXNwb3NlKCk7dGhpcy5fb3NjaWxsYXRvcnM9bnVsbCx0aGlzLl9mcmVxTXVsdGlwbGllcnM9bnVsbCx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLl9maWx0ZXJGcmVxU2NhbGVyLmRpc3Bvc2UoKSx0aGlzLl9maWx0ZXJGcmVxU2NhbGVyPW51bGwsdGhpcy5fYW1wbGl0dWUuZGlzcG9zZSgpLHRoaXMuX2FtcGxpdHVlPW51bGwsdGhpcy5lbnZlbG9wZS5kaXNwb3NlKCksdGhpcy5lbnZlbG9wZT1udWxsLHRoaXMuX2hpZ2hwYXNzLmRpc3Bvc2UoKSx0aGlzLl9oaWdocGFzcz1udWxsfSx0Lk1ldGFsU3ludGh9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB3aW5kb3cuQXVkaW9CdWZmZXJTb3VyY2VOb2RlJiYhQXVkaW9CdWZmZXJTb3VyY2VOb2RlLnByb3RvdHlwZS5zdGFydCYmKEF1ZGlvQnVmZmVyU291cmNlTm9kZS5wcm90b3R5cGUuc3RhcnQ9QXVkaW9CdWZmZXJTb3VyY2VOb2RlLnByb3RvdHlwZS5ub3RlR3JhaW5PbixBdWRpb0J1ZmZlclNvdXJjZU5vZGUucHJvdG90eXBlLnN0b3A9QXVkaW9CdWZmZXJTb3VyY2VOb2RlLnByb3RvdHlwZS5ub3RlT2ZmKSx0LkJ1ZmZlclNvdXJjZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiYnVmZmVyXCIsXCJvbmVuZGVkXCJdLHQuQnVmZmVyU291cmNlLmRlZmF1bHRzKTt0aGlzLm9uZW5kZWQ9ZS5vbmVuZGVkLHRoaXMuX3N0YXJ0VGltZT0tMSx0aGlzLl9zdG9wVGltZT0tMSx0aGlzLl9nYWluTm9kZT10aGlzLm91dHB1dD1uZXcgdC5HYWluLHRoaXMuX3NvdXJjZT10aGlzLmNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCksdGhpcy5fc291cmNlLmNvbm5lY3QodGhpcy5fZ2Fpbk5vZGUpLHRoaXMucGxheWJhY2tSYXRlPW5ldyB0LlBhcmFtKHRoaXMuX3NvdXJjZS5wbGF5YmFja1JhdGUsdC5UeXBlLlBvc2l0aXZlKSx0aGlzLmZhZGVJbj1lLmZhZGVJbix0aGlzLmZhZGVPdXQ9ZS5mYWRlT3V0LHRoaXMuX2dhaW49MSx0aGlzLl9vbmVuZGVkVGltZW91dD0tMSx0aGlzLmlzVW5kZWYoZS5idWZmZXIpfHwodGhpcy5idWZmZXI9ZS5idWZmZXIpLHRoaXMubG9vcD1lLmxvb3B9LHQuZXh0ZW5kKHQuQnVmZmVyU291cmNlKSx0LkJ1ZmZlclNvdXJjZS5kZWZhdWx0cz17b25lbmRlZDp0Lm5vT3AsZmFkZUluOjAsZmFkZU91dDowfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5CdWZmZXJTb3VyY2UucHJvdG90eXBlLFwic3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ub3coKTtyZXR1cm4tMSE9PXRoaXMuX3N0YXJ0VGltZSYmZT49dGhpcy5fc3RhcnRUaW1lJiZlPHRoaXMuX3N0b3BUaW1lP3QuU3RhdGUuU3RhcnRlZDp0LlN0YXRlLlN0b3BwZWR9fSksdC5CdWZmZXJTb3VyY2UucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQsZSxpLG4scyl7aWYoLTEhPT10aGlzLl9zdGFydFRpbWUpdGhyb3cgbmV3IEVycm9yKFwiVG9uZS5CdWZmZXJTb3VyY2U6IGNhbiBvbmx5IGJlIHN0YXJ0ZWQgb25jZS5cIik7cmV0dXJuIHRoaXMuYnVmZmVyJiYodD10aGlzLnRvU2Vjb25kcyh0KSxlPXRoaXMubG9vcD90aGlzLmRlZmF1bHRBcmcoZSx0aGlzLmxvb3BTdGFydCk6dGhpcy5kZWZhdWx0QXJnKGUsMCksZT10aGlzLnRvU2Vjb25kcyhlKSx0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX3NvdXJjZS5zdGFydCh0LGUpLG49dGhpcy5kZWZhdWx0QXJnKG4sMSksdGhpcy5fZ2Fpbj1uLChzPXRoaXMuaXNVbmRlZihzKT90aGlzLnRvU2Vjb25kcyh0aGlzLmZhZGVJbik6dGhpcy50b1NlY29uZHMocykpPjA/KHRoaXMuX2dhaW5Ob2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCx0KSx0aGlzLl9nYWluTm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRoaXMuX2dhaW4sdCtzKSk6dGhpcy5fZ2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZShuLHQpLHRoaXMuX3N0YXJ0VGltZT10K3MsdGhpcy5pc1VuZGVmKGkpfHwoaT10aGlzLmRlZmF1bHRBcmcoaSx0aGlzLmJ1ZmZlci5kdXJhdGlvbi1lKSxpPXRoaXMudG9TZWNvbmRzKGkpLHRoaXMuc3RvcCh0K2krcyxzKSkpLHRoaXN9LHQuQnVmZmVyU291cmNlLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYnVmZmVyJiYodD10aGlzLnRvU2Vjb25kcyh0KSxlPXRoaXMuaXNVbmRlZihlKT90aGlzLnRvU2Vjb25kcyh0aGlzLmZhZGVPdXQpOnRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX3N0b3BUaW1lPXQrZSx0aGlzLl9nYWluTm9kZS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyh0aGlzLl9zdGFydFRpbWUrdGhpcy5zYW1wbGVUaW1lKSxlPjA/KHRoaXMuX2dhaW5Ob2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodGhpcy5fZ2Fpbix0KSx0aGlzLl9nYWluTm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsdCtlKSx0Kz1lKTp0aGlzLl9nYWluTm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKDAsdCksdGhpcy5pc051bWJlcih0aGlzLl9zb3VyY2UucGxheWJhY2tTdGF0ZSkmJjIhPT10aGlzLl9zb3VyY2UucGxheWJhY2tTdGF0ZXx8dGhpcy5fc291cmNlLnN0b3AodCksY2xlYXJUaW1lb3V0KHRoaXMuX29uZW5kZWRUaW1lb3V0KSx0aGlzLl9vbmVuZGVkVGltZW91dD1zZXRUaW1lb3V0KHRoaXMuX29uZW5kZWQuYmluZCh0aGlzKSwxZTMqKHRoaXMuX3N0b3BUaW1lLXRoaXMubm93KCkpKSksdGhpc30sdC5CdWZmZXJTb3VyY2UucHJvdG90eXBlLl9vbmVuZGVkPWZ1bmN0aW9uKCl7dGhpcy5vbmVuZGVkKHRoaXMpLHRoaXMuZGlzcG9zZSgpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5CdWZmZXJTb3VyY2UucHJvdG90eXBlLFwibG9vcFN0YXJ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2UubG9vcFN0YXJ0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlLmxvb3BTdGFydD10aGlzLnRvU2Vjb25kcyh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5CdWZmZXJTb3VyY2UucHJvdG90eXBlLFwibG9vcEVuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlLmxvb3BFbmR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zb3VyY2UubG9vcEVuZD10aGlzLnRvU2Vjb25kcyh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5CdWZmZXJTb3VyY2UucHJvdG90eXBlLFwiYnVmZmVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2U/dGhpcy5fc291cmNlLmJ1ZmZlcjpudWxsfSxzZXQ6ZnVuY3Rpb24oZSl7ZSBpbnN0YW5jZW9mIHQuQnVmZmVyP3RoaXMuX3NvdXJjZS5idWZmZXI9ZS5nZXQoKTp0aGlzLl9zb3VyY2UuYnVmZmVyPWV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQnVmZmVyU291cmNlLnByb3RvdHlwZSxcImxvb3BcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZS5sb29wfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlLmxvb3A9dH19KSx0LkJ1ZmZlclNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9uZW5kZWQ9bnVsbCx0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UuZGlzY29ubmVjdCgpLHRoaXMuX3NvdXJjZT1udWxsKSx0aGlzLl9nYWluTm9kZSYmKHRoaXMuX2dhaW5Ob2RlLmRpc3Bvc2UoKSx0aGlzLl9nYWluTm9kZT1udWxsKSx0aGlzLl9zdGFydFRpbWU9LTEsdGhpcy5wbGF5YmFja1JhdGU9bnVsbCx0aGlzLm91dHB1dD1udWxsLGNsZWFyVGltZW91dCh0aGlzLl9vbmVuZGVkVGltZW91dCksdGhpc30sdC5CdWZmZXJTb3VyY2V9KSx0KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtmb3IodmFyIGUgaW4gaSluW2VdPShuZXcgdC5CdWZmZXIpLmZyb21BcnJheShpW2VdKX10Lk5vaXNlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ0eXBlXCJdLHQuTm9pc2UuZGVmYXVsdHMpO3QuU291cmNlLmNhbGwodGhpcyxlKSx0aGlzLl9zb3VyY2U9bnVsbCx0aGlzLl90eXBlPWUudHlwZSx0aGlzLl9wbGF5YmFja1JhdGU9ZS5wbGF5YmFja1JhdGV9LHQuZXh0ZW5kKHQuTm9pc2UsdC5Tb3VyY2UpLHQuTm9pc2UuZGVmYXVsdHM9e3R5cGU6XCJ3aGl0ZVwiLHBsYXliYWNrUmF0ZToxfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Ob2lzZS5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlfSxzZXQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5fdHlwZSE9PWUpe2lmKCEoZSBpbiBuKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVG9uZS5Ob2lzZTogaW52YWxpZCB0eXBlOiBcIitlKTtpZih0aGlzLl90eXBlPWUsdGhpcy5zdGF0ZT09PXQuU3RhdGUuU3RhcnRlZCl7dmFyIGk9dGhpcy5ub3coKSt0aGlzLmJsb2NrVGltZTt0aGlzLl9zdG9wKGkpLHRoaXMuX3N0YXJ0KGkpfX19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTm9pc2UucHJvdG90eXBlLFwicGxheWJhY2tSYXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5YmFja1JhdGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wbGF5YmFja1JhdGU9dCx0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UucGxheWJhY2tSYXRlLnZhbHVlPXQpfX0pLHQuTm9pc2UucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbihlKXt2YXIgaT1uW3RoaXMuX3R5cGVdO3RoaXMuX3NvdXJjZT1uZXcgdC5CdWZmZXJTb3VyY2UoaSkuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fc291cmNlLmxvb3A9ITAsdGhpcy5fc291cmNlLnBsYXliYWNrUmF0ZS52YWx1ZT10aGlzLl9wbGF5YmFja1JhdGUsdGhpcy5fc291cmNlLnN0YXJ0KHRoaXMudG9TZWNvbmRzKGUpLE1hdGgucmFuZG9tKCkqKGkuZHVyYXRpb24tLjAwMSkpfSx0Lk5vaXNlLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2Uuc3RvcCh0aGlzLnRvU2Vjb25kcyh0KSksdGhpcy5fc291cmNlPW51bGwpfSx0Lk5vaXNlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksbnVsbCE9PXRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5kaXNjb25uZWN0KCksdGhpcy5fc291cmNlPW51bGwpLHRoaXMuX2J1ZmZlcj1udWxsLHRoaXN9O3ZhciBpPXtwaW5rOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPDI7ZSsrKXt2YXIgaT1uZXcgRmxvYXQzMkFycmF5KDIyMDUwMCk7dFtlXT1pO3ZhciBuLHMsbyxyLGEsaCxsO249cz1vPXI9YT1oPWw9MDtmb3IodmFyIHU9MDt1PDIyMDUwMDt1Kyspe3ZhciBwPTIqTWF0aC5yYW5kb20oKS0xO249Ljk5ODg2Km4rLjA1NTUxNzkqcCxzPS45OTMzMipzKy4wNzUwNzU5KnAsbz0uOTY5Km8rLjE1Mzg1MipwLHI9Ljg2NjUqcisuMzEwNDg1NipwLGE9LjU1KmErLjUzMjk1MjIqcCxoPS0uNzYxNipoLS4wMTY4OTgqcCxpW3VdPW4rcytvK3IrYStoK2wrLjUzNjIqcCxpW3VdKj0uMTEsbD0uMTE1OTI2KnB9fXJldHVybiB0fSgpLGJyb3duOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPDI7ZSsrKXt2YXIgaT1uZXcgRmxvYXQzMkFycmF5KDIyMDUwMCk7dFtlXT1pO2Zvcih2YXIgbj0wLHM9MDtzPDIyMDUwMDtzKyspe3ZhciBvPTIqTWF0aC5yYW5kb20oKS0xO2lbc109KG4rLjAyKm8pLzEuMDIsbj1pW3NdLGlbc10qPTMuNX19cmV0dXJuIHR9KCksd2hpdGU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8MjtlKyspe3ZhciBpPW5ldyBGbG9hdDMyQXJyYXkoMjIwNTAwKTt0W2VdPWk7Zm9yKHZhciBuPTA7bjwyMjA1MDA7bisrKWlbbl09MipNYXRoLnJhbmRvbSgpLTF9cmV0dXJuIHR9KCl9LG49e307cmV0dXJuIGUoKSx0LkNvbnRleHQub24oXCJpbml0XCIsZSksdC5Ob2lzZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTm9pc2VTeW50aD1mdW5jdGlvbihlKXtlPXRoaXMuZGVmYXVsdEFyZyhlLHQuTm9pc2VTeW50aC5kZWZhdWx0cyksdC5JbnN0cnVtZW50LmNhbGwodGhpcyxlKSx0aGlzLm5vaXNlPW5ldyB0Lk5vaXNlLHRoaXMuZW52ZWxvcGU9bmV3IHQuQW1wbGl0dWRlRW52ZWxvcGUoZS5lbnZlbG9wZSksdGhpcy5ub2lzZS5jaGFpbih0aGlzLmVudmVsb3BlLHRoaXMub3V0cHV0KSx0aGlzLm5vaXNlLnN0YXJ0KCksdGhpcy5fcmVhZE9ubHkoW1wibm9pc2VcIixcImVudmVsb3BlXCJdKX0sdC5leHRlbmQodC5Ob2lzZVN5bnRoLHQuSW5zdHJ1bWVudCksdC5Ob2lzZVN5bnRoLmRlZmF1bHRzPXtub2lzZTp7dHlwZTpcIndoaXRlXCJ9LGVudmVsb3BlOnthdHRhY2s6LjAwNSxkZWNheTouMSxzdXN0YWluOjB9fSx0Lk5vaXNlU3ludGgucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5lbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQsZSksdGhpc30sdC5Ob2lzZVN5bnRoLnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbnZlbG9wZS50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzfSx0Lk5vaXNlU3ludGgucHJvdG90eXBlLnRyaWdnZXJBdHRhY2tSZWxlYXNlPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSx0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMudHJpZ2dlckF0dGFjayhlLGkpLHRoaXMudHJpZ2dlclJlbGVhc2UoZSt0KSx0aGlzfSx0Lk5vaXNlU3ludGgucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5JbnN0cnVtZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wibm9pc2VcIixcImVudmVsb3BlXCJdKSx0aGlzLm5vaXNlLmRpc3Bvc2UoKSx0aGlzLm5vaXNlPW51bGwsdGhpcy5lbnZlbG9wZS5kaXNwb3NlKCksdGhpcy5lbnZlbG9wZT1udWxsLHRoaXN9LHQuTm9pc2VTeW50aH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuUGx1Y2tTeW50aD1mdW5jdGlvbihlKXtlPXRoaXMuZGVmYXVsdEFyZyhlLHQuUGx1Y2tTeW50aC5kZWZhdWx0cyksdC5JbnN0cnVtZW50LmNhbGwodGhpcyxlKSx0aGlzLl9ub2lzZT1uZXcgdC5Ob2lzZShcInBpbmtcIiksdGhpcy5hdHRhY2tOb2lzZT1lLmF0dGFja05vaXNlLHRoaXMuX2xmY2Y9bmV3IHQuTG93cGFzc0NvbWJGaWx0ZXIoe3Jlc29uYW5jZTplLnJlc29uYW5jZSxkYW1wZW5pbmc6ZS5kYW1wZW5pbmd9KSx0aGlzLnJlc29uYW5jZT10aGlzLl9sZmNmLnJlc29uYW5jZSx0aGlzLmRhbXBlbmluZz10aGlzLl9sZmNmLmRhbXBlbmluZyx0aGlzLl9ub2lzZS5jb25uZWN0KHRoaXMuX2xmY2YpLHRoaXMuX2xmY2YuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wicmVzb25hbmNlXCIsXCJkYW1wZW5pbmdcIl0pfSx0LmV4dGVuZCh0LlBsdWNrU3ludGgsdC5JbnN0cnVtZW50KSx0LlBsdWNrU3ludGguZGVmYXVsdHM9e2F0dGFja05vaXNlOjEsZGFtcGVuaW5nOjRlMyxyZXNvbmFuY2U6Ljl9LHQuUGx1Y2tTeW50aC5wcm90b3R5cGUudHJpZ2dlckF0dGFjaz1mdW5jdGlvbih0LGUpe3Q9dGhpcy50b0ZyZXF1ZW5jeSh0KSxlPXRoaXMudG9TZWNvbmRzKGUpO3ZhciBpPTEvdDtyZXR1cm4gdGhpcy5fbGZjZi5kZWxheVRpbWUuc2V0VmFsdWVBdFRpbWUoaSxlKSx0aGlzLl9ub2lzZS5zdGFydChlKSx0aGlzLl9ub2lzZS5zdG9wKGUraSp0aGlzLmF0dGFja05vaXNlKSx0aGlzfSx0LlBsdWNrU3ludGgucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5JbnN0cnVtZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbm9pc2UuZGlzcG9zZSgpLHRoaXMuX2xmY2YuZGlzcG9zZSgpLHRoaXMuX25vaXNlPW51bGwsdGhpcy5fbGZjZj1udWxsLHRoaXMuX3dyaXRhYmxlKFtcInJlc29uYW5jZVwiLFwiZGFtcGVuaW5nXCJdKSx0aGlzLmRhbXBlbmluZz1udWxsLHRoaXMucmVzb25hbmNlPW51bGwsdGhpc30sdC5QbHVja1N5bnRofSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Qb2x5U3ludGg9ZnVuY3Rpb24oKXt0Lkluc3RydW1lbnQuY2FsbCh0aGlzKTt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInBvbHlwaG9ueVwiLFwidm9pY2VcIl0sdC5Qb2x5U3ludGguZGVmYXVsdHMpOyhlPXRoaXMuZGVmYXVsdEFyZyhlLHQuSW5zdHJ1bWVudC5kZWZhdWx0cykpLnBvbHlwaG9ueT1NYXRoLm1pbih0LlBvbHlTeW50aC5NQVhfUE9MWVBIT05ZLGUucG9seXBob255KSx0aGlzLnZvaWNlcz1uZXcgQXJyYXkoZS5wb2x5cGhvbnkpLHRoaXMuX3RyaWdnZXJzPW5ldyBBcnJheShlLnBvbHlwaG9ueSksdGhpcy5kZXR1bmU9bmV3IHQuU2lnbmFsKGUuZGV0dW5lLHQuVHlwZS5DZW50cyksdGhpcy5fcmVhZE9ubHkoXCJkZXR1bmVcIik7Zm9yKHZhciBpPTA7aTxlLnBvbHlwaG9ueTtpKyspe3ZhciBuPW5ldyBlLnZvaWNlKGFyZ3VtZW50c1syXSxhcmd1bWVudHNbM10pO3RoaXMudm9pY2VzW2ldPW4sbi5jb25uZWN0KHRoaXMub3V0cHV0KSxuLmhhc093blByb3BlcnR5KFwiZGV0dW5lXCIpJiZ0aGlzLmRldHVuZS5jb25uZWN0KG4uZGV0dW5lKSx0aGlzLl90cmlnZ2Vyc1tpXT17cmVsZWFzZTotMSxub3RlOm51bGwsdm9pY2U6bn19dGhpcy52b2x1bWUudmFsdWU9ZS52b2x1bWV9LHQuZXh0ZW5kKHQuUG9seVN5bnRoLHQuSW5zdHJ1bWVudCksdC5Qb2x5U3ludGguZGVmYXVsdHM9e3BvbHlwaG9ueTo0LHZvbHVtZTowLGRldHVuZTowLHZvaWNlOnQuU3ludGh9LHQuUG9seVN5bnRoLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrPWZ1bmN0aW9uKHQsZSxpKXtBcnJheS5pc0FycmF5KHQpfHwodD1bdF0pLGU9dGhpcy50b1NlY29uZHMoZSk7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe2Zvcih2YXIgcz10W25dLG89dGhpcy5fdHJpZ2dlcnNbMF0scj0xO3I8dGhpcy5fdHJpZ2dlcnMubGVuZ3RoO3IrKyl0aGlzLl90cmlnZ2Vyc1tyXS5yZWxlYXNlPG8ucmVsZWFzZSYmKG89dGhpcy5fdHJpZ2dlcnNbcl0scik7by5yZWxlYXNlPTEvMCxvLm5vdGU9SlNPTi5zdHJpbmdpZnkocyksby52b2ljZS50cmlnZ2VyQXR0YWNrKHMsZSxpKX1yZXR1cm4gdGhpc30sdC5Qb2x5U3ludGgucHJvdG90eXBlLnRyaWdnZXJBdHRhY2tSZWxlYXNlPWZ1bmN0aW9uKHQsZSxpLG4pe2lmKGk9dGhpcy50b1NlY29uZHMoaSksdGhpcy50cmlnZ2VyQXR0YWNrKHQsaSxuKSx0aGlzLmlzQXJyYXkoZSkmJnRoaXMuaXNBcnJheSh0KSlmb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKyl7dmFyIG89ZVtNYXRoLm1pbihzLGUubGVuZ3RoLTEpXTt0aGlzLnRyaWdnZXJSZWxlYXNlKHRbc10saSt0aGlzLnRvU2Vjb25kcyhvKSl9ZWxzZSB0aGlzLnRyaWdnZXJSZWxlYXNlKHQsaSt0aGlzLnRvU2Vjb25kcyhlKSk7cmV0dXJuIHRoaXN9LHQuUG9seVN5bnRoLnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT1mdW5jdGlvbih0LGUpe0FycmF5LmlzQXJyYXkodCl8fCh0PVt0XSksZT10aGlzLnRvU2Vjb25kcyhlKTtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKylmb3IodmFyIG49SlNPTi5zdHJpbmdpZnkodFtpXSkscz0wO3M8dGhpcy5fdHJpZ2dlcnMubGVuZ3RoO3MrKyl7dmFyIG89dGhpcy5fdHJpZ2dlcnNbc107by5ub3RlPT09biYmby5yZWxlYXNlPmUmJihvLnZvaWNlLnRyaWdnZXJSZWxlYXNlKGUpLG8ucmVsZWFzZT1lKX1yZXR1cm4gdGhpc30sdC5Qb2x5U3ludGgucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUsaSl7Zm9yKHZhciBuPTA7bjx0aGlzLnZvaWNlcy5sZW5ndGg7bisrKXRoaXMudm9pY2VzW25dLnNldCh0LGUsaSk7cmV0dXJuIHRoaXN9LHQuUG9seVN5bnRoLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudm9pY2VzWzBdLmdldCh0KX0sdC5Qb2x5U3ludGgucHJvdG90eXBlLnJlbGVhc2VBbGw9ZnVuY3Rpb24odCl7dD10aGlzLnRvU2Vjb25kcyh0KTtmb3IodmFyIGU9MDtlPHRoaXMuX3RyaWdnZXJzLmxlbmd0aDtlKyspe3ZhciBpPXRoaXMuX3RyaWdnZXJzW2VdO2kucmVsZWFzZT50JiYoaS5yZWxlYXNlPXQsaS52b2ljZS50cmlnZ2VyUmVsZWFzZSh0KSl9cmV0dXJuIHRoaXN9LHQuUG9seVN5bnRoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5JbnN0cnVtZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7Zm9yKHZhciBlPTA7ZTx0aGlzLnZvaWNlcy5sZW5ndGg7ZSsrKXRoaXMudm9pY2VzW2VdLmRpc3Bvc2UoKSx0aGlzLnZvaWNlc1tlXT1udWxsO3JldHVybiB0aGlzLl93cml0YWJsZShcImRldHVuZVwiKSx0aGlzLmRldHVuZS5kaXNwb3NlKCksdGhpcy5kZXR1bmU9bnVsbCx0aGlzLnZvaWNlcz1udWxsLHRoaXMuX3RyaWdnZXJzPW51bGwsdGhpc30sdC5Qb2x5U3ludGguTUFYX1BPTFlQSE9OWT0yMCx0LlBvbHlTeW50aH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuUGxheWVyPWZ1bmN0aW9uKGUpe3ZhciBpO2UgaW5zdGFuY2VvZiB0LkJ1ZmZlcj8oZT1lLmdldCgpLGk9dC5QbGF5ZXIuZGVmYXVsdHMpOmk9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ1cmxcIixcIm9ubG9hZFwiXSx0LlBsYXllci5kZWZhdWx0cyksdC5Tb3VyY2UuY2FsbCh0aGlzLGkpLHRoaXMuX3NvdXJjZT1udWxsLHRoaXMuYXV0b3N0YXJ0PWkuYXV0b3N0YXJ0LHRoaXMuX2J1ZmZlcj1uZXcgdC5CdWZmZXIoe3VybDppLnVybCxvbmxvYWQ6dGhpcy5fb25sb2FkLmJpbmQodGhpcyxpLm9ubG9hZCkscmV2ZXJzZTppLnJldmVyc2V9KSxlIGluc3RhbmNlb2YgQXVkaW9CdWZmZXImJnRoaXMuX2J1ZmZlci5zZXQoZSksdGhpcy5fbG9vcD1pLmxvb3AsdGhpcy5fbG9vcFN0YXJ0PWkubG9vcFN0YXJ0LHRoaXMuX2xvb3BFbmQ9aS5sb29wRW5kLHRoaXMuX3BsYXliYWNrUmF0ZT1pLnBsYXliYWNrUmF0ZSx0aGlzLnJldHJpZ2dlcj1pLnJldHJpZ2dlcn0sdC5leHRlbmQodC5QbGF5ZXIsdC5Tb3VyY2UpLHQuUGxheWVyLmRlZmF1bHRzPXtvbmxvYWQ6dC5ub09wLHBsYXliYWNrUmF0ZToxLGxvb3A6ITEsYXV0b3N0YXJ0OiExLGxvb3BTdGFydDowLGxvb3BFbmQ6MCxyZXRyaWdnZXI6ITEscmV2ZXJzZTohMX0sdC5QbGF5ZXIucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fYnVmZmVyLmxvYWQodCx0aGlzLl9vbmxvYWQuYmluZCh0aGlzLGUpKX0sdC5QbGF5ZXIucHJvdG90eXBlLl9vbmxvYWQ9ZnVuY3Rpb24oZSl7KGU9dGhpcy5kZWZhdWx0QXJnKGUsdC5ub09wKSkodGhpcyksdGhpcy5hdXRvc3RhcnQmJnRoaXMuc3RhcnQoKX0sdC5QbGF5ZXIucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbihlLGksbil7aWYoIXRoaXMuX2J1ZmZlci5sb2FkZWQpdGhyb3cgRXJyb3IoXCJUb25lLlBsYXllcjogdHJpZWQgdG8gc3RhcnQgUGxheWVyIGJlZm9yZSB0aGUgYnVmZmVyIHdhcyBsb2FkZWRcIik7aWYoaT10aGlzLl9sb29wP3RoaXMuZGVmYXVsdEFyZyhpLHRoaXMuX2xvb3BTdGFydCk6dGhpcy5kZWZhdWx0QXJnKGksMCksaT10aGlzLnRvU2Vjb25kcyhpKSxuPXRoaXMuZGVmYXVsdEFyZyhuLE1hdGgubWF4KHRoaXMuX2J1ZmZlci5kdXJhdGlvbi1pLDApKSxuPXRoaXMudG9TZWNvbmRzKG4pLGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5fc291cmNlPXRoaXMuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKSx0aGlzLl9zb3VyY2UuYnVmZmVyPXRoaXMuX2J1ZmZlci5nZXQoKSx0aGlzLl9sb29wPyh0aGlzLl9zb3VyY2UubG9vcD10aGlzLl9sb29wLHRoaXMuX3NvdXJjZS5sb29wU3RhcnQ9dGhpcy50b1NlY29uZHModGhpcy5fbG9vcFN0YXJ0KSx0aGlzLl9zb3VyY2UubG9vcEVuZD10aGlzLnRvU2Vjb25kcyh0aGlzLl9sb29wRW5kKSk6dGhpcy5fc3luY2VkfHx0aGlzLl9zdGF0ZS5zZXRTdGF0ZUF0VGltZSh0LlN0YXRlLlN0b3BwZWQsZStuKSx0aGlzLl9zb3VyY2UucGxheWJhY2tSYXRlLnZhbHVlPXRoaXMuX3BsYXliYWNrUmF0ZSx0aGlzLl9zb3VyY2UuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fbG9vcCl7dmFyIHM9dGhpcy5fc291cmNlLmxvb3BFbmR8fHRoaXMuX2J1ZmZlci5kdXJhdGlvbixvPXMtdGhpcy5fc291cmNlLmxvb3BTdGFydDtpZihpPnMpZm9yKDtpPnM7KWktPW87dGhpcy5fc291cmNlLnN0YXJ0KGUsaSl9ZWxzZSB0aGlzLl9zb3VyY2Uuc3RhcnQoZSxpLG4pO3JldHVybiB0aGlzfSx0LlBsYXllci5wcm90b3R5cGUuX3N0b3A9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5zdG9wKHRoaXMudG9TZWNvbmRzKHQpKSx0aGlzLl9zb3VyY2U9bnVsbCksdGhpc30sdC5QbGF5ZXIucHJvdG90eXBlLnNlZWs9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gaT10aGlzLnRvU2Vjb25kcyhpKSx0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZShpKT09PXQuU3RhdGUuU3RhcnRlZCYmKGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5fc3RvcChpKSx0aGlzLl9zdGFydChpLGUpKSx0aGlzfSx0LlBsYXllci5wcm90b3R5cGUuc2V0TG9vcFBvaW50cz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmxvb3BTdGFydD10LHRoaXMubG9vcEVuZD1lLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllci5wcm90b3R5cGUsXCJsb29wU3RhcnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvb3BTdGFydH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3BTdGFydD10LHRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5sb29wU3RhcnQ9dGhpcy50b1NlY29uZHModCkpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllci5wcm90b3R5cGUsXCJsb29wRW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wRW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcEVuZD10LHRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5sb29wRW5kPXRoaXMudG9TZWNvbmRzKHQpKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QbGF5ZXIucHJvdG90eXBlLFwiYnVmZmVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9idWZmZXIuc2V0KHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllci5wcm90b3R5cGUsXCJsb29wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcD10LHRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5sb29wPXQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllci5wcm90b3R5cGUsXCJwbGF5YmFja1JhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXliYWNrUmF0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BsYXliYWNrUmF0ZT10LHRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5wbGF5YmFja1JhdGUudmFsdWU9dCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGxheWVyLnByb3RvdHlwZSxcInJldmVyc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci5yZXZlcnNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYnVmZmVyLnJldmVyc2U9dH19KSx0LlBsYXllci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLG51bGwhPT10aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UuZGlzY29ubmVjdCgpLHRoaXMuX3NvdXJjZT1udWxsKSx0aGlzLl9idWZmZXIuZGlzcG9zZSgpLHRoaXMuX2J1ZmZlcj1udWxsLHRoaXN9LHQuUGxheWVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5TYW1wbGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ1cmxcIixcIm9ubG9hZFwiXSx0LlNhbXBsZXIuZGVmYXVsdHMpO3QuSW5zdHJ1bWVudC5jYWxsKHRoaXMsZSksdGhpcy5wbGF5ZXI9bmV3IHQuUGxheWVyKGUudXJsLGUub25sb2FkKSx0aGlzLnBsYXllci5yZXRyaWdnZXI9ITAsdGhpcy5lbnZlbG9wZT1uZXcgdC5BbXBsaXR1ZGVFbnZlbG9wZShlLmVudmVsb3BlKSx0aGlzLnBsYXllci5jaGFpbih0aGlzLmVudmVsb3BlLHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJwbGF5ZXJcIixcImVudmVsb3BlXCJdKSx0aGlzLmxvb3A9ZS5sb29wLHRoaXMucmV2ZXJzZT1lLnJldmVyc2V9LHQuZXh0ZW5kKHQuU2FtcGxlcix0Lkluc3RydW1lbnQpLHQuU2FtcGxlci5kZWZhdWx0cz17b25sb2FkOnQubm9PcCxsb29wOiExLHJldmVyc2U6ITEsZW52ZWxvcGU6e2F0dGFjazouMDAxLGRlY2F5OjAsc3VzdGFpbjoxLHJlbGVhc2U6LjF9fSx0LlNhbXBsZXIucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHQ9dGhpcy5kZWZhdWx0QXJnKHQsMCksdGhpcy5wbGF5ZXIucGxheWJhY2tSYXRlPXRoaXMuaW50ZXJ2YWxUb0ZyZXF1ZW5jeVJhdGlvKHQpLHRoaXMucGxheWVyLnN0YXJ0KGUpLHRoaXMuZW52ZWxvcGUudHJpZ2dlckF0dGFjayhlLGkpLHRoaXN9LHQuU2FtcGxlci5wcm90b3R5cGUudHJpZ2dlclJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5lbnZlbG9wZS50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzLnBsYXllci5zdG9wKHRoaXMudG9TZWNvbmRzKHRoaXMuZW52ZWxvcGUucmVsZWFzZSkrdCksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2FtcGxlci5wcm90b3R5cGUsXCJsb29wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBsYXllci5sb29wfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5wbGF5ZXIubG9vcD10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlNhbXBsZXIucHJvdG90eXBlLFwicmV2ZXJzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wbGF5ZXIucmV2ZXJzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMucGxheWVyLnJldmVyc2U9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5TYW1wbGVyLnByb3RvdHlwZSxcImJ1ZmZlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wbGF5ZXIuYnVmZmVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5wbGF5ZXIuYnVmZmVyPXR9fSksdC5TYW1wbGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuSW5zdHJ1bWVudC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcInBsYXllclwiLFwiZW52ZWxvcGVcIl0pLHRoaXMucGxheWVyLmRpc3Bvc2UoKSx0aGlzLnBsYXllcj1udWxsLHRoaXMuZW52ZWxvcGUuZGlzcG9zZSgpLHRoaXMuZW52ZWxvcGU9bnVsbCx0aGlzfSx0LlNhbXBsZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkdhaW5Ub0F1ZGlvPWZ1bmN0aW9uKCl7dGhpcy5fbm9ybT10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LldhdmVTaGFwZXIoZnVuY3Rpb24odCl7cmV0dXJuIDIqTWF0aC5hYnModCktMX0pfSx0LmV4dGVuZCh0LkdhaW5Ub0F1ZGlvLHQuU2lnbmFsQmFzZSksdC5HYWluVG9BdWRpby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbm9ybS5kaXNwb3NlKCksdGhpcy5fbm9ybT1udWxsLHRoaXN9LHQuR2FpblRvQXVkaW99KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lk5vcm1hbGl6ZT1mdW5jdGlvbihlLGkpe3RoaXMuX2lucHV0TWluPXRoaXMuZGVmYXVsdEFyZyhlLDApLHRoaXMuX2lucHV0TWF4PXRoaXMuZGVmYXVsdEFyZyhpLDEpLHRoaXMuX3N1Yj10aGlzLmlucHV0PW5ldyB0LkFkZCgwKSx0aGlzLl9kaXY9dGhpcy5vdXRwdXQ9bmV3IHQuTXVsdGlwbHkoMSksdGhpcy5fc3ViLmNvbm5lY3QodGhpcy5fZGl2KSx0aGlzLl9zZXRSYW5nZSgpfSx0LmV4dGVuZCh0Lk5vcm1hbGl6ZSx0LlNpZ25hbEJhc2UpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk5vcm1hbGl6ZS5wcm90b3R5cGUsXCJtaW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lucHV0TWlufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faW5wdXRNaW49dCx0aGlzLl9zZXRSYW5nZSgpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk5vcm1hbGl6ZS5wcm90b3R5cGUsXCJtYXhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lucHV0TWF4fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faW5wdXRNYXg9dCx0aGlzLl9zZXRSYW5nZSgpfX0pLHQuTm9ybWFsaXplLnByb3RvdHlwZS5fc2V0UmFuZ2U9ZnVuY3Rpb24oKXt0aGlzLl9zdWIudmFsdWU9LXRoaXMuX2lucHV0TWluLHRoaXMuX2Rpdi52YWx1ZT0xLyh0aGlzLl9pbnB1dE1heC10aGlzLl9pbnB1dE1pbil9LHQuTm9ybWFsaXplLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zdWIuZGlzcG9zZSgpLHRoaXMuX3N1Yj1udWxsLHRoaXMuX2Rpdi5kaXNwb3NlKCksdGhpcy5fZGl2PW51bGwsdGhpc30sdC5Ob3JtYWxpemV9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lk11bHRpUGxheWVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ1cmxzXCIsXCJvbmxvYWRcIl0sdC5NdWx0aVBsYXllci5kZWZhdWx0cyk7ZS51cmxzIGluc3RhbmNlb2YgdC5CdWZmZXJzP3RoaXMuYnVmZmVycz1lLnVybHM6dGhpcy5idWZmZXJzPW5ldyB0LkJ1ZmZlcnMoZS51cmxzLGUub25sb2FkKSx0aGlzLl9hY3RpdmVTb3VyY2VzPXt9LHRoaXMuZmFkZUluPWUuZmFkZUluLHRoaXMuZmFkZU91dD1lLmZhZGVPdXQsdGhpcy5fdm9sdW1lPXRoaXMub3V0cHV0PW5ldyB0LlZvbHVtZShlLnZvbHVtZSksdGhpcy52b2x1bWU9dGhpcy5fdm9sdW1lLnZvbHVtZSx0aGlzLl9yZWFkT25seShcInZvbHVtZVwiKSx0aGlzLl92b2x1bWUub3V0cHV0Lm91dHB1dC5jaGFubmVsQ291bnQ9Mix0aGlzLl92b2x1bWUub3V0cHV0Lm91dHB1dC5jaGFubmVsQ291bnRNb2RlPVwiZXhwbGljaXRcIix0aGlzLm11dGU9ZS5tdXRlfSx0LmV4dGVuZCh0Lk11bHRpUGxheWVyLHQuU291cmNlKSx0Lk11bHRpUGxheWVyLmRlZmF1bHRzPXtvbmxvYWQ6dC5ub09wLGZhZGVJbjowLGZhZGVPdXQ6MH0sdC5NdWx0aVBsYXllci5wcm90b3R5cGUuX21ha2VTb3VyY2U9ZnVuY3Rpb24oZSl7dmFyIGk7dGhpcy5pc1N0cmluZyhlKXx8dGhpcy5pc051bWJlcihlKT9pPXRoaXMuYnVmZmVycy5nZXQoZSkuZ2V0KCk6ZSBpbnN0YW5jZW9mIHQuQnVmZmVyP2k9ZS5nZXQoKTplIGluc3RhbmNlb2YgQXVkaW9CdWZmZXImJihpPWUpO3ZhciBuPW5ldyB0LkJ1ZmZlclNvdXJjZShpKS5jb25uZWN0KHRoaXMub3V0cHV0KTtyZXR1cm4gdGhpcy5fYWN0aXZlU291cmNlcy5oYXNPd25Qcm9wZXJ0eShlKXx8KHRoaXMuX2FjdGl2ZVNvdXJjZXNbZV09W10pLHRoaXMuX2FjdGl2ZVNvdXJjZXNbZV0ucHVzaChuKSxufSx0Lk11bHRpUGxheWVyLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0LGUsaSxuLHMsbyl7ZT10aGlzLnRvU2Vjb25kcyhlKTt2YXIgcj10aGlzLl9tYWtlU291cmNlKHQpO3JldHVybiByLnN0YXJ0KGUsaSxuLHRoaXMuZGVmYXVsdEFyZyhvLDEpLHRoaXMuZmFkZUluKSxuJiZyLnN0b3AoZSt0aGlzLnRvU2Vjb25kcyhuKSx0aGlzLmZhZGVPdXQpLHM9dGhpcy5kZWZhdWx0QXJnKHMsMCksci5wbGF5YmFja1JhdGUudmFsdWU9dGhpcy5pbnRlcnZhbFRvRnJlcXVlbmN5UmF0aW8ocyksdGhpc30sdC5NdWx0aVBsYXllci5wcm90b3R5cGUuc3RhcnRMb29wPWZ1bmN0aW9uKHQsZSxpLG4scyxvLHIpe2U9dGhpcy50b1NlY29uZHMoZSk7dmFyIGE9dGhpcy5fbWFrZVNvdXJjZSh0KTtyZXR1cm4gYS5sb29wPSEwLGEubG9vcFN0YXJ0PXRoaXMudG9TZWNvbmRzKHRoaXMuZGVmYXVsdEFyZyhuLDApKSxhLmxvb3BFbmQ9dGhpcy50b1NlY29uZHModGhpcy5kZWZhdWx0QXJnKHMsMCkpLGEuc3RhcnQoZSxpLHZvaWQgMCx0aGlzLmRlZmF1bHRBcmcociwxKSx0aGlzLmZhZGVJbiksbz10aGlzLmRlZmF1bHRBcmcobywwKSxhLnBsYXliYWNrUmF0ZS52YWx1ZT10aGlzLmludGVydmFsVG9GcmVxdWVuY3lSYXRpbyhvKSx0aGlzfSx0Lk11bHRpUGxheWVyLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuX2FjdGl2ZVNvdXJjZXNbdF18fCF0aGlzLl9hY3RpdmVTb3VyY2VzW3RdLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJUb25lLk11bHRpUGxheWVyOiBjYW5ub3Qgc3RvcCBhIGJ1ZmZlciB0aGF0IGhhc24ndCBiZWVuIHN0YXJ0ZWQgb3IgaXMgYWxyZWFkeSBzdG9wcGVkXCIpO3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX2FjdGl2ZVNvdXJjZXNbdF0uc2hpZnQoKS5zdG9wKGUsdGhpcy5mYWRlT3V0KSx0aGlzfSx0Lk11bHRpUGxheWVyLnByb3RvdHlwZS5zdG9wQWxsPWZ1bmN0aW9uKHQpe3Q9dGhpcy50b1NlY29uZHModCk7Zm9yKHZhciBlIGluIHRoaXMuX2FjdGl2ZVNvdXJjZXMpZm9yKHZhciBpPXRoaXMuX2FjdGl2ZVNvdXJjZXNbZV0sbj0wO248aS5sZW5ndGg7bisrKWlbbl0uc3RvcCh0KTtyZXR1cm4gdGhpc30sdC5NdWx0aVBsYXllci5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5idWZmZXJzLmFkZCh0LGUsaSksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTXVsdGlQbGF5ZXIucHJvdG90eXBlLFwic3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZVNvdXJjZXMubGVuZ3RoPjA/dC5TdGF0ZS5TdGFydGVkOnQuU3RhdGUuU3RvcHBlZH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5NdWx0aVBsYXllci5wcm90b3R5cGUsXCJtdXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92b2x1bWUubXV0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ZvbHVtZS5tdXRlPXR9fSksdC5NdWx0aVBsYXllci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl92b2x1bWUuZGlzcG9zZSgpLHRoaXMuX3ZvbHVtZT1udWxsLHRoaXMuX3dyaXRhYmxlKFwidm9sdW1lXCIpLHRoaXMudm9sdW1lPW51bGw7Zm9yKHZhciBlIGluIHRoaXMuX2FjdGl2ZVNvdXJjZXMpdGhpcy5fYWN0aXZlU291cmNlc1tlXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZGlzcG9zZSgpfSk7cmV0dXJuIHRoaXMuYnVmZmVycy5kaXNwb3NlKCksdGhpcy5idWZmZXJzPW51bGwsdGhpcy5fYWN0aXZlU291cmNlcz1udWxsLHRoaXN9LHQuTXVsdGlQbGF5ZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkdyYWluUGxheWVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ1cmxcIixcIm9ubG9hZFwiXSx0LkdyYWluUGxheWVyLmRlZmF1bHRzKTt0LlNvdXJjZS5jYWxsKHRoaXMpLHRoaXMuYnVmZmVyPW5ldyB0LkJ1ZmZlcihlLnVybCxlLm9ubG9hZCksdGhpcy5fcGxheWVyPShuZXcgdC5NdWx0aVBsYXllcikuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fY2xvY2s9bmV3IHQuQ2xvY2sodGhpcy5fdGljay5iaW5kKHRoaXMpLDEpLHRoaXMuX2xvb3BTdGFydD0wLHRoaXMuX2xvb3BFbmQ9MCx0aGlzLl9wbGF5YmFja1JhdGU9ZS5wbGF5YmFja1JhdGUsdGhpcy5fZ3JhaW5TaXplPWUuZ3JhaW5TaXplLHRoaXMuX292ZXJsYXA9ZS5vdmVybGFwLHRoaXMuZGV0dW5lPWUuZGV0dW5lLHRoaXMuZHJpZnQ9ZS5kcmlmdCx0aGlzLm92ZXJsYXA9ZS5vdmVybGFwLHRoaXMubG9vcD1lLmxvb3AsdGhpcy5wbGF5YmFja1JhdGU9ZS5wbGF5YmFja1JhdGUsdGhpcy5ncmFpblNpemU9ZS5ncmFpblNpemUsdGhpcy5sb29wU3RhcnQ9ZS5sb29wU3RhcnQsdGhpcy5sb29wRW5kPWUubG9vcEVuZCx0aGlzLnJldmVyc2U9ZS5yZXZlcnNlfSx0LmV4dGVuZCh0LkdyYWluUGxheWVyLHQuU291cmNlKSx0LkdyYWluUGxheWVyLmRlZmF1bHRzPXtvbmxvYWQ6dC5ub09wLG92ZXJsYXA6LjEsZ3JhaW5TaXplOi4yLGRyaWZ0OjAscGxheWJhY2tSYXRlOjEsZGV0dW5lOjAsbG9vcDohMSxsb29wU3RhcnQ6MCxsb29wRW5kOjAscmV2ZXJzZTohMX0sdC5HcmFpblBsYXllci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKHQsZSxpKXtlPXRoaXMuZGVmYXVsdEFyZyhlLDApLGU9dGhpcy50b1NlY29uZHMoZSksdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9vZmZzZXQ9ZSx0aGlzLl9jbG9jay5zdGFydCh0KSx0aGlzLl9wbGF5ZXIudm9sdW1lLnNldFZhbHVlQXRUaW1lKDAsdCksaSYmdGhpcy5fc3RvcCh0K3RoaXMudG9TZWNvbmRzKGkpKX0sdC5HcmFpblBsYXllci5wcm90b3R5cGUuX3N0b3A9ZnVuY3Rpb24odCl7dGhpcy5fY2xvY2suc3RvcCh0KSx0aGlzLl9wbGF5ZXIudm9sdW1lLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyh0KSx0aGlzLl9wbGF5ZXIudm9sdW1lLnNldFZhbHVlQXRUaW1lKC0xLzAsdCl9LHQuR3JhaW5QbGF5ZXIucHJvdG90eXBlLl90aWNrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYnVmZmVyLmR1cmF0aW9uO3RoaXMubG9vcCYmdGhpcy5fbG9vcEVuZD4wJiYoZT10aGlzLl9sb29wRW5kKTt2YXIgaT0oMipNYXRoLnJhbmRvbSgpLTEpKnRoaXMuZHJpZnQsbj10aGlzLl9vZmZzZXQtdGhpcy5fb3ZlcmxhcCtpLHM9dGhpcy5kZXR1bmUvMTAwO249TWF0aC5tYXgobiwwKSxuPU1hdGgubWluKG4sZSk7dmFyIG89dGhpcy5fcGxheWVyLmZhZGVJbjtpZih0aGlzLmxvb3AmJnRoaXMuX29mZnNldD5lKXt2YXIgcj10aGlzLl9vZmZzZXQtZTt0aGlzLl9wbGF5ZXIuc3RhcnQodGhpcy5idWZmZXIsdCxuLHIrdGhpcy5fb3ZlcmxhcCxzKSxuPXRoaXMuX29mZnNldCVlLHRoaXMuX29mZnNldD10aGlzLl9sb29wU3RhcnQsdGhpcy5fcGxheWVyLmZhZGVJbj0wLHRoaXMuX3BsYXllci5zdGFydCh0aGlzLmJ1ZmZlcix0K3IsdGhpcy5fb2Zmc2V0LG4rdGhpcy5fb3ZlcmxhcCxzKX1lbHNlIHRoaXMuX29mZnNldD5lP3RoaXMuc3RvcCh0KTooMD09PW4mJih0aGlzLl9wbGF5ZXIuZmFkZUluPTApLHRoaXMuX3BsYXllci5zdGFydCh0aGlzLmJ1ZmZlcix0LG4sdGhpcy5ncmFpblNpemUrdGhpcy5fb3ZlcmxhcCxzKSk7dGhpcy5fcGxheWVyLmZhZGVJbj1vO3ZhciBhPXRoaXMuX2Nsb2NrLl9uZXh0VGljay10O3RoaXMuX29mZnNldCs9YSp0aGlzLl9wbGF5YmFja1JhdGV9LHQuR3JhaW5QbGF5ZXIucHJvdG90eXBlLnNjcnViPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX29mZnNldD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl90aWNrKHRoaXMudG9TZWNvbmRzKGUpKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5HcmFpblBsYXllci5wcm90b3R5cGUsXCJwbGF5YmFja1JhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXliYWNrUmF0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BsYXliYWNrUmF0ZT10LHRoaXMuZ3JhaW5TaXplPXRoaXMuX2dyYWluU2l6ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5HcmFpblBsYXllci5wcm90b3R5cGUsXCJsb29wU3RhcnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvb3BTdGFydH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3BTdGFydD10aGlzLnRvU2Vjb25kcyh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5HcmFpblBsYXllci5wcm90b3R5cGUsXCJsb29wRW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wRW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcEVuZD10aGlzLnRvU2Vjb25kcyh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5HcmFpblBsYXllci5wcm90b3R5cGUsXCJyZXZlcnNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlci5yZXZlcnNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5idWZmZXIucmV2ZXJzZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkdyYWluUGxheWVyLnByb3RvdHlwZSxcImdyYWluU2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ3JhaW5TaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZ3JhaW5TaXplPXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX2Nsb2NrLmZyZXF1ZW5jeS52YWx1ZT10aGlzLl9wbGF5YmFja1JhdGUvdGhpcy5fZ3JhaW5TaXplfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkdyYWluUGxheWVyLnByb3RvdHlwZSxcIm92ZXJsYXBcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX292ZXJsYXB9LHNldDpmdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX292ZXJsYXA9dCx0aGlzLl9vdmVybGFwPDA/KHRoaXMuX3BsYXllci5mYWRlSW49LjAxLHRoaXMuX3BsYXllci5mYWRlT3V0PS4wMSk6KHRoaXMuX3BsYXllci5mYWRlSW49dCx0aGlzLl9wbGF5ZXIuZmFkZU91dD10KX19KSx0LkdyYWluUGxheWVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5idWZmZXIuZGlzcG9zZSgpLHRoaXMuYnVmZmVyPW51bGwsdGhpcy5fcGxheWVyLmRpc3Bvc2UoKSx0aGlzLl9wbGF5ZXI9bnVsbCx0aGlzLl9jbG9jay5kaXNwb3NlKCksdGhpcy5fY2xvY2s9bnVsbCx0aGlzfSx0LkdyYWluUGxheWVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Vc2VyTWVkaWE9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInZvbHVtZVwiXSx0LlVzZXJNZWRpYS5kZWZhdWx0cyk7dGhpcy5fbWVkaWFTdHJlYW09bnVsbCx0aGlzLl9zdHJlYW09bnVsbCx0aGlzLl9kZXZpY2U9bnVsbCx0aGlzLl92b2x1bWU9dGhpcy5vdXRwdXQ9bmV3IHQuVm9sdW1lKGUudm9sdW1lKSx0aGlzLnZvbHVtZT10aGlzLl92b2x1bWUudm9sdW1lLHRoaXMuX3JlYWRPbmx5KFwidm9sdW1lXCIpLHRoaXMubXV0ZT1lLm11dGV9LHQuZXh0ZW5kKHQuVXNlck1lZGlhKSx0LlVzZXJNZWRpYS5kZWZhdWx0cz17dm9sdW1lOjAsbXV0ZTohMX0sdC5Vc2VyTWVkaWEucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5kZWZhdWx0QXJnKHQsXCJkZWZhdWx0XCIpLHRoaXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIGk7aWYodGhpcy5pc051bWJlcih0KT9pPWVbdF06KGk9ZS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxhYmVsPT09dHx8ZS5kZXZpY2VJZD09PXR9KSl8fChpPWVbMF0pLCFpKXRocm93IG5ldyBFcnJvcihcIlRvbmUuVXNlck1lZGlhOiBubyBtYXRjaGluZyBhdWRpbyBpbnB1dHMuXCIpO3RoaXMuX2RldmljZT1pO3ZhciBuPXthdWRpbzp7ZGV2aWNlSWQ6aS5kZXZpY2VJZCxlY2hvQ2FuY2VsbGF0aW9uOiExLHNhbXBsZVJhdGU6dGhpcy5jb250ZXh0LnNhbXBsZVJhdGV9fTtyZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEobikudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc3RyZWFtfHwodGhpcy5fc3RyZWFtPXQsdGhpcy5fbWVkaWFTdHJlYW09dGhpcy5jb250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKHQpLHRoaXMuX21lZGlhU3RyZWFtLmNvbm5lY3QodGhpcy5vdXRwdXQpKSx0aGlzfS5iaW5kKHRoaXMpKX0uYmluZCh0aGlzKSl9LHQuVXNlck1lZGlhLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJlYW0mJih0aGlzLl9zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Quc3RvcCgpfSksdGhpcy5fc3RyZWFtPW51bGwsdGhpcy5fbWVkaWFTdHJlYW0uZGlzY29ubmVjdCgpLHRoaXMuX21lZGlhU3RyZWFtPW51bGwpLHRoaXMuX2RldmljZT1udWxsLHRoaXN9LHQuVXNlck1lZGlhLnByb3RvdHlwZS5lbnVtZXJhdGVEZXZpY2VzPWZ1bmN0aW9uKCl7cmV0dXJuIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwiYXVkaW9pbnB1dFwiPT09dC5raW5kfSl9KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVXNlck1lZGlhLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJlYW0mJnRoaXMuX3N0cmVhbS5hY3RpdmU/dC5TdGF0ZS5TdGFydGVkOnQuU3RhdGUuU3RvcHBlZH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Vc2VyTWVkaWEucHJvdG90eXBlLFwiZGV2aWNlSWRcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fZGV2aWNlKXJldHVybiB0aGlzLl9kZXZpY2UuZGV2aWNlSWR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVXNlck1lZGlhLnByb3RvdHlwZSxcImdyb3VwSWRcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fZGV2aWNlKXJldHVybiB0aGlzLl9kZXZpY2UuZ3JvdXBJZH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Vc2VyTWVkaWEucHJvdG90eXBlLFwibGFiZWxcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fZGV2aWNlKXJldHVybiB0aGlzLl9kZXZpY2UubGFiZWx9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVXNlck1lZGlhLnByb3RvdHlwZSxcIm11dGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZvbHVtZS5tdXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdm9sdW1lLm11dGU9dH19KSx0LlVzZXJNZWRpYS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5jbG9zZSgpLHRoaXMuX3dyaXRhYmxlKFwidm9sdW1lXCIpLHRoaXMuX3ZvbHVtZS5kaXNwb3NlKCksdGhpcy5fdm9sdW1lPW51bGwsdGhpcy52b2x1bWU9bnVsbCx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Vc2VyTWVkaWEsXCJzdXBwb3J0ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIXQucHJvdG90eXBlLmlzVW5kZWYobmF2aWdhdG9yLm1lZGlhRGV2aWNlcykmJnQucHJvdG90eXBlLmlzRnVuY3Rpb24obmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpfX0pLHQuVXNlck1lZGlhfSksZX0pOyIsIiFmdW5jdGlvbih0LHIpe3QudHJhY2tpbmc9dC50cmFja2luZ3x8e30sdHJhY2tpbmcuaW5oZXJpdHM9ZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7fW4ucHJvdG90eXBlPXIucHJvdG90eXBlLHQuc3VwZXJDbGFzc189ci5wcm90b3R5cGUsdC5wcm90b3R5cGU9bmV3IG4sdC5wcm90b3R5cGUuY29uc3RydWN0b3I9dCx0LmJhc2U9ZnVuY3Rpb24odCxuKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIHIucHJvdG90eXBlW25dLmFwcGx5KHQsZSl9fSx0cmFja2luZy5pbml0VXNlck1lZGlhXz1mdW5jdGlvbihyLG4pe3QubmF2aWdhdG9yLmdldFVzZXJNZWRpYSh7dmlkZW86ITAsYXVkaW86ISghbnx8IW4uYXVkaW8pfSxmdW5jdGlvbihuKXt0cmFja2luZy5sb2NhbFN0cmVhbT1uO3RyeXtyLnNyYz10LlVSTC5jcmVhdGVPYmplY3RVUkwobil9Y2F0Y2godCl7ci5zcmM9bn19LGZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJDYW5ub3QgY2FwdHVyZSB1c2VyIGNhbWVyYS5cIil9KX0sdHJhY2tpbmcuc3RvcFVzZXJNZWRpYT1mdW5jdGlvbigpe3RyYWNraW5nLmxvY2FsU3RyZWFtJiZ0cmFja2luZy5sb2NhbFN0cmVhbS5zdG9wKCl9LHRyYWNraW5nLmlzTm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5ub2RlVHlwZXx8dGhpcy5pc1dpbmRvdyh0KX0sdHJhY2tpbmcuaXNXaW5kb3c9ZnVuY3Rpb24odCl7cmV0dXJuISEodCYmdC5hbGVydCYmdC5kb2N1bWVudCl9LHRyYWNraW5nLm9uZT1mdW5jdGlvbih0LHIpe3JldHVybiB0aGlzLmlzTm9kZSh0KT90OihyfHxkb2N1bWVudCkucXVlcnlTZWxlY3Rvcih0KX0sdHJhY2tpbmcudHJhY2s9ZnVuY3Rpb24odCxyLG4pe2lmKCEodD10cmFja2luZy5vbmUodCkpKXRocm93IG5ldyBFcnJvcihcIkVsZW1lbnQgbm90IGZvdW5kLCB0cnkgYSBkaWZmZXJlbnQgZWxlbWVudCBvciBzZWxlY3Rvci5cIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiVHJhY2tlciBub3Qgc3BlY2lmaWVkLCB0cnkgYHRyYWNraW5nLnRyYWNrKGVsZW1lbnQsIG5ldyB0cmFja2luZy5GYWNlVHJhY2tlcigpKWAuXCIpO3N3aXRjaCh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImNhbnZhc1wiOnJldHVybiB0aGlzLnRyYWNrQ2FudmFzXyh0LHIsbik7Y2FzZVwiaW1nXCI6cmV0dXJuIHRoaXMudHJhY2tJbWdfKHQscixuKTtjYXNlXCJ2aWRlb1wiOnJldHVybiBuJiZuLmNhbWVyYSYmdGhpcy5pbml0VXNlck1lZGlhXyh0LG4pLHRoaXMudHJhY2tWaWRlb18odCxyLG4pO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiRWxlbWVudCBub3Qgc3VwcG9ydGVkLCB0cnkgaW4gYSBjYW52YXMsIGltZywgb3IgdmlkZW8uXCIpfX0sdHJhY2tpbmcudHJhY2tDYW52YXNfPWZ1bmN0aW9uKHQscil7dmFyIG49dGhpcyxlPW5ldyB0cmFja2luZy5UcmFja2VyVGFzayhyKTtyZXR1cm4gZS5vbihcInJ1blwiLGZ1bmN0aW9uKCl7bi50cmFja0NhbnZhc0ludGVybmFsXyh0LHIpfSksZS5ydW4oKX0sdHJhY2tpbmcudHJhY2tDYW52YXNJbnRlcm5hbF89ZnVuY3Rpb24odCxyKXt2YXIgbj10LndpZHRoLGU9dC5oZWlnaHQsaT10LmdldENvbnRleHQoXCIyZFwiKS5nZXRJbWFnZURhdGEoMCwwLG4sZSk7ci50cmFjayhpLmRhdGEsbixlKX0sdHJhY2tpbmcudHJhY2tJbWdfPWZ1bmN0aW9uKHQscil7dmFyIG49dC53aWR0aCxlPXQuaGVpZ2h0LGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtpLndpZHRoPW4saS5oZWlnaHQ9ZTt2YXIgYT1uZXcgdHJhY2tpbmcuVHJhY2tlclRhc2socik7cmV0dXJuIGEub24oXCJydW5cIixmdW5jdGlvbigpe3RyYWNraW5nLkNhbnZhcy5sb2FkSW1hZ2UoaSx0LnNyYywwLDAsbixlLGZ1bmN0aW9uKCl7dHJhY2tpbmcudHJhY2tDYW52YXNJbnRlcm5hbF8oaSxyKX0pfSksYS5ydW4oKX0sdHJhY2tpbmcudHJhY2tWaWRlb189ZnVuY3Rpb24ocixuKXt2YXIgZSxpLGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxvPWEuZ2V0Q29udGV4dChcIjJkXCIpLGM9ZnVuY3Rpb24oKXtlPXIub2Zmc2V0V2lkdGgsaT1yLm9mZnNldEhlaWdodCxhLndpZHRoPWUsYS5oZWlnaHQ9aX07YygpLHIuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLGMpO3ZhciBzLGc9ZnVuY3Rpb24oKXtzPXQucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7aWYoci5yZWFkeVN0YXRlPT09ci5IQVZFX0VOT1VHSF9EQVRBKXt0cnl7by5kcmF3SW1hZ2UociwwLDAsZSxpKX1jYXRjaCh0KXt9dHJhY2tpbmcudHJhY2tDYW52YXNJbnRlcm5hbF8oYSxuKX1nKCl9KX0saD1uZXcgdHJhY2tpbmcuVHJhY2tlclRhc2sobik7cmV0dXJuIGgub24oXCJzdG9wXCIsZnVuY3Rpb24oKXt0LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHMpfSksaC5vbihcInJ1blwiLGZ1bmN0aW9uKCl7ZygpfSksaC5ydW4oKX0sdC5VUkx8fCh0LlVSTD10LlVSTHx8dC53ZWJraXRVUkx8fHQubXNVUkx8fHQub1VSTCksbmF2aWdhdG9yLmdldFVzZXJNZWRpYXx8KG5hdmlnYXRvci5nZXRVc2VyTWVkaWE9bmF2aWdhdG9yLmdldFVzZXJNZWRpYXx8bmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYXx8bmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYXx8bmF2aWdhdG9yLm1zR2V0VXNlck1lZGlhKX0od2luZG93KSxmdW5jdGlvbigpe3RyYWNraW5nLkV2ZW50RW1pdHRlcj1mdW5jdGlvbigpe30sdHJhY2tpbmcuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudHNfPW51bGwsdHJhY2tpbmcuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbih0LHIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gdGhpcy5ldmVudHNffHwodGhpcy5ldmVudHNfPXt9KSx0aGlzLmVtaXQoXCJuZXdMaXN0ZW5lclwiLHQsciksdGhpcy5ldmVudHNfW3RdfHwodGhpcy5ldmVudHNfW3RdPVtdKSx0aGlzLmV2ZW50c19bdF0ucHVzaChyKSx0aGlzfSx0cmFja2luZy5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ldmVudHNfJiZ0aGlzLmV2ZW50c19bdF19LHRyYWNraW5nLkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0KXt2YXIgcj10aGlzLmxpc3RlbmVycyh0KTtpZihyKXtmb3IodmFyIG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGU9MDtlPHIubGVuZ3RoO2UrKylyW2VdJiZyW2VdLmFwcGx5KHRoaXMsbik7cmV0dXJuITB9cmV0dXJuITF9LHRyYWNraW5nLkV2ZW50RW1pdHRlci5wcm90b3R5cGUub249dHJhY2tpbmcuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcix0cmFja2luZy5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24odCxyKXt2YXIgbj10aGlzO24ub24odCxmdW5jdGlvbiBlKCl7bi5yZW1vdmVMaXN0ZW5lcih0LGUpLHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHRyYWNraW5nLkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV2ZW50c18/KHQ/ZGVsZXRlIHRoaXMuZXZlbnRzX1t0XTpkZWxldGUgdGhpcy5ldmVudHNfLHRoaXMpOnRoaXN9LHRyYWNraW5nLkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24odCxyKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJyb3IoXCJMaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7aWYoIXRoaXMuZXZlbnRzXylyZXR1cm4gdGhpczt2YXIgbj10aGlzLmxpc3RlbmVycyh0KTtpZihBcnJheS5pc0FycmF5KG4pKXt2YXIgZT1uLmluZGV4T2Yocik7aWYoZTwwKXJldHVybiB0aGlzO24uc3BsaWNlKGUsMSl9cmV0dXJuIHRoaXN9LHRyYWNraW5nLkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpfX0oKSxmdW5jdGlvbigpe3RyYWNraW5nLkNhbnZhcz17fSx0cmFja2luZy5DYW52YXMubG9hZEltYWdlPWZ1bmN0aW9uKHQscixuLGUsaSxhLG8pe3ZhciBjPXRoaXMscz1uZXcgd2luZG93LkltYWdlO3MuY3Jvc3NPcmlnaW49XCIqXCIscy5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgcj10LmdldENvbnRleHQoXCIyZFwiKTt0LndpZHRoPWksdC5oZWlnaHQ9YSxyLmRyYXdJbWFnZShzLG4sZSxpLGEpLG8mJm8uY2FsbChjKSxzPW51bGx9LHMuc3JjPXJ9fSgpLGZ1bmN0aW9uKCl7dHJhY2tpbmcuRGlzam9pbnRTZXQ9ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dCl0aHJvdyBuZXcgRXJyb3IoXCJEaXNqb2ludFNldCBsZW5ndGggbm90IHNwZWNpZmllZC5cIik7dGhpcy5sZW5ndGg9dCx0aGlzLnBhcmVudD1uZXcgVWludDMyQXJyYXkodCk7Zm9yKHZhciByPTA7cjx0O3IrKyl0aGlzLnBhcmVudFtyXT1yfSx0cmFja2luZy5EaXNqb2ludFNldC5wcm90b3R5cGUubGVuZ3RoPW51bGwsdHJhY2tpbmcuRGlzam9pbnRTZXQucHJvdG90eXBlLnBhcmVudD1udWxsLHRyYWNraW5nLkRpc2pvaW50U2V0LnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhcmVudFt0XT09PXQ/dDp0aGlzLnBhcmVudFt0XT10aGlzLmZpbmQodGhpcy5wYXJlbnRbdF0pfSx0cmFja2luZy5EaXNqb2ludFNldC5wcm90b3R5cGUudW5pb249ZnVuY3Rpb24odCxyKXt2YXIgbj10aGlzLmZpbmQodCksZT10aGlzLmZpbmQocik7dGhpcy5wYXJlbnRbbl09ZX19KCksZnVuY3Rpb24oKXt0cmFja2luZy5JbWFnZT17fSx0cmFja2luZy5JbWFnZS5ibHVyPWZ1bmN0aW9uKHQscixuLGUpe2lmKChlPU1hdGguYWJzKGUpKTw9MSl0aHJvdyBuZXcgRXJyb3IoXCJEaWFtZXRlciBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIDEuXCIpO2Zvcih2YXIgaT1lLzIsYT1NYXRoLmNlaWwoZSkrKDEtTWF0aC5jZWlsKGUpJTIpLG89bmV3IEZsb2F0MzJBcnJheShhKSxjPShpKy41KS8zLHM9YypjLGc9MS9NYXRoLnNxcnQoMipNYXRoLlBJKnMpLGg9LTEvKDIqYypjKSxrPTAsZj1NYXRoLmZsb29yKGEvMiksdT0wO3U8YTt1Kyspe3ZhciBsPXUtZixwPWcqTWF0aC5leHAobCpsKmgpO29bdV09cCxrKz1wfWZvcih2YXIgdj0wO3Y8by5sZW5ndGg7disrKW9bdl0vPWs7cmV0dXJuIHRoaXMuc2VwYXJhYmxlQ29udm9sdmUodCxyLG4sbyxvLCExKX0sdHJhY2tpbmcuSW1hZ2UuY29tcHV0ZUludGVncmFsSW1hZ2U9ZnVuY3Rpb24odCxyLG4sZSxpLGEsbyl7aWYoYXJndW1lbnRzLmxlbmd0aDw0KXRocm93IG5ldyBFcnJvcihcIllvdSBzaG91bGQgc3BlY2lmeSBhdCBsZWFzdCBvbmUgb3V0cHV0IGFycmF5IGluIHRoZSBvcmRlcjogc3VtLCBzcXVhcmUsIHRpbHRlZCwgc29iZWwuXCIpO3ZhciBjO28mJihjPXRyYWNraW5nLkltYWdlLnNvYmVsKHQscixuKSk7Zm9yKHZhciBzPTA7czxuO3MrKylmb3IodmFyIGc9MDtnPHI7ZysrKXt2YXIgaD1zKnIqNCs0Kmcsaz1+figuMjk5KnRbaF0rLjU4Nyp0W2grMV0rLjExNCp0W2grMl0pO2lmKGUmJnRoaXMuY29tcHV0ZVBpeGVsVmFsdWVTQVRfKGUscixzLGcsayksaSYmdGhpcy5jb21wdXRlUGl4ZWxWYWx1ZVNBVF8oaSxyLHMsZyxrKmspLGEpe3ZhciBmPWgtNCpyLHU9fn4oLjI5OSp0W2ZdKy41ODcqdFtmKzFdKy4xMTQqdFtmKzJdKTt0aGlzLmNvbXB1dGVQaXhlbFZhbHVlUlNBVF8oYSxyLHMsZyxrLHV8fDApfW8mJnRoaXMuY29tcHV0ZVBpeGVsVmFsdWVTQVRfKG8scixzLGcsY1toXSl9fSx0cmFja2luZy5JbWFnZS5jb21wdXRlUGl4ZWxWYWx1ZVJTQVRfPWZ1bmN0aW9uKHQscixuLGUsaSxhKXt2YXIgbz1uKnIrZTt0W29dPSh0W28tci0xXXx8MCkrKHRbby1yKzFdfHwwKS0odFtvLXItcl18fDApK2krYX0sdHJhY2tpbmcuSW1hZ2UuY29tcHV0ZVBpeGVsVmFsdWVTQVRfPWZ1bmN0aW9uKHQscixuLGUsaSl7dmFyIGE9bipyK2U7dFthXT0odFthLXJdfHwwKSsodFthLTFdfHwwKStpLSh0W2Etci0xXXx8MCl9LHRyYWNraW5nLkltYWdlLmdyYXlzY2FsZT1mdW5jdGlvbih0LHIsbixlKXtmb3IodmFyIGk9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGU/dC5sZW5ndGg6dC5sZW5ndGg+PjIpLGE9MCxvPTAsYz0wO2M8bjtjKyspZm9yKHZhciBzPTA7czxyO3MrKyl7dmFyIGc9LjI5OSp0W29dKy41ODcqdFtvKzFdKy4xMTQqdFtvKzJdO2lbYSsrXT1nLGUmJihpW2ErK109ZyxpW2ErK109ZyxpW2ErK109dFtvKzNdKSxvKz00fXJldHVybiBpfSx0cmFja2luZy5JbWFnZS5ob3Jpem9udGFsQ29udm9sdmU9ZnVuY3Rpb24odCxyLG4sZSxpKXtmb3IodmFyIGE9ZS5sZW5ndGgsbz1NYXRoLmZsb29yKGEvMiksYz1uZXcgRmxvYXQzMkFycmF5KHIqbio0KSxzPWk/MTowLGc9MDtnPG47ZysrKWZvcih2YXIgaD0wO2g8cjtoKyspe2Zvcih2YXIgaz1nLGY9aCx1PTQqKGcqcitoKSxsPTAscD0wLHY9MCxtPTAseT0wO3k8YTt5Kyspe3ZhciBkPTQqKGsqcitNYXRoLm1pbihyLTEsTWF0aC5tYXgoMCxmK3ktbykpKSx3PWVbeV07bCs9dFtkXSp3LHArPXRbZCsxXSp3LHYrPXRbZCsyXSp3LG0rPXRbZCszXSp3fWNbdV09bCxjW3UrMV09cCxjW3UrMl09dixjW3UrM109bStzKigyNTUtbSl9cmV0dXJuIGN9LHRyYWNraW5nLkltYWdlLnZlcnRpY2FsQ29udm9sdmU9ZnVuY3Rpb24odCxyLG4sZSxpKXtmb3IodmFyIGE9ZS5sZW5ndGgsbz1NYXRoLmZsb29yKGEvMiksYz1uZXcgRmxvYXQzMkFycmF5KHIqbio0KSxzPWk/MTowLGc9MDtnPG47ZysrKWZvcih2YXIgaD0wO2g8cjtoKyspe2Zvcih2YXIgaz1nLGY9aCx1PTQqKGcqcitoKSxsPTAscD0wLHY9MCxtPTAseT0wO3k8YTt5Kyspe3ZhciBkPTQqKE1hdGgubWluKG4tMSxNYXRoLm1heCgwLGsreS1vKSkqcitmKSx3PWVbeV07bCs9dFtkXSp3LHArPXRbZCsxXSp3LHYrPXRbZCsyXSp3LG0rPXRbZCszXSp3fWNbdV09bCxjW3UrMV09cCxjW3UrMl09dixjW3UrM109bStzKigyNTUtbSl9cmV0dXJuIGN9LHRyYWNraW5nLkltYWdlLnNlcGFyYWJsZUNvbnZvbHZlPWZ1bmN0aW9uKHQscixuLGUsaSxhKXt2YXIgbz10aGlzLnZlcnRpY2FsQ29udm9sdmUodCxyLG4saSxhKTtyZXR1cm4gdGhpcy5ob3Jpem9udGFsQ29udm9sdmUobyxyLG4sZSxhKX0sdHJhY2tpbmcuSW1hZ2Uuc29iZWw9ZnVuY3Rpb24odCxyLG4pe3Q9dGhpcy5ncmF5c2NhbGUodCxyLG4sITApO2Zvcih2YXIgZT1uZXcgRmxvYXQzMkFycmF5KHIqbio0KSxpPW5ldyBGbG9hdDMyQXJyYXkoWy0xLDAsMV0pLGE9bmV3IEZsb2F0MzJBcnJheShbMSwyLDFdKSxvPXRoaXMuc2VwYXJhYmxlQ29udm9sdmUodCxyLG4saSxhKSxjPXRoaXMuc2VwYXJhYmxlQ29udm9sdmUodCxyLG4sYSxpKSxzPTA7czxlLmxlbmd0aDtzKz00KXt2YXIgZz1vW3NdLGg9Y1tzXSxrPU1hdGguc3FydChoKmgrZypnKTtlW3NdPWssZVtzKzFdPWssZVtzKzJdPWssZVtzKzNdPTI1NX1yZXR1cm4gZX19KCksZnVuY3Rpb24oKXt0cmFja2luZy5WaW9sYUpvbmVzPXt9LHRyYWNraW5nLlZpb2xhSm9uZXMuUkVHSU9OU19PVkVSTEFQPS41LHRyYWNraW5nLlZpb2xhSm9uZXMuY2xhc3NpZmllcnM9e30sdHJhY2tpbmcuVmlvbGFKb25lcy5kZXRlY3Q9ZnVuY3Rpb24odCxyLG4sZSxpLGEsbyxjKXt2YXIgcyxnPTAsaD1bXSxrPW5ldyBJbnQzMkFycmF5KHIqbiksZj1uZXcgSW50MzJBcnJheShyKm4pLHU9bmV3IEludDMyQXJyYXkocipuKTtvPjAmJihzPW5ldyBJbnQzMkFycmF5KHIqbikpLHRyYWNraW5nLkltYWdlLmNvbXB1dGVJbnRlZ3JhbEltYWdlKHQscixuLGssZix1LHMpO2Zvcih2YXIgbD1jWzBdLHA9Y1sxXSx2PWUqaSxtPXYqbHwwLHk9dipwfDA7bTxyJiZ5PG47KXtmb3IodmFyIGQ9diphKy41fDAsdz0wO3c8bi15O3crPWQpZm9yKHZhciBUPTA7VDxyLW07VCs9ZClvPjAmJnRoaXMuaXNUcml2aWFsbHlFeGNsdWRlZChvLHMsdyxULHIsbSx5KXx8dGhpcy5ldmFsU3RhZ2VzXyhjLGssZix1LHcsVCxyLG0seSx2KSYmKGhbZysrXT17d2lkdGg6bSxoZWlnaHQ6eSx4OlQseTp3fSk7bT0odio9aSkqbHwwLHk9dipwfDB9cmV0dXJuIHRoaXMubWVyZ2VSZWN0YW5nbGVzXyhoKX0sdHJhY2tpbmcuVmlvbGFKb25lcy5pc1RyaXZpYWxseUV4Y2x1ZGVkPWZ1bmN0aW9uKHQscixuLGUsaSxhLG8pe3ZhciBjPW4qaStlLHM9YythLGc9YytvKmksaD1nK2E7cmV0dXJuKHJbY10tcltzXS1yW2ddK3JbaF0pLyhhKm8qMjU1KTx0fSx0cmFja2luZy5WaW9sYUpvbmVzLmV2YWxTdGFnZXNfPWZ1bmN0aW9uKHQscixuLGUsaSxhLG8sYyxzLGcpe3ZhciBoPTEvKGMqcyksaz1pKm8rYSxmPWsrYyx1PWsrcypvLGw9dStjLHA9KHJba10tcltmXS1yW3VdK3JbbF0pKmgsdj0obltrXS1uW2ZdLW5bdV0rbltsXSkqaC1wKnAsbT0xO3Y+MCYmKG09TWF0aC5zcXJ0KHYpKTtmb3IodmFyIHk9dC5sZW5ndGgsZD0yO2Q8eTspe2Zvcih2YXIgdz0wLFQ9dFtkKytdLEM9dFtkKytdO0MtLTspe2Zvcih2YXIgXz0wLEU9dFtkKytdLE09dFtkKytdLHg9MDt4PE07eCsrKXt2YXIgSSxiLE8sUyxBPWErdFtkKytdKmcrLjV8MCxEPWkrdFtkKytdKmcrLjV8MCxSPXRbZCsrXSpnKy41fDAsaj10W2QrK10qZysuNXwwLEY9dFtkKytdO0U/KGI9QSsoRC0xKSpvLE89QS1qKyhEK2otMSkqbyxTPUErUisoRCtSLTEpKm8sXys9KGVbST1BLWorUisoRCtSK2otMSkqb10rZVtiXS1lW09dLWVbU10pKkYpOihiPShJPUQqbytBKStSLFM9KE89SStqKm8pK1IsXys9KHJbSV0tcltiXS1yW09dK3JbU10pKkYpfXZhciBMPXRbZCsrXSxVPXRbZCsrXSxWPXRbZCsrXTt3Kz1fKmg8TCptP1U6Vn1pZih3PFQpcmV0dXJuITF9cmV0dXJuITB9LHRyYWNraW5nLlZpb2xhSm9uZXMubWVyZ2VSZWN0YW5nbGVzXz1mdW5jdGlvbih0KXtmb3IodmFyIHI9bmV3IHRyYWNraW5nLkRpc2pvaW50U2V0KHQubGVuZ3RoKSxuPTA7bjx0Lmxlbmd0aDtuKyspZm9yKHZhciBlPXRbbl0saT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgYT10W2ldO2lmKHRyYWNraW5nLk1hdGguaW50ZXJzZWN0UmVjdChlLngsZS55LGUueCtlLndpZHRoLGUueStlLmhlaWdodCxhLngsYS55LGEueCthLndpZHRoLGEueSthLmhlaWdodCkpe3ZhciBvPU1hdGgubWF4KGUueCxhLngpLGM9TWF0aC5tYXgoZS55LGEueSkscz0oby1NYXRoLm1pbihlLngrZS53aWR0aCxhLngrYS53aWR0aCkpKihjLU1hdGgubWluKGUueStlLmhlaWdodCxhLnkrYS5oZWlnaHQpKSxnPWUud2lkdGgqZS5oZWlnaHQsaD1hLndpZHRoKmEuaGVpZ2h0O3MvKGcqKGcvaCkpPj10aGlzLlJFR0lPTlNfT1ZFUkxBUCYmcy8oaCooZy9oKSk+PXRoaXMuUkVHSU9OU19PVkVSTEFQJiZyLnVuaW9uKG4saSl9fWZvcih2YXIgaz17fSxmPTA7ZjxyLmxlbmd0aDtmKyspe3ZhciB1PXIuZmluZChmKTtrW3VdPyhrW3VdLnRvdGFsKyssa1t1XS53aWR0aCs9dFtmXS53aWR0aCxrW3VdLmhlaWdodCs9dFtmXS5oZWlnaHQsa1t1XS54Kz10W2ZdLngsa1t1XS55Kz10W2ZdLnkpOmtbdV09e3RvdGFsOjEsd2lkdGg6dFtmXS53aWR0aCxoZWlnaHQ6dFtmXS5oZWlnaHQseDp0W2ZdLngseTp0W2ZdLnl9fXZhciBsPVtdO3JldHVybiBPYmplY3Qua2V5cyhrKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciByPWtbdF07bC5wdXNoKHt0b3RhbDpyLnRvdGFsLHdpZHRoOnIud2lkdGgvci50b3RhbCsuNXwwLGhlaWdodDpyLmhlaWdodC9yLnRvdGFsKy41fDAseDpyLngvci50b3RhbCsuNXwwLHk6ci55L3IudG90YWwrLjV8MH0pfSksbH19KCksZnVuY3Rpb24oKXt0cmFja2luZy5CcmllZj17fSx0cmFja2luZy5CcmllZi5OPTUxMix0cmFja2luZy5CcmllZi5yYW5kb21JbWFnZU9mZnNldHNfPXt9LHRyYWNraW5nLkJyaWVmLnJhbmRvbVdpbmRvd09mZnNldHNfPW51bGwsdHJhY2tpbmcuQnJpZWYuZ2V0RGVzY3JpcHRvcnM9ZnVuY3Rpb24odCxyLG4pe2Zvcih2YXIgZT1uZXcgSW50MzJBcnJheSgobi5sZW5ndGg+PjEpKih0aGlzLk4+PjUpKSxpPTAsYT10aGlzLmdldFJhbmRvbU9mZnNldHNfKHIpLG89MCxjPTA7YzxuLmxlbmd0aDtjKz0yKWZvcih2YXIgcz1yKm5bYysxXStuW2NdLGc9MCxoPTAsaz10aGlzLk47aDxrO2grKyl0W2FbZysrXStzXTx0W2FbZysrXStzXSYmKGl8PTE8PCgzMSZoKSksaCsxJjMxfHwoZVtvKytdPWksaT0wKTtyZXR1cm4gZX0sdHJhY2tpbmcuQnJpZWYubWF0Y2g9ZnVuY3Rpb24odCxyLG4sZSl7Zm9yKHZhciBpPXQubGVuZ3RoPj4xLGE9bi5sZW5ndGg+PjEsbz1uZXcgQXJyYXkoaSksYz0wO2M8aTtjKyspe2Zvcih2YXIgcz0xLzAsZz0wLGg9MDtoPGE7aCsrKXtmb3IodmFyIGs9MCxmPTAsdT10aGlzLk4+PjU7Zjx1O2YrKylrKz10cmFja2luZy5NYXRoLmhhbW1pbmdXZWlnaHQocltjKnUrZl1eZVtoKnUrZl0pO2s8cyYmKHM9ayxnPWgpfW9bY109e2luZGV4MTpjLGluZGV4MjpnLGtleXBvaW50MTpbdFsyKmNdLHRbMipjKzFdXSxrZXlwb2ludDI6W25bMipnXSxuWzIqZysxXV0sY29uZmlkZW5jZToxLXMvdGhpcy5OfX1yZXR1cm4gb30sdHJhY2tpbmcuQnJpZWYucmVjaXByb2NhbE1hdGNoPWZ1bmN0aW9uKHQscixuLGUpe3ZhciBpPVtdO2lmKDA9PT10Lmxlbmd0aHx8MD09PW4ubGVuZ3RoKXJldHVybiBpO2Zvcih2YXIgYT10cmFja2luZy5CcmllZi5tYXRjaCh0LHIsbixlKSxvPXRyYWNraW5nLkJyaWVmLm1hdGNoKG4sZSx0LHIpLGM9MDtjPGEubGVuZ3RoO2MrKylvW2FbY10uaW5kZXgyXS5pbmRleDI9PT1jJiZpLnB1c2goYVtjXSk7cmV0dXJuIGl9LHRyYWNraW5nLkJyaWVmLmdldFJhbmRvbU9mZnNldHNfPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLnJhbmRvbVdpbmRvd09mZnNldHNfKXtmb3IodmFyIHI9MCxuPW5ldyBJbnQzMkFycmF5KDQqdGhpcy5OKSxlPTA7ZTx0aGlzLk47ZSsrKW5bcisrXT1NYXRoLnJvdW5kKHRyYWNraW5nLk1hdGgudW5pZm9ybVJhbmRvbSgtMTUsMTYpKSxuW3IrK109TWF0aC5yb3VuZCh0cmFja2luZy5NYXRoLnVuaWZvcm1SYW5kb20oLTE1LDE2KSksbltyKytdPU1hdGgucm91bmQodHJhY2tpbmcuTWF0aC51bmlmb3JtUmFuZG9tKC0xNSwxNikpLG5bcisrXT1NYXRoLnJvdW5kKHRyYWNraW5nLk1hdGgudW5pZm9ybVJhbmRvbSgtMTUsMTYpKTt0aGlzLnJhbmRvbVdpbmRvd09mZnNldHNfPW59aWYoIXRoaXMucmFuZG9tSW1hZ2VPZmZzZXRzX1t0XSl7Zm9yKHZhciBpPTAsYT1uZXcgSW50MzJBcnJheSgyKnRoaXMuTiksbz0wO288dGhpcy5OO28rKylhW2krK109dGhpcy5yYW5kb21XaW5kb3dPZmZzZXRzX1s0Km9dKnQrdGhpcy5yYW5kb21XaW5kb3dPZmZzZXRzX1s0Km8rMV0sYVtpKytdPXRoaXMucmFuZG9tV2luZG93T2Zmc2V0c19bNCpvKzJdKnQrdGhpcy5yYW5kb21XaW5kb3dPZmZzZXRzX1s0Km8rM107dGhpcy5yYW5kb21JbWFnZU9mZnNldHNfW3RdPWF9cmV0dXJuIHRoaXMucmFuZG9tSW1hZ2VPZmZzZXRzX1t0XX19KCksZnVuY3Rpb24oKXt0cmFja2luZy5GYXN0PXt9LHRyYWNraW5nLkZhc3QuVEhSRVNIT0xEPTQwLHRyYWNraW5nLkZhc3QuY2lyY2xlc189e30sdHJhY2tpbmcuRmFzdC5maW5kQ29ybmVycz1mdW5jdGlvbih0LHIsbixlKXt2YXIgaT10aGlzLmdldENpcmNsZU9mZnNldHNfKHIpLGE9bmV3IEludDMyQXJyYXkoMTYpLG89W107dm9pZCAwPT09ZSYmKGU9dGhpcy5USFJFU0hPTEQpO2Zvcih2YXIgYz0zO2M8bi0zO2MrKylmb3IodmFyIHM9MztzPHItMztzKyspe2Zvcih2YXIgZz1jKnIrcyxoPXRbZ10saz0wO2s8MTY7aysrKWFba109dFtnK2lba11dO3RoaXMuaXNDb3JuZXIoaCxhLGUpJiYoby5wdXNoKHMsYykscys9Myl9cmV0dXJuIG99LHRyYWNraW5nLkZhc3QuaXNCcmlnaHRlcj1mdW5jdGlvbih0LHIsbil7cmV0dXJuIHQtcj5ufSx0cmFja2luZy5GYXN0LmlzQ29ybmVyPWZ1bmN0aW9uKHQscixuKXtpZih0aGlzLmlzVHJpdmlhbGx5RXhjbHVkZWQocix0LG4pKXJldHVybiExO2Zvcih2YXIgZT0wO2U8MTY7ZSsrKXtmb3IodmFyIGk9ITAsYT0hMCxvPTA7bzw5O28rKyl7dmFyIGM9cltlK28mMTVdO2lmKCF0aGlzLmlzQnJpZ2h0ZXIodCxjLG4pJiYoYT0hMSwhMT09PWkpKWJyZWFrO2lmKCF0aGlzLmlzRGFya2VyKHQsYyxuKSYmKGk9ITEsITE9PT1hKSlicmVha31pZihhfHxpKXJldHVybiEwfXJldHVybiExfSx0cmFja2luZy5GYXN0LmlzRGFya2VyPWZ1bmN0aW9uKHQscixuKXtyZXR1cm4gci10Pm59LHRyYWNraW5nLkZhc3QuaXNUcml2aWFsbHlFeGNsdWRlZD1mdW5jdGlvbih0LHIsbil7dmFyIGU9MCxpPXRbOF0sYT10WzEyXSxvPXRbNF0sYz10WzBdO3JldHVybiB0aGlzLmlzQnJpZ2h0ZXIoYyxyLG4pJiZlKyssdGhpcy5pc0JyaWdodGVyKG8scixuKSYmZSsrLHRoaXMuaXNCcmlnaHRlcihpLHIsbikmJmUrKyx0aGlzLmlzQnJpZ2h0ZXIoYSxyLG4pJiZlKyssZTwzJiYoZT0wLHRoaXMuaXNEYXJrZXIoYyxyLG4pJiZlKyssdGhpcy5pc0RhcmtlcihvLHIsbikmJmUrKyx0aGlzLmlzRGFya2VyKGkscixuKSYmZSsrLHRoaXMuaXNEYXJrZXIoYSxyLG4pJiZlKyssZTwzKX0sdHJhY2tpbmcuRmFzdC5nZXRDaXJjbGVPZmZzZXRzXz1mdW5jdGlvbih0KXtpZih0aGlzLmNpcmNsZXNfW3RdKXJldHVybiB0aGlzLmNpcmNsZXNfW3RdO3ZhciByPW5ldyBJbnQzMkFycmF5KDE2KTtyZXR1cm4gclswXT0tdC10LXQsclsxXT1yWzBdKzEsclsyXT1yWzFdK3QrMSxyWzNdPXJbMl0rdCsxLHJbNF09clszXSt0LHJbNV09cls0XSt0LHJbNl09cls1XSt0LTEscls3XT1yWzZdK3QtMSxyWzhdPXJbN10tMSxyWzldPXJbOF0tMSxyWzEwXT1yWzldLXQtMSxyWzExXT1yWzEwXS10LTEsclsxMl09clsxMV0tdCxyWzEzXT1yWzEyXS10LHJbMTRdPXJbMTNdLXQrMSxyWzE1XT1yWzE0XS10KzEsdGhpcy5jaXJjbGVzX1t0XT1yLHJ9fSgpLGZ1bmN0aW9uKCl7dHJhY2tpbmcuTWF0aD17fSx0cmFja2luZy5NYXRoLmRpc3RhbmNlPWZ1bmN0aW9uKHQscixuLGUpe3ZhciBpPW4tdCxhPWUtcjtyZXR1cm4gTWF0aC5zcXJ0KGkqaSthKmEpfSx0cmFja2luZy5NYXRoLmhhbW1pbmdXZWlnaHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQtPXQ+PjEmMTQzMTY1NTc2NSwxNjg0MzAwOSooKHQ9KDg1ODk5MzQ1OSZ0KSsodD4+MiY4NTg5OTM0NTkpKSsodD4+NCkmMjUyNjQ1MTM1KT4+MjR9LHRyYWNraW5nLk1hdGgudW5pZm9ybVJhbmRvbT1mdW5jdGlvbih0LHIpe3JldHVybiB0K01hdGgucmFuZG9tKCkqKHItdCl9LHRyYWNraW5nLk1hdGguaW50ZXJzZWN0UmVjdD1mdW5jdGlvbih0LHIsbixlLGksYSxvLGMpe3JldHVybiEoaT5ufHxvPHR8fGE+ZXx8YzxyKX19KCksZnVuY3Rpb24oKXt0cmFja2luZy5NYXRyaXg9e30sdHJhY2tpbmcuTWF0cml4LmZvckVhY2g9ZnVuY3Rpb24odCxyLG4sZSxpKXtpPWl8fDE7Zm9yKHZhciBhPTA7YTxuO2ErPWkpZm9yKHZhciBvPTA7bzxyO28rPWkpe3ZhciBjPWEqcio0KzQqbztlLmNhbGwodGhpcyx0W2NdLHRbYysxXSx0W2MrMl0sdFtjKzNdLGMsYSxvKX19fSgpLGZ1bmN0aW9uKCl7dHJhY2tpbmcuRVBuUD17fSx0cmFja2luZy5FUG5QLnNvbHZlPWZ1bmN0aW9uKHQscixuKXt9fSgpLGZ1bmN0aW9uKCl7dHJhY2tpbmcuVHJhY2tlcj1mdW5jdGlvbigpe3RyYWNraW5nLlRyYWNrZXIuYmFzZSh0aGlzLFwiY29uc3RydWN0b3JcIil9LHRyYWNraW5nLmluaGVyaXRzKHRyYWNraW5nLlRyYWNrZXIsdHJhY2tpbmcuRXZlbnRFbWl0dGVyKSx0cmFja2luZy5UcmFja2VyLnByb3RvdHlwZS50cmFjaz1mdW5jdGlvbigpe319KCksZnVuY3Rpb24oKXt0cmFja2luZy5UcmFja2VyVGFzaz1mdW5jdGlvbih0KXtpZih0cmFja2luZy5UcmFja2VyVGFzay5iYXNlKHRoaXMsXCJjb25zdHJ1Y3RvclwiKSwhdCl0aHJvdyBuZXcgRXJyb3IoXCJUcmFja2VyIGluc3RhbmNlIG5vdCBzcGVjaWZpZWQuXCIpO3RoaXMuc2V0VHJhY2tlcih0KX0sdHJhY2tpbmcuaW5oZXJpdHModHJhY2tpbmcuVHJhY2tlclRhc2ssdHJhY2tpbmcuRXZlbnRFbWl0dGVyKSx0cmFja2luZy5UcmFja2VyVGFzay5wcm90b3R5cGUudHJhY2tlcl89bnVsbCx0cmFja2luZy5UcmFja2VyVGFzay5wcm90b3R5cGUucnVubmluZ189ITEsdHJhY2tpbmcuVHJhY2tlclRhc2sucHJvdG90eXBlLmdldFRyYWNrZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFja2VyX30sdHJhY2tpbmcuVHJhY2tlclRhc2sucHJvdG90eXBlLmluUnVubmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJ1bm5pbmdffSx0cmFja2luZy5UcmFja2VyVGFzay5wcm90b3R5cGUuc2V0UnVubmluZz1mdW5jdGlvbih0KXt0aGlzLnJ1bm5pbmdfPXR9LHRyYWNraW5nLlRyYWNrZXJUYXNrLnByb3RvdHlwZS5zZXRUcmFja2VyPWZ1bmN0aW9uKHQpe3RoaXMudHJhY2tlcl89dH0sdHJhY2tpbmcuVHJhY2tlclRhc2sucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYoIXRoaXMuaW5SdW5uaW5nKCkpcmV0dXJuIHRoaXMuc2V0UnVubmluZyghMCksdGhpcy5yZWVtaXRUcmFja0V2ZW50Xz1mdW5jdGlvbihyKXt0LmVtaXQoXCJ0cmFja1wiLHIpfSx0aGlzLnRyYWNrZXJfLm9uKFwidHJhY2tcIix0aGlzLnJlZW1pdFRyYWNrRXZlbnRfKSx0aGlzLmVtaXQoXCJydW5cIiksdGhpc30sdHJhY2tpbmcuVHJhY2tlclRhc2sucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtpZih0aGlzLmluUnVubmluZygpKXJldHVybiB0aGlzLnNldFJ1bm5pbmcoITEpLHRoaXMuZW1pdChcInN0b3BcIiksdGhpcy50cmFja2VyXy5yZW1vdmVMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5yZWVtaXRUcmFja0V2ZW50XyksdGhpc319KCksZnVuY3Rpb24oKXt0cmFja2luZy5Db2xvclRyYWNrZXI9ZnVuY3Rpb24odCl7dHJhY2tpbmcuQ29sb3JUcmFja2VyLmJhc2UodGhpcyxcImNvbnN0cnVjdG9yXCIpLFwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1bdF0pLHQmJih0LmZvckVhY2goZnVuY3Rpb24odCl7aWYoIXRyYWNraW5nLkNvbG9yVHJhY2tlci5nZXRDb2xvcih0KSl0aHJvdyBuZXcgRXJyb3IoJ0NvbG9yIG5vdCB2YWxpZCwgdHJ5IGBuZXcgdHJhY2tpbmcuQ29sb3JUcmFja2VyKFwibWFnZW50YVwiKWAuJyl9KSx0aGlzLnNldENvbG9ycyh0KSl9LHRyYWNraW5nLmluaGVyaXRzKHRyYWNraW5nLkNvbG9yVHJhY2tlcix0cmFja2luZy5UcmFja2VyKSx0cmFja2luZy5Db2xvclRyYWNrZXIua25vd25Db2xvcnNfPXt9LHRyYWNraW5nLkNvbG9yVHJhY2tlci5uZWlnaGJvdXJzXz17fSx0cmFja2luZy5Db2xvclRyYWNrZXIucmVnaXN0ZXJDb2xvcj1mdW5jdGlvbih0LHIpe3RyYWNraW5nLkNvbG9yVHJhY2tlci5rbm93bkNvbG9yc19bdF09cn0sdHJhY2tpbmcuQ29sb3JUcmFja2VyLmdldENvbG9yPWZ1bmN0aW9uKHQpe3JldHVybiB0cmFja2luZy5Db2xvclRyYWNrZXIua25vd25Db2xvcnNfW3RdfSx0cmFja2luZy5Db2xvclRyYWNrZXIucHJvdG90eXBlLmNvbG9ycz1bXCJtYWdlbnRhXCJdLHRyYWNraW5nLkNvbG9yVHJhY2tlci5wcm90b3R5cGUubWluRGltZW5zaW9uPTIwLHRyYWNraW5nLkNvbG9yVHJhY2tlci5wcm90b3R5cGUubWF4RGltZW5zaW9uPTEvMCx0cmFja2luZy5Db2xvclRyYWNrZXIucHJvdG90eXBlLm1pbkdyb3VwU2l6ZT0zMCx0cmFja2luZy5Db2xvclRyYWNrZXIucHJvdG90eXBlLmNhbGN1bGF0ZURpbWVuc2lvbnNfPWZ1bmN0aW9uKHQscil7Zm9yKHZhciBuPS0xLGU9LTEsaT0xLzAsYT0xLzAsbz0wO288cjtvKz0yKXt2YXIgYz10W29dLHM9dFtvKzFdO2M8aSYmKGk9YyksYz5uJiYobj1jKSxzPGEmJihhPXMpLHM+ZSYmKGU9cyl9cmV0dXJue3dpZHRoOm4taSxoZWlnaHQ6ZS1hLHg6aSx5OmF9fSx0cmFja2luZy5Db2xvclRyYWNrZXIucHJvdG90eXBlLmdldENvbG9ycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbG9yc30sdHJhY2tpbmcuQ29sb3JUcmFja2VyLnByb3RvdHlwZS5nZXRNaW5EaW1lbnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taW5EaW1lbnNpb259LHRyYWNraW5nLkNvbG9yVHJhY2tlci5wcm90b3R5cGUuZ2V0TWF4RGltZW5zaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4RGltZW5zaW9ufSx0cmFja2luZy5Db2xvclRyYWNrZXIucHJvdG90eXBlLmdldE1pbkdyb3VwU2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbkdyb3VwU2l6ZX0sdHJhY2tpbmcuQ29sb3JUcmFja2VyLnByb3RvdHlwZS5nZXROZWlnaGJvdXJzRm9yV2lkdGhfPWZ1bmN0aW9uKHQpe2lmKHRyYWNraW5nLkNvbG9yVHJhY2tlci5uZWlnaGJvdXJzX1t0XSlyZXR1cm4gdHJhY2tpbmcuQ29sb3JUcmFja2VyLm5laWdoYm91cnNfW3RdO3ZhciByPW5ldyBJbnQzMkFycmF5KDgpO3JldHVybiByWzBdPTQqLXQsclsxXT00Ki10KzQsclsyXT00LHJbM109NCp0KzQscls0XT00KnQscls1XT00KnQtNCxyWzZdPS00LHJbN109NCotdC00LHRyYWNraW5nLkNvbG9yVHJhY2tlci5uZWlnaGJvdXJzX1t0XT1yLHJ9LHRyYWNraW5nLkNvbG9yVHJhY2tlci5wcm90b3R5cGUubWVyZ2VSZWN0YW5nbGVzXz1mdW5jdGlvbih0KXtmb3IodmFyIHIsbj1bXSxlPXRoaXMuZ2V0TWluRGltZW5zaW9uKCksaT10aGlzLmdldE1heERpbWVuc2lvbigpLGE9MDthPHQubGVuZ3RoO2ErKyl7dmFyIG89dFthXTtyPSEwO2Zvcih2YXIgYz1hKzE7Yzx0Lmxlbmd0aDtjKyspe3ZhciBzPXRbY107aWYodHJhY2tpbmcuTWF0aC5pbnRlcnNlY3RSZWN0KG8ueCxvLnksby54K28ud2lkdGgsby55K28uaGVpZ2h0LHMueCxzLnkscy54K3Mud2lkdGgscy55K3MuaGVpZ2h0KSl7cj0hMTt2YXIgZz1NYXRoLm1pbihvLngscy54KSxoPU1hdGgubWluKG8ueSxzLnkpLGs9TWF0aC5tYXgoby54K28ud2lkdGgscy54K3Mud2lkdGgpLGY9TWF0aC5tYXgoby55K28uaGVpZ2h0LHMueStzLmhlaWdodCk7cy5oZWlnaHQ9Zi1oLHMud2lkdGg9ay1nLHMueD1nLHMueT1oO2JyZWFrfX1yJiZvLndpZHRoPj1lJiZvLmhlaWdodD49ZSYmby53aWR0aDw9aSYmby5oZWlnaHQ8PWkmJm4ucHVzaChvKX1yZXR1cm4gbn0sdHJhY2tpbmcuQ29sb3JUcmFja2VyLnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24odCl7dGhpcy5jb2xvcnM9dH0sdHJhY2tpbmcuQ29sb3JUcmFja2VyLnByb3RvdHlwZS5zZXRNaW5EaW1lbnNpb249ZnVuY3Rpb24odCl7dGhpcy5taW5EaW1lbnNpb249dH0sdHJhY2tpbmcuQ29sb3JUcmFja2VyLnByb3RvdHlwZS5zZXRNYXhEaW1lbnNpb249ZnVuY3Rpb24odCl7dGhpcy5tYXhEaW1lbnNpb249dH0sdHJhY2tpbmcuQ29sb3JUcmFja2VyLnByb3RvdHlwZS5zZXRNaW5Hcm91cFNpemU9ZnVuY3Rpb24odCl7dGhpcy5taW5Hcm91cFNpemU9dH0sdHJhY2tpbmcuQ29sb3JUcmFja2VyLnByb3RvdHlwZS50cmFjaz1mdW5jdGlvbih0LHIsbil7dmFyIGU9dGhpcyxpPXRoaXMuZ2V0Q29sb3JzKCk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKCdDb2xvcnMgbm90IHNwZWNpZmllZCwgdHJ5IGBuZXcgdHJhY2tpbmcuQ29sb3JUcmFja2VyKFwibWFnZW50YVwiKWAuJyk7dmFyIGE9W107aS5mb3JFYWNoKGZ1bmN0aW9uKGkpe2E9YS5jb25jYXQoZS50cmFja0NvbG9yXyh0LHIsbixpKSl9KSx0aGlzLmVtaXQoXCJ0cmFja1wiLHtkYXRhOmF9KX0sdHJhY2tpbmcuQ29sb3JUcmFja2VyLnByb3RvdHlwZS50cmFja0NvbG9yXz1mdW5jdGlvbihuLGUsaSxhKXt2YXIgbyxjLHMsZyxoLGs9dHJhY2tpbmcuQ29sb3JUcmFja2VyLmtub3duQ29sb3JzX1thXSxmPW5ldyBJbnQzMkFycmF5KG4ubGVuZ3RoPj4yKSx1PW5ldyBJbnQ4QXJyYXkobi5sZW5ndGgpLGw9dGhpcy5nZXRNaW5Hcm91cFNpemUoKSxwPXRoaXMuZ2V0TmVpZ2hib3Vyc0ZvcldpZHRoXyhlKSx2PW5ldyBJbnQzMkFycmF5KG4ubGVuZ3RoKSxtPVtdLHk9LTQ7aWYoIWspcmV0dXJuIG07Zm9yKHZhciBkPTA7ZDxpO2QrKylmb3IodmFyIHc9MDt3PGU7dysrKWlmKHkrPTQsIXVbeV0pe2ZvcihvPTAsaD0tMSx2WysraF09eSx2WysraF09ZCx2WysraF09dyx1W3ldPTE7aD49MDspaWYocz12W2gtLV0sYz12W2gtLV0sZz12W2gtLV0sayhuW2ddLG5bZysxXSxuW2crMl0sbltnKzNdLGcsYyxzKSl7ZltvKytdPXMsZltvKytdPWM7Zm9yKHZhciBUPTA7VDxwLmxlbmd0aDtUKyspe3ZhciBDPWcrcFtUXSxfPWMrdFtUXSxFPXMrcltUXTshdVtDXSYmXz49MCYmXzxpJiZFPj0wJiZFPGUmJih2WysraF09Qyx2WysraF09Xyx2WysraF09RSx1W0NdPTEpfX1pZihvPj1sKXt2YXIgTT10aGlzLmNhbGN1bGF0ZURpbWVuc2lvbnNfKGYsbyk7TSYmKE0uY29sb3I9YSxtLnB1c2goTSkpfX1yZXR1cm4gdGhpcy5tZXJnZVJlY3RhbmdsZXNfKG0pfSx0cmFja2luZy5Db2xvclRyYWNrZXIucmVnaXN0ZXJDb2xvcihcImN5YW5cIixmdW5jdGlvbih0LHIsbil7dmFyIGU9dC0wLGk9ci0yNTUsYT1uLTI1NTtyZXR1cm4gci10Pj01MCYmbi10Pj03MHx8ZSplK2kqaSthKmE8NjQwMH0pLHRyYWNraW5nLkNvbG9yVHJhY2tlci5yZWdpc3RlckNvbG9yKFwibWFnZW50YVwiLGZ1bmN0aW9uKHQscixuKXt2YXIgZT10LTI1NSxpPXItMCxhPW4tMjU1O3JldHVybiB0LXI+PTUwJiZuLXI+PTUwfHxlKmUraSppK2EqYTwxOTYwMH0pLHRyYWNraW5nLkNvbG9yVHJhY2tlci5yZWdpc3RlckNvbG9yKFwieWVsbG93XCIsZnVuY3Rpb24odCxyLG4pe3ZhciBlPXQtMjU1LGk9ci0yNTUsYT1uLTA7cmV0dXJuIHQtbj49NTAmJnItbj49NTB8fGUqZStpKmkrYSphPDFlNH0pO3ZhciB0PW5ldyBJbnQzMkFycmF5KFstMSwtMSwwLDEsMSwxLDAsLTFdKSxyPW5ldyBJbnQzMkFycmF5KFswLDEsMSwxLDAsLTEsLTEsLTFdKX0oKSxmdW5jdGlvbigpe3RyYWNraW5nLk9iamVjdFRyYWNrZXI9ZnVuY3Rpb24odCl7dHJhY2tpbmcuT2JqZWN0VHJhY2tlci5iYXNlKHRoaXMsXCJjb25zdHJ1Y3RvclwiKSx0JiYoQXJyYXkuaXNBcnJheSh0KXx8KHQ9W3RdKSxBcnJheS5pc0FycmF5KHQpJiZ0LmZvckVhY2goZnVuY3Rpb24ocixuKXtpZihcInN0cmluZ1wiPT10eXBlb2YgciYmKHRbbl09dHJhY2tpbmcuVmlvbGFKb25lcy5jbGFzc2lmaWVyc1tyXSksIXRbbl0pdGhyb3cgbmV3IEVycm9yKCdPYmplY3QgY2xhc3NpZmllciBub3QgdmFsaWQsIHRyeSBgbmV3IHRyYWNraW5nLk9iamVjdFRyYWNrZXIoXCJmYWNlXCIpYC4nKX0pKSx0aGlzLnNldENsYXNzaWZpZXJzKHQpfSx0cmFja2luZy5pbmhlcml0cyh0cmFja2luZy5PYmplY3RUcmFja2VyLHRyYWNraW5nLlRyYWNrZXIpLHRyYWNraW5nLk9iamVjdFRyYWNrZXIucHJvdG90eXBlLmVkZ2VzRGVuc2l0eT0uMix0cmFja2luZy5PYmplY3RUcmFja2VyLnByb3RvdHlwZS5pbml0aWFsU2NhbGU9MSx0cmFja2luZy5PYmplY3RUcmFja2VyLnByb3RvdHlwZS5zY2FsZUZhY3Rvcj0xLjI1LHRyYWNraW5nLk9iamVjdFRyYWNrZXIucHJvdG90eXBlLnN0ZXBTaXplPTEuNSx0cmFja2luZy5PYmplY3RUcmFja2VyLnByb3RvdHlwZS5nZXRDbGFzc2lmaWVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNsYXNzaWZpZXJzfSx0cmFja2luZy5PYmplY3RUcmFja2VyLnByb3RvdHlwZS5nZXRFZGdlc0RlbnNpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlc0RlbnNpdHl9LHRyYWNraW5nLk9iamVjdFRyYWNrZXIucHJvdG90eXBlLmdldEluaXRpYWxTY2FsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXRpYWxTY2FsZX0sdHJhY2tpbmcuT2JqZWN0VHJhY2tlci5wcm90b3R5cGUuZ2V0U2NhbGVGYWN0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY2FsZUZhY3Rvcn0sdHJhY2tpbmcuT2JqZWN0VHJhY2tlci5wcm90b3R5cGUuZ2V0U3RlcFNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGVwU2l6ZX0sdHJhY2tpbmcuT2JqZWN0VHJhY2tlci5wcm90b3R5cGUudHJhY2s9ZnVuY3Rpb24odCxyLG4pe3ZhciBlPXRoaXMsaT10aGlzLmdldENsYXNzaWZpZXJzKCk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKCdPYmplY3QgY2xhc3NpZmllciBub3Qgc3BlY2lmaWVkLCB0cnkgYG5ldyB0cmFja2luZy5PYmplY3RUcmFja2VyKFwiZmFjZVwiKWAuJyk7dmFyIGE9W107aS5mb3JFYWNoKGZ1bmN0aW9uKGkpe2E9YS5jb25jYXQodHJhY2tpbmcuVmlvbGFKb25lcy5kZXRlY3QodCxyLG4sZS5nZXRJbml0aWFsU2NhbGUoKSxlLmdldFNjYWxlRmFjdG9yKCksZS5nZXRTdGVwU2l6ZSgpLGUuZ2V0RWRnZXNEZW5zaXR5KCksaSkpfSksdGhpcy5lbWl0KFwidHJhY2tcIix7ZGF0YTphfSl9LHRyYWNraW5nLk9iamVjdFRyYWNrZXIucHJvdG90eXBlLnNldENsYXNzaWZpZXJzPWZ1bmN0aW9uKHQpe3RoaXMuY2xhc3NpZmllcnM9dH0sdHJhY2tpbmcuT2JqZWN0VHJhY2tlci5wcm90b3R5cGUuc2V0RWRnZXNEZW5zaXR5PWZ1bmN0aW9uKHQpe3RoaXMuZWRnZXNEZW5zaXR5PXR9LHRyYWNraW5nLk9iamVjdFRyYWNrZXIucHJvdG90eXBlLnNldEluaXRpYWxTY2FsZT1mdW5jdGlvbih0KXt0aGlzLmluaXRpYWxTY2FsZT10fSx0cmFja2luZy5PYmplY3RUcmFja2VyLnByb3RvdHlwZS5zZXRTY2FsZUZhY3Rvcj1mdW5jdGlvbih0KXt0aGlzLnNjYWxlRmFjdG9yPXR9LHRyYWNraW5nLk9iamVjdFRyYWNrZXIucHJvdG90eXBlLnNldFN0ZXBTaXplPWZ1bmN0aW9uKHQpe3RoaXMuc3RlcFNpemU9dH19KCk7Il19
